function Qk(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Ir=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function JP(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function eO(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var QP={exports:{}},Zg={},eR={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jd=Symbol.for("react.element"),tO=Symbol.for("react.portal"),nO=Symbol.for("react.fragment"),iO=Symbol.for("react.strict_mode"),rO=Symbol.for("react.profiler"),sO=Symbol.for("react.provider"),oO=Symbol.for("react.context"),aO=Symbol.for("react.forward_ref"),lO=Symbol.for("react.suspense"),cO=Symbol.for("react.memo"),uO=Symbol.for("react.lazy"),aT=Symbol.iterator;function hO(n){return n===null||typeof n!="object"?null:(n=aT&&n[aT]||n["@@iterator"],typeof n=="function"?n:null)}var tR={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nR=Object.assign,iR={};function Mu(n,e,t){this.props=n,this.context=e,this.refs=iR,this.updater=t||tR}Mu.prototype.isReactComponent={};Mu.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Mu.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function rR(){}rR.prototype=Mu.prototype;function ow(n,e,t){this.props=n,this.context=e,this.refs=iR,this.updater=t||tR}var aw=ow.prototype=new rR;aw.constructor=ow;nR(aw,Mu.prototype);aw.isPureReactComponent=!0;var lT=Array.isArray,sR=Object.prototype.hasOwnProperty,lw={current:null},oR={key:!0,ref:!0,__self:!0,__source:!0};function aR(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)sR.call(e,i)&&!oR.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Jd,type:n,key:s,ref:o,props:r,_owner:lw.current}}function dO(n,e){return{$$typeof:Jd,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function cw(n){return typeof n=="object"&&n!==null&&n.$$typeof===Jd}function fO(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var cT=/\/+/g;function uy(n,e){return typeof n=="object"&&n!==null&&n.key!=null?fO(""+n.key):e.toString(36)}function Fm(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Jd:case tO:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+uy(o,0):i,lT(r)?(t="",n!=null&&(t=n.replace(cT,"$&/")+"/"),Fm(r,e,t,"",function(c){return c})):r!=null&&(cw(r)&&(r=dO(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(cT,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",lT(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+uy(s,a);o+=Fm(s,e,t,l,r)}else if(l=hO(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+uy(s,a++),o+=Fm(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function _p(n,e,t){if(n==null)return n;var i=[],r=0;return Fm(n,i,"","",function(s){return e.call(t,s,r++)}),i}function pO(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ii={current:null},zm={transition:null},mO={ReactCurrentDispatcher:Ii,ReactCurrentBatchConfig:zm,ReactCurrentOwner:lw};function lR(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:_p,forEach:function(n,e,t){_p(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return _p(n,function(){e++}),e},toArray:function(n){return _p(n,function(e){return e})||[]},only:function(n){if(!cw(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};Pt.Component=Mu;Pt.Fragment=nO;Pt.Profiler=rO;Pt.PureComponent=ow;Pt.StrictMode=iO;Pt.Suspense=lO;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mO;Pt.act=lR;Pt.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=nR({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=lw.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)sR.call(e,l)&&!oR.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Jd,type:n.type,key:r,ref:s,props:i,_owner:o}};Pt.createContext=function(n){return n={$$typeof:oO,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:sO,_context:n},n.Consumer=n};Pt.createElement=aR;Pt.createFactory=function(n){var e=aR.bind(null,n);return e.type=n,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(n){return{$$typeof:aO,render:n}};Pt.isValidElement=cw;Pt.lazy=function(n){return{$$typeof:uO,_payload:{_status:-1,_result:n},_init:pO}};Pt.memo=function(n,e){return{$$typeof:cO,type:n,compare:e===void 0?null:e}};Pt.startTransition=function(n){var e=zm.transition;zm.transition={};try{n()}finally{zm.transition=e}};Pt.unstable_act=lR;Pt.useCallback=function(n,e){return Ii.current.useCallback(n,e)};Pt.useContext=function(n){return Ii.current.useContext(n)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(n){return Ii.current.useDeferredValue(n)};Pt.useEffect=function(n,e){return Ii.current.useEffect(n,e)};Pt.useId=function(){return Ii.current.useId()};Pt.useImperativeHandle=function(n,e,t){return Ii.current.useImperativeHandle(n,e,t)};Pt.useInsertionEffect=function(n,e){return Ii.current.useInsertionEffect(n,e)};Pt.useLayoutEffect=function(n,e){return Ii.current.useLayoutEffect(n,e)};Pt.useMemo=function(n,e){return Ii.current.useMemo(n,e)};Pt.useReducer=function(n,e,t){return Ii.current.useReducer(n,e,t)};Pt.useRef=function(n){return Ii.current.useRef(n)};Pt.useState=function(n){return Ii.current.useState(n)};Pt.useSyncExternalStore=function(n,e,t){return Ii.current.useSyncExternalStore(n,e,t)};Pt.useTransition=function(){return Ii.current.useTransition()};Pt.version="18.3.1";eR.exports=Pt;var G=eR.exports;const gO=JP(G),vO=Qk({__proto__:null,default:gO},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yO=G,_O=Symbol.for("react.element"),xO=Symbol.for("react.fragment"),SO=Object.prototype.hasOwnProperty,wO=yO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MO={key:!0,ref:!0,__self:!0,__source:!0};function cR(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)SO.call(e,i)&&!MO.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:_O,type:n,key:s,ref:o,props:r,_owner:wO.current}}Zg.Fragment=xO;Zg.jsx=cR;Zg.jsxs=cR;QP.exports=Zg;var k=QP.exports,uR={exports:{}},dr={},hR={exports:{}},dR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,B){var H=N.length;N.push(B);e:for(;0<H;){var q=H-1>>>1,le=N[q];if(0<r(le,B))N[q]=B,N[H]=le,H=q;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var B=N[0],H=N.pop();if(H!==B){N[0]=H;e:for(var q=0,le=N.length,be=le>>>1;q<be;){var te=2*(q+1)-1,pe=N[te],we=te+1,Re=N[we];if(0>r(pe,H))we<le&&0>r(Re,pe)?(N[q]=Re,N[we]=H,q=we):(N[q]=pe,N[te]=H,q=te);else if(we<le&&0>r(Re,H))N[q]=Re,N[we]=H,q=we;else break e}}return B}function r(N,B){var H=N.sortIndex-B.sortIndex;return H!==0?H:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,y=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var B=t(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=N)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(c)}}function T(N){if(M=!1,x(N),!y)if(t(l)!==null)y=!0,J(C);else{var B=t(c);B!==null&&ae(T,B.startTime-N)}}function C(N,B){y=!1,M&&(M=!1,g(D),D=-1),m=!0;var H=p;try{for(x(B),f=t(l);f!==null&&(!(f.expirationTime>B)||N&&!L());){var q=f.callback;if(typeof q=="function"){f.callback=null,p=f.priorityLevel;var le=q(f.expirationTime<=B);B=n.unstable_now(),typeof le=="function"?f.callback=le:f===t(l)&&i(l),x(B)}else i(l);f=t(l)}if(f!==null)var be=!0;else{var te=t(c);te!==null&&ae(T,te.startTime-B),be=!1}return be}finally{f=null,p=H,m=!1}}var P=!1,R=null,D=-1,X=5,b=-1;function L(){return!(n.unstable_now()-b<X)}function Z(){if(R!==null){var N=n.unstable_now();b=N;var B=!0;try{B=R(!0,N)}finally{B?re():(P=!1,R=null)}}else P=!1}var re;if(typeof w=="function")re=function(){w(Z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ne=W.port2;W.port1.onmessage=Z,re=function(){ne.postMessage(null)}}else re=function(){_(Z,0)};function J(N){R=N,P||(P=!0,re())}function ae(N,B){D=_(function(){N(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,J(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var H=p;p=B;try{return N()}finally{p=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=p;p=N;try{return B()}finally{p=H}},n.unstable_scheduleCallback=function(N,B,H){var q=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,N){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=H+le,N={id:d++,callback:B,priorityLevel:N,startTime:H,expirationTime:le,sortIndex:-1},H>q?(N.sortIndex=H,e(c,N),t(l)===null&&N===t(c)&&(M?(g(D),D=-1):M=!0,ae(T,H-q))):(N.sortIndex=le,e(l,N),y||m||(y=!0,J(C))),N},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(N){var B=p;return function(){var H=p;p=B;try{return N.apply(this,arguments)}finally{p=H}}}})(dR);hR.exports=dR;var EO=hR.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO=G,ur=EO;function Ee(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fR=new Set,rd={};function bl(n,e){au(n,e),au(n+"Capture",e)}function au(n,e){for(rd[n]=e,n=0;n<e.length;n++)fR.add(e[n])}var Qs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$_=Object.prototype.hasOwnProperty,bO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uT={},hT={};function AO(n){return $_.call(hT,n)?!0:$_.call(uT,n)?!1:bO.test(n)?hT[n]=!0:(uT[n]=!0,!1)}function CO(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function PO(n,e,t,i){if(e===null||typeof e>"u"||CO(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ni(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ni={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ni[n]=new Ni(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ni[e]=new Ni(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ni[n]=new Ni(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ni[n]=new Ni(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ni[n]=new Ni(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ni[n]=new Ni(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ni[n]=new Ni(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ni[n]=new Ni(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ni[n]=new Ni(n,5,!1,n.toLowerCase(),null,!1,!1)});var uw=/[\-:]([a-z])/g;function hw(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(uw,hw);ni[e]=new Ni(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(uw,hw);ni[e]=new Ni(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(uw,hw);ni[e]=new Ni(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ni[n]=new Ni(n,1,!1,n.toLowerCase(),null,!1,!1)});ni.xlinkHref=new Ni("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ni[n]=new Ni(n,1,!1,n.toLowerCase(),null,!0,!0)});function dw(n,e,t,i){var r=ni.hasOwnProperty(e)?ni[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PO(e,t,r,i)&&(t=null),i||r===null?AO(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var lo=TO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xp=Symbol.for("react.element"),Rc=Symbol.for("react.portal"),Lc=Symbol.for("react.fragment"),fw=Symbol.for("react.strict_mode"),q_=Symbol.for("react.profiler"),pR=Symbol.for("react.provider"),mR=Symbol.for("react.context"),pw=Symbol.for("react.forward_ref"),Y_=Symbol.for("react.suspense"),K_=Symbol.for("react.suspense_list"),mw=Symbol.for("react.memo"),No=Symbol.for("react.lazy"),gR=Symbol.for("react.offscreen"),dT=Symbol.iterator;function rh(n){return n===null||typeof n!="object"?null:(n=dT&&n[dT]||n["@@iterator"],typeof n=="function"?n:null)}var un=Object.assign,hy;function Ch(n){if(hy===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);hy=e&&e[1]||""}return`
`+hy+n}var dy=!1;function fy(n,e){if(!n||dy)return"";dy=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{dy=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ch(n):""}function RO(n){switch(n.tag){case 5:return Ch(n.type);case 16:return Ch("Lazy");case 13:return Ch("Suspense");case 19:return Ch("SuspenseList");case 0:case 2:case 15:return n=fy(n.type,!1),n;case 11:return n=fy(n.type.render,!1),n;case 1:return n=fy(n.type,!0),n;default:return""}}function Z_(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Lc:return"Fragment";case Rc:return"Portal";case q_:return"Profiler";case fw:return"StrictMode";case Y_:return"Suspense";case K_:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case mR:return(n.displayName||"Context")+".Consumer";case pR:return(n._context.displayName||"Context")+".Provider";case pw:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case mw:return e=n.displayName||null,e!==null?e:Z_(n.type)||"Memo";case No:e=n._payload,n=n._init;try{return Z_(n(e))}catch{}}return null}function LO(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z_(e);case 8:return e===fw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ia(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function vR(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function IO(n){var e=vR(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Sp(n){n._valueTracker||(n._valueTracker=IO(n))}function yR(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=vR(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function lg(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function J_(n,e){var t=e.checked;return un({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function fT(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ia(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _R(n,e){e=e.checked,e!=null&&dw(n,"checked",e,!1)}function Q_(n,e){_R(n,e);var t=ia(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?ex(n,e.type,t):e.hasOwnProperty("defaultValue")&&ex(n,e.type,ia(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function pT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function ex(n,e,t){(e!=="number"||lg(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ph=Array.isArray;function Qc(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ia(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function tx(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ee(91));return un({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function mT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ee(92));if(Ph(t)){if(1<t.length)throw Error(Ee(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ia(t)}}function xR(n,e){var t=ia(e.value),i=ia(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function gT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function SR(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nx(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?SR(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var wp,wR=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(wp=wp||document.createElement("div"),wp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=wp.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function sd(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Uh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NO=["Webkit","ms","Moz","O"];Object.keys(Uh).forEach(function(n){NO.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Uh[e]=Uh[n]})});function MR(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Uh.hasOwnProperty(n)&&Uh[n]?(""+e).trim():e+"px"}function ER(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=MR(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var DO=un({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ix(n,e){if(e){if(DO[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ee(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ee(62))}}function rx(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sx=null;function gw(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ox=null,eu=null,tu=null;function vT(n){if(n=tf(n)){if(typeof ox!="function")throw Error(Ee(280));var e=n.stateNode;e&&(e=n0(e),ox(n.stateNode,n.type,e))}}function TR(n){eu?tu?tu.push(n):tu=[n]:eu=n}function bR(){if(eu){var n=eu,e=tu;if(tu=eu=null,vT(n),e)for(n=0;n<e.length;n++)vT(e[n])}}function AR(n,e){return n(e)}function CR(){}var py=!1;function PR(n,e,t){if(py)return n(e,t);py=!0;try{return AR(n,e,t)}finally{py=!1,(eu!==null||tu!==null)&&(CR(),bR())}}function od(n,e){var t=n.stateNode;if(t===null)return null;var i=n0(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Ee(231,e,typeof t));return t}var ax=!1;if(Qs)try{var sh={};Object.defineProperty(sh,"passive",{get:function(){ax=!0}}),window.addEventListener("test",sh,sh),window.removeEventListener("test",sh,sh)}catch{ax=!1}function kO(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(d){this.onError(d)}}var Fh=!1,cg=null,ug=!1,lx=null,OO={onError:function(n){Fh=!0,cg=n}};function UO(n,e,t,i,r,s,o,a,l){Fh=!1,cg=null,kO.apply(OO,arguments)}function FO(n,e,t,i,r,s,o,a,l){if(UO.apply(this,arguments),Fh){if(Fh){var c=cg;Fh=!1,cg=null}else throw Error(Ee(198));ug||(ug=!0,lx=c)}}function Al(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function RR(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function yT(n){if(Al(n)!==n)throw Error(Ee(188))}function zO(n){var e=n.alternate;if(!e){if(e=Al(n),e===null)throw Error(Ee(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return yT(r),n;if(s===i)return yT(r),e;s=s.sibling}throw Error(Ee(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Ee(189))}}if(t.alternate!==i)throw Error(Ee(190))}if(t.tag!==3)throw Error(Ee(188));return t.stateNode.current===t?n:e}function LR(n){return n=zO(n),n!==null?IR(n):null}function IR(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=IR(n);if(e!==null)return e;n=n.sibling}return null}var NR=ur.unstable_scheduleCallback,_T=ur.unstable_cancelCallback,BO=ur.unstable_shouldYield,VO=ur.unstable_requestPaint,En=ur.unstable_now,HO=ur.unstable_getCurrentPriorityLevel,vw=ur.unstable_ImmediatePriority,DR=ur.unstable_UserBlockingPriority,hg=ur.unstable_NormalPriority,GO=ur.unstable_LowPriority,kR=ur.unstable_IdlePriority,Jg=null,ys=null;function jO(n){if(ys&&typeof ys.onCommitFiberRoot=="function")try{ys.onCommitFiberRoot(Jg,n,void 0,(n.current.flags&128)===128)}catch{}}var Kr=Math.clz32?Math.clz32:$O,WO=Math.log,XO=Math.LN2;function $O(n){return n>>>=0,n===0?32:31-(WO(n)/XO|0)|0}var Mp=64,Ep=4194304;function Rh(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function dg(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Rh(a):(s&=o,s!==0&&(i=Rh(s)))}else o=t&~r,o!==0?i=Rh(o):s!==0&&(i=Rh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Kr(e),r=1<<t,i|=n[t],e&=~r;return i}function qO(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YO(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Kr(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=qO(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function cx(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function OR(){var n=Mp;return Mp<<=1,!(Mp&4194240)&&(Mp=64),n}function my(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Qd(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Kr(e),n[e]=t}function KO(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Kr(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function yw(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Kr(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Ht=0;function UR(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var FR,_w,zR,BR,VR,ux=!1,Tp=[],jo=null,Wo=null,Xo=null,ad=new Map,ld=new Map,Oo=[],ZO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xT(n,e){switch(n){case"focusin":case"focusout":jo=null;break;case"dragenter":case"dragleave":Wo=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":ad.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ld.delete(e.pointerId)}}function oh(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=tf(e),e!==null&&_w(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function JO(n,e,t,i,r){switch(e){case"focusin":return jo=oh(jo,n,e,t,i,r),!0;case"dragenter":return Wo=oh(Wo,n,e,t,i,r),!0;case"mouseover":return Xo=oh(Xo,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return ad.set(s,oh(ad.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,ld.set(s,oh(ld.get(s)||null,n,e,t,i,r)),!0}return!1}function HR(n){var e=Ja(n.target);if(e!==null){var t=Al(e);if(t!==null){if(e=t.tag,e===13){if(e=RR(t),e!==null){n.blockedOn=e,VR(n.priority,function(){zR(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Bm(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=hx(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);sx=i,t.target.dispatchEvent(i),sx=null}else return e=tf(t),e!==null&&_w(e),n.blockedOn=t,!1;e.shift()}return!0}function ST(n,e,t){Bm(n)&&t.delete(e)}function QO(){ux=!1,jo!==null&&Bm(jo)&&(jo=null),Wo!==null&&Bm(Wo)&&(Wo=null),Xo!==null&&Bm(Xo)&&(Xo=null),ad.forEach(ST),ld.forEach(ST)}function ah(n,e){n.blockedOn===e&&(n.blockedOn=null,ux||(ux=!0,ur.unstable_scheduleCallback(ur.unstable_NormalPriority,QO)))}function cd(n){function e(r){return ah(r,n)}if(0<Tp.length){ah(Tp[0],n);for(var t=1;t<Tp.length;t++){var i=Tp[t];i.blockedOn===n&&(i.blockedOn=null)}}for(jo!==null&&ah(jo,n),Wo!==null&&ah(Wo,n),Xo!==null&&ah(Xo,n),ad.forEach(e),ld.forEach(e),t=0;t<Oo.length;t++)i=Oo[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Oo.length&&(t=Oo[0],t.blockedOn===null);)HR(t),t.blockedOn===null&&Oo.shift()}var nu=lo.ReactCurrentBatchConfig,fg=!0;function eU(n,e,t,i){var r=Ht,s=nu.transition;nu.transition=null;try{Ht=1,xw(n,e,t,i)}finally{Ht=r,nu.transition=s}}function tU(n,e,t,i){var r=Ht,s=nu.transition;nu.transition=null;try{Ht=4,xw(n,e,t,i)}finally{Ht=r,nu.transition=s}}function xw(n,e,t,i){if(fg){var r=hx(n,e,t,i);if(r===null)Ty(n,e,i,pg,t),xT(n,i);else if(JO(r,n,e,t,i))i.stopPropagation();else if(xT(n,i),e&4&&-1<ZO.indexOf(n)){for(;r!==null;){var s=tf(r);if(s!==null&&FR(s),s=hx(n,e,t,i),s===null&&Ty(n,e,i,pg,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else Ty(n,e,i,null,t)}}var pg=null;function hx(n,e,t,i){if(pg=null,n=gw(i),n=Ja(n),n!==null)if(e=Al(n),e===null)n=null;else if(t=e.tag,t===13){if(n=RR(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return pg=n,null}function GR(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HO()){case vw:return 1;case DR:return 4;case hg:case GO:return 16;case kR:return 536870912;default:return 16}default:return 16}}var Vo=null,Sw=null,Vm=null;function jR(){if(Vm)return Vm;var n,e=Sw,t=e.length,i,r="value"in Vo?Vo.value:Vo.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Vm=r.slice(n,1<i?1-i:void 0)}function Hm(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function bp(){return!0}function wT(){return!1}function fr(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?bp:wT,this.isPropagationStopped=wT,this}return un(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=bp)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=bp)},persist:function(){},isPersistent:bp}),e}var Eu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ww=fr(Eu),ef=un({},Eu,{view:0,detail:0}),nU=fr(ef),gy,vy,lh,Qg=un({},ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mw,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==lh&&(lh&&n.type==="mousemove"?(gy=n.screenX-lh.screenX,vy=n.screenY-lh.screenY):vy=gy=0,lh=n),gy)},movementY:function(n){return"movementY"in n?n.movementY:vy}}),MT=fr(Qg),iU=un({},Qg,{dataTransfer:0}),rU=fr(iU),sU=un({},ef,{relatedTarget:0}),yy=fr(sU),oU=un({},Eu,{animationName:0,elapsedTime:0,pseudoElement:0}),aU=fr(oU),lU=un({},Eu,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),cU=fr(lU),uU=un({},Eu,{data:0}),ET=fr(uU),hU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pU(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=fU[n])?!!e[n]:!1}function Mw(){return pU}var mU=un({},ef,{key:function(n){if(n.key){var e=hU[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Hm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?dU[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mw,charCode:function(n){return n.type==="keypress"?Hm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Hm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),gU=fr(mU),vU=un({},Qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TT=fr(vU),yU=un({},ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mw}),_U=fr(yU),xU=un({},Eu,{propertyName:0,elapsedTime:0,pseudoElement:0}),SU=fr(xU),wU=un({},Qg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),MU=fr(wU),EU=[9,13,27,32],Ew=Qs&&"CompositionEvent"in window,zh=null;Qs&&"documentMode"in document&&(zh=document.documentMode);var TU=Qs&&"TextEvent"in window&&!zh,WR=Qs&&(!Ew||zh&&8<zh&&11>=zh),bT=" ",AT=!1;function XR(n,e){switch(n){case"keyup":return EU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $R(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ic=!1;function bU(n,e){switch(n){case"compositionend":return $R(e);case"keypress":return e.which!==32?null:(AT=!0,bT);case"textInput":return n=e.data,n===bT&&AT?null:n;default:return null}}function AU(n,e){if(Ic)return n==="compositionend"||!Ew&&XR(n,e)?(n=jR(),Vm=Sw=Vo=null,Ic=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WR&&e.locale!=="ko"?null:e.data;default:return null}}var CU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!CU[n.type]:e==="textarea"}function qR(n,e,t,i){TR(i),e=mg(e,"onChange"),0<e.length&&(t=new ww("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Bh=null,ud=null;function PU(n){s2(n,0)}function e0(n){var e=kc(n);if(yR(e))return n}function RU(n,e){if(n==="change")return e}var YR=!1;if(Qs){var _y;if(Qs){var xy="oninput"in document;if(!xy){var PT=document.createElement("div");PT.setAttribute("oninput","return;"),xy=typeof PT.oninput=="function"}_y=xy}else _y=!1;YR=_y&&(!document.documentMode||9<document.documentMode)}function RT(){Bh&&(Bh.detachEvent("onpropertychange",KR),ud=Bh=null)}function KR(n){if(n.propertyName==="value"&&e0(ud)){var e=[];qR(e,ud,n,gw(n)),PR(PU,e)}}function LU(n,e,t){n==="focusin"?(RT(),Bh=e,ud=t,Bh.attachEvent("onpropertychange",KR)):n==="focusout"&&RT()}function IU(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return e0(ud)}function NU(n,e){if(n==="click")return e0(e)}function DU(n,e){if(n==="input"||n==="change")return e0(e)}function kU(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Jr=typeof Object.is=="function"?Object.is:kU;function hd(n,e){if(Jr(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!$_.call(e,r)||!Jr(n[r],e[r]))return!1}return!0}function LT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function IT(n,e){var t=LT(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=LT(t)}}function ZR(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?ZR(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function JR(){for(var n=window,e=lg();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=lg(n.document)}return e}function Tw(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function OU(n){var e=JR(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&ZR(t.ownerDocument.documentElement,t)){if(i!==null&&Tw(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=IT(t,s);var o=IT(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var UU=Qs&&"documentMode"in document&&11>=document.documentMode,Nc=null,dx=null,Vh=null,fx=!1;function NT(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;fx||Nc==null||Nc!==lg(i)||(i=Nc,"selectionStart"in i&&Tw(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Vh&&hd(Vh,i)||(Vh=i,i=mg(dx,"onSelect"),0<i.length&&(e=new ww("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Nc)))}function Ap(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Dc={animationend:Ap("Animation","AnimationEnd"),animationiteration:Ap("Animation","AnimationIteration"),animationstart:Ap("Animation","AnimationStart"),transitionend:Ap("Transition","TransitionEnd")},Sy={},QR={};Qs&&(QR=document.createElement("div").style,"AnimationEvent"in window||(delete Dc.animationend.animation,delete Dc.animationiteration.animation,delete Dc.animationstart.animation),"TransitionEvent"in window||delete Dc.transitionend.transition);function t0(n){if(Sy[n])return Sy[n];if(!Dc[n])return n;var e=Dc[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in QR)return Sy[n]=e[t];return n}var e2=t0("animationend"),t2=t0("animationiteration"),n2=t0("animationstart"),i2=t0("transitionend"),r2=new Map,DT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ca(n,e){r2.set(n,e),bl(e,[n])}for(var wy=0;wy<DT.length;wy++){var My=DT[wy],FU=My.toLowerCase(),zU=My[0].toUpperCase()+My.slice(1);ca(FU,"on"+zU)}ca(e2,"onAnimationEnd");ca(t2,"onAnimationIteration");ca(n2,"onAnimationStart");ca("dblclick","onDoubleClick");ca("focusin","onFocus");ca("focusout","onBlur");ca(i2,"onTransitionEnd");au("onMouseEnter",["mouseout","mouseover"]);au("onMouseLeave",["mouseout","mouseover"]);au("onPointerEnter",["pointerout","pointerover"]);au("onPointerLeave",["pointerout","pointerover"]);bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lh));function kT(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,FO(i,e,void 0,n),n.currentTarget=null}function s2(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;kT(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;kT(r,a,c),s=l}}}if(ug)throw n=lx,ug=!1,lx=null,n}function Kt(n,e){var t=e[yx];t===void 0&&(t=e[yx]=new Set);var i=n+"__bubble";t.has(i)||(o2(e,n,2,!1),t.add(i))}function Ey(n,e,t){var i=0;e&&(i|=4),o2(t,n,i,e)}var Cp="_reactListening"+Math.random().toString(36).slice(2);function dd(n){if(!n[Cp]){n[Cp]=!0,fR.forEach(function(t){t!=="selectionchange"&&(BU.has(t)||Ey(t,!1,n),Ey(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Cp]||(e[Cp]=!0,Ey("selectionchange",!1,e))}}function o2(n,e,t,i){switch(GR(e)){case 1:var r=eU;break;case 4:r=tU;break;default:r=xw}t=r.bind(null,e,t,n),r=void 0,!ax||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Ty(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ja(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}PR(function(){var c=s,d=gw(t),f=[];e:{var p=r2.get(n);if(p!==void 0){var m=ww,y=n;switch(n){case"keypress":if(Hm(t)===0)break e;case"keydown":case"keyup":m=gU;break;case"focusin":y="focus",m=yy;break;case"focusout":y="blur",m=yy;break;case"beforeblur":case"afterblur":m=yy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=MT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=rU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=_U;break;case e2:case t2:case n2:m=aU;break;case i2:m=SU;break;case"scroll":m=nU;break;case"wheel":m=MU;break;case"copy":case"cut":case"paste":m=cU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=TT}var M=(e&4)!==0,_=!M&&n==="scroll",g=M?p!==null?p+"Capture":null:p;M=[];for(var w=c,x;w!==null;){x=w;var T=x.stateNode;if(x.tag===5&&T!==null&&(x=T,g!==null&&(T=od(w,g),T!=null&&M.push(fd(w,T,x)))),_)break;w=w.return}0<M.length&&(p=new m(p,y,null,t,d),f.push({event:p,listeners:M}))}}if(!(e&7)){e:{if(p=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",p&&t!==sx&&(y=t.relatedTarget||t.fromElement)&&(Ja(y)||y[eo]))break e;if((m||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=c,y=y?Ja(y):null,y!==null&&(_=Al(y),y!==_||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(M=MT,T="onMouseLeave",g="onMouseEnter",w="mouse",(n==="pointerout"||n==="pointerover")&&(M=TT,T="onPointerLeave",g="onPointerEnter",w="pointer"),_=m==null?p:kc(m),x=y==null?p:kc(y),p=new M(T,w+"leave",m,t,d),p.target=_,p.relatedTarget=x,T=null,Ja(d)===c&&(M=new M(g,w+"enter",y,t,d),M.target=x,M.relatedTarget=_,T=M),_=T,m&&y)t:{for(M=m,g=y,w=0,x=M;x;x=tc(x))w++;for(x=0,T=g;T;T=tc(T))x++;for(;0<w-x;)M=tc(M),w--;for(;0<x-w;)g=tc(g),x--;for(;w--;){if(M===g||g!==null&&M===g.alternate)break t;M=tc(M),g=tc(g)}M=null}else M=null;m!==null&&OT(f,p,m,M,!1),y!==null&&_!==null&&OT(f,_,y,M,!0)}}e:{if(p=c?kc(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var C=RU;else if(CT(p))if(YR)C=DU;else{C=IU;var P=LU}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=NU);if(C&&(C=C(n,c))){qR(f,C,t,d);break e}P&&P(n,p,c),n==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&ex(p,"number",p.value)}switch(P=c?kc(c):window,n){case"focusin":(CT(P)||P.contentEditable==="true")&&(Nc=P,dx=c,Vh=null);break;case"focusout":Vh=dx=Nc=null;break;case"mousedown":fx=!0;break;case"contextmenu":case"mouseup":case"dragend":fx=!1,NT(f,t,d);break;case"selectionchange":if(UU)break;case"keydown":case"keyup":NT(f,t,d)}var R;if(Ew)e:{switch(n){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Ic?XR(n,t)&&(D="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(D="onCompositionStart");D&&(WR&&t.locale!=="ko"&&(Ic||D!=="onCompositionStart"?D==="onCompositionEnd"&&Ic&&(R=jR()):(Vo=d,Sw="value"in Vo?Vo.value:Vo.textContent,Ic=!0)),P=mg(c,D),0<P.length&&(D=new ET(D,n,null,t,d),f.push({event:D,listeners:P}),R?D.data=R:(R=$R(t),R!==null&&(D.data=R)))),(R=TU?bU(n,t):AU(n,t))&&(c=mg(c,"onBeforeInput"),0<c.length&&(d=new ET("onBeforeInput","beforeinput",null,t,d),f.push({event:d,listeners:c}),d.data=R))}s2(f,e)})}function fd(n,e,t){return{instance:n,listener:e,currentTarget:t}}function mg(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=od(n,t),s!=null&&i.unshift(fd(n,s,r)),s=od(n,e),s!=null&&i.push(fd(n,s,r))),n=n.return}return i}function tc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function OT(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=od(t,s),l!=null&&o.unshift(fd(t,l,a))):r||(l=od(t,s),l!=null&&o.push(fd(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var VU=/\r\n?/g,HU=/\u0000|\uFFFD/g;function UT(n){return(typeof n=="string"?n:""+n).replace(VU,`
`).replace(HU,"")}function Pp(n,e,t){if(e=UT(e),UT(n)!==e&&t)throw Error(Ee(425))}function gg(){}var px=null,mx=null;function gx(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vx=typeof setTimeout=="function"?setTimeout:void 0,GU=typeof clearTimeout=="function"?clearTimeout:void 0,FT=typeof Promise=="function"?Promise:void 0,jU=typeof queueMicrotask=="function"?queueMicrotask:typeof FT<"u"?function(n){return FT.resolve(null).then(n).catch(WU)}:vx;function WU(n){setTimeout(function(){throw n})}function by(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),cd(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);cd(e)}function $o(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function zT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Tu=Math.random().toString(36).slice(2),ps="__reactFiber$"+Tu,pd="__reactProps$"+Tu,eo="__reactContainer$"+Tu,yx="__reactEvents$"+Tu,XU="__reactListeners$"+Tu,$U="__reactHandles$"+Tu;function Ja(n){var e=n[ps];if(e)return e;for(var t=n.parentNode;t;){if(e=t[eo]||t[ps]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=zT(n);n!==null;){if(t=n[ps])return t;n=zT(n)}return e}n=t,t=n.parentNode}return null}function tf(n){return n=n[ps]||n[eo],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function kc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Ee(33))}function n0(n){return n[pd]||null}var _x=[],Oc=-1;function ua(n){return{current:n}}function Qt(n){0>Oc||(n.current=_x[Oc],_x[Oc]=null,Oc--)}function qt(n,e){Oc++,_x[Oc]=n.current,n.current=e}var ra={},yi=ua(ra),Gi=ua(!1),vl=ra;function lu(n,e){var t=n.type.contextTypes;if(!t)return ra;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ji(n){return n=n.childContextTypes,n!=null}function vg(){Qt(Gi),Qt(yi)}function BT(n,e,t){if(yi.current!==ra)throw Error(Ee(168));qt(yi,e),qt(Gi,t)}function a2(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ee(108,LO(n)||"Unknown",r));return un({},t,i)}function yg(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ra,vl=yi.current,qt(yi,n),qt(Gi,Gi.current),!0}function VT(n,e,t){var i=n.stateNode;if(!i)throw Error(Ee(169));t?(n=a2(n,e,vl),i.__reactInternalMemoizedMergedChildContext=n,Qt(Gi),Qt(yi),qt(yi,n)):Qt(Gi),qt(Gi,t)}var Hs=null,i0=!1,Ay=!1;function l2(n){Hs===null?Hs=[n]:Hs.push(n)}function qU(n){i0=!0,l2(n)}function ha(){if(!Ay&&Hs!==null){Ay=!0;var n=0,e=Ht;try{var t=Hs;for(Ht=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Hs=null,i0=!1}catch(r){throw Hs!==null&&(Hs=Hs.slice(n+1)),NR(vw,ha),r}finally{Ht=e,Ay=!1}}return null}var Uc=[],Fc=0,_g=null,xg=0,Cr=[],Pr=0,yl=null,Ws=1,Xs="";function za(n,e){Uc[Fc++]=xg,Uc[Fc++]=_g,_g=n,xg=e}function c2(n,e,t){Cr[Pr++]=Ws,Cr[Pr++]=Xs,Cr[Pr++]=yl,yl=n;var i=Ws;n=Xs;var r=32-Kr(i)-1;i&=~(1<<r),t+=1;var s=32-Kr(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ws=1<<32-Kr(e)+r|t<<r|i,Xs=s+n}else Ws=1<<s|t<<r|i,Xs=n}function bw(n){n.return!==null&&(za(n,1),c2(n,1,0))}function Aw(n){for(;n===_g;)_g=Uc[--Fc],Uc[Fc]=null,xg=Uc[--Fc],Uc[Fc]=null;for(;n===yl;)yl=Cr[--Pr],Cr[Pr]=null,Xs=Cr[--Pr],Cr[Pr]=null,Ws=Cr[--Pr],Cr[Pr]=null}var ar=null,or=null,nn=!1,$r=null;function u2(n,e){var t=Rr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function HT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ar=n,or=$o(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ar=n,or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=yl!==null?{id:Ws,overflow:Xs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Rr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ar=n,or=null,!0):!1;default:return!1}}function xx(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Sx(n){if(nn){var e=or;if(e){var t=e;if(!HT(n,e)){if(xx(n))throw Error(Ee(418));e=$o(t.nextSibling);var i=ar;e&&HT(n,e)?u2(i,t):(n.flags=n.flags&-4097|2,nn=!1,ar=n)}}else{if(xx(n))throw Error(Ee(418));n.flags=n.flags&-4097|2,nn=!1,ar=n}}}function GT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ar=n}function Rp(n){if(n!==ar)return!1;if(!nn)return GT(n),nn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!gx(n.type,n.memoizedProps)),e&&(e=or)){if(xx(n))throw h2(),Error(Ee(418));for(;e;)u2(n,e),e=$o(e.nextSibling)}if(GT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Ee(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){or=$o(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}or=null}}else or=ar?$o(n.stateNode.nextSibling):null;return!0}function h2(){for(var n=or;n;)n=$o(n.nextSibling)}function cu(){or=ar=null,nn=!1}function Cw(n){$r===null?$r=[n]:$r.push(n)}var YU=lo.ReactCurrentBatchConfig;function ch(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ee(309));var i=t.stateNode}if(!i)throw Error(Ee(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Ee(284));if(!t._owner)throw Error(Ee(290,n))}return n}function Lp(n,e){throw n=Object.prototype.toString.call(e),Error(Ee(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function jT(n){var e=n._init;return e(n._payload)}function d2(n){function e(g,w){if(n){var x=g.deletions;x===null?(g.deletions=[w],g.flags|=16):x.push(w)}}function t(g,w){if(!n)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function i(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function r(g,w){return g=Zo(g,w),g.index=0,g.sibling=null,g}function s(g,w,x){return g.index=x,n?(x=g.alternate,x!==null?(x=x.index,x<w?(g.flags|=2,w):x):(g.flags|=2,w)):(g.flags|=1048576,w)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,w,x,T){return w===null||w.tag!==6?(w=Dy(x,g.mode,T),w.return=g,w):(w=r(w,x),w.return=g,w)}function l(g,w,x,T){var C=x.type;return C===Lc?d(g,w,x.props.children,T,x.key):w!==null&&(w.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===No&&jT(C)===w.type)?(T=r(w,x.props),T.ref=ch(g,w,x),T.return=g,T):(T=Ym(x.type,x.key,x.props,null,g.mode,T),T.ref=ch(g,w,x),T.return=g,T)}function c(g,w,x,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=ky(x,g.mode,T),w.return=g,w):(w=r(w,x.children||[]),w.return=g,w)}function d(g,w,x,T,C){return w===null||w.tag!==7?(w=cl(x,g.mode,T,C),w.return=g,w):(w=r(w,x),w.return=g,w)}function f(g,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Dy(""+w,g.mode,x),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xp:return x=Ym(w.type,w.key,w.props,null,g.mode,x),x.ref=ch(g,null,w),x.return=g,x;case Rc:return w=ky(w,g.mode,x),w.return=g,w;case No:var T=w._init;return f(g,T(w._payload),x)}if(Ph(w)||rh(w))return w=cl(w,g.mode,x,null),w.return=g,w;Lp(g,w)}return null}function p(g,w,x,T){var C=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return C!==null?null:a(g,w,""+x,T);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case xp:return x.key===C?l(g,w,x,T):null;case Rc:return x.key===C?c(g,w,x,T):null;case No:return C=x._init,p(g,w,C(x._payload),T)}if(Ph(x)||rh(x))return C!==null?null:d(g,w,x,T,null);Lp(g,x)}return null}function m(g,w,x,T,C){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(x)||null,a(w,g,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case xp:return g=g.get(T.key===null?x:T.key)||null,l(w,g,T,C);case Rc:return g=g.get(T.key===null?x:T.key)||null,c(w,g,T,C);case No:var P=T._init;return m(g,w,x,P(T._payload),C)}if(Ph(T)||rh(T))return g=g.get(x)||null,d(w,g,T,C,null);Lp(w,T)}return null}function y(g,w,x,T){for(var C=null,P=null,R=w,D=w=0,X=null;R!==null&&D<x.length;D++){R.index>D?(X=R,R=null):X=R.sibling;var b=p(g,R,x[D],T);if(b===null){R===null&&(R=X);break}n&&R&&b.alternate===null&&e(g,R),w=s(b,w,D),P===null?C=b:P.sibling=b,P=b,R=X}if(D===x.length)return t(g,R),nn&&za(g,D),C;if(R===null){for(;D<x.length;D++)R=f(g,x[D],T),R!==null&&(w=s(R,w,D),P===null?C=R:P.sibling=R,P=R);return nn&&za(g,D),C}for(R=i(g,R);D<x.length;D++)X=m(R,g,D,x[D],T),X!==null&&(n&&X.alternate!==null&&R.delete(X.key===null?D:X.key),w=s(X,w,D),P===null?C=X:P.sibling=X,P=X);return n&&R.forEach(function(L){return e(g,L)}),nn&&za(g,D),C}function M(g,w,x,T){var C=rh(x);if(typeof C!="function")throw Error(Ee(150));if(x=C.call(x),x==null)throw Error(Ee(151));for(var P=C=null,R=w,D=w=0,X=null,b=x.next();R!==null&&!b.done;D++,b=x.next()){R.index>D?(X=R,R=null):X=R.sibling;var L=p(g,R,b.value,T);if(L===null){R===null&&(R=X);break}n&&R&&L.alternate===null&&e(g,R),w=s(L,w,D),P===null?C=L:P.sibling=L,P=L,R=X}if(b.done)return t(g,R),nn&&za(g,D),C;if(R===null){for(;!b.done;D++,b=x.next())b=f(g,b.value,T),b!==null&&(w=s(b,w,D),P===null?C=b:P.sibling=b,P=b);return nn&&za(g,D),C}for(R=i(g,R);!b.done;D++,b=x.next())b=m(R,g,D,b.value,T),b!==null&&(n&&b.alternate!==null&&R.delete(b.key===null?D:b.key),w=s(b,w,D),P===null?C=b:P.sibling=b,P=b);return n&&R.forEach(function(Z){return e(g,Z)}),nn&&za(g,D),C}function _(g,w,x,T){if(typeof x=="object"&&x!==null&&x.type===Lc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case xp:e:{for(var C=x.key,P=w;P!==null;){if(P.key===C){if(C=x.type,C===Lc){if(P.tag===7){t(g,P.sibling),w=r(P,x.props.children),w.return=g,g=w;break e}}else if(P.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===No&&jT(C)===P.type){t(g,P.sibling),w=r(P,x.props),w.ref=ch(g,P,x),w.return=g,g=w;break e}t(g,P);break}else e(g,P);P=P.sibling}x.type===Lc?(w=cl(x.props.children,g.mode,T,x.key),w.return=g,g=w):(T=Ym(x.type,x.key,x.props,null,g.mode,T),T.ref=ch(g,w,x),T.return=g,g=T)}return o(g);case Rc:e:{for(P=x.key;w!==null;){if(w.key===P)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){t(g,w.sibling),w=r(w,x.children||[]),w.return=g,g=w;break e}else{t(g,w);break}else e(g,w);w=w.sibling}w=ky(x,g.mode,T),w.return=g,g=w}return o(g);case No:return P=x._init,_(g,w,P(x._payload),T)}if(Ph(x))return y(g,w,x,T);if(rh(x))return M(g,w,x,T);Lp(g,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(t(g,w.sibling),w=r(w,x),w.return=g,g=w):(t(g,w),w=Dy(x,g.mode,T),w.return=g,g=w),o(g)):t(g,w)}return _}var uu=d2(!0),f2=d2(!1),Sg=ua(null),wg=null,zc=null,Pw=null;function Rw(){Pw=zc=wg=null}function Lw(n){var e=Sg.current;Qt(Sg),n._currentValue=e}function wx(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function iu(n,e){wg=n,Pw=zc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Hi=!0),n.firstContext=null)}function Nr(n){var e=n._currentValue;if(Pw!==n)if(n={context:n,memoizedValue:e,next:null},zc===null){if(wg===null)throw Error(Ee(308));zc=n,wg.dependencies={lanes:0,firstContext:n}}else zc=zc.next=n;return e}var Qa=null;function Iw(n){Qa===null?Qa=[n]:Qa.push(n)}function p2(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,Iw(e)):(t.next=r.next,r.next=t),e.interleaved=t,to(n,i)}function to(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Do=!1;function Nw(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function m2(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ys(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function qo(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,kt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,to(n,t)}return r=i.interleaved,r===null?(e.next=e,Iw(i)):(e.next=r.next,r.next=e),i.interleaved=e,to(n,t)}function Gm(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,yw(n,t)}}function WT(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Mg(n,e,t,i){var r=n.updateQueue;Do=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=n.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,d=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((i&p)===p){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=n,M=a;switch(p=e,m=t,M.tag){case 1:if(y=M.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=M.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=un({},f,p);break e;case 2:Do=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=m,l=f):d=d.next=m,o|=p;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;p=a,a=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(!0);if(d===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);xl|=o,n.lanes=o,n.memoizedState=f}}function XT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Ee(191,r));r.call(i)}}}var nf={},_s=ua(nf),md=ua(nf),gd=ua(nf);function el(n){if(n===nf)throw Error(Ee(174));return n}function Dw(n,e){switch(qt(gd,e),qt(md,n),qt(_s,nf),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:nx(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=nx(e,n)}Qt(_s),qt(_s,e)}function hu(){Qt(_s),Qt(md),Qt(gd)}function g2(n){el(gd.current);var e=el(_s.current),t=nx(e,n.type);e!==t&&(qt(md,n),qt(_s,t))}function kw(n){md.current===n&&(Qt(_s),Qt(md))}var on=ua(0);function Eg(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cy=[];function Ow(){for(var n=0;n<Cy.length;n++)Cy[n]._workInProgressVersionPrimary=null;Cy.length=0}var jm=lo.ReactCurrentDispatcher,Py=lo.ReactCurrentBatchConfig,_l=0,cn=null,Dn=null,$n=null,Tg=!1,Hh=!1,vd=0,KU=0;function ai(){throw Error(Ee(321))}function Uw(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Jr(n[t],e[t]))return!1;return!0}function Fw(n,e,t,i,r,s){if(_l=s,cn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jm.current=n===null||n.memoizedState===null?eF:tF,n=t(i,r),Hh){s=0;do{if(Hh=!1,vd=0,25<=s)throw Error(Ee(301));s+=1,$n=Dn=null,e.updateQueue=null,jm.current=nF,n=t(i,r)}while(Hh)}if(jm.current=bg,e=Dn!==null&&Dn.next!==null,_l=0,$n=Dn=cn=null,Tg=!1,e)throw Error(Ee(300));return n}function zw(){var n=vd!==0;return vd=0,n}function fs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?cn.memoizedState=$n=n:$n=$n.next=n,$n}function Dr(){if(Dn===null){var n=cn.alternate;n=n!==null?n.memoizedState:null}else n=Dn.next;var e=$n===null?cn.memoizedState:$n.next;if(e!==null)$n=e,Dn=n;else{if(n===null)throw Error(Ee(310));Dn=n,n={memoizedState:Dn.memoizedState,baseState:Dn.baseState,baseQueue:Dn.baseQueue,queue:Dn.queue,next:null},$n===null?cn.memoizedState=$n=n:$n=$n.next=n}return $n}function yd(n,e){return typeof e=="function"?e(n):e}function Ry(n){var e=Dr(),t=e.queue;if(t===null)throw Error(Ee(311));t.lastRenderedReducer=n;var i=Dn,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((_l&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,cn.lanes|=d,xl|=d}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Jr(i,e.memoizedState)||(Hi=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,cn.lanes|=s,xl|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Ly(n){var e=Dr(),t=e.queue;if(t===null)throw Error(Ee(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Jr(s,e.memoizedState)||(Hi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function v2(){}function y2(n,e){var t=cn,i=Dr(),r=e(),s=!Jr(i.memoizedState,r);if(s&&(i.memoizedState=r,Hi=!0),i=i.queue,Bw(S2.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||$n!==null&&$n.memoizedState.tag&1){if(t.flags|=2048,_d(9,x2.bind(null,t,i,r,e),void 0,null),qn===null)throw Error(Ee(349));_l&30||_2(t,e,r)}return r}function _2(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=cn.updateQueue,e===null?(e={lastEffect:null,stores:null},cn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function x2(n,e,t,i){e.value=t,e.getSnapshot=i,w2(e)&&M2(n)}function S2(n,e,t){return t(function(){w2(e)&&M2(n)})}function w2(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Jr(n,t)}catch{return!0}}function M2(n){var e=to(n,1);e!==null&&Zr(e,n,1,-1)}function $T(n){var e=fs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yd,lastRenderedState:n},e.queue=n,n=n.dispatch=QU.bind(null,cn,n),[e.memoizedState,n]}function _d(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=cn.updateQueue,e===null?(e={lastEffect:null,stores:null},cn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function E2(){return Dr().memoizedState}function Wm(n,e,t,i){var r=fs();cn.flags|=n,r.memoizedState=_d(1|e,t,void 0,i===void 0?null:i)}function r0(n,e,t,i){var r=Dr();i=i===void 0?null:i;var s=void 0;if(Dn!==null){var o=Dn.memoizedState;if(s=o.destroy,i!==null&&Uw(i,o.deps)){r.memoizedState=_d(e,t,s,i);return}}cn.flags|=n,r.memoizedState=_d(1|e,t,s,i)}function qT(n,e){return Wm(8390656,8,n,e)}function Bw(n,e){return r0(2048,8,n,e)}function T2(n,e){return r0(4,2,n,e)}function b2(n,e){return r0(4,4,n,e)}function A2(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function C2(n,e,t){return t=t!=null?t.concat([n]):null,r0(4,4,A2.bind(null,e,n),t)}function Vw(){}function P2(n,e){var t=Dr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Uw(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function R2(n,e){var t=Dr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Uw(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function L2(n,e,t){return _l&21?(Jr(t,e)||(t=OR(),cn.lanes|=t,xl|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Hi=!0),n.memoizedState=t)}function ZU(n,e){var t=Ht;Ht=t!==0&&4>t?t:4,n(!0);var i=Py.transition;Py.transition={};try{n(!1),e()}finally{Ht=t,Py.transition=i}}function I2(){return Dr().memoizedState}function JU(n,e,t){var i=Ko(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},N2(n))D2(e,t);else if(t=p2(n,e,t,i),t!==null){var r=Pi();Zr(t,n,i,r),k2(t,e,i)}}function QU(n,e,t){var i=Ko(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(N2(n))D2(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Jr(a,o)){var l=e.interleaved;l===null?(r.next=r,Iw(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=p2(n,e,r,i),t!==null&&(r=Pi(),Zr(t,n,i,r),k2(t,e,i))}}function N2(n){var e=n.alternate;return n===cn||e!==null&&e===cn}function D2(n,e){Hh=Tg=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function k2(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,yw(n,t)}}var bg={readContext:Nr,useCallback:ai,useContext:ai,useEffect:ai,useImperativeHandle:ai,useInsertionEffect:ai,useLayoutEffect:ai,useMemo:ai,useReducer:ai,useRef:ai,useState:ai,useDebugValue:ai,useDeferredValue:ai,useTransition:ai,useMutableSource:ai,useSyncExternalStore:ai,useId:ai,unstable_isNewReconciler:!1},eF={readContext:Nr,useCallback:function(n,e){return fs().memoizedState=[n,e===void 0?null:e],n},useContext:Nr,useEffect:qT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Wm(4194308,4,A2.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Wm(4194308,4,n,e)},useInsertionEffect:function(n,e){return Wm(4,2,n,e)},useMemo:function(n,e){var t=fs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=fs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=JU.bind(null,cn,n),[i.memoizedState,n]},useRef:function(n){var e=fs();return n={current:n},e.memoizedState=n},useState:$T,useDebugValue:Vw,useDeferredValue:function(n){return fs().memoizedState=n},useTransition:function(){var n=$T(!1),e=n[0];return n=ZU.bind(null,n[1]),fs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=cn,r=fs();if(nn){if(t===void 0)throw Error(Ee(407));t=t()}else{if(t=e(),qn===null)throw Error(Ee(349));_l&30||_2(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,qT(S2.bind(null,i,s,n),[n]),i.flags|=2048,_d(9,x2.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=fs(),e=qn.identifierPrefix;if(nn){var t=Xs,i=Ws;t=(i&~(1<<32-Kr(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=vd++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=KU++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},tF={readContext:Nr,useCallback:P2,useContext:Nr,useEffect:Bw,useImperativeHandle:C2,useInsertionEffect:T2,useLayoutEffect:b2,useMemo:R2,useReducer:Ry,useRef:E2,useState:function(){return Ry(yd)},useDebugValue:Vw,useDeferredValue:function(n){var e=Dr();return L2(e,Dn.memoizedState,n)},useTransition:function(){var n=Ry(yd)[0],e=Dr().memoizedState;return[n,e]},useMutableSource:v2,useSyncExternalStore:y2,useId:I2,unstable_isNewReconciler:!1},nF={readContext:Nr,useCallback:P2,useContext:Nr,useEffect:Bw,useImperativeHandle:C2,useInsertionEffect:T2,useLayoutEffect:b2,useMemo:R2,useReducer:Ly,useRef:E2,useState:function(){return Ly(yd)},useDebugValue:Vw,useDeferredValue:function(n){var e=Dr();return Dn===null?e.memoizedState=n:L2(e,Dn.memoizedState,n)},useTransition:function(){var n=Ly(yd)[0],e=Dr().memoizedState;return[n,e]},useMutableSource:v2,useSyncExternalStore:y2,useId:I2,unstable_isNewReconciler:!1};function Gr(n,e){if(n&&n.defaultProps){e=un({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function Mx(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:un({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var s0={isMounted:function(n){return(n=n._reactInternals)?Al(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Pi(),r=Ko(n),s=Ys(i,r);s.payload=e,t!=null&&(s.callback=t),e=qo(n,s,r),e!==null&&(Zr(e,n,r,i),Gm(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Pi(),r=Ko(n),s=Ys(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=qo(n,s,r),e!==null&&(Zr(e,n,r,i),Gm(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Pi(),i=Ko(n),r=Ys(t,i);r.tag=2,e!=null&&(r.callback=e),e=qo(n,r,i),e!==null&&(Zr(e,n,i,t),Gm(e,n,i))}};function YT(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!hd(t,i)||!hd(r,s):!0}function O2(n,e,t){var i=!1,r=ra,s=e.contextType;return typeof s=="object"&&s!==null?s=Nr(s):(r=ji(e)?vl:yi.current,i=e.contextTypes,s=(i=i!=null)?lu(n,r):ra),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=s0,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function KT(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&s0.enqueueReplaceState(e,e.state,null)}function Ex(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},Nw(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Nr(s):(s=ji(e)?vl:yi.current,r.context=lu(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Mx(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&s0.enqueueReplaceState(r,r.state,null),Mg(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function du(n,e){try{var t="",i=e;do t+=RO(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function Iy(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function Tx(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var iF=typeof WeakMap=="function"?WeakMap:Map;function U2(n,e,t){t=Ys(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Cg||(Cg=!0,kx=i),Tx(n,e)},t}function F2(n,e,t){t=Ys(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){Tx(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){Tx(n,e),typeof i!="function"&&(Yo===null?Yo=new Set([this]):Yo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function ZT(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new iF;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=vF.bind(null,n,e,t),e.then(n,n))}function JT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function QT(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ys(-1,1),e.tag=2,qo(t,e,1))),t.lanes|=1),n)}var rF=lo.ReactCurrentOwner,Hi=!1;function Ei(n,e,t,i){e.child=n===null?f2(e,null,t,i):uu(e,n.child,t,i)}function eb(n,e,t,i,r){t=t.render;var s=e.ref;return iu(e,r),i=Fw(n,e,t,i,s,r),t=zw(),n!==null&&!Hi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,no(n,e,r)):(nn&&t&&bw(e),e.flags|=1,Ei(n,e,i,r),e.child)}function tb(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!Yw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,z2(n,e,s,i,r)):(n=Ym(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:hd,t(o,i)&&n.ref===e.ref)return no(n,e,r)}return e.flags|=1,n=Zo(s,i),n.ref=e.ref,n.return=e,e.child=n}function z2(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(hd(s,i)&&n.ref===e.ref)if(Hi=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Hi=!0);else return e.lanes=n.lanes,no(n,e,r)}return bx(n,e,t,i,r)}function B2(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qt(Vc,tr),tr|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,qt(Vc,tr),tr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,qt(Vc,tr),tr|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,qt(Vc,tr),tr|=i;return Ei(n,e,r,t),e.child}function V2(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function bx(n,e,t,i,r){var s=ji(t)?vl:yi.current;return s=lu(e,s),iu(e,r),t=Fw(n,e,t,i,s,r),i=zw(),n!==null&&!Hi?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,no(n,e,r)):(nn&&i&&bw(e),e.flags|=1,Ei(n,e,t,r),e.child)}function nb(n,e,t,i,r){if(ji(t)){var s=!0;yg(e)}else s=!1;if(iu(e,r),e.stateNode===null)Xm(n,e),O2(e,t,i),Ex(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=Nr(c):(c=ji(t)?vl:yi.current,c=lu(e,c));var d=t.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&KT(e,o,i,c),Do=!1;var p=e.memoizedState;o.state=p,Mg(e,i,o,r),l=e.memoizedState,a!==i||p!==l||Gi.current||Do?(typeof d=="function"&&(Mx(e,t,d,i),l=e.memoizedState),(a=Do||YT(e,t,a,i,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,m2(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Gr(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Nr(l):(l=ji(t)?vl:yi.current,l=lu(e,l));var m=t.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&KT(e,o,i,l),Do=!1,p=e.memoizedState,o.state=p,Mg(e,i,o,r);var y=e.memoizedState;a!==f||p!==y||Gi.current||Do?(typeof m=="function"&&(Mx(e,t,m,i),y=e.memoizedState),(c=Do||YT(e,t,c,i,p,y,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),i=!1)}return Ax(n,e,t,i,s,r)}function Ax(n,e,t,i,r,s){V2(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&VT(e,t,!1),no(n,e,s);i=e.stateNode,rF.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=uu(e,n.child,null,s),e.child=uu(e,null,a,s)):Ei(n,e,a,s),e.memoizedState=i.state,r&&VT(e,t,!0),e.child}function H2(n){var e=n.stateNode;e.pendingContext?BT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&BT(n,e.context,!1),Dw(n,e.containerInfo)}function ib(n,e,t,i,r){return cu(),Cw(r),e.flags|=256,Ei(n,e,t,i),e.child}var Cx={dehydrated:null,treeContext:null,retryLane:0};function Px(n){return{baseLanes:n,cachePool:null,transitions:null}}function G2(n,e,t){var i=e.pendingProps,r=on.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),qt(on,r&1),n===null)return Sx(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=l0(o,i,0,null),n=cl(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=Px(t),e.memoizedState=Cx,n):Hw(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return sF(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Zo(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Zo(a,s):(s=cl(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?Px(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=Cx,i}return s=n.child,n=s.sibling,i=Zo(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function Hw(n,e){return e=l0({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Ip(n,e,t,i){return i!==null&&Cw(i),uu(e,n.child,null,t),n=Hw(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function sF(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=Iy(Error(Ee(422))),Ip(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=l0({mode:"visible",children:i.children},r,0,null),s=cl(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&uu(e,n.child,null,o),e.child.memoizedState=Px(o),e.memoizedState=Cx,s);if(!(e.mode&1))return Ip(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ee(419)),i=Iy(s,i,void 0),Ip(n,e,o,i)}if(a=(o&n.childLanes)!==0,Hi||a){if(i=qn,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,to(n,r),Zr(i,n,r,-1))}return qw(),i=Iy(Error(Ee(421))),Ip(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=yF.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,or=$o(r.nextSibling),ar=e,nn=!0,$r=null,n!==null&&(Cr[Pr++]=Ws,Cr[Pr++]=Xs,Cr[Pr++]=yl,Ws=n.id,Xs=n.overflow,yl=e),e=Hw(e,i.children),e.flags|=4096,e)}function rb(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),wx(n.return,e,t)}function Ny(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function j2(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ei(n,e,i.children,t),i=on.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&rb(n,t,e);else if(n.tag===19)rb(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(qt(on,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Eg(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Ny(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Eg(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Ny(e,!0,t,null,s);break;case"together":Ny(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Xm(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function no(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),xl|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Ee(153));if(e.child!==null){for(n=e.child,t=Zo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Zo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function oF(n,e,t){switch(e.tag){case 3:H2(e),cu();break;case 5:g2(e);break;case 1:ji(e.type)&&yg(e);break;case 4:Dw(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;qt(Sg,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(qt(on,on.current&1),e.flags|=128,null):t&e.child.childLanes?G2(n,e,t):(qt(on,on.current&1),n=no(n,e,t),n!==null?n.sibling:null);qt(on,on.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return j2(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),qt(on,on.current),i)break;return null;case 22:case 23:return e.lanes=0,B2(n,e,t)}return no(n,e,t)}var W2,Rx,X2,$2;W2=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Rx=function(){};X2=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,el(_s.current);var s=null;switch(t){case"input":r=J_(n,r),i=J_(n,i),s=[];break;case"select":r=un({},r,{value:void 0}),i=un({},i,{value:void 0}),s=[];break;case"textarea":r=tx(n,r),i=tx(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=gg)}ix(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(rd.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(rd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Kt("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};$2=function(n,e,t,i){t!==i&&(e.flags|=4)};function uh(n,e){if(!nn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function li(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function aF(n,e,t){var i=e.pendingProps;switch(Aw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return li(e),null;case 1:return ji(e.type)&&vg(),li(e),null;case 3:return i=e.stateNode,hu(),Qt(Gi),Qt(yi),Ow(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Rp(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$r!==null&&(Fx($r),$r=null))),Rx(n,e),li(e),null;case 5:kw(e);var r=el(gd.current);if(t=e.type,n!==null&&e.stateNode!=null)X2(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ee(166));return li(e),null}if(n=el(_s.current),Rp(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[ps]=e,i[pd]=s,n=(e.mode&1)!==0,t){case"dialog":Kt("cancel",i),Kt("close",i);break;case"iframe":case"object":case"embed":Kt("load",i);break;case"video":case"audio":for(r=0;r<Lh.length;r++)Kt(Lh[r],i);break;case"source":Kt("error",i);break;case"img":case"image":case"link":Kt("error",i),Kt("load",i);break;case"details":Kt("toggle",i);break;case"input":fT(i,s),Kt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Kt("invalid",i);break;case"textarea":mT(i,s),Kt("invalid",i)}ix(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Pp(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Pp(i.textContent,a,n),r=["children",""+a]):rd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Kt("scroll",i)}switch(t){case"input":Sp(i),pT(i,s,!0);break;case"textarea":Sp(i),gT(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=gg)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=SR(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[ps]=e,n[pd]=i,W2(n,e,!1,!1),e.stateNode=n;e:{switch(o=rx(t,i),t){case"dialog":Kt("cancel",n),Kt("close",n),r=i;break;case"iframe":case"object":case"embed":Kt("load",n),r=i;break;case"video":case"audio":for(r=0;r<Lh.length;r++)Kt(Lh[r],n);r=i;break;case"source":Kt("error",n),r=i;break;case"img":case"image":case"link":Kt("error",n),Kt("load",n),r=i;break;case"details":Kt("toggle",n),r=i;break;case"input":fT(n,i),r=J_(n,i),Kt("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=un({},i,{value:void 0}),Kt("invalid",n);break;case"textarea":mT(n,i),r=tx(n,i),Kt("invalid",n);break;default:r=i}ix(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ER(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wR(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&sd(n,l):typeof l=="number"&&sd(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(rd.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Kt("scroll",n):l!=null&&dw(n,s,l,o))}switch(t){case"input":Sp(n),pT(n,i,!1);break;case"textarea":Sp(n),gT(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ia(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Qc(n,!!i.multiple,s,!1):i.defaultValue!=null&&Qc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=gg)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return li(e),null;case 6:if(n&&e.stateNode!=null)$2(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ee(166));if(t=el(gd.current),el(_s.current),Rp(e)){if(i=e.stateNode,t=e.memoizedProps,i[ps]=e,(s=i.nodeValue!==t)&&(n=ar,n!==null))switch(n.tag){case 3:Pp(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Pp(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[ps]=e,e.stateNode=i}return li(e),null;case 13:if(Qt(on),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(nn&&or!==null&&e.mode&1&&!(e.flags&128))h2(),cu(),e.flags|=98560,s=!1;else if(s=Rp(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Ee(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ee(317));s[ps]=e}else cu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;li(e),s=!1}else $r!==null&&(Fx($r),$r=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||on.current&1?On===0&&(On=3):qw())),e.updateQueue!==null&&(e.flags|=4),li(e),null);case 4:return hu(),Rx(n,e),n===null&&dd(e.stateNode.containerInfo),li(e),null;case 10:return Lw(e.type._context),li(e),null;case 17:return ji(e.type)&&vg(),li(e),null;case 19:if(Qt(on),s=e.memoizedState,s===null)return li(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)uh(s,!1);else{if(On!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Eg(n),o!==null){for(e.flags|=128,uh(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return qt(on,on.current&1|2),e.child}n=n.sibling}s.tail!==null&&En()>fu&&(e.flags|=128,i=!0,uh(s,!1),e.lanes=4194304)}else{if(!i)if(n=Eg(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),uh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!nn)return li(e),null}else 2*En()-s.renderingStartTime>fu&&t!==1073741824&&(e.flags|=128,i=!0,uh(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=En(),e.sibling=null,t=on.current,qt(on,i?t&1|2:t&1),e):(li(e),null);case 22:case 23:return $w(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?tr&1073741824&&(li(e),e.subtreeFlags&6&&(e.flags|=8192)):li(e),null;case 24:return null;case 25:return null}throw Error(Ee(156,e.tag))}function lF(n,e){switch(Aw(e),e.tag){case 1:return ji(e.type)&&vg(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return hu(),Qt(Gi),Qt(yi),Ow(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return kw(e),null;case 13:if(Qt(on),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Ee(340));cu()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Qt(on),null;case 4:return hu(),null;case 10:return Lw(e.type._context),null;case 22:case 23:return $w(),null;case 24:return null;default:return null}}var Np=!1,fi=!1,cF=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Bc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){mn(n,e,i)}else t.current=null}function Lx(n,e,t){try{t()}catch(i){mn(n,e,i)}}var sb=!1;function uF(n,e){if(px=fg,n=JR(),Tw(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=n,p=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===n)break t;if(p===t&&++c===r&&(a=o),p===s&&++d===i&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(mx={focusedElem:n,selectionRange:t},fg=!1,Ve=e;Ve!==null;)if(e=Ve,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Ve=n;else for(;Ve!==null;){e=Ve;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var M=y.memoizedProps,_=y.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?M:Gr(e.type,M),_);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ee(163))}}catch(T){mn(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,Ve=n;break}Ve=e.return}return y=sb,sb=!1,y}function Gh(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&Lx(e,t,s)}r=r.next}while(r!==i)}}function o0(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function Ix(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function q2(n){var e=n.alternate;e!==null&&(n.alternate=null,q2(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ps],delete e[pd],delete e[yx],delete e[XU],delete e[$U])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Y2(n){return n.tag===5||n.tag===3||n.tag===4}function ob(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Y2(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Nx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=gg));else if(i!==4&&(n=n.child,n!==null))for(Nx(n,e,t),n=n.sibling;n!==null;)Nx(n,e,t),n=n.sibling}function Dx(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(Dx(n,e,t),n=n.sibling;n!==null;)Dx(n,e,t),n=n.sibling}var Qn=null,Wr=!1;function xo(n,e,t){for(t=t.child;t!==null;)K2(n,e,t),t=t.sibling}function K2(n,e,t){if(ys&&typeof ys.onCommitFiberUnmount=="function")try{ys.onCommitFiberUnmount(Jg,t)}catch{}switch(t.tag){case 5:fi||Bc(t,e);case 6:var i=Qn,r=Wr;Qn=null,xo(n,e,t),Qn=i,Wr=r,Qn!==null&&(Wr?(n=Qn,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Qn.removeChild(t.stateNode));break;case 18:Qn!==null&&(Wr?(n=Qn,t=t.stateNode,n.nodeType===8?by(n.parentNode,t):n.nodeType===1&&by(n,t),cd(n)):by(Qn,t.stateNode));break;case 4:i=Qn,r=Wr,Qn=t.stateNode.containerInfo,Wr=!0,xo(n,e,t),Qn=i,Wr=r;break;case 0:case 11:case 14:case 15:if(!fi&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Lx(t,e,o),r=r.next}while(r!==i)}xo(n,e,t);break;case 1:if(!fi&&(Bc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){mn(t,e,a)}xo(n,e,t);break;case 21:xo(n,e,t);break;case 22:t.mode&1?(fi=(i=fi)||t.memoizedState!==null,xo(n,e,t),fi=i):xo(n,e,t);break;default:xo(n,e,t)}}function ab(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new cF),e.forEach(function(i){var r=_F.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Fr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Qn=a.stateNode,Wr=!1;break e;case 3:Qn=a.stateNode.containerInfo,Wr=!0;break e;case 4:Qn=a.stateNode.containerInfo,Wr=!0;break e}a=a.return}if(Qn===null)throw Error(Ee(160));K2(s,o,r),Qn=null,Wr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){mn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Z2(e,n),e=e.sibling}function Z2(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Fr(e,n),hs(n),i&4){try{Gh(3,n,n.return),o0(3,n)}catch(M){mn(n,n.return,M)}try{Gh(5,n,n.return)}catch(M){mn(n,n.return,M)}}break;case 1:Fr(e,n),hs(n),i&512&&t!==null&&Bc(t,t.return);break;case 5:if(Fr(e,n),hs(n),i&512&&t!==null&&Bc(t,t.return),n.flags&32){var r=n.stateNode;try{sd(r,"")}catch(M){mn(n,n.return,M)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_R(r,s),rx(a,o);var c=rx(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?ER(r,f):d==="dangerouslySetInnerHTML"?wR(r,f):d==="children"?sd(r,f):dw(r,d,f,c)}switch(a){case"input":Q_(r,s);break;case"textarea":xR(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Qc(r,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?Qc(r,!!s.multiple,s.defaultValue,!0):Qc(r,!!s.multiple,s.multiple?[]:"",!1))}r[pd]=s}catch(M){mn(n,n.return,M)}}break;case 6:if(Fr(e,n),hs(n),i&4){if(n.stateNode===null)throw Error(Ee(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(M){mn(n,n.return,M)}}break;case 3:if(Fr(e,n),hs(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{cd(e.containerInfo)}catch(M){mn(n,n.return,M)}break;case 4:Fr(e,n),hs(n);break;case 13:Fr(e,n),hs(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Ww=En())),i&4&&ab(n);break;case 22:if(d=t!==null&&t.memoizedState!==null,n.mode&1?(fi=(c=fi)||d,Fr(e,n),fi=c):Fr(e,n),hs(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!d&&n.mode&1)for(Ve=n,d=n.child;d!==null;){for(f=Ve=d;Ve!==null;){switch(p=Ve,m=p.child,p.tag){case 0:case 11:case 14:case 15:Gh(4,p,p.return);break;case 1:Bc(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){i=p,t=p.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(M){mn(i,t,M)}}break;case 5:Bc(p,p.return);break;case 22:if(p.memoizedState!==null){cb(f);continue}}m!==null?(m.return=p,Ve=m):cb(f)}d=d.sibling}e:for(d=null,f=n;;){if(f.tag===5){if(d===null){d=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=MR("display",o))}catch(M){mn(n,n.return,M)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(M){mn(n,n.return,M)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fr(e,n),hs(n),i&4&&ab(n);break;case 21:break;default:Fr(e,n),hs(n)}}function hs(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Y2(t)){var i=t;break e}t=t.return}throw Error(Ee(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(sd(r,""),i.flags&=-33);var s=ob(n);Dx(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=ob(n);Nx(n,a,o);break;default:throw Error(Ee(161))}}catch(l){mn(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function hF(n,e,t){Ve=n,J2(n)}function J2(n,e,t){for(var i=(n.mode&1)!==0;Ve!==null;){var r=Ve,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Np;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||fi;a=Np;var c=fi;if(Np=o,(fi=l)&&!c)for(Ve=r;Ve!==null;)o=Ve,l=o.child,o.tag===22&&o.memoizedState!==null?ub(r):l!==null?(l.return=o,Ve=l):ub(r);for(;s!==null;)Ve=s,J2(s),s=s.sibling;Ve=r,Np=a,fi=c}lb(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ve=s):lb(n)}}function lb(n){for(;Ve!==null;){var e=Ve;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:fi||o0(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!fi)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Gr(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&XT(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}XT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&cd(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ee(163))}fi||e.flags&512&&Ix(e)}catch(p){mn(e,e.return,p)}}if(e===n){Ve=null;break}if(t=e.sibling,t!==null){t.return=e.return,Ve=t;break}Ve=e.return}}function cb(n){for(;Ve!==null;){var e=Ve;if(e===n){Ve=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Ve=t;break}Ve=e.return}}function ub(n){for(;Ve!==null;){var e=Ve;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{o0(4,e)}catch(l){mn(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){mn(e,r,l)}}var s=e.return;try{Ix(e)}catch(l){mn(e,s,l)}break;case 5:var o=e.return;try{Ix(e)}catch(l){mn(e,o,l)}}}catch(l){mn(e,e.return,l)}if(e===n){Ve=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ve=a;break}Ve=e.return}}var dF=Math.ceil,Ag=lo.ReactCurrentDispatcher,Gw=lo.ReactCurrentOwner,Lr=lo.ReactCurrentBatchConfig,kt=0,qn=null,Pn=null,ti=0,tr=0,Vc=ua(0),On=0,xd=null,xl=0,a0=0,jw=0,jh=null,Bi=null,Ww=0,fu=1/0,Bs=null,Cg=!1,kx=null,Yo=null,Dp=!1,Ho=null,Pg=0,Wh=0,Ox=null,$m=-1,qm=0;function Pi(){return kt&6?En():$m!==-1?$m:$m=En()}function Ko(n){return n.mode&1?kt&2&&ti!==0?ti&-ti:YU.transition!==null?(qm===0&&(qm=OR()),qm):(n=Ht,n!==0||(n=window.event,n=n===void 0?16:GR(n.type)),n):1}function Zr(n,e,t,i){if(50<Wh)throw Wh=0,Ox=null,Error(Ee(185));Qd(n,t,i),(!(kt&2)||n!==qn)&&(n===qn&&(!(kt&2)&&(a0|=t),On===4&&Uo(n,ti)),Wi(n,i),t===1&&kt===0&&!(e.mode&1)&&(fu=En()+500,i0&&ha()))}function Wi(n,e){var t=n.callbackNode;YO(n,e);var i=dg(n,n===qn?ti:0);if(i===0)t!==null&&_T(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&_T(t),e===1)n.tag===0?qU(hb.bind(null,n)):l2(hb.bind(null,n)),jU(function(){!(kt&6)&&ha()}),t=null;else{switch(UR(i)){case 1:t=vw;break;case 4:t=DR;break;case 16:t=hg;break;case 536870912:t=kR;break;default:t=hg}t=oL(t,Q2.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Q2(n,e){if($m=-1,qm=0,kt&6)throw Error(Ee(327));var t=n.callbackNode;if(ru()&&n.callbackNode!==t)return null;var i=dg(n,n===qn?ti:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Rg(n,i);else{e=i;var r=kt;kt|=2;var s=tL();(qn!==n||ti!==e)&&(Bs=null,fu=En()+500,ll(n,e));do try{mF();break}catch(a){eL(n,a)}while(!0);Rw(),Ag.current=s,kt=r,Pn!==null?e=0:(qn=null,ti=0,e=On)}if(e!==0){if(e===2&&(r=cx(n),r!==0&&(i=r,e=Ux(n,r))),e===1)throw t=xd,ll(n,0),Uo(n,i),Wi(n,En()),t;if(e===6)Uo(n,i);else{if(r=n.current.alternate,!(i&30)&&!fF(r)&&(e=Rg(n,i),e===2&&(s=cx(n),s!==0&&(i=s,e=Ux(n,s))),e===1))throw t=xd,ll(n,0),Uo(n,i),Wi(n,En()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Ee(345));case 2:Ba(n,Bi,Bs);break;case 3:if(Uo(n,i),(i&130023424)===i&&(e=Ww+500-En(),10<e)){if(dg(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Pi(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=vx(Ba.bind(null,n,Bi,Bs),e);break}Ba(n,Bi,Bs);break;case 4:if(Uo(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Kr(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=En()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*dF(i/1960))-i,10<i){n.timeoutHandle=vx(Ba.bind(null,n,Bi,Bs),i);break}Ba(n,Bi,Bs);break;case 5:Ba(n,Bi,Bs);break;default:throw Error(Ee(329))}}}return Wi(n,En()),n.callbackNode===t?Q2.bind(null,n):null}function Ux(n,e){var t=jh;return n.current.memoizedState.isDehydrated&&(ll(n,e).flags|=256),n=Rg(n,e),n!==2&&(e=Bi,Bi=t,e!==null&&Fx(e)),n}function Fx(n){Bi===null?Bi=n:Bi.push.apply(Bi,n)}function fF(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Jr(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Uo(n,e){for(e&=~jw,e&=~a0,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Kr(e),i=1<<t;n[t]=-1,e&=~i}}function hb(n){if(kt&6)throw Error(Ee(327));ru();var e=dg(n,0);if(!(e&1))return Wi(n,En()),null;var t=Rg(n,e);if(n.tag!==0&&t===2){var i=cx(n);i!==0&&(e=i,t=Ux(n,i))}if(t===1)throw t=xd,ll(n,0),Uo(n,e),Wi(n,En()),t;if(t===6)throw Error(Ee(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Ba(n,Bi,Bs),Wi(n,En()),null}function Xw(n,e){var t=kt;kt|=1;try{return n(e)}finally{kt=t,kt===0&&(fu=En()+500,i0&&ha())}}function Sl(n){Ho!==null&&Ho.tag===0&&!(kt&6)&&ru();var e=kt;kt|=1;var t=Lr.transition,i=Ht;try{if(Lr.transition=null,Ht=1,n)return n()}finally{Ht=i,Lr.transition=t,kt=e,!(kt&6)&&ha()}}function $w(){tr=Vc.current,Qt(Vc)}function ll(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,GU(t)),Pn!==null)for(t=Pn.return;t!==null;){var i=t;switch(Aw(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&vg();break;case 3:hu(),Qt(Gi),Qt(yi),Ow();break;case 5:kw(i);break;case 4:hu();break;case 13:Qt(on);break;case 19:Qt(on);break;case 10:Lw(i.type._context);break;case 22:case 23:$w()}t=t.return}if(qn=n,Pn=n=Zo(n.current,null),ti=tr=e,On=0,xd=null,jw=a0=xl=0,Bi=jh=null,Qa!==null){for(e=0;e<Qa.length;e++)if(t=Qa[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Qa=null}return n}function eL(n,e){do{var t=Pn;try{if(Rw(),jm.current=bg,Tg){for(var i=cn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Tg=!1}if(_l=0,$n=Dn=cn=null,Hh=!1,vd=0,Gw.current=null,t===null||t.return===null){On=1,xd=e,Pn=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=ti,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=JT(o);if(m!==null){m.flags&=-257,QT(m,o,a,s,e),m.mode&1&&ZT(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var M=new Set;M.add(l),e.updateQueue=M}else y.add(l);break e}else{if(!(e&1)){ZT(s,c,e),qw();break e}l=Error(Ee(426))}}else if(nn&&a.mode&1){var _=JT(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),QT(_,o,a,s,e),Cw(du(l,a));break e}}s=l=du(l,a),On!==4&&(On=2),jh===null?jh=[s]:jh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=U2(s,l,e);WT(s,g);break e;case 1:a=l;var w=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Yo===null||!Yo.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=F2(s,a,e);WT(s,T);break e}}s=s.return}while(s!==null)}iL(t)}catch(C){e=C,Pn===t&&t!==null&&(Pn=t=t.return);continue}break}while(!0)}function tL(){var n=Ag.current;return Ag.current=bg,n===null?bg:n}function qw(){(On===0||On===3||On===2)&&(On=4),qn===null||!(xl&268435455)&&!(a0&268435455)||Uo(qn,ti)}function Rg(n,e){var t=kt;kt|=2;var i=tL();(qn!==n||ti!==e)&&(Bs=null,ll(n,e));do try{pF();break}catch(r){eL(n,r)}while(!0);if(Rw(),kt=t,Ag.current=i,Pn!==null)throw Error(Ee(261));return qn=null,ti=0,On}function pF(){for(;Pn!==null;)nL(Pn)}function mF(){for(;Pn!==null&&!BO();)nL(Pn)}function nL(n){var e=sL(n.alternate,n,tr);n.memoizedProps=n.pendingProps,e===null?iL(n):Pn=e,Gw.current=null}function iL(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=lF(t,e),t!==null){t.flags&=32767,Pn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{On=6,Pn=null;return}}else if(t=aF(t,e,tr),t!==null){Pn=t;return}if(e=e.sibling,e!==null){Pn=e;return}Pn=e=n}while(e!==null);On===0&&(On=5)}function Ba(n,e,t){var i=Ht,r=Lr.transition;try{Lr.transition=null,Ht=1,gF(n,e,t,i)}finally{Lr.transition=r,Ht=i}return null}function gF(n,e,t,i){do ru();while(Ho!==null);if(kt&6)throw Error(Ee(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Ee(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(KO(n,s),n===qn&&(Pn=qn=null,ti=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Dp||(Dp=!0,oL(hg,function(){return ru(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Lr.transition,Lr.transition=null;var o=Ht;Ht=1;var a=kt;kt|=4,Gw.current=null,uF(n,t),Z2(t,n),OU(mx),fg=!!px,mx=px=null,n.current=t,hF(t),VO(),kt=a,Ht=o,Lr.transition=s}else n.current=t;if(Dp&&(Dp=!1,Ho=n,Pg=r),s=n.pendingLanes,s===0&&(Yo=null),jO(t.stateNode),Wi(n,En()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(Cg)throw Cg=!1,n=kx,kx=null,n;return Pg&1&&n.tag!==0&&ru(),s=n.pendingLanes,s&1?n===Ox?Wh++:(Wh=0,Ox=n):Wh=0,ha(),null}function ru(){if(Ho!==null){var n=UR(Pg),e=Lr.transition,t=Ht;try{if(Lr.transition=null,Ht=16>n?16:n,Ho===null)var i=!1;else{if(n=Ho,Ho=null,Pg=0,kt&6)throw Error(Ee(331));var r=kt;for(kt|=4,Ve=n.current;Ve!==null;){var s=Ve,o=s.child;if(Ve.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ve=c;Ve!==null;){var d=Ve;switch(d.tag){case 0:case 11:case 15:Gh(8,d,s)}var f=d.child;if(f!==null)f.return=d,Ve=f;else for(;Ve!==null;){d=Ve;var p=d.sibling,m=d.return;if(q2(d),d===c){Ve=null;break}if(p!==null){p.return=m,Ve=p;break}Ve=m}}}var y=s.alternate;if(y!==null){var M=y.child;if(M!==null){y.child=null;do{var _=M.sibling;M.sibling=null,M=_}while(M!==null)}}Ve=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ve=o;else e:for(;Ve!==null;){if(s=Ve,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gh(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Ve=g;break e}Ve=s.return}}var w=n.current;for(Ve=w;Ve!==null;){o=Ve;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Ve=x;else e:for(o=w;Ve!==null;){if(a=Ve,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:o0(9,a)}}catch(C){mn(a,a.return,C)}if(a===o){Ve=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Ve=T;break e}Ve=a.return}}if(kt=r,ha(),ys&&typeof ys.onPostCommitFiberRoot=="function")try{ys.onPostCommitFiberRoot(Jg,n)}catch{}i=!0}return i}finally{Ht=t,Lr.transition=e}}return!1}function db(n,e,t){e=du(t,e),e=U2(n,e,1),n=qo(n,e,1),e=Pi(),n!==null&&(Qd(n,1,e),Wi(n,e))}function mn(n,e,t){if(n.tag===3)db(n,n,t);else for(;e!==null;){if(e.tag===3){db(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Yo===null||!Yo.has(i))){n=du(t,n),n=F2(e,n,1),e=qo(e,n,1),n=Pi(),e!==null&&(Qd(e,1,n),Wi(e,n));break}}e=e.return}}function vF(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Pi(),n.pingedLanes|=n.suspendedLanes&t,qn===n&&(ti&t)===t&&(On===4||On===3&&(ti&130023424)===ti&&500>En()-Ww?ll(n,0):jw|=t),Wi(n,e)}function rL(n,e){e===0&&(n.mode&1?(e=Ep,Ep<<=1,!(Ep&130023424)&&(Ep=4194304)):e=1);var t=Pi();n=to(n,e),n!==null&&(Qd(n,e,t),Wi(n,t))}function yF(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),rL(n,t)}function _F(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Ee(314))}i!==null&&i.delete(e),rL(n,t)}var sL;sL=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Gi.current)Hi=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Hi=!1,oF(n,e,t);Hi=!!(n.flags&131072)}else Hi=!1,nn&&e.flags&1048576&&c2(e,xg,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Xm(n,e),n=e.pendingProps;var r=lu(e,yi.current);iu(e,t),r=Fw(null,e,i,n,r,t);var s=zw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ji(i)?(s=!0,yg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Nw(e),r.updater=s0,e.stateNode=r,r._reactInternals=e,Ex(e,i,n,t),e=Ax(null,e,i,!0,s,t)):(e.tag=0,nn&&s&&bw(e),Ei(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(Xm(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=SF(i),n=Gr(i,n),r){case 0:e=bx(null,e,i,n,t);break e;case 1:e=nb(null,e,i,n,t);break e;case 11:e=eb(null,e,i,n,t);break e;case 14:e=tb(null,e,i,Gr(i.type,n),t);break e}throw Error(Ee(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gr(i,r),bx(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gr(i,r),nb(n,e,i,r,t);case 3:e:{if(H2(e),n===null)throw Error(Ee(387));i=e.pendingProps,s=e.memoizedState,r=s.element,m2(n,e),Mg(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=du(Error(Ee(423)),e),e=ib(n,e,i,t,r);break e}else if(i!==r){r=du(Error(Ee(424)),e),e=ib(n,e,i,t,r);break e}else for(or=$o(e.stateNode.containerInfo.firstChild),ar=e,nn=!0,$r=null,t=f2(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(cu(),i===r){e=no(n,e,t);break e}Ei(n,e,i,t)}e=e.child}return e;case 5:return g2(e),n===null&&Sx(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,gx(i,r)?o=null:s!==null&&gx(i,s)&&(e.flags|=32),V2(n,e),Ei(n,e,o,t),e.child;case 6:return n===null&&Sx(e),null;case 13:return G2(n,e,t);case 4:return Dw(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=uu(e,null,i,t):Ei(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gr(i,r),eb(n,e,i,r,t);case 7:return Ei(n,e,e.pendingProps,t),e.child;case 8:return Ei(n,e,e.pendingProps.children,t),e.child;case 12:return Ei(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,qt(Sg,i._currentValue),i._currentValue=o,s!==null)if(Jr(s.value,o)){if(s.children===r.children&&!Gi.current){e=no(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ys(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),wx(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ee(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),wx(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ei(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,iu(e,t),r=Nr(r),i=i(r),e.flags|=1,Ei(n,e,i,t),e.child;case 14:return i=e.type,r=Gr(i,e.pendingProps),r=Gr(i.type,r),tb(n,e,i,r,t);case 15:return z2(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Gr(i,r),Xm(n,e),e.tag=1,ji(i)?(n=!0,yg(e)):n=!1,iu(e,t),O2(e,i,r),Ex(e,i,r,t),Ax(null,e,i,!0,n,t);case 19:return j2(n,e,t);case 22:return B2(n,e,t)}throw Error(Ee(156,e.tag))};function oL(n,e){return NR(n,e)}function xF(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(n,e,t,i){return new xF(n,e,t,i)}function Yw(n){return n=n.prototype,!(!n||!n.isReactComponent)}function SF(n){if(typeof n=="function")return Yw(n)?1:0;if(n!=null){if(n=n.$$typeof,n===pw)return 11;if(n===mw)return 14}return 2}function Zo(n,e){var t=n.alternate;return t===null?(t=Rr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Ym(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")Yw(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Lc:return cl(t.children,r,s,e);case fw:o=8,r|=8;break;case q_:return n=Rr(12,t,e,r|2),n.elementType=q_,n.lanes=s,n;case Y_:return n=Rr(13,t,e,r),n.elementType=Y_,n.lanes=s,n;case K_:return n=Rr(19,t,e,r),n.elementType=K_,n.lanes=s,n;case gR:return l0(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pR:o=10;break e;case mR:o=9;break e;case pw:o=11;break e;case mw:o=14;break e;case No:o=16,i=null;break e}throw Error(Ee(130,n==null?n:typeof n,""))}return e=Rr(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function cl(n,e,t,i){return n=Rr(7,n,i,e),n.lanes=t,n}function l0(n,e,t,i){return n=Rr(22,n,i,e),n.elementType=gR,n.lanes=t,n.stateNode={isHidden:!1},n}function Dy(n,e,t){return n=Rr(6,n,null,e),n.lanes=t,n}function ky(n,e,t){return e=Rr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function wF(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=my(0),this.expirationTimes=my(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=my(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Kw(n,e,t,i,r,s,o,a,l){return n=new wF(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Rr(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nw(s),n}function MF(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rc,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function aL(n){if(!n)return ra;n=n._reactInternals;e:{if(Al(n)!==n||n.tag!==1)throw Error(Ee(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ji(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ee(171))}if(n.tag===1){var t=n.type;if(ji(t))return a2(n,t,e)}return e}function lL(n,e,t,i,r,s,o,a,l){return n=Kw(t,i,!0,n,r,s,o,a,l),n.context=aL(null),t=n.current,i=Pi(),r=Ko(t),s=Ys(i,r),s.callback=e??null,qo(t,s,r),n.current.lanes=r,Qd(n,r,i),Wi(n,i),n}function c0(n,e,t,i){var r=e.current,s=Pi(),o=Ko(r);return t=aL(t),e.context===null?e.context=t:e.pendingContext=t,e=Ys(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=qo(r,e,o),n!==null&&(Zr(n,r,o,s),Gm(n,r,o)),o}function Lg(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function fb(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Zw(n,e){fb(n,e),(n=n.alternate)&&fb(n,e)}function EF(){return null}var cL=typeof reportError=="function"?reportError:function(n){console.error(n)};function Jw(n){this._internalRoot=n}u0.prototype.render=Jw.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Ee(409));c0(n,e,null,null)};u0.prototype.unmount=Jw.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Sl(function(){c0(null,n,null,null)}),e[eo]=null}};function u0(n){this._internalRoot=n}u0.prototype.unstable_scheduleHydration=function(n){if(n){var e=BR();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Oo.length&&e!==0&&e<Oo[t].priority;t++);Oo.splice(t,0,n),t===0&&HR(n)}};function Qw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function h0(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function pb(){}function TF(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Lg(o);s.call(c)}}var o=lL(e,i,n,0,null,!1,!1,"",pb);return n._reactRootContainer=o,n[eo]=o.current,dd(n.nodeType===8?n.parentNode:n),Sl(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Lg(l);a.call(c)}}var l=Kw(n,0,!1,null,null,!1,!1,"",pb);return n._reactRootContainer=l,n[eo]=l.current,dd(n.nodeType===8?n.parentNode:n),Sl(function(){c0(e,l,t,i)}),l}function d0(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Lg(o);a.call(l)}}c0(e,o,n,r)}else o=TF(t,e,n,r,i);return Lg(o)}FR=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Rh(e.pendingLanes);t!==0&&(yw(e,t|1),Wi(e,En()),!(kt&6)&&(fu=En()+500,ha()))}break;case 13:Sl(function(){var i=to(n,1);if(i!==null){var r=Pi();Zr(i,n,1,r)}}),Zw(n,1)}};_w=function(n){if(n.tag===13){var e=to(n,134217728);if(e!==null){var t=Pi();Zr(e,n,134217728,t)}Zw(n,134217728)}};zR=function(n){if(n.tag===13){var e=Ko(n),t=to(n,e);if(t!==null){var i=Pi();Zr(t,n,e,i)}Zw(n,e)}};BR=function(){return Ht};VR=function(n,e){var t=Ht;try{return Ht=n,e()}finally{Ht=t}};ox=function(n,e,t){switch(e){case"input":if(Q_(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=n0(i);if(!r)throw Error(Ee(90));yR(i),Q_(i,r)}}}break;case"textarea":xR(n,t);break;case"select":e=t.value,e!=null&&Qc(n,!!t.multiple,e,!1)}};AR=Xw;CR=Sl;var bF={usingClientEntryPoint:!1,Events:[tf,kc,n0,TR,bR,Xw]},hh={findFiberByHostInstance:Ja,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AF={bundleType:hh.bundleType,version:hh.version,rendererPackageName:hh.rendererPackageName,rendererConfig:hh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lo.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=LR(n),n===null?null:n.stateNode},findFiberByHostInstance:hh.findFiberByHostInstance||EF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kp.isDisabled&&kp.supportsFiber)try{Jg=kp.inject(AF),ys=kp}catch{}}dr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bF;dr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qw(e))throw Error(Ee(200));return MF(n,e,null,t)};dr.createRoot=function(n,e){if(!Qw(n))throw Error(Ee(299));var t=!1,i="",r=cL;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Kw(n,1,!1,null,null,t,!1,i,r),n[eo]=e.current,dd(n.nodeType===8?n.parentNode:n),new Jw(e)};dr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Ee(188)):(n=Object.keys(n).join(","),Error(Ee(268,n)));return n=LR(e),n=n===null?null:n.stateNode,n};dr.flushSync=function(n){return Sl(n)};dr.hydrate=function(n,e,t){if(!h0(e))throw Error(Ee(200));return d0(null,n,e,!0,t)};dr.hydrateRoot=function(n,e,t){if(!Qw(n))throw Error(Ee(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=cL;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=lL(e,null,n,1,t??null,r,!1,s,o),n[eo]=e.current,dd(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new u0(e)};dr.render=function(n,e,t){if(!h0(e))throw Error(Ee(200));return d0(null,n,e,!1,t)};dr.unmountComponentAtNode=function(n){if(!h0(n))throw Error(Ee(40));return n._reactRootContainer?(Sl(function(){d0(null,null,n,!1,function(){n._reactRootContainer=null,n[eo]=null})}),!0):!1};dr.unstable_batchedUpdates=Xw;dr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!h0(t))throw Error(Ee(200));if(n==null||n._reactInternals===void 0)throw Error(Ee(38));return d0(n,e,t,!1,i)};dr.version="18.3.1-next-f1338f8080-20240426";function uL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uL)}catch(n){console.error(n)}}uL(),uR.exports=dr;var CF=uR.exports,hL,mb=CF;hL=mb.createRoot,mb.hydrateRoot;/**
 * @remix-run/router v1.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sd(){return Sd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Sd.apply(this,arguments)}var Go;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Go||(Go={}));const gb="popstate";function PF(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return zx("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Ig(r)}return LF(e,t,null,n)}function Ln(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dL(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function RF(){return Math.random().toString(36).substr(2,8)}function vb(n,e){return{usr:n.state,key:n.key,idx:e}}function zx(n,e,t,i){return t===void 0&&(t=null),Sd({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?bu(e):e,{state:t,key:e&&e.key||i||RF()})}function Ig(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function bu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function LF(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Go.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(Sd({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=Go.Pop;let _=d(),g=_==null?null:_-c;c=_,l&&l({action:a,location:M.location,delta:g})}function p(_,g){a=Go.Push;let w=zx(M.location,_,g);c=d()+1;let x=vb(w,c),T=M.createHref(w);try{o.pushState(x,"",T)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(T)}s&&l&&l({action:a,location:M.location,delta:1})}function m(_,g){a=Go.Replace;let w=zx(M.location,_,g);c=d();let x=vb(w,c),T=M.createHref(w);o.replaceState(x,"",T),s&&l&&l({action:a,location:M.location,delta:0})}function y(_){let g=r.location.origin!=="null"?r.location.origin:r.location.href,w=typeof _=="string"?_:Ig(_);return w=w.replace(/ $/,"%20"),Ln(g,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,g)}let M={get action(){return a},get location(){return n(r,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(gb,f),l=_,()=>{r.removeEventListener(gb,f),l=null}},createHref(_){return e(r,_)},createURL:y,encodeLocation(_){let g=y(_);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:m,go(_){return o.go(_)}};return M}var yb;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(yb||(yb={}));function IF(n,e,t){return t===void 0&&(t="/"),NF(n,e,t,!1)}function NF(n,e,t,i){let r=typeof e=="string"?bu(e):e,s=e1(r.pathname||"/",t);if(s==null)return null;let o=fL(n);DF(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=WF(s);a=GF(o[l],c,i)}return a}function fL(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ln(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Jo([i,l.relativePath]),d=t.concat(l);s.children&&s.children.length>0&&(Ln(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),fL(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:VF(c,s.index),routesMeta:d})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of pL(s.path))r(s,o,l)}),e}function pL(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=pL(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function DF(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:HF(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const kF=/^:[\w-]+$/,OF=3,UF=2,FF=1,zF=10,BF=-2,_b=n=>n==="*";function VF(n,e){let t=n.split("/"),i=t.length;return t.some(_b)&&(i+=BF),e&&(i+=UF),t.filter(r=>!_b(r)).reduce((r,s)=>r+(kF.test(s)?OF:s===""?FF:zF),i)}function HF(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function GF(n,e,t){let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=xb({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),p=l.route;if(!f&&c&&t&&!i[i.length-1].route.index&&(f=xb({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Jo([s,f.pathname]),pathnameBase:YF(Jo([s,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(s=Jo([s,f.pathnameBase]))}return o}function xb(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=jF(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,d,f)=>{let{paramName:p,isOptional:m}=d;if(p==="*"){let M=a[f]||"";o=s.slice(0,s.length-M.length).replace(/(.)\/+$/,"$1")}const y=a[f];return m&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function jF(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),dL(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function WF(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dL(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function e1(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function XF(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?bu(n):n;return{pathname:t?t.startsWith("/")?t:$F(t,e):e,search:KF(i),hash:ZF(r)}}function $F(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function Oy(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qF(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function mL(n,e){let t=qF(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function gL(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=bu(n):(r=Sd({},n),Ln(!r.pathname||!r.pathname.includes("?"),Oy("?","pathname","search",r)),Ln(!r.pathname||!r.pathname.includes("#"),Oy("#","pathname","hash",r)),Ln(!r.search||!r.search.includes("#"),Oy("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;r.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=XF(r,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Jo=n=>n.join("/").replace(/\/\/+/g,"/"),YF=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),KF=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,ZF=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function JF(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const vL=["post","put","patch","delete"];new Set(vL);const QF=["get",...vL];new Set(QF);/**
 * React Router v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wd(){return wd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},wd.apply(this,arguments)}const t1=G.createContext(null),ez=G.createContext(null),Cl=G.createContext(null),f0=G.createContext(null),Pl=G.createContext({outlet:null,matches:[],isDataRoute:!1}),yL=G.createContext(null);function tz(n,e){let{relative:t}=e===void 0?{}:e;rf()||Ln(!1);let{basename:i,navigator:r}=G.useContext(Cl),{hash:s,pathname:o,search:a}=xL(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:Jo([i,o])),r.createHref({pathname:l,search:a,hash:s})}function rf(){return G.useContext(f0)!=null}function p0(){return rf()||Ln(!1),G.useContext(f0).location}function _L(n){G.useContext(Cl).static||G.useLayoutEffect(n)}function sf(){let{isDataRoute:n}=G.useContext(Pl);return n?pz():nz()}function nz(){rf()||Ln(!1);let n=G.useContext(t1),{basename:e,future:t,navigator:i}=G.useContext(Cl),{matches:r}=G.useContext(Pl),{pathname:s}=p0(),o=JSON.stringify(mL(r,t.v7_relativeSplatPath)),a=G.useRef(!1);return _L(()=>{a.current=!0}),G.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=gL(c,JSON.parse(o),s,d.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Jo([e,f.pathname])),(d.replace?i.replace:i.push)(f,d.state,d)},[e,i,o,s,n])}function xL(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=G.useContext(Cl),{matches:r}=G.useContext(Pl),{pathname:s}=p0(),o=JSON.stringify(mL(r,i.v7_relativeSplatPath));return G.useMemo(()=>gL(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function iz(n,e){return rz(n,e)}function rz(n,e,t,i){rf()||Ln(!1);let{navigator:r,static:s}=G.useContext(Cl),{matches:o}=G.useContext(Pl),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let d=p0(),f;if(e){var p;let g=typeof e=="string"?bu(e):e;c==="/"||(p=g.pathname)!=null&&p.startsWith(c)||Ln(!1),f=g}else f=d;let m=f.pathname||"/",y=m;if(c!=="/"){let g=c.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(g.length).join("/")}let M=!s&&t&&t.matches&&t.matches.length>0?t.matches:IF(n,{pathname:y}),_=cz(M&&M.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Jo([c,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Jo([c,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,t,i);return e&&_?G.createElement(f0.Provider,{value:{location:wd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Go.Pop}},_):_}function sz(){let n=fz(),e=JF(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},e),t?G.createElement("pre",{style:r},t):null,null)}const oz=G.createElement(sz,null);class az extends G.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?G.createElement(Pl.Provider,{value:this.props.routeContext},G.createElement(yL.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lz(n){let{routeContext:e,match:t,children:i}=n,r=G.useContext(t1);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),G.createElement(Pl.Provider,{value:e},i)}function cz(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||Ln(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:p,errors:m}=t,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,p)=>{let m,y=!1,M=null,_=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,M=f.route.errorElement||oz,l&&(c<0&&p===0?(y=!0,_=null):c===p&&(y=!0,_=f.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,p+1)),w=()=>{let x;return m?x=M:y?x=_:f.route.Component?x=G.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=d,G.createElement(lz,{match:f,routeContext:{outlet:d,matches:g,isDataRoute:t!=null},children:x})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?G.createElement(az,{location:t.location,revalidation:t.revalidation,component:M,error:m,children:w(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):w()},null)}var SL=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(SL||{}),Ng=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Ng||{});function uz(n){let e=G.useContext(t1);return e||Ln(!1),e}function hz(n){let e=G.useContext(ez);return e||Ln(!1),e}function dz(n){let e=G.useContext(Pl);return e||Ln(!1),e}function wL(n){let e=dz(),t=e.matches[e.matches.length-1];return t.route.id||Ln(!1),t.route.id}function fz(){var n;let e=G.useContext(yL),t=hz(Ng.UseRouteError),i=wL(Ng.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function pz(){let{router:n}=uz(SL.UseNavigateStable),e=wL(Ng.UseNavigateStable),t=G.useRef(!1);return _L(()=>{t.current=!0}),G.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,wd({fromRouteId:e},s)))},[n,e])}function mz(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Po(n){Ln(!1)}function gz(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Go.Pop,navigator:s,static:o=!1,future:a}=n;rf()&&Ln(!1);let l=e.replace(/^\/*/,"/"),c=G.useMemo(()=>({basename:l,navigator:s,static:o,future:wd({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=bu(i));let{pathname:d="/",search:f="",hash:p="",state:m=null,key:y="default"}=i,M=G.useMemo(()=>{let _=e1(d,l);return _==null?null:{location:{pathname:_,search:f,hash:p,state:m,key:y},navigationType:r}},[l,d,f,p,m,y,r]);return M==null?null:G.createElement(Cl.Provider,{value:c},G.createElement(f0.Provider,{children:t,value:M}))}function vz(n){let{children:e,location:t}=n;return iz(Bx(e),t)}new Promise(()=>{});function Bx(n,e){e===void 0&&(e=[]);let t=[];return G.Children.forEach(n,(i,r)=>{if(!G.isValidElement(i))return;let s=[...e,r];if(i.type===G.Fragment){t.push.apply(t,Bx(i.props.children,s));return}i.type!==Po&&Ln(!1),!i.props.index||!i.props.children||Ln(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Bx(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.29.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vx(){return Vx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Vx.apply(this,arguments)}function yz(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function _z(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function xz(n,e){return n.button===0&&(!e||e==="_self")&&!_z(n)}const Sz=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wz="6";try{window.__reactRouterVersion=wz}catch{}const Mz="startTransition",Sb=vO[Mz];function Ez(n){let{basename:e,children:t,future:i,window:r}=n,s=G.useRef();s.current==null&&(s.current=PF({window:r,v5Compat:!0}));let o=s.current,[a,l]=G.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},d=G.useCallback(f=>{c&&Sb?Sb(()=>l(f)):l(f)},[l,c]);return G.useLayoutEffect(()=>o.listen(d),[o,d]),G.useEffect(()=>mz(i),[i]),G.createElement(gz,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const Tz=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Va=G.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,viewTransition:f}=e,p=yz(e,Sz),{basename:m}=G.useContext(Cl),y,M=!1;if(typeof c=="string"&&bz.test(c)&&(y=c,Tz))try{let x=new URL(window.location.href),T=c.startsWith("//")?new URL(x.protocol+c):new URL(c),C=e1(T.pathname,m);T.origin===x.origin&&C!=null?c=C+T.search+T.hash:M=!0}catch{}let _=tz(c,{relative:r}),g=Az(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:r,viewTransition:f});function w(x){i&&i(x),x.defaultPrevented||g(x)}return G.createElement("a",Vx({},p,{href:y||_,onClick:M||s?i:w,ref:t,target:l}))});var wb;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(wb||(wb={}));var Mb;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Mb||(Mb={}));function Az(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=sf(),c=p0(),d=xL(n,{relative:o});return G.useCallback(f=>{if(xz(f,t)){f.preventDefault();let p=i!==void 0?i:Ig(c)===Ig(d);l(n,{replace:p,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,d,i,r,t,n,s,o,a])}let Cz={data:""},Pz=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||Cz,Rz=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Lz=/\/\*[^]*?\*\/|  +/g,Eb=/\n+/g,Fo=(n,e)=>{let t="",i="",r="";for(let s in n){let o=n[s];s[0]=="@"?s[1]=="i"?t=s+" "+o+";":i+=s[1]=="f"?Fo(o,s):s+"{"+Fo(o,s[1]=="k"?"":e)+"}":typeof o=="object"?i+=Fo(o,e?e.replace(/([^,])+/g,a=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,l=>/&/.test(l)?l.replace(/&/g,a):a?a+" "+l:l)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Fo.p?Fo.p(s,o):s+":"+o+";")}return t+(e&&r?e+"{"+r+"}":r)+i},Ns={},ML=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+ML(n[t]);return e}return n},Iz=(n,e,t,i,r)=>{let s=ML(n),o=Ns[s]||(Ns[s]=(l=>{let c=0,d=11;for(;c<l.length;)d=101*d+l.charCodeAt(c++)>>>0;return"go"+d})(s));if(!Ns[o]){let l=s!==n?n:(c=>{let d,f,p=[{}];for(;d=Rz.exec(c.replace(Lz,""));)d[4]?p.shift():d[3]?(f=d[3].replace(Eb," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][d[1]]=d[2].replace(Eb," ").trim();return p[0]})(n);Ns[o]=Fo(r?{["@keyframes "+o]:l}:l,t?"":"."+o)}let a=t&&Ns.g?Ns.g:null;return t&&(Ns.g=Ns[o]),((l,c,d,f)=>{f?c.data=c.data.replace(f,l):c.data.indexOf(l)===-1&&(c.data=d?l+c.data:c.data+l)})(Ns[o],e,i,a),o},Nz=(n,e,t)=>n.reduce((i,r,s)=>{let o=e[s];if(o&&o.call){let a=o(t),l=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=l?"."+l:a&&typeof a=="object"?a.props?"":Fo(a,""):a===!1?"":a}return i+r+(o??"")},"");function m0(n){let e=this||{},t=n.call?n(e.p):n;return Iz(t.unshift?t.raw?Nz(t,[].slice.call(arguments,1),e.p):t.reduce((i,r)=>Object.assign(i,r&&r.call?r(e.p):r),{}):t,Pz(e.target),e.g,e.o,e.k)}let EL,Hx,Gx;m0.bind({g:1});let io=m0.bind({k:1});function Dz(n,e,t,i){Fo.p=e,EL=n,Hx=t,Gx=i}function da(n,e){let t=this||{};return function(){let i=arguments;function r(s,o){let a=Object.assign({},s),l=a.className||r.className;t.p=Object.assign({theme:Hx&&Hx()},a),t.o=/ *go\d+/.test(l),a.className=m0.apply(t,i)+(l?" "+l:"");let c=n;return n[0]&&(c=a.as||n,delete a.as),Gx&&c[0]&&Gx(a),EL(c,a)}return r}}var kz=n=>typeof n=="function",Dg=(n,e)=>kz(n)?n(e):n,Oz=(()=>{let n=0;return()=>(++n).toString()})(),TL=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),Uz=20,bL=(n,e)=>{switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,Uz)};case 1:return{...n,toasts:n.toasts.map(s=>s.id===e.toast.id?{...s,...e.toast}:s)};case 2:let{toast:t}=e;return bL(n,{type:n.toasts.find(s=>s.id===t.id)?1:0,toast:t});case 3:let{toastId:i}=e;return{...n,toasts:n.toasts.map(s=>s.id===i||i===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(s=>s.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let r=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+r}))}}},Km=[],tl={toasts:[],pausedAt:void 0},Rl=n=>{tl=bL(tl,n),Km.forEach(e=>{e(tl)})},Fz={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},zz=(n={})=>{let[e,t]=G.useState(tl),i=G.useRef(tl);G.useEffect(()=>(i.current!==tl&&t(tl),Km.push(t),()=>{let s=Km.indexOf(t);s>-1&&Km.splice(s,1)}),[]);let r=e.toasts.map(s=>{var o,a,l;return{...n,...n[s.type],...s,removeDelay:s.removeDelay||((o=n[s.type])==null?void 0:o.removeDelay)||(n==null?void 0:n.removeDelay),duration:s.duration||((a=n[s.type])==null?void 0:a.duration)||(n==null?void 0:n.duration)||Fz[s.type],style:{...n.style,...(l=n[s.type])==null?void 0:l.style,...s.style}}});return{...e,toasts:r}},Bz=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:(t==null?void 0:t.id)||Oz()}),of=n=>(e,t)=>{let i=Bz(e,n,t);return Rl({type:2,toast:i}),i.id},Ti=(n,e)=>of("blank")(n,e);Ti.error=of("error");Ti.success=of("success");Ti.loading=of("loading");Ti.custom=of("custom");Ti.dismiss=n=>{Rl({type:3,toastId:n})};Ti.remove=n=>Rl({type:4,toastId:n});Ti.promise=(n,e,t)=>{let i=Ti.loading(e.loading,{...t,...t==null?void 0:t.loading});return typeof n=="function"&&(n=n()),n.then(r=>{let s=e.success?Dg(e.success,r):void 0;return s?Ti.success(s,{id:i,...t,...t==null?void 0:t.success}):Ti.dismiss(i),r}).catch(r=>{let s=e.error?Dg(e.error,r):void 0;s?Ti.error(s,{id:i,...t,...t==null?void 0:t.error}):Ti.dismiss(i)}),n};var Vz=(n,e)=>{Rl({type:1,toast:{id:n,height:e}})},Hz=()=>{Rl({type:5,time:Date.now()})},Xh=new Map,Gz=1e3,jz=(n,e=Gz)=>{if(Xh.has(n))return;let t=setTimeout(()=>{Xh.delete(n),Rl({type:4,toastId:n})},e);Xh.set(n,t)},Wz=n=>{let{toasts:e,pausedAt:t}=zz(n);G.useEffect(()=>{if(t)return;let s=Date.now(),o=e.map(a=>{if(a.duration===1/0)return;let l=(a.duration||0)+a.pauseDuration-(s-a.createdAt);if(l<0){a.visible&&Ti.dismiss(a.id);return}return setTimeout(()=>Ti.dismiss(a.id),l)});return()=>{o.forEach(a=>a&&clearTimeout(a))}},[e,t]);let i=G.useCallback(()=>{t&&Rl({type:6,time:Date.now()})},[t]),r=G.useCallback((s,o)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:c}=o||{},d=e.filter(m=>(m.position||c)===(s.position||c)&&m.height),f=d.findIndex(m=>m.id===s.id),p=d.filter((m,y)=>y<f&&m.visible).length;return d.filter(m=>m.visible).slice(...a?[p+1]:[0,p]).reduce((m,y)=>m+(y.height||0)+l,0)},[e]);return G.useEffect(()=>{e.forEach(s=>{if(s.dismissed)jz(s.id,s.removeDelay);else{let o=Xh.get(s.id);o&&(clearTimeout(o),Xh.delete(s.id))}})},[e]),{toasts:e,handlers:{updateHeight:Vz,startPause:Hz,endPause:i,calculateOffset:r}}},Xz=io`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,$z=io`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qz=io`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Yz=da("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Xz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${$z} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${qz} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Kz=io`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Zz=da("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${Kz} 1s linear infinite;
`,Jz=io`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Qz=io`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,eB=da("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Jz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Qz} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,tB=da("div")`
  position: absolute;
`,nB=da("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,iB=io`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rB=da("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${iB} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,sB=({toast:n})=>{let{icon:e,type:t,iconTheme:i}=n;return e!==void 0?typeof e=="string"?G.createElement(rB,null,e):e:t==="blank"?null:G.createElement(nB,null,G.createElement(Zz,{...i}),t!=="loading"&&G.createElement(tB,null,t==="error"?G.createElement(Yz,{...i}):G.createElement(eB,{...i})))},oB=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,aB=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,lB="0%{opacity:0;} 100%{opacity:1;}",cB="0%{opacity:1;} 100%{opacity:0;}",uB=da("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,hB=da("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,dB=(n,e)=>{let t=n.includes("top")?1:-1,[i,r]=TL()?[lB,cB]:[oB(t),aB(t)];return{animation:e?`${io(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${io(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},fB=G.memo(({toast:n,position:e,style:t,children:i})=>{let r=n.height?dB(n.position||e||"top-center",n.visible):{opacity:0},s=G.createElement(sB,{toast:n}),o=G.createElement(hB,{...n.ariaProps},Dg(n.message,n));return G.createElement(uB,{className:n.className,style:{...r,...t,...n.style}},typeof i=="function"?i({icon:s,message:o}):G.createElement(G.Fragment,null,s,o))});Dz(G.createElement);var pB=({id:n,className:e,style:t,onHeightUpdate:i,children:r})=>{let s=G.useCallback(o=>{if(o){let a=()=>{let l=o.getBoundingClientRect().height;i(n,l)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,i]);return G.createElement("div",{ref:s,className:e,style:t},r)},mB=(n,e)=>{let t=n.includes("top"),i=t?{top:0}:{bottom:0},r=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:TL()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...i,...r}},gB=m0`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Op=16,vB=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:i,children:r,containerStyle:s,containerClassName:o})=>{let{toasts:a,handlers:l}=Wz(t);return G.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Op,left:Op,right:Op,bottom:Op,pointerEvents:"none",...s},className:o,onMouseEnter:l.startPause,onMouseLeave:l.endPause},a.map(c=>{let d=c.position||e,f=l.calculateOffset(c,{reverseOrder:n,gutter:i,defaultPosition:e}),p=mB(d,f);return G.createElement(pB,{id:c.id,key:c.id,onHeightUpdate:l.updateHeight,className:c.visible?gB:"",style:p},c.type==="custom"?Dg(c.message,c):r?r(c):G.createElement(fB,{toast:c,position:d}))}))},bi=Ti;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),zn=(n,e)=>{const t=G.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...c},d)=>G.createElement("svg",{ref:d,...yB,width:r,height:r,stroke:i,strokeWidth:o?Number(s)*24/Number(r):s,className:["lucide",`lucide-${_B(n)}`,a].join(" "),...c},[...e.map(([f,p])=>G.createElement(f,p)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=zn("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=zn("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SB=zn("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=zn("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MB=zn("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=zn("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TB=zn("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=zn("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=zn("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=zn("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=zn("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=zn("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nl=zn("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=zn("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=zn("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=zn("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=zn("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=zn("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=zn("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),IB="modulepreload",NB=function(n){return"/"+n},Tb={},pu=function(e,t,i){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(t.map(l=>{if(l=NB(l),l in Tb)return;Tb[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":IB,c||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},DB=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>pu(async()=>{const{default:i}=await Promise.resolve().then(()=>Au);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)};class n1 extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class kB extends n1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class OB extends n1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class UB extends n1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var jx;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(jx||(jx={}));var FB=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class zB{constructor(e,{headers:t={},customFetch:i,region:r=jx.Any}={}){this.url=e,this.headers=t,this.region=r,this.fetch=DB(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var i;return FB(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:o}=t;let a={},{region:l}=t;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),r),body:c}).catch(y=>{throw new kB(y)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new OB(d);if(!d.ok)throw new UB(d);let p=((i=d.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield d.json():p==="application/octet-stream"?m=yield d.blob():p==="text/event-stream"?m=d:p==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(r){return{data:null,error:r}}})}}var Vi={},i1={},g0={},af={},v0={},y0={},BB=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mu=BB();const VB=mu.fetch,IL=mu.fetch.bind(mu),NL=mu.Headers,HB=mu.Request,GB=mu.Response,Au=Object.freeze(Object.defineProperty({__proto__:null,Headers:NL,Request:HB,Response:GB,default:IL,fetch:VB},Symbol.toStringTag,{value:"Module"})),jB=eO(Au);var _0={};Object.defineProperty(_0,"__esModule",{value:!0});let WB=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};_0.default=WB;var DL=Ir&&Ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(y0,"__esModule",{value:!0});const XB=DL(jB),$B=DL(_0);let qB=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=XB.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,d=null,f=null,p=s.status,m=s.statusText;if(s.ok){if(this.method!=="HEAD"){const g=await s.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=g:d=JSON.parse(g))}const M=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),_=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");M&&_&&_.length>1&&(f=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,p=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const M=await s.text();try{c=JSON.parse(M),Array.isArray(c)&&s.status===404&&(d=[],c=null,p=200,m="OK")}catch{s.status===404&&M===""?(p=204,m="No Content"):c={message:M}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,p=200,m="OK"),c&&this.shouldThrowOnError)throw new $B.default(c)}return{error:c,data:d,count:f,status:p,statusText:m}});return this.shouldThrowOnError||(r=r.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}};y0.default=qB;var YB=Ir&&Ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(v0,"__esModule",{value:!0});const KB=YB(y0);let ZB=class extends KB.default{select(e){let t=!1;const i=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:i,foreignTable:r,referencedTable:s=r}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:i=t}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:i,referencedTable:r=i}={}){const s=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:i=!1,buffers:r=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,t?"verbose":null,i?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};v0.default=ZB;var JB=Ir&&Ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(af,"__esModule",{value:!0});const QB=JB(v0);let e4=class extends QB.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const i=Array.from(new Set(t)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${i})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:i,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const o=i===void 0?"":`(${i})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,i])=>{this.url.searchParams.append(t,`eq.${i}`)}),this}not(e,t,i){return this.url.searchParams.append(e,`not.${t}.${i}`),this}or(e,{foreignTable:t,referencedTable:i=t}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,i){return this.url.searchParams.append(e,`${t}.${i}`),this}};af.default=e4;var t4=Ir&&Ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(g0,"__esModule",{value:!0});const dh=t4(af);let n4=class{constructor(e,{headers:t={},schema:i,fetch:r}){this.url=e,this.headers=t,this.schema=i,this.fetch=r}select(e,{head:t=!1,count:i}={}){const r=t?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),i&&(this.headers.Prefer=`count=${i}`),new dh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:i=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),i||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new dh.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:i=!1,count:r,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${i?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new dh.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new dh.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",i=[];return e&&i.push(`count=${e}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new dh.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};g0.default=n4;var x0={},S0={};Object.defineProperty(S0,"__esModule",{value:!0});S0.version=void 0;S0.version="0.0.0-automated";Object.defineProperty(x0,"__esModule",{value:!0});x0.DEFAULT_HEADERS=void 0;const i4=S0;x0.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${i4.version}`};var kL=Ir&&Ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(i1,"__esModule",{value:!0});const r4=kL(g0),s4=kL(af),o4=x0;let a4=class OL{constructor(e,{headers:t={},schema:i,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},o4.DEFAULT_HEADERS),t),this.schemaName=i,this.fetch=r}from(e){const t=new URL(`${this.url}/${e}`);return new r4.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new OL(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:i=!1,get:r=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;i||r?(o=i?"HEAD":"GET",Object.entries(t).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(o="POST",l=t);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new s4.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};i1.default=a4;var Cu=Ir&&Ir.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Vi,"__esModule",{value:!0});Vi.PostgrestError=Vi.PostgrestBuilder=Vi.PostgrestTransformBuilder=Vi.PostgrestFilterBuilder=Vi.PostgrestQueryBuilder=Vi.PostgrestClient=void 0;const UL=Cu(i1);Vi.PostgrestClient=UL.default;const FL=Cu(g0);Vi.PostgrestQueryBuilder=FL.default;const zL=Cu(af);Vi.PostgrestFilterBuilder=zL.default;const BL=Cu(v0);Vi.PostgrestTransformBuilder=BL.default;const VL=Cu(y0);Vi.PostgrestBuilder=VL.default;const HL=Cu(_0);Vi.PostgrestError=HL.default;var l4=Vi.default={PostgrestClient:UL.default,PostgrestQueryBuilder:FL.default,PostgrestFilterBuilder:zL.default,PostgrestTransformBuilder:BL.default,PostgrestBuilder:VL.default,PostgrestError:HL.default};const{PostgrestClient:c4,PostgrestQueryBuilder:CK,PostgrestFilterBuilder:PK,PostgrestTransformBuilder:RK,PostgrestBuilder:LK,PostgrestError:IK}=l4,u4="2.11.2",h4={"X-Client-Info":`realtime-js/${u4}`},d4="1.0.0",GL=1e4,f4=1e3;var su;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(su||(su={}));var er;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(er||(er={}));var Xr;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Xr||(Xr={}));var Wx;(function(n){n.websocket="websocket"})(Wx||(Wx={}));var Ya;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ya||(Ya={}));class p4{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),i=new TextDecoder;return this._decodeBroadcast(e,t,i)}_decodeBroadcast(e,t,i){const r=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=i.decode(e.slice(o,o+r));o=o+r;const l=i.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(i.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class jL{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Xt||(Xt={}));const bb=(n,e,t={})=>{var i;const r=(i=t.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(e).reduce((s,o)=>(s[o]=m4(o,n,e,r),s),{})},m4=(n,e,t,i)=>{const r=e.find(a=>a.name===n),s=r==null?void 0:r.type,o=t[n];return s&&!i.includes(s)?WL(s,o):Xx(o)},WL=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return _4(e,t)}switch(n){case Xt.bool:return g4(e);case Xt.float4:case Xt.float8:case Xt.int2:case Xt.int4:case Xt.int8:case Xt.numeric:case Xt.oid:return v4(e);case Xt.json:case Xt.jsonb:return y4(e);case Xt.timestamp:return x4(e);case Xt.abstime:case Xt.date:case Xt.daterange:case Xt.int4range:case Xt.int8range:case Xt.money:case Xt.reltime:case Xt.text:case Xt.time:case Xt.timestamptz:case Xt.timetz:case Xt.tsrange:case Xt.tstzrange:return Xx(e);default:return Xx(e)}},Xx=n=>n,g4=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},v4=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},y4=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},_4=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let s;const o=n.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>WL(e,a))}return n},x4=n=>typeof n=="string"?n.replace(" ","T"):n,XL=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Uy{constructor(e,t,i={},r=GL){this.channel=e,this.event=t,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Ab;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Ab||(Ab={}));class $h{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$h.syncState(this.state,r,s,o),this.pendingDiffs.forEach(l=>{this.state=$h.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(i.diff,{},r=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=$h.syncDiff(this.state,r,s,o),a())}),this.onJoin((r,s,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:o})}),this.onLeave((r,s,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,r){const s=this.cloneDeep(e),o=this.transformState(t),a={},l={};return this.map(s,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const f=s[c];if(f){const p=d.map(_=>_.presence_ref),m=f.map(_=>_.presence_ref),y=d.filter(_=>m.indexOf(_.presence_ref)<0),M=f.filter(_=>p.indexOf(_.presence_ref)<0);y.length>0&&(a[c]=y),M.length>0&&(l[c]=M)}else a[c]=d}),this.syncDiff(s,{joins:a,leaves:l},i,r)}static syncDiff(e,t,i,r){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(s,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const f=e[a].map(m=>m.presence_ref),p=d.filter(m=>f.indexOf(m.presence_ref)<0);e[a].unshift(...p)}i(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),e[a]=c,r(a,c,l),c.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const r=e[i];return"metas"in r?t[i]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[i]=r,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Cb;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Cb||(Cb={}));var Pb;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Pb||(Pb={}));var Vs;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Vs||(Vs={}));class r1{constructor(e,t={config:{}},i){this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=er.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Uy(this,Xr.join,this.params,this.timeout),this.rejoinTimer=new jL(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=er.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=er.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=er.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=er.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xr.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new $h(this),this.broadcastEndpointURL=XL(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Vs.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Vs.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(d=>d.filter))!==null&&r!==void 0?r:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(Vs.SUBSCRIBED);return}else{const p=this.bindings.postgres_changes,m=(f=p==null?void 0:p.length)!==null&&f!==void 0?f:0,y=[];for(let M=0;M<m;M++){const _=p[M],{filter:{event:g,schema:w,table:x,filter:T}}=_,C=d&&d[M];if(C&&C.event===g&&C.schema===w&&C.table===x&&C.filter===T)y.push(Object.assign(Object.assign({},_),{id:C.id}));else{this.unsubscribe(),e==null||e(Vs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Vs.SUBSCRIBED);return}}).receive("error",d=>{e==null||e(Vs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Vs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this._on(e,t,i)}async send(e,t={}){var i,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=c.body)===null||r===void 0?void 0:r.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=er.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(i=>{const r=new Uy(this,Xr.leave,{},e);r.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}async _fetchWithTimeout(e,t,i){const r=new AbortController,s=setTimeout(()=>r.abort(),i),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:r.signal}));return clearTimeout(s),o}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Uy(this,e,t,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var r,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=Xr;if(i&&[a,l,c,d].indexOf(o)>=0&&i!==this._joinRef())return;let p=this._onMessage(o,t,i);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var y,M,_;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((_=(M=m.filter)===null||M===void 0?void 0:M.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(m=>m.callback(p,i)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var y,M,_,g,w,x;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const T=m.id,C=(y=m.filter)===null||y===void 0?void 0:y.event;return T&&((M=t.ids)===null||M===void 0?void 0:M.includes(T))&&(C==="*"||(C==null?void 0:C.toLocaleLowerCase())===((_=t.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const T=(w=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return T==="*"||T===((x=t==null?void 0:t.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:M,table:_,commit_timestamp:g,type:w,errors:x}=y;p=Object.assign(Object.assign({},{schema:M,table:_,commit_timestamp:g,eventType:w,new:{},old:{},errors:x}),this._getPayloadRecords(y))}m.callback(p,i)})}_isClosed(){return this.state===er.closed}_isJoined(){return this.state===er.joined}_isJoining(){return this.state===er.joining}_isLeaving(){return this.state===er.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const r=e.toLocaleLowerCase(),s={type:r,filter:t,callback:i};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===i&&r1.isEqual(r.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xr.close,{},e)}_onError(e){this._on(Xr.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=er.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=bb(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=bb(e.columns,e.old_record)),t}}const S4=()=>{},w4=typeof WebSocket<"u",M4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class E4{constructor(e,t){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=h4,this.params={},this.timeout=GL,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=S4,this.conn=null,this.sendBuffer=[],this.serializer=new p4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>pu(async()=>{const{default:l}=await Promise.resolve().then(()=>Au);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Wx.websocket}`,this.httpEndpoint=XL(e),t!=null&&t.transport?this.transport=t.transport:this.transport=null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const r=(i=t==null?void 0:t.params)===null||i===void 0?void 0:i.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new jL(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(t==null?void 0:t.fetch),t!=null&&t.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(t==null?void 0:t.worker)||!1,this.workerUrl=t==null?void 0:t.workerUrl}this.accessToken=(t==null?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});return}if(w4){this.conn=new WebSocket(this.endpointURL()),this.setupConnection();return}this.conn=new T4(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),pu(async()=>{const{default:e}=await import("./browser-CWQkkIdA.js").then(t=>t.b);return{default:e}},[]).then(({default:e})=>{this.conn=new e(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:d4}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case su.connecting:return Ya.Connecting;case su.open:return Ya.Open;case su.closing:return Ya.Closing;default:return Ya.Closed}}isConnected(){return this.connectionState()===Ya.Open}channel(e,t={config:{}}){const i=new r1(`realtime:${e}`,t,this);return this.channels.push(i),i}push(e){const{topic:t,event:i,payload:r,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${t} ${i} (${s})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(t){let i=null;try{i=JSON.parse(atob(t.split(".")[1]))}catch{}if(i&&i.exp&&!(Math.floor(Date.now()/1e3)-i.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${i.exp}`);this.accessTokenValue=t,this.channels.forEach(r=>{t&&r.updateJoinPayload({access_token:t}),r.joinedOnce&&r._isJoined()&&r._push(Xr.access_token,{access_token:t})})}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(f4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:i,event:r,payload:s,ref:o}=t;o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${i} ${r} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(i)).forEach(a=>a._trigger(r,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xr.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",r=new URLSearchParams(t);return`${e}${i}${r}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([M4],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}}class T4{constructor(e,t,i){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=su.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=i.close}}class s1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Xn(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class b4 extends s1{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class $x extends s1{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var A4=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const $L=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>pu(async()=>{const{default:i}=await Promise.resolve().then(()=>Au);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},C4=()=>A4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pu(()=>Promise.resolve().then(()=>Au),void 0)).Response:Response}),qx=n=>{if(Array.isArray(n))return n.map(t=>qx(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const r=t.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[r]=qx(i)}),e};var Ll=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const Fy=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),P4=(n,e,t)=>Ll(void 0,void 0,void 0,function*(){const i=yield C4();n instanceof i&&!(t!=null&&t.noResolveJson)?n.json().then(r=>{e(new b4(Fy(r),n.status||500))}).catch(r=>{e(new $x(Fy(r),r))}):e(new $x(Fy(n),n))}),R4=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i&&(r.body=JSON.stringify(i)),Object.assign(Object.assign({},r),t))};function lf(n,e,t,i,r,s){return Ll(this,void 0,void 0,function*(){return new Promise((o,a)=>{n(t,R4(e,i,r,s)).then(l=>{if(!l.ok)throw l;return i!=null&&i.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>P4(l,a,i))})})}function kg(n,e,t,i){return Ll(this,void 0,void 0,function*(){return lf(n,"GET",e,t,i)})}function ko(n,e,t,i,r){return Ll(this,void 0,void 0,function*(){return lf(n,"POST",e,i,r,t)})}function L4(n,e,t,i,r){return Ll(this,void 0,void 0,function*(){return lf(n,"PUT",e,i,r,t)})}function I4(n,e,t,i){return Ll(this,void 0,void 0,function*(){return lf(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),i)})}function qL(n,e,t,i,r){return Ll(this,void 0,void 0,function*(){return lf(n,"DELETE",e,i,r,t)})}var Fi=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const N4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rb={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class D4{constructor(e,t={},i,r){this.url=e,this.headers=t,this.bucketId=i,this.fetch=$L(r)}uploadOrUpdate(e,t,i,r){return Fi(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},Rb),r);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&i instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",i)):typeof FormData<"u"&&i instanceof FormData?(s=i,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=i,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),r!=null&&r.headers&&(a=Object.assign(Object.assign({},a),r.headers));const c=this._removeEmptyFolders(t),d=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),p=yield f.json();return f.ok?{data:{path:c,id:p.Id,fullPath:p.Key},error:null}:{data:null,error:p}}catch(s){if(Xn(s))return{data:null,error:s};throw s}})}upload(e,t,i){return Fi(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,i)})}uploadToSignedUrl(e,t,i,r){return Fi(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let l;const c=Object.assign({upsert:Rb.upsert},r),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.append("cacheControl",c.cacheControl)):(l=i,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),p=yield f.json();return f.ok?{data:{path:s,fullPath:p.Key},error:null}:{data:null,error:p}}catch(l){if(Xn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,t){return Fi(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e);const r=Object.assign({},this.headers);t!=null&&t.upsert&&(r["x-upsert"]="true");const s=yield ko(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new s1("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(i){if(Xn(i))return{data:null,error:i};throw i}})}update(e,t,i){return Fi(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,i)})}move(e,t,i){return Fi(this,void 0,void 0,function*(){try{return{data:yield ko(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Xn(r))return{data:null,error:r};throw r}})}copy(e,t,i){return Fi(this,void 0,void 0,function*(){try{return{data:{path:(yield ko(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Xn(r))return{data:null,error:r};throw r}})}createSignedUrl(e,t,i){return Fi(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield ko(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:t},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const o=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(r){if(Xn(r))return{data:null,error:r};throw r}})}createSignedUrls(e,t,i){return Fi(this,void 0,void 0,function*(){try{const r=yield ko(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(r){if(Xn(r))return{data:null,error:r};throw r}})}download(e,t){return Fi(this,void 0,void 0,function*(){const r=typeof(t==null?void 0:t.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((t==null?void 0:t.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield kg(this.fetch,`${this.url}/${r}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Xn(a))return{data:null,error:a};throw a}})}info(e){return Fi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const i=yield kg(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:qx(i),error:null}}catch(i){if(Xn(i))return{data:null,error:i};throw i}})}exists(e){return Fi(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield I4(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(Xn(i)&&i instanceof $x){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(e,t){const i=this._getFinalPath(e),r=[],s=t!=null&&t.download?`download=${t.download===!0?"":t.download}`:"";s!==""&&r.push(s);const a=typeof(t==null?void 0:t.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((t==null?void 0:t.transform)||{});l!==""&&r.push(l);let c=r.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${i}${c}`)}}}remove(e){return Fi(this,void 0,void 0,function*(){try{return{data:yield qL(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Xn(t))return{data:null,error:t};throw t}})}list(e,t,i){return Fi(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},N4),t),{prefix:e||""});return{data:yield ko(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(Xn(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const k4="2.7.1",O4={"X-Client-Info":`storage-js/${k4}`};var nc=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class U4{constructor(e,t={},i){this.url=e,this.headers=Object.assign(Object.assign({},O4),t),this.fetch=$L(i)}listBuckets(){return nc(this,void 0,void 0,function*(){try{return{data:yield kg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Xn(e))return{data:null,error:e};throw e}})}getBucket(e){return nc(this,void 0,void 0,function*(){try{return{data:yield kg(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Xn(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return nc(this,void 0,void 0,function*(){try{return{data:yield ko(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Xn(i))return{data:null,error:i};throw i}})}updateBucket(e,t){return nc(this,void 0,void 0,function*(){try{return{data:yield L4(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(Xn(i))return{data:null,error:i};throw i}})}emptyBucket(e){return nc(this,void 0,void 0,function*(){try{return{data:yield ko(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Xn(t))return{data:null,error:t};throw t}})}deleteBucket(e){return nc(this,void 0,void 0,function*(){try{return{data:yield qL(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Xn(t))return{data:null,error:t};throw t}})}}class F4 extends U4{constructor(e,t={},i){super(e,t,i)}from(e){return new D4(this.url,this.headers,e,this.fetch)}}const z4="2.48.1";let Ih="";typeof Deno<"u"?Ih="deno":typeof document<"u"?Ih="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ih="react-native":Ih="node";const B4={"X-Client-Info":`supabase-js-${Ih}/${z4}`},V4={headers:B4},H4={schema:"public"},G4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},j4={};var W4=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};const X4=n=>{let e;return n?e=n:typeof fetch>"u"?e=IL:e=fetch,(...t)=>e(...t)},$4=()=>typeof Headers>"u"?NL:Headers,q4=(n,e,t)=>{const i=X4(t),r=$4();return(s,o)=>W4(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:n;let c=new r(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",n),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),i(s,Object.assign(Object.assign({},o),{headers:c}))})};var Y4=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};function K4(n){return n.replace(/\/$/,"")}function Z4(n,e){const{db:t,auth:i,realtime:r,global:s}=n,{db:o,auth:a,realtime:l,global:c}=e,d={db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),i),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},c),s),accessToken:()=>Y4(this,void 0,void 0,function*(){return""})};return n.accessToken?d.accessToken=n.accessToken:delete d.accessToken,d}const YL="2.67.3",J4="http://localhost:9999",Q4="supabase.auth.token",eV={"X-Client-Info":`gotrue-js/${YL}`},Lb=10,Yx="X-Supabase-Api-Version",KL={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function tV(n){return Math.round(Date.now()/1e3)+n}function nV(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const ds=()=>typeof window<"u"&&typeof document<"u",Aa={tested:!1,writable:!1},qh=()=>{if(!ds())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Aa.tested)return Aa.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Aa.tested=!0,Aa.writable=!0}catch{Aa.tested=!0,Aa.writable=!1}return Aa.writable};function iV(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return t.searchParams.forEach((i,r)=>{e[r]=i}),e}const ZL=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>pu(async()=>{const{default:i}=await Promise.resolve().then(()=>Au);return{default:i}},void 0).then(({default:i})=>i(...t)):e=fetch,(...t)=>e(...t)},rV=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",JL=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Up=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Fp=async(n,e)=>{await n.removeItem(e)};function sV(n){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let t="",i,r,s,o,a,l,c,d=0;for(n=n.replace("-","+").replace("_","/");d<n.length;)o=e.indexOf(n.charAt(d++)),a=e.indexOf(n.charAt(d++)),l=e.indexOf(n.charAt(d++)),c=e.indexOf(n.charAt(d++)),i=o<<2|a>>4,r=(a&15)<<4|l>>2,s=(l&3)<<6|c,t=t+String.fromCharCode(i),l!=64&&r!=0&&(t=t+String.fromCharCode(r)),c!=64&&s!=0&&(t=t+String.fromCharCode(s));return t}class w0{constructor(){this.promise=new w0.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}w0.promiseConstructor=Promise;function Ib(n){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,t=n.split(".");if(t.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const i=t[1];return JSON.parse(sV(i))}async function oV(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function aV(n,e){return new Promise((i,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await n(s);if(!e(s,null,o)){i(o);return}}catch(o){if(!e(s,o)){r(o);return}}})()})}function lV(n){return("0"+n.toString(16)).substr(-2)}function cV(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let r="";for(let s=0;s<56;s++)r+=t.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(e),Array.from(e,lV).join("")}async function uV(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),r=new Uint8Array(i);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}function hV(n){return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function dV(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await uV(n);return hV(t)}async function ic(n,e,t=!1){const i=cV();let r=i;t&&(r+="/PASSWORD_RECOVERY"),await JL(n,`${e}-code-verifier`,r);const s=await dV(i);return[s,i===s?"plain":"s256"]}const fV=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pV(n){const e=n.headers.get(Yx);if(!e||!e.match(fV))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class o1 extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function Et(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class mV extends o1{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function gV(n){return Et(n)&&n.name==="AuthApiError"}class QL extends o1{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Il extends o1{constructor(e,t,i,r){super(e,i,r),this.name=t,this.status=i}}class Ro extends Il{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function vV(n){return Et(n)&&n.name==="AuthSessionMissingError"}class zy extends Il{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zp extends Il{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Bp extends Il{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yV(n){return Et(n)&&n.name==="AuthImplicitGrantRedirectError"}class Nb extends Il{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Kx extends Il{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function By(n){return Et(n)&&n.name==="AuthRetryableFetchError"}class Db extends Il{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}var _V=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};const Ha=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),xV=[502,503,504];async function kb(n){var e;if(!rV(n))throw new Kx(Ha(n),0);if(xV.includes(n.status))throw new Kx(Ha(n),n.status);let t;try{t=await n.json()}catch(s){throw new QL(Ha(s),s)}let i;const r=pV(n);if(r&&r.getTime()>=KL["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new Db(Ha(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new Ro}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Db(Ha(t),n.status,t.weak_password.reasons);throw new mV(Ha(t),n.status||500,i)}const SV=(n,e,t,i)=>{const r={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),t))};async function It(n,e,t,i){var r;const s=Object.assign({},i==null?void 0:i.headers);s[Yx]||(s[Yx]=KL["2024-01-01"].name),i!=null&&i.jwt&&(s.Authorization=`Bearer ${i.jwt}`);const o=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(o.redirect_to=i.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await wV(n,e,t+a,{headers:s,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(l):{data:Object.assign({},l),error:null}}async function wV(n,e,t,i,r,s){const o=SV(e,i,r,s);let a;try{a=await n(t,Object.assign({},o))}catch(l){throw console.error(l),new Kx(Ha(l),0)}if(a.ok||await kb(a),i!=null&&i.noResolveJson)return a;try{return await a.json()}catch(l){await kb(l)}}function Lo(n){var e;let t=null;bV(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=tV(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function Ob(n){const e=Lo(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function zo(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function MV(n){return{data:n,error:null}}function EV(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s}=n,o=_V(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:i,redirect_to:r,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function TV(n){return n}function bV(n){return n.access_token&&n.refresh_token&&n.expires_in}var AV=function(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t};class CV{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=ZL(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t="global"){try{return await It(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Et(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await It(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:zo})}catch(i){if(Et(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=AV(e,["options"]),r=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await It(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:EV,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Et(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await It(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:zo})}catch(t){if(Et(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,r,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await It(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:TV});if(d.error)throw d.error;const f=await d.json(),p=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const M=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(y.split(";")[1].split("=")[1]);c[`${_}Page`]=M}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Et(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){try{return await It(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:zo})}catch(t){if(Et(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await It(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:zo})}catch(i){if(Et(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){try{return await It(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:zo})}catch(i){if(Et(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){try{const{data:t,error:i}=await It(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:t,error:i}}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await It(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Et(t))return{data:null,error:t};throw t}}}const PV={getItem:n=>qh()?globalThis.localStorage.getItem(n):null,setItem:(n,e)=>{qh()&&globalThis.localStorage.setItem(n,e)},removeItem:n=>{qh()&&globalThis.localStorage.removeItem(n)}};function Ub(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function RV(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const rc={debug:!!(globalThis&&qh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class eI extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class LV extends eI{}async function IV(n,e,t){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),rc.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,r.name);try{return await t()}finally{rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,r.name)}}else{if(e===0)throw rc.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new LV(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(rc.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}RV();const NV={url:J4,storageKey:Q4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:eV,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},fh=30*1e3,Fb=3;async function zb(n,e,t){return await t()}class Ed{constructor(e){var t,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ed.nextInstanceID,Ed.nextInstanceID+=1,this.instanceID>0&&ds()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},NV),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new CV({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=ZL(r.fetch),this.lock=r.lock||zb,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:ds()&&(!((t=globalThis==null?void 0:globalThis.navigator)===null||t===void 0)&&t.locks)?this.lock=IV:this.lock=zb,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:qh()?this.storage=PV:(this.memoryStorage={},this.storage=Ub(this.memoryStorage)):(this.memoryStorage={},this.storage=Ub(this.memoryStorage)),ds()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${YL}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=iV(window.location.href);let i="none";if(this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce"),ds()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:s}=await this._getSessionFromURL(t,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),yV(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Et(t)?{error:t}:{error:new QL("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,r;try{const s=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Lo}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Et(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var t,i,r;try{let s;if("email"in e){const{email:d,password:f,options:p}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await ic(this.storage,this.storageKey)),s=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:d,password:f,data:(t=p==null?void 0:p.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},xform:Lo})}else if("phone"in e){const{phone:d,password:f,options:p}=e;s=await It(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(i=p==null?void 0:p.data)!==null&&i!==void 0?i:{},channel:(r=p==null?void 0:p.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Lo})}else throw new zp("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Et(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:s,password:o,options:a}=e;t=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ob})}else if("phone"in e){const{phone:s,password:o,options:a}=e;t=await It(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ob})}else throw new zp("You must provide either an email or phone number and a password");const{data:i,error:r}=t;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new zy}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,i,r,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const t=await Up(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(t??"").split("/");try{const{data:s,error:o}=await It(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Lo});if(await Fp(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new zy}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:o})}catch(s){if(Et(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:t,provider:i,token:r,access_token:s,nonce:o}=e,a=await It(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:Lo}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new zy}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,i,r,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await ic(this.storage,this.storageKey));const{error:f}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await It(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new zp("You must provide either an email or phone number.")}catch(a){if(Et(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,i;try{let r,s;"options"in e&&(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo,s=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:o,error:a}=await It(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:Lo});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(r){if(Et(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var t,i,r;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await ic(this.storage,this.storageKey)),await It(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:MV})}catch(s){if(Et(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new Ro;const{error:r}=await It(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(Et(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:r,options:s}=e,{error:o}=await It(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:i,type:r,options:s}=e,{data:o,error:a}=await It(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new zp("You must provide either an email or phone number and a type")}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Up(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:zo}):await this._useSession(async t=>{var i,r,s;const{data:o,error:a}=t;if(a)throw a;return!(!((i=o.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ro}:await It(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:zo})})}catch(t){if(Et(t))return vV(t)&&(await this._removeSession(),await Fp(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:r,error:s}=i;if(s)throw s;if(!r.session)throw new Ro;const o=r.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await ic(this.storage,this.storageKey));const{data:c,error:d}=await It(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:zo});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(i){if(Et(i))return{data:{user:null},error:i};throw i}}_decodeJWT(e){return Ib(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ro;const t=Date.now()/1e3;let i=t,r=!0,s=null;const o=Ib(e.access_token);if(o.exp&&(i=o.exp,r=i<=t),r){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(t){if(Et(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(i=o.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new Ro;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Et(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ds())throw new Bp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Bp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Nb("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bp("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Nb("No code detected.");const{data:w,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const T=new URL(window.location.href);return T.searchParams.delete("code"),window.history.replaceState(window.history.state,"",T.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Bp("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let p=d+f;l&&(p=parseInt(l));const m=p-d;m*1e3<=fh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=p-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,d);const{data:M,error:_}=await this._getUser(s);if(_)throw _;const g={provider_token:i,provider_refresh_token:r,access_token:s,expires_in:f,expires_at:p,refresh_token:o,token_type:c,user:M.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(i){if(Et(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Up(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return{error:s};const o=(i=r.session)===null||i===void 0?void 0:i.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(gV(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Fp(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=nV(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,r;try{const{data:{session:s},error:o}=t;if(o)throw o;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,t={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await ic(this.storage,this.storageKey,!0));try{return await It(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(Et(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(Et(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:i,error:r}=await this._useSession(async s=>{var o,a,l,c,d;const{data:f,error:p}=s;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await It(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(r)throw r;return ds()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:e.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(Et(i))return{data:{provider:e.provider,url:null},error:i};throw i}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:o}=t;if(o)throw o;return await It(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await aV(async r=>(r>0&&await oV(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await It(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Lo})),(r,s)=>{const o=200*Math.pow(2,r);return s&&By(s)&&Date.now()+o-i<fh})}catch(i){if(this._debug(t,"error",i),Et(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),ds()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const i=await Up(this.storage,this.storageKey);if(this._debug(t,"session from storage",i),!this._isValidSession(i)){this._debug(t,"session is not valid"),i!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),s=((e=i.expires_at)!==null&&e!==void 0?e:1/0)<r+Lb;if(this._debug(t,`session has${s?"":" not"} expired with margin of ${Lb}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),By(o)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(t,"error",i),console.error(i);return}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new Ro;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new w0;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Ro;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(r,"error",s),Et(s)){const o={session:null,error:s};return By(s)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,t,i=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await JL(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Fp(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ds()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),fh);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-e)/fh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${fh}ms, refresh threshold is ${Fb} ticks`),r<=Fb&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof eI)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ds()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const r=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[s,o]=await ic(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(a.toString())}if(i!=null&&i.queryParams){const s=new URLSearchParams(i.queryParams);r.push(s.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;return s?{data:null,error:s}:await It(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,r;const{data:s,error:o}=t;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await It(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((r=l==null?void 0:l.totp)===null||r===void 0)&&r.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(t){if(Et(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;if(s)return{data:null,error:s};const{data:o,error:a}=await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(t){if(Et(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var i;const{data:r,error:s}=t;return s?{data:null,error:s}:await It(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(Et(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?{data:null,error:i}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const i=(e==null?void 0:e.factors)||[],r=i.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=i.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:i,totp:r,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,i;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(r.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((i=(t=r.user.factors)===null||t===void 0?void 0:t.filter(f=>f.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}}Ed.nextInstanceID=0;const DV=Ed;class kV extends DV{constructor(e){super(e)}}var OV=function(n,e,t,i){function r(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{c(i.next(d))}catch(f){o(f)}}function l(d){try{c(i.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):r(d.value).then(a,l)}c((i=i.apply(n,e||[])).next())})};class UV{constructor(e,t,i){var r,s,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=K4(e);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:H4,realtime:j4,auth:Object.assign(Object.assign({},G4),{storageKey:l}),global:V4},d=Z4(i??{},c);this.storageKey=(r=d.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=d.global.headers)!==null&&s!==void 0?s:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=q4(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new c4(`${a}/rest/v1`,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new zB(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new F4(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},i={}){return this.rest.rpc(e,t,i)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return OV(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(t=(e=i.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,storageKey:s,flowType:o,lock:a,debug:l},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new kV({url:this.authUrl,headers:Object.assign(Object.assign({},f),c),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:i,storage:r,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new E4(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,i)=>{this._handleTokenChanged(t,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(e,t,i){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const FV=(n,e,t)=>new UV(n,e,t),zV="https://khjvusptccxuructjsmm.supabase.co",BV="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtoanZ1c3B0Y2N4dXJ1Y3Rqc21tIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk3MjU0MzksImV4cCI6MjA1NTMwMTQzOX0.2ccgdVo6OT8EyfOXMjitvir0t4LHfmh5MSZBOEAU0r8",Yr=FV(zV,BV),tI=G.createContext(void 0);function VV({children:n}){const[e,t]=G.useState(null),[i,r]=G.useState(!0);G.useEffect(()=>{Yr.auth.getSession().then(({data:{session:c}})=>{c!=null&&c.user&&t({id:c.user.id,email:c.user.email,role:"user"}),r(!1)});const{data:{subscription:l}}=Yr.auth.onAuthStateChange((c,d)=>{d!=null&&d.user?t({id:d.user.id,email:d.user.email,role:"user"}):t(null),r(!1)});return()=>l.unsubscribe()},[]);const s=async(l,c)=>{const{error:d}=await Yr.auth.signUp({email:l,password:c});if(d)throw d},o=async(l,c)=>{const{error:d}=await Yr.auth.signInWithPassword({email:l,password:c});if(d)throw d},a=async()=>{const{error:l}=await Yr.auth.signOut();if(l)throw l};return k.jsx(tI.Provider,{value:{user:e,loading:i,signIn:o,signUp:s,signOut:a},children:n})}function Pu(){const n=G.useContext(tI);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}const nI=G.createContext(void 0);function HV({children:n}){const[e,t]=G.useState([]),i=l=>{t(c=>c.find(f=>f.id===l.id)?c.map(f=>f.id===l.id?{...f,quantity:f.quantity+1}:f):[...c,{...l,quantity:1}])},r=l=>{t(c=>c.filter(d=>d.id!==l))},s=(l,c)=>{t(d=>d.map(f=>f.id===l?{...f,quantity:c}:f))},o=()=>{t([])},a=e.reduce((l,c)=>l+c.price*c.quantity,0);return k.jsx(nI.Provider,{value:{items:e,addItem:i,removeItem:r,updateQuantity:s,clearCart:o,total:a},children:n})}function a1(){const n=G.useContext(nI);if(n===void 0)throw new Error("useCart must be used within a CartProvider");return n}function GV(){const{user:n,signOut:e}=Pu(),{items:t}=a1(),i=t.reduce((r,s)=>r+s.quantity,0);return k.jsx("nav",{className:"bg-white shadow-md",children:k.jsx("div",{className:"container mx-auto px-4",children:k.jsxs("div",{className:"flex items-center justify-between h-16",children:[k.jsx(Va,{to:"/",className:"text-xl font-bold text-gray-800",children:"Hostel Store"}),k.jsx("div",{className:"flex items-center gap-6",children:n?k.jsxs(k.Fragment,{children:[k.jsxs(Va,{to:"/products",className:"text-gray-600 hover:text-gray-800 flex items-center gap-1",children:[k.jsx(Md,{size:20}),k.jsx("span",{className:"hidden md:inline",children:"Products"})]}),k.jsxs(Va,{to:"/profile",className:"text-gray-600 hover:text-gray-800 flex items-center gap-1",children:[k.jsx(LL,{size:20}),k.jsx("span",{className:"hidden md:inline",children:"Profile"})]}),k.jsxs(Va,{to:"/cart",className:"text-gray-600 hover:text-gray-800 flex items-center gap-1 relative",children:[k.jsx(CL,{size:20}),k.jsx("span",{className:"hidden md:inline",children:"Cart"}),i>0&&k.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:i})]}),k.jsxs("button",{onClick:()=>e(),className:"text-gray-600 hover:text-gray-800 flex items-center gap-1",children:[k.jsx(wB,{size:20}),k.jsx("span",{className:"hidden md:inline",children:"Logout"})]})]}):k.jsxs(k.Fragment,{children:[k.jsx(Va,{to:"/login",className:"text-gray-600 hover:text-gray-800",children:"Login"}),k.jsx(Va,{to:"/register",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Register"})]})})]})})})}const iI=G.createContext({});function jV(n){const e=G.useRef(null);return e.current===null&&(e.current=n()),e.current}const l1=G.createContext(null),rI=G.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function WV(n=!0){const e=G.useContext(l1);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=G.useId();G.useEffect(()=>{n&&r(s)},[n]);const o=G.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const c1=typeof window<"u",XV=c1?G.useLayoutEffect:G.useEffect,lr=n=>n;let Zx=lr;function u1(n){let e;return()=>(e===void 0&&(e=n()),e)}const gu=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Ks=n=>n*1e3,Zs=n=>n/1e3,$V={skipAnimations:!1,useManualTiming:!1};function qV(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,d=!1,f=!1)=>{const m=f&&i?e:t;return d&&s.add(c),m.has(c)||m.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,t]=[t,e],e.forEach(a),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const Vp=["read","resolveKeyframes","update","preRender","render","postRender"],YV=40;function sI(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=Vp.reduce((g,w)=>(g[w]=qV(s),g),{}),{read:a,resolveKeyframes:l,update:c,preRender:d,render:f,postRender:p}=o,m=()=>{const g=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(g-r.timestamp,YV),1),r.timestamp=g,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),d.process(r),f.process(r),p.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(m))},y=()=>{t=!0,i=!0,r.isProcessing||n(m)};return{schedule:Vp.reduce((g,w)=>{const x=o[w];return g[w]=(T,C=!1,P=!1)=>(t||y(),x.schedule(T,C,P)),g},{}),cancel:g=>{for(let w=0;w<Vp.length;w++)o[Vp[w]].cancel(g)},state:r,steps:o}}const{schedule:en,cancel:sa,state:ei,steps:Vy}=sI(typeof requestAnimationFrame<"u"?requestAnimationFrame:lr,!0),oI=G.createContext({strict:!1}),Bb={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vu={};for(const n in Bb)vu[n]={isEnabled:e=>Bb[n].some(t=>!!e[t])};function KV(n){for(const e in n)vu[e]={...vu[e],...n[e]}}const ZV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Og(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ZV.has(n)}let aI=n=>!Og(n);function JV(n){n&&(aI=e=>e.startsWith("on")?!Og(e):n(e))}try{JV(require("@emotion/is-prop-valid").default)}catch{}function QV(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(aI(r)||t===!0&&Og(r)||!e&&!Og(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function e5(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const M0=G.createContext({});function Td(n){return typeof n=="string"||Array.isArray(n)}function E0(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const h1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],d1=["initial",...h1];function T0(n){return E0(n.animate)||d1.some(e=>Td(n[e]))}function lI(n){return!!(T0(n)||n.variants)}function t5(n,e){if(T0(n)){const{initial:t,animate:i}=n;return{initial:t===!1||Td(t)?t:void 0,animate:Td(i)?i:void 0}}return n.inherit!==!1?e:{}}function n5(n){const{initial:e,animate:t}=t5(n,G.useContext(M0));return G.useMemo(()=>({initial:e,animate:t}),[Vb(e),Vb(t)])}function Vb(n){return Array.isArray(n)?n.join(" "):n}const i5=Symbol.for("motionComponentSymbol");function Hc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function r5(n,e,t){return G.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Hc(t)&&(t.current=i))},[e])}const f1=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),s5="framerAppearId",cI="data-"+f1(s5),{schedule:p1,cancel:NK}=sI(queueMicrotask,!1),uI=G.createContext({});function o5(n,e,t,i,r){var s,o;const{visualElement:a}=G.useContext(M0),l=G.useContext(oI),c=G.useContext(l1),d=G.useContext(rI).reducedMotion,f=G.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,m=G.useContext(uI);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&a5(f.current,t,r,m);const y=G.useRef(!1);G.useInsertionEffect(()=>{p&&y.current&&p.update(t,c)});const M=t[cI],_=G.useRef(!!M&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,M))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,M)));return XV(()=>{p&&(y.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),p1.render(p.render),_.current&&p.animationState&&p.animationState.animateChanges())}),G.useEffect(()=>{p&&(!_.current&&p.animationState&&p.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,M)}),_.current=!1))}),p}function a5(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:hI(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Hc(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function hI(n){if(n)return n.options.allowProjection!==!1?n.projection:hI(n.parent)}function l5({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){var s,o;n&&KV(n);function a(c,d){let f;const p={...G.useContext(rI),...c,layoutId:c5(c)},{isStatic:m}=p,y=n5(c),M=i(c,m);if(!m&&c1){u5();const _=h5(p);f=_.MeasureLayout,y.visualElement=o5(r,M,p,e,_.ProjectionNode)}return k.jsxs(M0.Provider,{value:y,children:[f&&y.visualElement?k.jsx(f,{visualElement:y.visualElement,...p}):null,t(r,c,r5(M,y.visualElement,d),M,m,y.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=G.forwardRef(a);return l[i5]=r,l}function c5({layoutId:n}){const e=G.useContext(iI).id;return e&&n!==void 0?e+"-"+n:n}function u5(n,e){G.useContext(oI).strict}function h5(n){const{drag:e,layout:t}=vu;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const d5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function m1(n){return typeof n!="string"||n.includes("-")?!1:!!(d5.indexOf(n)>-1||/[A-Z]/u.test(n))}function Hb(n){const e=[{},{}];return n==null||n.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function g1(n,e,t,i){if(typeof e=="function"){const[r,s]=Hb(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=Hb(i);e=e(t!==void 0?t:n.custom,r,s)}return e}const Jx=n=>Array.isArray(n),f5=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),p5=n=>Jx(n)?n[n.length-1]||0:n,mi=n=>!!(n&&n.getVelocity);function Zm(n){const e=mi(n)?n.get():n;return f5(e)?e.toValue():e}function m5({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,r,s){const o={latestValues:g5(i,r,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:i,current:a,...o}),o.onUpdate=a=>t(a)),o}const dI=n=>(e,t)=>{const i=G.useContext(M0),r=G.useContext(l1),s=()=>m5(n,e,i,r);return t?s():jV(s)};function g5(n,e,t,i){const r={},s=i(n,{});for(const p in s)r[p]=Zm(s[p]);let{initial:o,animate:a}=n;const l=T0(n),c=lI(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const f=d?a:o;if(f&&typeof f!="boolean"&&!E0(f)){const p=Array.isArray(f)?f:[f];for(let m=0;m<p.length;m++){const y=g1(n,p[m]);if(y){const{transitionEnd:M,transition:_,...g}=y;for(const w in g){let x=g[w];if(Array.isArray(x)){const T=d?x.length-1:0;x=x[T]}x!==null&&(r[w]=x)}for(const w in M)r[w]=M[w]}}}return r}const Ru=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nl=new Set(Ru),fI=n=>e=>typeof e=="string"&&e.startsWith(n),pI=fI("--"),v5=fI("var(--"),v1=n=>v5(n)?y5.test(n.split("/*")[0].trim()):!1,y5=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,mI=(n,e)=>e&&typeof n=="number"?e.transform(n):n,ro=(n,e,t)=>t>e?e:t<n?n:t,Lu={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},bd={...Lu,transform:n=>ro(0,1,n)},Hp={...Lu,default:1},cf=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Io=cf("deg"),xs=cf("%"),ot=cf("px"),_5=cf("vh"),x5=cf("vw"),Gb={...xs,parse:n=>xs.parse(n)/100,transform:n=>xs.transform(n*100)},S5={borderWidth:ot,borderTopWidth:ot,borderRightWidth:ot,borderBottomWidth:ot,borderLeftWidth:ot,borderRadius:ot,radius:ot,borderTopLeftRadius:ot,borderTopRightRadius:ot,borderBottomRightRadius:ot,borderBottomLeftRadius:ot,width:ot,maxWidth:ot,height:ot,maxHeight:ot,top:ot,right:ot,bottom:ot,left:ot,padding:ot,paddingTop:ot,paddingRight:ot,paddingBottom:ot,paddingLeft:ot,margin:ot,marginTop:ot,marginRight:ot,marginBottom:ot,marginLeft:ot,backgroundPositionX:ot,backgroundPositionY:ot},w5={rotate:Io,rotateX:Io,rotateY:Io,rotateZ:Io,scale:Hp,scaleX:Hp,scaleY:Hp,scaleZ:Hp,skew:Io,skewX:Io,skewY:Io,distance:ot,translateX:ot,translateY:ot,translateZ:ot,x:ot,y:ot,z:ot,perspective:ot,transformPerspective:ot,opacity:bd,originX:Gb,originY:Gb,originZ:ot},jb={...Lu,transform:Math.round},y1={...S5,...w5,zIndex:jb,size:ot,fillOpacity:bd,strokeOpacity:bd,numOctaves:jb},M5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},E5=Ru.length;function T5(n,e,t){let i="",r=!0;for(let s=0;s<E5;s++){const o=Ru[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=mI(a,y1[o]);if(!l){r=!1;const d=M5[o]||o;i+=`${d}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function _1(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(Nl.has(l)){o=!0;continue}else if(pI(l)){r[l]=c;continue}else{const d=mI(c,y1[l]);l.startsWith("origin")?(a=!0,s[l]=d):i[l]=d}}if(e.transform||(o||t?i.transform=T5(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:d=0}=s;i.transformOrigin=`${l} ${c} ${d}`}}const b5={offset:"stroke-dashoffset",array:"stroke-dasharray"},A5={offset:"strokeDashoffset",array:"strokeDasharray"};function C5(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?b5:A5;n[s.offset]=ot.transform(-i);const o=ot.transform(e),a=ot.transform(t);n[s.array]=`${o} ${a}`}function Wb(n,e,t){return typeof n=="string"?n:ot.transform(e+t*n)}function P5(n,e,t){const i=Wb(e,n.x,n.width),r=Wb(t,n.y,n.height);return`${i} ${r}`}function x1(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},d,f){if(_1(n,c,f),d){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:p,style:m,dimensions:y}=n;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(r!==void 0||s!==void 0||m.transform)&&(m.transformOrigin=P5(y,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(p.x=e),t!==void 0&&(p.y=t),i!==void 0&&(p.scale=i),o!==void 0&&C5(p,o,a,l,!1)}const S1=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),gI=()=>({...S1(),attrs:{}}),w1=n=>typeof n=="string"&&n.toLowerCase()==="svg";function vI(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const yI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _I(n,e,t,i){vI(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(yI.has(r)?r:f1(r),e.attrs[r])}const Ug={};function R5(n){Object.assign(Ug,n)}function xI(n,{layout:e,layoutId:t}){return Nl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Ug[n]||n==="opacity")}function M1(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(mi(r[o])||e.style&&mi(e.style[o])||xI(o,n)||((i=t==null?void 0:t.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function SI(n,e,t){const i=M1(n,e,t);for(const r in n)if(mi(n[r])||mi(e[r])){const s=Ru.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function L5(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Xb=["x","y","width","height","cx","cy","r"],I5={useVisualState:dI({scrapeMotionValuesFromProps:SI,createRenderState:gI,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:r})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in r)if(Nl.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<Xb.length;a++){const l=Xb[a];n[l]!==e[l]&&(o=!0)}o&&en.read(()=>{L5(t,i),en.render(()=>{x1(i,r,w1(t.tagName),n.transformTemplate),_I(t,i)})})}})},N5={useVisualState:dI({scrapeMotionValuesFromProps:M1,createRenderState:S1})};function wI(n,e,t){for(const i in e)!mi(e[i])&&!xI(i,t)&&(n[i]=e[i])}function D5({transformTemplate:n},e){return G.useMemo(()=>{const t=S1();return _1(t,e,n),Object.assign({},t.vars,t.style)},[e])}function k5(n,e){const t=n.style||{},i={};return wI(i,t,n),Object.assign(i,D5(n,e)),i}function O5(n,e){const t={},i=k5(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function U5(n,e,t,i){const r=G.useMemo(()=>{const s=gI();return x1(s,e,w1(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};wI(s,n.style,n),r.style={...s,...r.style}}return r}function F5(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(m1(t)?U5:O5)(i,s,o,t),c=QV(i,typeof t=="string",n),d=t!==G.Fragment?{...c,...l,ref:r}:{},{children:f}=i,p=G.useMemo(()=>mi(f)?f.get():f,[f]);return G.createElement(t,{...d,children:p})}}function z5(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...m1(i)?I5:N5,preloadedFeatures:n,useRender:F5(r),createVisualElement:e,Component:i};return l5(o)}}function MI(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function b0(n,e,t){const i=n.getProps();return g1(i,e,t!==void 0?t:i.custom,n)}const B5=u1(()=>window.ScrollTimeline!==void 0);class V5{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>{if(B5()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class H5 extends V5{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function E1(n,e){return n?n[e]||n.default||n:void 0}const Qx=2e4;function EI(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<Qx;)e+=t,i=n.next(e);return e>=Qx?1/0:e}function T1(n){return typeof n=="function"}function $b(n,e){n.timeline=e,n.onfinish=null}const b1=n=>Array.isArray(n)&&typeof n[0]=="number",G5={linearEasing:void 0};function j5(n,e){const t=u1(n);return()=>{var i;return(i=G5[e])!==null&&i!==void 0?i:t()}}const Fg=j5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),TI=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(gu(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function bI(n){return!!(typeof n=="function"&&Fg()||!n||typeof n=="string"&&(n in eS||Fg())||b1(n)||Array.isArray(n)&&n.every(bI))}const Nh=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,eS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Nh([0,.65,.55,1]),circOut:Nh([.55,0,1,.45]),backIn:Nh([.31,.01,.66,-.59]),backOut:Nh([.33,1.53,.69,.99])};function AI(n,e){if(n)return typeof n=="function"&&Fg()?TI(n,e):b1(n)?Nh(n):Array.isArray(n)?n.map(t=>AI(t,e)||eS.easeOut):eS[n]}const Hr={x:!1,y:!1};function CI(){return Hr.x||Hr.y}function W5(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function PI(n,e){const t=W5(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function qb(n){return e=>{e.pointerType==="touch"||CI()||n(e)}}function X5(n,e,t={}){const[i,r,s]=PI(n,t),o=qb(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const d=qb(f=>{c(f),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,r)});return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const RI=(n,e)=>e?n===e?!0:RI(n,e.parentElement):!1,A1=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,$5=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function q5(n){return $5.has(n.tagName)||n.tabIndex!==-1}const Dh=new WeakSet;function Yb(n){return e=>{e.key==="Enter"&&n(e)}}function Hy(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Y5=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=Yb(()=>{if(Dh.has(t))return;Hy(t,"down");const r=Yb(()=>{Hy(t,"up")}),s=()=>Hy(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function Kb(n){return A1(n)&&!CI()}function K5(n,e,t={}){const[i,r,s]=PI(n,t),o=a=>{const l=a.currentTarget;if(!Kb(a)||Dh.has(l))return;Dh.add(l);const c=e(a),d=(m,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!Kb(m)||!Dh.has(l))&&(Dh.delete(l),typeof c=="function"&&c(m,{success:y}))},f=m=>{d(m,t.useGlobalTarget||RI(l,m.target))},p=m=>{d(m,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",p,r)};return i.forEach(a=>{!q5(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",c=>Y5(c,r),r)}),s}function Z5(n){return n==="x"||n==="y"?Hr[n]?null:(Hr[n]=!0,()=>{Hr[n]=!1}):Hr.x||Hr.y?null:(Hr.x=Hr.y=!0,()=>{Hr.x=Hr.y=!1})}const LI=new Set(["width","height","top","left","right","bottom",...Ru]);let Jm;function J5(){Jm=void 0}const Ss={now:()=>(Jm===void 0&&Ss.set(ei.isProcessing||$V.useManualTiming?ei.timestamp:performance.now()),Jm),set:n=>{Jm=n,queueMicrotask(J5)}};function C1(n,e){n.indexOf(e)===-1&&n.push(e)}function P1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class R1{constructor(){this.subscriptions=[]}add(e){return C1(this.subscriptions,e),()=>P1(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function II(n,e){return e?n*(1e3/e):0}const Zb=30,Q5=n=>!isNaN(parseFloat(n));class eH{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=Ss.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Ss.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Q5(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new R1);const i=this.events[e].add(t);return e==="change"?()=>{i(),en.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Ss.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Zb)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Zb);return II(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ad(n,e){return new eH(n,e)}function tH(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Ad(t))}function nH(n,e){const t=b0(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=p5(s[o]);tH(n,o,a)}}function iH(n){return!!(mi(n)&&n.add)}function tS(n,e){const t=n.getValue("willChange");if(iH(t))return t.add(e)}function NI(n){return n.props[cI]}const DI=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,rH=1e-7,sH=12;function oH(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=DI(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>rH&&++a<sH);return o}function uf(n,e,t,i){if(n===e&&t===i)return lr;const r=s=>oH(s,0,1,n,t);return s=>s===0||s===1?s:DI(r(s),e,i)}const kI=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,OI=n=>e=>1-n(1-e),UI=uf(.33,1.53,.69,.99),L1=OI(UI),FI=kI(L1),zI=n=>(n*=2)<1?.5*L1(n):.5*(2-Math.pow(2,-10*(n-1))),I1=n=>1-Math.sin(Math.acos(n)),BI=OI(I1),VI=kI(I1),HI=n=>/^0[^.\s]+$/u.test(n);function aH(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||HI(n):!0}const Yh=n=>Math.round(n*1e5)/1e5,N1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function lH(n){return n==null}const cH=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,D1=(n,e)=>t=>!!(typeof t=="string"&&cH.test(t)&&t.startsWith(n)||e&&!lH(t)&&Object.prototype.hasOwnProperty.call(t,e)),GI=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(N1);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},uH=n=>ro(0,255,n),Gy={...Lu,transform:n=>Math.round(uH(n))},il={test:D1("rgb","red"),parse:GI("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+Gy.transform(n)+", "+Gy.transform(e)+", "+Gy.transform(t)+", "+Yh(bd.transform(i))+")"};function hH(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const nS={test:D1("#"),parse:hH,transform:il.transform},Gc={test:D1("hsl","hue"),parse:GI("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+xs.transform(Yh(e))+", "+xs.transform(Yh(t))+", "+Yh(bd.transform(i))+")"},di={test:n=>il.test(n)||nS.test(n)||Gc.test(n),parse:n=>il.test(n)?il.parse(n):Gc.test(n)?Gc.parse(n):nS.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?il.transform(n):Gc.transform(n)},dH=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function fH(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(N1))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(dH))===null||t===void 0?void 0:t.length)||0)>0}const jI="number",WI="color",pH="var",mH="var(",Jb="${}",gH=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Cd(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(gH,l=>(di.test(l)?(i.color.push(s),r.push(WI),t.push(di.parse(l))):l.startsWith(mH)?(i.var.push(s),r.push(pH),t.push(l)):(i.number.push(s),r.push(jI),t.push(parseFloat(l))),++s,Jb)).split(Jb);return{values:t,split:a,indexes:i,types:r}}function XI(n){return Cd(n).values}function $I(n){const{split:e,types:t}=Cd(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===jI?s+=Yh(r[o]):a===WI?s+=di.transform(r[o]):s+=r[o]}return s}}const vH=n=>typeof n=="number"?0:n;function yH(n){const e=XI(n);return $I(n)(e.map(vH))}const oa={test:fH,parse:XI,createTransformer:$I,getAnimatableNone:yH},_H=new Set(["brightness","contrast","saturate","opacity"]);function xH(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(N1)||[];if(!i)return n;const r=t.replace(i,"");let s=_H.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const SH=/\b([a-z-]*)\(.*?\)/gu,iS={...oa,getAnimatableNone:n=>{const e=n.match(SH);return e?e.map(xH).join(" "):n}},wH={...y1,color:di,backgroundColor:di,outlineColor:di,fill:di,stroke:di,borderColor:di,borderTopColor:di,borderRightColor:di,borderBottomColor:di,borderLeftColor:di,filter:iS,WebkitFilter:iS},k1=n=>wH[n];function qI(n,e){let t=k1(n);return t!==iS&&(t=oa),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const MH=new Set(["auto","none","0"]);function EH(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!MH.has(s)&&Cd(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=qI(t,r)}const Qb=n=>n===Lu||n===ot,eA=(n,e)=>parseFloat(n.split(", ")[e]),tA=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return eA(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?eA(s[1],n):0}},TH=new Set(["x","y","z"]),bH=Ru.filter(n=>!TH.has(n));function AH(n){const e=[];return bH.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const yu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:tA(4,13),y:tA(5,14)};yu.translateX=yu.x;yu.translateY=yu.y;const ul=new Set;let rS=!1,sS=!1;function YI(){if(sS){const n=Array.from(ul).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=AH(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}sS=!1,rS=!1,ul.forEach(n=>n.complete()),ul.clear()}function KI(){ul.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(sS=!0)})}function CH(){KI(),YI()}class O1{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ul.add(this),rS||(rS=!0,en.read(KI),en.resolveKeyframes(YI))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r==null?void 0:r.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ul.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ul.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ZI=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),PH=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function RH(n){const e=PH.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function JI(n,e,t=1){const[i,r]=RH(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return ZI(o)?parseFloat(o):o}return v1(r)?JI(r,e,t+1):r}const QI=n=>e=>e.test(n),LH={test:n=>n==="auto",parse:n=>n},e3=[Lu,ot,xs,Io,x5,_5,LH],nA=n=>e3.find(QI(n));class t3 extends O1{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),v1(c))){const d=JI(c,t.current);d!==void 0&&(e[l]=d),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!LI.has(i)||e.length!==2)return;const[r,s]=e,o=nA(r),a=nA(s);if(o!==a)if(Qb(o)&&Qb(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)aH(e[r])&&i.push(r);i.length&&EH(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yu[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=yu[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const iA=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(oa.test(n)||n==="0")&&!n.startsWith("url("));function IH(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function NH(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=iA(r,e),a=iA(s,e);return!o||!a?!1:IH(n)||(t==="spring"||T1(t))&&i}const DH=n=>n!==null;function A0(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(DH),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const kH=40;class n3{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ss.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>kH?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&CH(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=Ss.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!NH(e,i,r,s))if(o)this.options.duration=0;else{l&&l(A0(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,t);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...d},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const an=(n,e,t)=>n+(e-n)*t;function jy(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function OH({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=jy(l,a,n+1/3),s=jy(l,a,n),o=jy(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function zg(n,e){return t=>t>0?e:n}const Wy=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},UH=[nS,il,Gc],FH=n=>UH.find(e=>e.test(n));function rA(n){const e=FH(n);if(!e)return!1;let t=e.parse(n);return e===Gc&&(t=OH(t)),t}const sA=(n,e)=>{const t=rA(n),i=rA(e);if(!t||!i)return zg(n,e);const r={...t};return s=>(r.red=Wy(t.red,i.red,s),r.green=Wy(t.green,i.green,s),r.blue=Wy(t.blue,i.blue,s),r.alpha=an(t.alpha,i.alpha,s),il.transform(r))},zH=(n,e)=>t=>e(n(t)),hf=(...n)=>n.reduce(zH),oS=new Set(["none","hidden"]);function BH(n,e){return oS.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function VH(n,e){return t=>an(n,e,t)}function U1(n){return typeof n=="number"?VH:typeof n=="string"?v1(n)?zg:di.test(n)?sA:jH:Array.isArray(n)?i3:typeof n=="object"?di.test(n)?sA:HH:zg}function i3(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>U1(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function HH(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=U1(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function GH(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const jH=(n,e)=>{const t=oa.createTransformer(e),i=Cd(n),r=Cd(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?oS.has(n)&&!r.values.length||oS.has(e)&&!i.values.length?BH(n,e):hf(i3(GH(i,r),r.values),t):zg(n,e)};function r3(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?an(n,e,t):U1(n)(n,e)}const WH=5;function s3(n,e,t){const i=Math.max(e-WH,0);return II(t-n(i),e-i)}const pn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xy=.001;function XH({duration:n=pn.duration,bounce:e=pn.bounce,velocity:t=pn.velocity,mass:i=pn.mass}){let r,s,o=1-e;o=ro(pn.minDamping,pn.maxDamping,o),n=ro(pn.minDuration,pn.maxDuration,Zs(n)),o<1?(r=c=>{const d=c*o,f=d*n,p=d-t,m=aS(c,o),y=Math.exp(-f);return Xy-p/m*y},s=c=>{const f=c*o*n,p=f*t+t,m=Math.pow(o,2)*Math.pow(c,2)*n,y=Math.exp(-f),M=aS(Math.pow(c,2),o);return(-r(c)+Xy>0?-1:1)*((p-m)*y)/M}):(r=c=>{const d=Math.exp(-c*n),f=(c-t)*n+1;return-Xy+d*f},s=c=>{const d=Math.exp(-c*n),f=(t-c)*(n*n);return d*f});const a=5/n,l=qH(r,s,a);if(n=Ks(n),isNaN(l))return{stiffness:pn.stiffness,damping:pn.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const $H=12;function qH(n,e,t){let i=t;for(let r=1;r<$H;r++)i=i-n(i)/e(i);return i}function aS(n,e){return n*Math.sqrt(1-e*e)}const YH=["duration","bounce"],KH=["stiffness","damping","mass"];function oA(n,e){return e.some(t=>n[t]!==void 0)}function ZH(n){let e={velocity:pn.velocity,stiffness:pn.stiffness,damping:pn.damping,mass:pn.mass,isResolvedFromDuration:!1,...n};if(!oA(n,KH)&&oA(n,YH))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*ro(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:pn.mass,stiffness:r,damping:s}}else{const t=XH(n);e={...e,...t,mass:pn.mass},e.isResolvedFromDuration=!0}return e}function o3(n=pn.visualDuration,e=pn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:d,duration:f,velocity:p,isResolvedFromDuration:m}=ZH({...t,velocity:-Zs(t.velocity||0)}),y=p||0,M=c/(2*Math.sqrt(l*d)),_=o-s,g=Zs(Math.sqrt(l/d)),w=Math.abs(_)<5;i||(i=w?pn.restSpeed.granular:pn.restSpeed.default),r||(r=w?pn.restDelta.granular:pn.restDelta.default);let x;if(M<1){const C=aS(g,M);x=P=>{const R=Math.exp(-M*g*P);return o-R*((y+M*g*_)/C*Math.sin(C*P)+_*Math.cos(C*P))}}else if(M===1)x=C=>o-Math.exp(-g*C)*(_+(y+g*_)*C);else{const C=g*Math.sqrt(M*M-1);x=P=>{const R=Math.exp(-M*g*P),D=Math.min(C*P,300);return o-R*((y+M*g*_)*Math.sinh(D)+C*_*Math.cosh(D))/C}}const T={calculatedDuration:m&&f||null,next:C=>{const P=x(C);if(m)a.done=C>=f;else{let R=0;M<1&&(R=C===0?Ks(y):s3(x,C,P));const D=Math.abs(R)<=i,X=Math.abs(o-P)<=r;a.done=D&&X}return a.value=a.done?o:P,a},toString:()=>{const C=Math.min(EI(T),Qx),P=TI(R=>T.next(C*R).value,C,30);return C+"ms "+P}};return T}function aA({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:d}){const f=n[0],p={done:!1,value:f},m=D=>a!==void 0&&D<a||l!==void 0&&D>l,y=D=>a===void 0?l:l===void 0||Math.abs(a-D)<Math.abs(l-D)?a:l;let M=t*e;const _=f+M,g=o===void 0?_:o(_);g!==_&&(M=g-f);const w=D=>-M*Math.exp(-D/i),x=D=>g+w(D),T=D=>{const X=w(D),b=x(D);p.done=Math.abs(X)<=c,p.value=p.done?g:b};let C,P;const R=D=>{m(p.value)&&(C=D,P=o3({keyframes:[p.value,y(p.value)],velocity:s3(x,D,p.value),damping:r,stiffness:s,restDelta:c,restSpeed:d}))};return R(0),{calculatedDuration:null,next:D=>{let X=!1;return!P&&C===void 0&&(X=!0,T(D),R(D)),C!==void 0&&D>=C?P.next(D-C):(!X&&T(D),p)}}}const JH=uf(.42,0,1,1),QH=uf(0,0,.58,1),a3=uf(.42,0,.58,1),eG=n=>Array.isArray(n)&&typeof n[0]!="number",lA={linear:lr,easeIn:JH,easeInOut:a3,easeOut:QH,circIn:I1,circInOut:VI,circOut:BI,backIn:L1,backInOut:FI,backOut:UI,anticipate:zI},cA=n=>{if(b1(n)){Zx(n.length===4);const[e,t,i,r]=n;return uf(e,t,i,r)}else if(typeof n=="string")return Zx(lA[n]!==void 0),lA[n];return n};function tG(n,e,t){const i=[],r=t||r3,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||lr:e;a=hf(l,a)}i.push(a)}return i}function nG(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(Zx(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=tG(e,i,r),l=a.length,c=d=>{if(o&&d<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(d<n[f+1]);f++);const p=gu(n[f],n[f+1],d);return a[f](p)};return t?d=>c(ro(n[0],n[s-1],d)):c}function iG(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=gu(0,e,i);n.push(an(t,1,r))}}function rG(n){const e=[0];return iG(e,n.length-1),e}function sG(n,e){return n.map(t=>t*e)}function oG(n,e){return n.map(()=>e||a3).splice(0,n.length-1)}function Bg({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=eG(i)?i.map(cA):cA(i),s={done:!1,value:e[0]},o=sG(t&&t.length===e.length?t:rG(e),n),a=nG(o,e,{ease:Array.isArray(r)?r:oG(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const aG=n=>{const e=({timestamp:t})=>n(t);return{start:()=>en.update(e,!0),stop:()=>sa(e),now:()=>ei.isProcessing?ei.timestamp:Ss.now()}},lG={decay:aA,inertia:aA,tween:Bg,keyframes:Bg,spring:o3},cG=n=>n/100;class F1 extends n3{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=(r==null?void 0:r.KeyframeResolver)||O1,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=T1(t)?t:lG[t]||Bg;let l,c;a!==Bg&&typeof e[0]!="number"&&(l=hf(cG,r3(e[0],e[1])),e=[0,100]);const d=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=EI(d));const{calculatedDuration:f}=d,p=f+r,m=p*(i+1)-r;return{generator:d,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:p,totalDuration:m}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:D}=this.options;return{done:!0,value:D[D.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:d,resolvedDuration:f}=i;if(this.startTime===null)return s.next(0);const{delay:p,repeat:m,repeatType:y,repeatDelay:M,onUpdate:_}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-p*(this.speed>=0?1:-1),w=this.speed>=0?g<0:g>d;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let x=this.currentTime,T=s;if(m){const D=Math.min(this.currentTime,d)/f;let X=Math.floor(D),b=D%1;!b&&D>=1&&(b=1),b===1&&X--,X=Math.min(X,m+1),!!(X%2)&&(y==="reverse"?(b=1-b,M&&(b-=M/f)):y==="mirror"&&(T=o)),x=ro(0,1,b)*f}const C=w?{done:!1,value:l[0]}:T.next(x);a&&(C.value=a(C.value));let{done:P}=C;!w&&c!==null&&(P=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&P);return R&&r!==void 0&&(C.value=A0(l,this.options,r)),_&&_(C.value),R&&this.finish(),C}get duration(){const{resolved:e}=this;return e?Zs(e.calculatedDuration):0}get time(){return Zs(this.currentTime)}set time(e){e=Ks(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Zs(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=aG,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const uG=new Set(["opacity","clipPath","filter","transform"]);function hG(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const d=AI(a,r);return Array.isArray(d)&&(c.easing=d),n.animate(c,{delay:i,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const dG=u1(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Vg=10,fG=2e4;function pG(n){return T1(n.type)||n.type==="spring"||!bI(n.ease)}function mG(n,e){const t=new F1({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<fG;)i=t.sample(s),r.push(i.value),s+=Vg;return{times:void 0,keyframes:r,duration:s-Vg,ease:"linear"}}const l3={anticipate:zI,backInOut:FI,circInOut:VI};function gG(n){return n in l3}class uA extends n3{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new t3(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&Fg()&&gG(s)&&(s=l3[s]),pG(this.options)){const{onComplete:f,onUpdate:p,motionValue:m,element:y,...M}=this.options,_=mG(e,M);e=_.keyframes,e.length===1&&(e[1]=e[0]),i=_.duration,r=_.times,s=_.ease,o="keyframes"}const d=hG(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?($b(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;a.set(A0(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Zs(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Zs(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Ks(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return lr;const{animation:i}=t;$b(i,e)}return lr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:d,onComplete:f,element:p,...m}=this.options,y=new F1({...m,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),M=Ks(this.time);c.setWithVelocity(y.sample(M-Vg).value,y.sample(M).value,Vg)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return dG()&&i&&uG.has(i)&&!l&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const vG={type:"spring",stiffness:500,damping:25,restSpeed:10},yG=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),_G={type:"keyframes",duration:.8},xG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},SG=(n,{keyframes:e})=>e.length>2?_G:Nl.has(n)?n.startsWith("scale")?yG(e[1]):vG:xG;function wG({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...d}){return!!Object.keys(d).length}const z1=(n,e,t,i={},r,s)=>o=>{const a=E1(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Ks(l);let d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};wG(a)||(d={...d,...SG(n,d)}),d.duration&&(d.duration=Ks(d.duration)),d.repeatDelay&&(d.repeatDelay=Ks(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const p=A0(d.keyframes,a);if(p!==void 0)return en.update(()=>{d.onUpdate(p),d.onComplete()}),new H5([])}return!s&&uA.supports(d)?new uA(d):new F1(d)};function MG({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function c3(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],d=r&&n.animationState&&n.animationState.getState()[r];for(const f in l){const p=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),m=l[f];if(m===void 0||d&&MG(d,f))continue;const y={delay:t,...E1(o||{},f)};let M=!1;if(window.MotionHandoffAnimation){const g=NI(n);if(g){const w=window.MotionHandoffAnimation(g,f,en);w!==null&&(y.startTime=w,M=!0)}}tS(n,f),p.start(z1(f,p,m,n.shouldReduceMotion&&LI.has(f)?{type:!1}:y,n,M));const _=p.animation;_&&c.push(_)}return a&&Promise.all(c).then(()=>{en.update(()=>{a&&nH(n,a)})}),c}function lS(n,e,t={}){var i;const r=b0(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(c3(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=s;return EG(n,e,d+c,f,p,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,d]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>d())}else return Promise.all([o(),a(t.delay)])}function EG(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(TG).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(lS(c,e,{...s,delay:t+l(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function TG(n,e){return n.sortNodePosition(e)}function bG(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>lS(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=lS(n,e,t);else{const r=typeof e=="function"?b0(n,e,t.custom):e;i=Promise.all(c3(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const AG=d1.length;function u3(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?u3(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<AG;t++){const i=d1[t],r=n.props[i];(Td(r)||r===!1)&&(e[i]=r)}return e}const CG=[...h1].reverse(),PG=h1.length;function RG(n){return e=>Promise.all(e.map(({animation:t,options:i})=>bG(n,t,i)))}function LG(n){let e=RG(n),t=hA(),i=!0;const r=l=>(c,d)=>{var f;const p=b0(n,d,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:m,transitionEnd:y,...M}=p;c={...c,...M,...y}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,d=u3(n.parent)||{},f=[],p=new Set;let m={},y=1/0;for(let _=0;_<PG;_++){const g=CG[_],w=t[g],x=c[g]!==void 0?c[g]:d[g],T=Td(x),C=g===l?w.isActive:null;C===!1&&(y=_);let P=x===d[g]&&x!==c[g]&&T;if(P&&i&&n.manuallyAnimateOnMount&&(P=!1),w.protectedKeys={...m},!w.isActive&&C===null||!x&&!w.prevProp||E0(x)||typeof x=="boolean")continue;const R=IG(w.prevProp,x);let D=R||g===l&&w.isActive&&!P&&T||_>y&&T,X=!1;const b=Array.isArray(x)?x:[x];let L=b.reduce(r(g),{});C===!1&&(L={});const{prevResolvedValues:Z={}}=w,re={...Z,...L},W=ae=>{D=!0,p.has(ae)&&(X=!0,p.delete(ae)),w.needsAnimating[ae]=!0;const N=n.getValue(ae);N&&(N.liveStyle=!1)};for(const ae in re){const N=L[ae],B=Z[ae];if(m.hasOwnProperty(ae))continue;let H=!1;Jx(N)&&Jx(B)?H=!MI(N,B):H=N!==B,H?N!=null?W(ae):p.add(ae):N!==void 0&&p.has(ae)?W(ae):w.protectedKeys[ae]=!0}w.prevProp=x,w.prevResolvedValues=L,w.isActive&&(m={...m,...L}),i&&n.blockInitialAnimation&&(D=!1),D&&(!(P&&R)||X)&&f.push(...b.map(ae=>({animation:ae,options:{type:g}})))}if(p.size){const _={};p.forEach(g=>{const w=n.getBaseTarget(g),x=n.getValue(g);x&&(x.liveStyle=!0),_[g]=w??null}),f.push({animation:_})}let M=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(M=!1),i=!1,M?e(f):Promise.resolve()}function a(l,c){var d;if(t[l].isActive===c)return Promise.resolve();(d=n.variantChildren)===null||d===void 0||d.forEach(p=>{var m;return(m=p.animationState)===null||m===void 0?void 0:m.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const p in t)t[p].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=hA(),i=!0}}}function IG(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!MI(e,n):!1}function Ca(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hA(){return{animate:Ca(!0),whileInView:Ca(),whileHover:Ca(),whileTap:Ca(),whileDrag:Ca(),whileFocus:Ca(),exit:Ca()}}class fa{constructor(e){this.isMounted=!1,this.node=e}update(){}}class NG extends fa{constructor(e){super(e),e.animationState||(e.animationState=LG(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();E0(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let DG=0;class kG extends fa{constructor(){super(...arguments),this.id=DG++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const OG={animation:{Feature:NG},exit:{Feature:kG}};function Pd(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function df(n){return{point:{x:n.pageX,y:n.pageY}}}const UG=n=>e=>A1(e)&&n(e,df(e));function Kh(n,e,t,i){return Pd(n,e,UG(t),i)}const dA=(n,e)=>Math.abs(n-e);function FG(n,e){const t=dA(n.x,e.x),i=dA(n.y,e.y);return Math.sqrt(t**2+i**2)}class h3{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=qy(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=FG(f.offset,{x:0,y:0})>=3;if(!p&&!m)return;const{point:y}=f,{timestamp:M}=ei;this.history.push({...y,timestamp:M});const{onStart:_,onMove:g}=this.handlers;p||(_&&_(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=$y(p,this.transformPagePoint),en.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:M}=this.handlers;if(this.dragSnapToOrigin&&M&&M(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=qy(f.type==="pointercancel"?this.lastMoveEventInfo:$y(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,_),y&&y(f,_)},!A1(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=df(e),a=$y(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ei;this.history=[{...l,timestamp:c}];const{onSessionStart:d}=t;d&&d(e,qy(a,this.history)),this.removeListeners=hf(Kh(this.contextWindow,"pointermove",this.handlePointerMove),Kh(this.contextWindow,"pointerup",this.handlePointerUp),Kh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),sa(this.updatePoint)}}function $y(n,e){return e?{point:e(n.point)}:n}function fA(n,e){return{x:n.x-e.x,y:n.y-e.y}}function qy({point:n},e){return{point:n,delta:fA(n,d3(e)),offset:fA(n,zG(e)),velocity:BG(e,.1)}}function zG(n){return n[0]}function d3(n){return n[n.length-1]}function BG(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=d3(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Ks(e)));)t--;if(!i)return{x:0,y:0};const s=Zs(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const f3=1e-4,VG=1-f3,HG=1+f3,p3=.01,GG=0-p3,jG=0+p3;function hr(n){return n.max-n.min}function WG(n,e,t){return Math.abs(n-e)<=t}function pA(n,e,t,i=.5){n.origin=i,n.originPoint=an(e.min,e.max,n.origin),n.scale=hr(t)/hr(e),n.translate=an(t.min,t.max,n.origin)-n.originPoint,(n.scale>=VG&&n.scale<=HG||isNaN(n.scale))&&(n.scale=1),(n.translate>=GG&&n.translate<=jG||isNaN(n.translate))&&(n.translate=0)}function Zh(n,e,t,i){pA(n.x,e.x,t.x,i?i.originX:void 0),pA(n.y,e.y,t.y,i?i.originY:void 0)}function mA(n,e,t){n.min=t.min+e.min,n.max=n.min+hr(e)}function XG(n,e,t){mA(n.x,e.x,t.x),mA(n.y,e.y,t.y)}function gA(n,e,t){n.min=e.min-t.min,n.max=n.min+hr(e)}function Jh(n,e,t){gA(n.x,e.x,t.x),gA(n.y,e.y,t.y)}function $G(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?an(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?an(t,n,i.max):Math.min(n,t)),n}function vA(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function qG(n,{top:e,left:t,bottom:i,right:r}){return{x:vA(n.x,t,r),y:vA(n.y,e,i)}}function yA(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function YG(n,e){return{x:yA(n.x,e.x),y:yA(n.y,e.y)}}function KG(n,e){let t=.5;const i=hr(n),r=hr(e);return r>i?t=gu(e.min,e.max-i,n.min):i>r&&(t=gu(n.min,n.max-r,e.min)),ro(0,1,t)}function ZG(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const cS=.35;function JG(n=cS){return n===!1?n=0:n===!0&&(n=cS),{x:_A(n,"left","right"),y:_A(n,"top","bottom")}}function _A(n,e,t){return{min:xA(n,e),max:xA(n,t)}}function xA(n,e){return typeof n=="number"?n:n[e]||0}const SA=()=>({translate:0,scale:1,origin:0,originPoint:0}),jc=()=>({x:SA(),y:SA()}),wA=()=>({min:0,max:0}),wn=()=>({x:wA(),y:wA()});function Ar(n){return[n("x"),n("y")]}function m3({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function QG({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function ej(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function Yy(n){return n===void 0||n===1}function uS({scale:n,scaleX:e,scaleY:t}){return!Yy(n)||!Yy(e)||!Yy(t)}function Ga(n){return uS(n)||g3(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function g3(n){return MA(n.x)||MA(n.y)}function MA(n){return n&&n!=="0%"}function Hg(n,e,t){const i=n-t,r=e*i;return t+r}function EA(n,e,t,i,r){return r!==void 0&&(n=Hg(n,r,i)),Hg(n,t,i)+e}function hS(n,e=0,t=1,i,r){n.min=EA(n.min,e,t,i,r),n.max=EA(n.max,e,t,i,r)}function v3(n,{x:e,y:t}){hS(n.x,e.translate,e.scale,e.originPoint),hS(n.y,t.translate,t.scale,t.originPoint)}const TA=.999999999999,bA=1.0000000000001;function tj(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Xc(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,v3(n,o)),i&&Ga(s.latestValues)&&Xc(n,s.latestValues))}e.x<bA&&e.x>TA&&(e.x=1),e.y<bA&&e.y>TA&&(e.y=1)}function Wc(n,e){n.min=n.min+e,n.max=n.max+e}function AA(n,e,t,i,r=.5){const s=an(n.min,n.max,r);hS(n,e,t,s,i)}function Xc(n,e){AA(n.x,e.x,e.scaleX,e.scale,e.originX),AA(n.y,e.y,e.scaleY,e.scale,e.originY)}function y3(n,e){return m3(ej(n.getBoundingClientRect(),e))}function nj(n,e,t){const i=y3(n,t),{scroll:r}=e;return r&&(Wc(i.x,r.offset.x),Wc(i.y,r.offset.y)),i}const _3=({current:n})=>n?n.ownerDocument.defaultView:null,ij=new WeakMap;class rj{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(df(d).point)},s=(d,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Z5(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ar(_=>{let g=this.getAxisMotionValue(_).get()||0;if(xs.test(g)){const{projection:w}=this.visualElement;if(w&&w.layout){const x=w.layout.layoutBox[_];x&&(g=hr(x)*(parseFloat(g)/100))}}this.originPoint[_]=g}),y&&en.postRender(()=>y(d,f)),tS(this.visualElement,"transform");const{animationState:M}=this.visualElement;M&&M.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:M}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:_}=f;if(m&&this.currentDirection===null){this.currentDirection=sj(_),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,_),this.updateAxis("y",f.point,_),this.visualElement.render(),M&&M(d,f)},a=(d,f)=>this.stop(d,f),l=()=>Ar(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new h3(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:_3(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&en.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!Gp(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=$G(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Hc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=qG(r.layoutBox,t):this.constraints=!1,this.elastic=JG(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ar(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=ZG(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Hc(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=nj(i,r.root,this.visualElement.getTransformPagePoint());let o=YG(r.layout.layoutBox,s);if(t){const a=t(QG(o));this.hasMutatedConstraints=!!a,a&&(o=m3(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Ar(d=>{if(!Gp(d,t,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const p=r?200:1e6,m=r?40:1e7,y={type:"inertia",velocity:i?e[d]:0,bounceStiffness:p,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(d,y)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return tS(this.visualElement,e),i.start(z1(e,i,0,t,this.visualElement,!1))}stopAnimation(){Ar(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ar(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Ar(t=>{const{drag:i}=this.getProps();if(!Gp(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-an(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Hc(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ar(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=KG({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Ar(o=>{if(!Gp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(an(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;ij.set(this.visualElement,this);const e=this.visualElement.current,t=Kh(e,"pointerdown",l=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Hc(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),en.read(i);const o=Pd(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Ar(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=cS,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Gp(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function sj(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class oj extends fa{constructor(e){super(e),this.removeGroupControls=lr,this.removeListeners=lr,this.controls=new rj(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||lr}unmount(){this.removeGroupControls(),this.removeListeners()}}const CA=n=>(e,t)=>{n&&en.postRender(()=>n(e,t))};class aj extends fa{constructor(){super(...arguments),this.removePointerDownListener=lr}onPointerDown(e){this.session=new h3(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:_3(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:CA(e),onStart:CA(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&en.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=Kh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Qm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function PA(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const ph={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(ot.test(n))n=parseFloat(n);else return n;const t=PA(n,e.target.x),i=PA(n,e.target.y);return`${t}% ${i}%`}},lj={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=oa.parse(n);if(r.length>5)return i;const s=oa.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=an(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class cj extends G.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;R5(uj),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Qm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||en.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),p1.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function x3(n){const[e,t]=WV(),i=G.useContext(iI);return k.jsx(cj,{...n,layoutGroup:i,switchLayoutGroup:G.useContext(uI),isPresent:e,safeToRemove:t})}const uj={borderRadius:{...ph,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ph,borderTopRightRadius:ph,borderBottomLeftRadius:ph,borderBottomRightRadius:ph,boxShadow:lj};function hj(n,e,t){const i=mi(n)?n:Ad(n);return i.start(z1("",i,e,t)),i.animation}function dj(n){return n instanceof SVGElement&&n.tagName!=="svg"}const fj=(n,e)=>n.depth-e.depth;class pj{constructor(){this.children=[],this.isDirty=!1}add(e){C1(this.children,e),this.isDirty=!0}remove(e){P1(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(fj),this.isDirty=!1,this.children.forEach(e)}}function mj(n,e){const t=Ss.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(sa(i),n(s-e))};return en.read(i,!0),()=>sa(i)}const S3=["TopLeft","TopRight","BottomLeft","BottomRight"],gj=S3.length,RA=n=>typeof n=="string"?parseFloat(n):n,LA=n=>typeof n=="number"||ot.test(n);function vj(n,e,t,i,r,s){r?(n.opacity=an(0,t.opacity!==void 0?t.opacity:1,yj(i)),n.opacityExit=an(e.opacity!==void 0?e.opacity:1,0,_j(i))):s&&(n.opacity=an(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<gj;o++){const a=`border${S3[o]}Radius`;let l=IA(e,a),c=IA(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||LA(l)===LA(c)?(n[a]=Math.max(an(RA(l),RA(c),i),0),(xs.test(c)||xs.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=an(e.rotate||0,t.rotate||0,i))}function IA(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const yj=w3(0,.5,BI),_j=w3(.5,.95,lr);function w3(n,e,t){return i=>i<n?0:i>e?1:t(gu(n,e,i))}function NA(n,e){n.min=e.min,n.max=e.max}function Tr(n,e){NA(n.x,e.x),NA(n.y,e.y)}function DA(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function kA(n,e,t,i,r){return n-=e,n=Hg(n,1/t,i),r!==void 0&&(n=Hg(n,1/r,i)),n}function xj(n,e=0,t=1,i=.5,r,s=n,o=n){if(xs.test(e)&&(e=parseFloat(e),e=an(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=an(s.min,s.max,i);n===s&&(a-=e),n.min=kA(n.min,e,t,a,r),n.max=kA(n.max,e,t,a,r)}function OA(n,e,[t,i,r],s,o){xj(n,e[t],e[i],e[r],e.scale,s,o)}const Sj=["x","scaleX","originX"],wj=["y","scaleY","originY"];function UA(n,e,t,i){OA(n.x,e,Sj,t?t.x:void 0,i?i.x:void 0),OA(n.y,e,wj,t?t.y:void 0,i?i.y:void 0)}function FA(n){return n.translate===0&&n.scale===1}function M3(n){return FA(n.x)&&FA(n.y)}function zA(n,e){return n.min===e.min&&n.max===e.max}function Mj(n,e){return zA(n.x,e.x)&&zA(n.y,e.y)}function BA(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function E3(n,e){return BA(n.x,e.x)&&BA(n.y,e.y)}function VA(n){return hr(n.x)/hr(n.y)}function HA(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class Ej{constructor(){this.members=[]}add(e){C1(this.members,e),e.scheduleRender()}remove(e){if(P1(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Tj(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=(t==null?void 0:t.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:d,rotateX:f,rotateY:p,skewX:m,skewY:y}=t;c&&(i=`perspective(${c}px) ${i}`),d&&(i+=`rotate(${d}deg) `),f&&(i+=`rotateX(${f}deg) `),p&&(i+=`rotateY(${p}deg) `),m&&(i+=`skewX(${m}deg) `),y&&(i+=`skewY(${y}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const ja={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},kh=typeof window<"u"&&window.MotionDebug!==void 0,Ky=["","X","Y","Z"],bj={visibility:"hidden"},GA=1e3;let Aj=0;function Zy(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function T3(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=NI(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",en,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&T3(i)}function b3({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=Aj++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,kh&&(ja.totalNodes=ja.resolvedTargetDeltas=ja.recalculatedProjection=0),this.nodes.forEach(Rj),this.nodes.forEach(kj),this.nodes.forEach(Oj),this.nodes.forEach(Lj),kh&&window.MotionDebug.record(ja)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new pj)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new R1),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=dj(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const p=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=mj(p,250),Qm.hasAnimatedSinceResize&&(Qm.hasAnimatedSinceResize=!1,this.nodes.forEach(WA))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const M=this.options.transition||d.getDefaultTransition()||Vj,{onLayoutAnimationStart:_,onLayoutAnimationComplete:g}=d.getProps(),w=!this.targetLayout||!E3(this.targetLayout,y)||m,x=!p&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const T={...E1(M,"layout"),onPlay:_,onComplete:g};(d.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else p||WA(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,sa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Uj),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&T3(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(jA);return}this.isUpdating||this.nodes.forEach(Nj),this.isUpdating=!1,this.nodes.forEach(Dj),this.nodes.forEach(Cj),this.nodes.forEach(Pj),this.clearAllSnapshots();const a=Ss.now();ei.delta=ro(0,1e3/60,a-ei.timestamp),ei.timestamp=a,ei.isProcessing=!0,Vy.update.process(ei),Vy.preRender.process(ei),Vy.render.process(ei),ei.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,p1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Ij),this.sharedNodes.forEach(Fj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,en.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){en.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=wn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!M3(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||Ga(this.latestValues)||d)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Hj(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return wn();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(Gj))){const{scroll:d}=this.root;d&&(Wc(l.x,d.offset.x),Wc(l.y,d.offset.y))}return l}removeElementScroll(o){var a;const l=wn();if(Tr(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const d=this.path[c],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&Tr(l,o),Wc(l.x,f.offset.x),Wc(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=wn();Tr(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Xc(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Ga(d.latestValues)&&Xc(l,d.latestValues)}return Ga(this.latestValues)&&Xc(l,this.latestValues),l}removeTransform(o){const a=wn();Tr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!Ga(c.latestValues))continue;uS(c.latestValues)&&c.updateSnapshot();const d=wn(),f=c.measurePageBox();Tr(d,f),UA(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return Ga(this.latestValues)&&UA(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ei.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=ei.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Jh(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=wn(),this.targetWithTransforms=wn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),XG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tr(this.target,this.layout.layoutBox),v3(this.target,this.targetDelta)):Tr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wn(),this.relativeTargetOrigin=wn(),Jh(this.relativeTargetOrigin,this.target,m.target),Tr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}kh&&ja.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||uS(this.parent.latestValues)||g3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ei.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Tr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;tj(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=wn());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(DA(this.prevProjectionDelta.x,this.projectionDelta.x),DA(this.prevProjectionDelta.y,this.projectionDelta.y)),Zh(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!HA(this.projectionDelta.x,this.prevProjectionDelta.x)||!HA(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),kh&&ja.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=jc(),this.projectionDelta=jc(),this.projectionDeltaWithTransform=jc()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},d={...this.latestValues},f=jc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const p=wn(),m=l?l.source:void 0,y=this.layout?this.layout.source:void 0,M=m!==y,_=this.getStack(),g=!_||_.members.length<=1,w=!!(M&&!g&&this.options.crossfade===!0&&!this.path.some(Bj));this.animationProgress=0;let x;this.mixTargetDelta=T=>{const C=T/1e3;XA(f.x,o.x,C),XA(f.y,o.y,C),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jh(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),zj(this.relativeTarget,this.relativeTargetOrigin,p,C),x&&Mj(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=wn()),Tr(x,this.relativeTarget)),M&&(this.animationValues=d,vj(d,c,this.latestValues,C,w,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(sa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=en.update(()=>{Qm.hasAnimatedSinceResize=!0,this.currentAnimation=hj(0,GA,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GA),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:d}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&A3(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||wn();const f=hr(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const p=hr(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+p}Tr(a,l),Xc(a,d),Zh(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Ej),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&Zy("z",o,c,this.animationValues);for(let d=0;d<Ky.length;d++)Zy(`rotate${Ky[d]}`,o,c,this.animationValues),Zy(`skew${Ky[d]}`,o,c,this.animationValues);o.render();for(const d in c)o.setStaticValue(d,c[d]),this.animationValues&&(this.animationValues[d]=c[d]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bj;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Zm(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const M={};return this.options.layoutId&&(M.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,M.pointerEvents=Zm(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ga(this.latestValues)&&(M.transform=d?d({},""):"none",this.hasProjected=!1),M}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=Tj(this.projectionDeltaWithTransform,this.treeScale,p),d&&(c.transform=d(p,c.transform));const{x:m,y}=this.projectionDelta;c.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=p.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:c.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const M in Ug){if(p[M]===void 0)continue;const{correct:_,applyTo:g}=Ug[M],w=c.transform==="none"?p[M]:_(p[M],f);if(g){const x=g.length;for(let T=0;T<x;T++)c[g[T]]=w}else c[M]=w}return this.options.layoutId&&(c.pointerEvents=f===this?Zm(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(jA),this.root.sharedNodes.clear()}}}function Cj(n){n.updateLayout()}function Pj(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Ar(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=hr(p);p.min=i[f].min,p.max=p.min+m}):A3(s,t.layoutBox,i)&&Ar(f=>{const p=o?t.measuredBox[f]:t.layoutBox[f],m=hr(i[f]);p.max=p.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+m)});const a=jc();Zh(a,i,t.layoutBox);const l=jc();o?Zh(l,n.applyTransform(r,!0),t.measuredBox):Zh(l,i,t.layoutBox);const c=!M3(a);let d=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:m}=f;if(p&&m){const y=wn();Jh(y,t.layoutBox,p.layoutBox);const M=wn();Jh(M,i,m.layoutBox),E3(y,M)||(d=!0),f.options.layoutRoot&&(n.relativeTarget=M,n.relativeTargetOrigin=y,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Rj(n){kh&&ja.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Lj(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Ij(n){n.clearSnapshot()}function jA(n){n.clearMeasurements()}function Nj(n){n.isLayoutDirty=!1}function Dj(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function WA(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function kj(n){n.resolveTargetDelta()}function Oj(n){n.calcProjection()}function Uj(n){n.resetSkewAndRotation()}function Fj(n){n.removeLeadSnapshot()}function XA(n,e,t){n.translate=an(e.translate,0,t),n.scale=an(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function $A(n,e,t,i){n.min=an(e.min,t.min,i),n.max=an(e.max,t.max,i)}function zj(n,e,t,i){$A(n.x,e.x,t.x,i),$A(n.y,e.y,t.y,i)}function Bj(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Vj={duration:.45,ease:[.4,0,.1,1]},qA=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),YA=qA("applewebkit/")&&!qA("chrome/")?Math.round:lr;function KA(n){n.min=YA(n.min),n.max=YA(n.max)}function Hj(n){KA(n.x),KA(n.y)}function A3(n,e,t){return n==="position"||n==="preserve-aspect"&&!WG(VA(e),VA(t),.2)}function Gj(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const jj=b3({attachResizeListener:(n,e)=>Pd(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Jy={current:void 0},C3=b3({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Jy.current){const n=new jj({});n.mount(window),n.setOptions({layoutScroll:!0}),Jy.current=n}return Jy.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Wj={pan:{Feature:aj},drag:{Feature:oj,ProjectionNode:C3,MeasureLayout:x3}};function ZA(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&en.postRender(()=>s(e,df(e)))}class Xj extends fa{mount(){const{current:e}=this.node;e&&(this.unmount=X5(e,t=>(ZA(this.node,t,"Start"),i=>ZA(this.node,i,"End"))))}unmount(){}}class $j extends fa{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hf(Pd(this.node.current,"focus",()=>this.onFocus()),Pd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JA(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&en.postRender(()=>s(e,df(e)))}class qj extends fa{mount(){const{current:e}=this.node;e&&(this.unmount=K5(e,t=>(JA(this.node,t,"Start"),(i,{success:r})=>JA(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const dS=new WeakMap,Qy=new WeakMap,Yj=n=>{const e=dS.get(n.target);e&&e(n)},Kj=n=>{n.forEach(Yj)};function Zj({root:n,...e}){const t=n||document;Qy.has(t)||Qy.set(t,{});const i=Qy.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Kj,{root:n,...e})),i[r]}function Jj(n,e,t){const i=Zj(e);return dS.set(n,t),i.observe(n),()=>{dS.delete(n),i.unobserve(n)}}const Qj={some:0,all:1};class eW extends fa{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Qj[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=c?d:f;p&&p(l)};return Jj(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(tW(e,t))&&this.startObserver()}unmount(){}}function tW({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const nW={inView:{Feature:eW},tap:{Feature:qj},focus:{Feature:$j},hover:{Feature:Xj}},iW={layout:{ProjectionNode:C3,MeasureLayout:x3}},fS={current:null},P3={current:!1};function rW(){if(P3.current=!0,!!c1)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>fS.current=n.matches;n.addListener(e),e()}else fS.current=!1}const sW=[...e3,di,oa],oW=n=>sW.find(QI(n)),QA=new WeakMap;function aW(n,e,t){for(const i in e){const r=e[i],s=t[i];if(mi(r))n.addValue(i,r);else if(mi(s))n.addValue(i,Ad(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,Ad(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const eC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class lW{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=O1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Ss.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,en.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:d}=o;this.onUpdate=d,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=T0(t),this.isVariantNode=lI(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in p){const y=p[m];l[m]!==void 0&&mi(y)&&y.set(l[m],!1)}}mount(e){this.current=e,QA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),P3.current||rW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fS.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){QA.delete(this.current),this.projection&&this.projection.unmount(),sa(this.notifyUpdate),sa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Nl.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&en.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in vu){const t=vu[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<eC.length;i++){const r=eC[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=aW(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=Ad(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ZI(r)||HI(r))?r=parseFloat(r):!oW(r)&&oa.test(t)&&(r=qI(e,t)),this.setBaseTarget(e,mi(r)?r.get():r)),mi(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=g1(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!mi(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new R1),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class R3 extends lW{constructor(){super(...arguments),this.KeyframeResolver=t3}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;mi(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function cW(n){return window.getComputedStyle(n)}class uW extends R3{constructor(){super(...arguments),this.type="html",this.renderInstance=vI}readValueFromInstance(e,t){if(Nl.has(t)){const i=k1(t);return i&&i.default||0}else{const i=cW(e),r=(pI(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return y3(e,t)}build(e,t,i){_1(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return M1(e,t,i)}}class hW extends R3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wn}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Nl.has(t)){const i=k1(t);return i&&i.default||0}return t=yI.has(t)?t:f1(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return SI(e,t,i)}build(e,t,i){x1(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){_I(e,t,i,r)}mount(e){this.isSVGTag=w1(e.tagName),super.mount(e)}}const dW=(n,e)=>m1(n)?new hW(e):new uW(e,{allowProjection:n!==G.Fragment}),fW=z5({...OG,...nW,...Wj,...iW},dW),Nn=e5(fW);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const C0="161",Wa={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Xa={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},L3=0,pS=1,I3=2,pW=3,N3=0,P0=1,Qh=2,jr=3,so=0,Ri=1,ms=2,Js=0,hl=1,mS=2,gS=3,vS=4,D3=5,Bo=100,k3=101,O3=102,yS=103,_S=104,U3=200,F3=201,z3=202,B3=203,Gg=204,jg=205,V3=206,H3=207,G3=208,j3=209,W3=210,X3=211,$3=212,q3=213,Y3=214,K3=0,Z3=1,J3=2,Rd=3,Q3=4,eN=5,tN=6,nN=7,ff=0,iN=1,rN=2,ws=0,sN=1,oN=2,aN=3,B1=4,lN=5,cN=6,xS="attached",uN="detached",R0=300,oo=301,aa=302,Ld=303,Id=304,Iu=306,Nd=1e3,pi=1001,Dd=1002,Mn=1003,Wg=1004,mW=1004,Ka=1005,gW=1005,Jt=1006,ed=1007,vW=1007,gs=1008,yW=1008,Ms=1009,hN=1010,dN=1011,L0=1012,V1=1013,$s=1014,ir=1015,wl=1016,H1=1017,G1=1018,Qo=1020,fN=1021,Ai=1023,pN=1024,mN=1025,ea=1026,Ml=1027,gN=1028,j1=1029,vN=1030,W1=1031,X1=1033,eg=33776,tg=33777,ng=33778,ig=33779,SS=35840,wS=35841,MS=35842,ES=35843,$1=36196,TS=37492,bS=37496,AS=37808,CS=37809,PS=37810,RS=37811,LS=37812,IS=37813,NS=37814,DS=37815,kS=37816,OS=37817,US=37818,FS=37819,zS=37820,BS=37821,rg=36492,VS=36494,HS=36495,yN=36283,GS=36284,jS=36285,WS=36286,_N=2200,xN=2201,SN=2202,kd=2300,Od=2301,sg=2302,rl=2400,sl=2401,Ud=2402,I0=2500,q1=2501,_W=0,xW=1,SW=2,Y1=3e3,ta=3001,wN=3200,MN=3201,pa=0,EN=1,rr="",kn="srgb",Ts="srgb-linear",N0="display-p3",pf="display-p3-linear",Fd="linear",$t="srgb",zd="rec709",Bd="p3",wW=0,$a=7680,MW=7681,EW=7682,TW=7683,bW=34055,AW=34056,CW=5386,PW=512,RW=513,LW=514,IW=515,NW=516,DW=517,kW=518,XS=519,TN=512,bN=513,AN=514,K1=515,CN=516,PN=517,RN=518,LN=519,Vd=35044,OW=35048,UW=35040,FW=35045,zW=35049,BW=35041,VW=35046,HW=35050,GW=35042,jW="100",$S="300 es",Xg=1035,vs=2e3,Hd=2001;let co=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const ci=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let tC=1234567;const dl=Math.PI/180,_u=180/Math.PI;function cr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ci[n&255]+ci[n>>8&255]+ci[n>>16&255]+ci[n>>24&255]+"-"+ci[e&255]+ci[e>>8&255]+"-"+ci[e>>16&15|64]+ci[e>>24&255]+"-"+ci[t&63|128]+ci[t>>8&255]+"-"+ci[t>>16&255]+ci[t>>24&255]+ci[i&255]+ci[i>>8&255]+ci[i>>16&255]+ci[i>>24&255]).toLowerCase()}function gn(n,e,t){return Math.max(e,Math.min(t,n))}function Z1(n,e){return(n%e+e)%e}function WW(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function XW(n,e,t){return n!==e?(t-n)/(e-n):0}function td(n,e,t){return(1-t)*n+t*e}function $W(n,e,t,i){return td(n,e,1-Math.exp(-t*i))}function qW(n,e=1){return e-Math.abs(Z1(n,e*2)-e)}function YW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function KW(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function ZW(n,e){return n+Math.floor(Math.random()*(e-n+1))}function JW(n,e){return n+Math.random()*(e-n)}function QW(n){return n*(.5-Math.random())}function e6(n){n!==void 0&&(tC=n);let e=tC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function t6(n){return n*dl}function n6(n){return n*_u}function qS(n){return(n&n-1)===0&&n!==0}function i6(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function $g(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function r6(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),d=o((e+i)/2),f=s((e-i)/2),p=o((e-i)/2),m=s((i-e)/2),y=o((i-e)/2);switch(r){case"XYX":n.set(a*d,l*f,l*p,a*c);break;case"YZY":n.set(l*p,a*d,l*f,a*c);break;case"ZXZ":n.set(l*f,l*p,a*d,a*c);break;case"XZX":n.set(a*d,l*y,l*m,a*c);break;case"YXY":n.set(l*m,a*d,l*y,a*c);break;case"ZYZ":n.set(l*y,l*m,a*d,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Ci(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function _t(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const s6={DEG2RAD:dl,RAD2DEG:_u,generateUUID:cr,clamp:gn,euclideanModulo:Z1,mapLinear:WW,inverseLerp:XW,lerp:td,damp:$W,pingpong:qW,smoothstep:YW,smootherstep:KW,randInt:ZW,randFloat:JW,randFloatSpread:QW,seededRandom:e6,degToRad:t6,radToDeg:n6,isPowerOfTwo:qS,ceilPowerOfTwo:i6,floorPowerOfTwo:$g,setQuaternionFromProperEuler:r6,normalize:_t,denormalize:Ci};class de{constructor(e=0,t=0){de.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Tt{constructor(e,t,i,r,s,o,a,l,c){Tt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const d=this.elements;return d[0]=e,d[1]=r,d[2]=a,d[3]=t,d[4]=s,d[5]=l,d[6]=i,d[7]=o,d[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],d=i[4],f=i[7],p=i[2],m=i[5],y=i[8],M=r[0],_=r[3],g=r[6],w=r[1],x=r[4],T=r[7],C=r[2],P=r[5],R=r[8];return s[0]=o*M+a*w+l*C,s[3]=o*_+a*x+l*P,s[6]=o*g+a*T+l*R,s[1]=c*M+d*w+f*C,s[4]=c*_+d*x+f*P,s[7]=c*g+d*T+f*R,s[2]=p*M+m*w+y*C,s[5]=p*_+m*x+y*P,s[8]=p*g+m*T+y*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8];return t*o*d-t*a*c-i*s*d+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=d*o-a*c,p=a*l-d*s,m=c*s-o*l,y=t*f+i*p+r*m;if(y===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/y;return e[0]=f*M,e[1]=(r*c-d*i)*M,e[2]=(a*i-r*o)*M,e[3]=p*M,e[4]=(d*t-r*l)*M,e[5]=(r*s-a*t)*M,e[6]=m*M,e[7]=(i*l-c*t)*M,e[8]=(o*t-i*s)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(e_.makeScale(e,t)),this}rotate(e){return this.premultiply(e_.makeRotation(-e)),this}translate(e,t){return this.premultiply(e_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const e_=new Tt;function IN(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const o6={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function $c(n,e){return new o6[n](e)}function Gd(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function NN(){const n=Gd("canvas");return n.style.display="block",n}const nC={};function fl(n){n in nC||(nC[n]=!0,console.warn(n))}const iC=new Tt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),rC=new Tt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),jp={[Ts]:{transfer:Fd,primaries:zd,toReference:n=>n,fromReference:n=>n},[kn]:{transfer:$t,primaries:zd,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[pf]:{transfer:Fd,primaries:Bd,toReference:n=>n.applyMatrix3(rC),fromReference:n=>n.applyMatrix3(iC)},[N0]:{transfer:$t,primaries:Bd,toReference:n=>n.convertSRGBToLinear().applyMatrix3(rC),fromReference:n=>n.applyMatrix3(iC).convertLinearToSRGB()}},a6=new Set([Ts,pf]),Bt={enabled:!0,_workingColorSpace:Ts,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!a6.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=jp[e].toReference,r=jp[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return jp[n].primaries},getTransfer:function(n){return n===rr?Fd:jp[n].transfer}};function ou(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function t_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let sc;class J1{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{sc===void 0&&(sc=Gd("canvas")),sc.width=e.width,sc.height=e.height;const i=sc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=sc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Gd("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=ou(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(ou(t[i]/255)*255):t[i]=ou(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let l6=0;class ol{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:l6++}),this.uuid=cr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(n_(r[o].image)):s.push(n_(r[o]))}else s=n_(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function n_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?J1.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let c6=0;class vn extends co{constructor(e=vn.DEFAULT_IMAGE,t=vn.DEFAULT_MAPPING,i=pi,r=pi,s=Jt,o=gs,a=Ai,l=Ms,c=vn.DEFAULT_ANISOTROPY,d=rr){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:c6++}),this.uuid=cr(),this.name="",this.source=new ol(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new de(0,0),this.repeat=new de(1,1),this.center=new de(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Tt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(fl("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===ta?kn:rr),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==R0)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nd:e.x=e.x-Math.floor(e.x);break;case pi:e.x=e.x<0?0:1;break;case Dd:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Nd:e.y=e.y-Math.floor(e.y);break;case pi:e.y=e.y<0?0:1;break;case Dd:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return fl("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===kn?ta:Y1}set encoding(e){fl("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ta?kn:rr}}vn.DEFAULT_IMAGE=null;vn.DEFAULT_MAPPING=R0;vn.DEFAULT_ANISOTROPY=1;class Vt{constructor(e=0,t=0,i=0,r=1){Vt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],d=l[4],f=l[8],p=l[1],m=l[5],y=l[9],M=l[2],_=l[6],g=l[10];if(Math.abs(d-p)<.01&&Math.abs(f-M)<.01&&Math.abs(y-_)<.01){if(Math.abs(d+p)<.1&&Math.abs(f+M)<.1&&Math.abs(y+_)<.1&&Math.abs(c+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const x=(c+1)/2,T=(m+1)/2,C=(g+1)/2,P=(d+p)/4,R=(f+M)/4,D=(y+_)/4;return x>T&&x>C?x<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(x),r=P/i,s=R/i):T>C?T<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(T),i=P/r,s=D/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=R/s,r=D/s),this.set(i,r,s,t),this}let w=Math.sqrt((_-y)*(_-y)+(f-M)*(f-M)+(p-d)*(p-d));return Math.abs(w)<.001&&(w=1),this.x=(_-y)/w,this.y=(f-M)/w,this.z=(p-d)/w,this.w=Math.acos((c+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class DN extends co{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Vt(0,0,e,t),this.scissorTest=!1,this.viewport=new Vt(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(fl("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===ta?kn:rr),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jt,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new vn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ol(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class kr extends DN{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class D0 extends vn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Mn,this.minFilter=Mn,this.wrapR=pi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class u6 extends kr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new D0(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Q1 extends vn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Mn,this.minFilter=Mn,this.wrapR=pi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class h6 extends kr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Q1(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class d6 extends kr{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class gi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],d=i[r+2],f=i[r+3];const p=s[o+0],m=s[o+1],y=s[o+2],M=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f;return}if(a===1){e[t+0]=p,e[t+1]=m,e[t+2]=y,e[t+3]=M;return}if(f!==M||l!==p||c!==m||d!==y){let _=1-a;const g=l*p+c*m+d*y+f*M,w=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const C=Math.sqrt(x),P=Math.atan2(C,g*w);_=Math.sin(_*P)/C,a=Math.sin(a*P)/C}const T=a*w;if(l=l*_+p*T,c=c*_+m*T,d=d*_+y*T,f=f*_+M*T,_===1-a){const C=1/Math.sqrt(l*l+c*c+d*d+f*f);l*=C,c*=C,d*=C,f*=C}}e[t]=l,e[t+1]=c,e[t+2]=d,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],d=i[r+3],f=s[o],p=s[o+1],m=s[o+2],y=s[o+3];return e[t]=a*y+d*f+l*m-c*p,e[t+1]=l*y+d*p+c*f-a*m,e[t+2]=c*y+d*m+a*p-l*f,e[t+3]=d*y-a*f-l*p-c*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),d=a(r/2),f=a(s/2),p=l(i/2),m=l(r/2),y=l(s/2);switch(o){case"XYZ":this._x=p*d*f+c*m*y,this._y=c*m*f-p*d*y,this._z=c*d*y+p*m*f,this._w=c*d*f-p*m*y;break;case"YXZ":this._x=p*d*f+c*m*y,this._y=c*m*f-p*d*y,this._z=c*d*y-p*m*f,this._w=c*d*f+p*m*y;break;case"ZXY":this._x=p*d*f-c*m*y,this._y=c*m*f+p*d*y,this._z=c*d*y+p*m*f,this._w=c*d*f-p*m*y;break;case"ZYX":this._x=p*d*f-c*m*y,this._y=c*m*f+p*d*y,this._z=c*d*y-p*m*f,this._w=c*d*f+p*m*y;break;case"YZX":this._x=p*d*f+c*m*y,this._y=c*m*f+p*d*y,this._z=c*d*y-p*m*f,this._w=c*d*f-p*m*y;break;case"XZY":this._x=p*d*f-c*m*y,this._y=c*m*f-p*d*y,this._z=c*d*y+p*m*f,this._w=c*d*f+p*m*y;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],d=t[6],f=t[10],p=i+a+f;if(p>0){const m=.5/Math.sqrt(p+1);this._w=.25/m,this._x=(d-l)*m,this._y=(s-c)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(d-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+c)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-c)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+d)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+c)/m,this._y=(l+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(gn(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,d=t._w;return this._x=i*d+o*a+r*c-s*l,this._y=r*d+o*l+s*a-i*c,this._z=s*d+o*c+i*l-r*a,this._w=o*d-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),d=Math.atan2(c,a),f=Math.sin((1-t)*d)/c,p=Math.sin(t*d)/c;return this._w=o*f+this._w*p,this._x=i*f+this._x*p,this._y=r*f+this._y*p,this._z=s*f+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class F{constructor(e=0,t=0,i=0){F.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(sC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(sC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),d=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*d,this.y=i+l*d+a*c-s*f,this.z=r+l*f+s*d-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return i_.copy(this).projectOnVector(e),this.sub(i_)}reflect(e){return this.sub(i_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(gn(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const i_=new F,sC=new gi;class Li{constructor(e=new F(1/0,1/0,1/0),t=new F(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(zr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(zr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=zr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,zr):zr.fromBufferAttribute(s,o),zr.applyMatrix4(e.matrixWorld),this.expandByPoint(zr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Wp.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Wp.copy(i.boundingBox)),Wp.applyMatrix4(e.matrixWorld),this.union(Wp)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,zr),zr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(mh),Xp.subVectors(this.max,mh),oc.subVectors(e.a,mh),ac.subVectors(e.b,mh),lc.subVectors(e.c,mh),So.subVectors(ac,oc),wo.subVectors(lc,ac),Pa.subVectors(oc,lc);let t=[0,-So.z,So.y,0,-wo.z,wo.y,0,-Pa.z,Pa.y,So.z,0,-So.x,wo.z,0,-wo.x,Pa.z,0,-Pa.x,-So.y,So.x,0,-wo.y,wo.x,0,-Pa.y,Pa.x,0];return!r_(t,oc,ac,lc,Xp)||(t=[1,0,0,0,1,0,0,0,1],!r_(t,oc,ac,lc,Xp))?!1:($p.crossVectors(So,wo),t=[$p.x,$p.y,$p.z],r_(t,oc,ac,lc,Xp))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,zr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(zr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Ds[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Ds[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Ds[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Ds[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Ds[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Ds[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Ds[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Ds[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Ds),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Ds=[new F,new F,new F,new F,new F,new F,new F,new F],zr=new F,Wp=new Li,oc=new F,ac=new F,lc=new F,So=new F,wo=new F,Pa=new F,mh=new F,Xp=new F,$p=new F,Ra=new F;function r_(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Ra.fromArray(n,s);const a=r.x*Math.abs(Ra.x)+r.y*Math.abs(Ra.y)+r.z*Math.abs(Ra.z),l=e.dot(Ra),c=t.dot(Ra),d=i.dot(Ra);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>a)return!1}return!0}const f6=new Li,gh=new F,s_=new F;class vi{constructor(e=new F,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):f6.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;gh.subVectors(e,this.center);const t=gh.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(gh,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(s_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(gh.copy(e.center).add(s_)),this.expandByPoint(gh.copy(e.center).sub(s_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ks=new F,o_=new F,qp=new F,Mo=new F,a_=new F,Yp=new F,l_=new F;class Dl{constructor(e=new F,t=new F(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ks)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ks.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ks.copy(this.origin).addScaledVector(this.direction,t),ks.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){o_.copy(e).add(t).multiplyScalar(.5),qp.copy(t).sub(e).normalize(),Mo.copy(this.origin).sub(o_);const s=e.distanceTo(t)*.5,o=-this.direction.dot(qp),a=Mo.dot(this.direction),l=-Mo.dot(qp),c=Mo.lengthSq(),d=Math.abs(1-o*o);let f,p,m,y;if(d>0)if(f=o*l-a,p=o*a-l,y=s*d,f>=0)if(p>=-y)if(p<=y){const M=1/d;f*=M,p*=M,m=f*(f+o*p+2*a)+p*(o*f+p+2*l)+c}else p=s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p=-s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;else p<=-y?(f=Math.max(0,-(-o*s+a)),p=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c):p<=y?(f=0,p=Math.min(Math.max(-s,-l),s),m=p*(p+2*l)+c):(f=Math.max(0,-(o*s+a)),p=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+p*(p+2*l)+c);else p=o>0?-s:s,f=Math.max(0,-(o*p+a)),m=-f*f+p*(p+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(o_).addScaledVector(qp,p),m}intersectSphere(e,t){ks.subVectors(e.center,this.origin);const i=ks.dot(this.direction),r=ks.dot(ks)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,d=1/this.direction.y,f=1/this.direction.z,p=this.origin;return c>=0?(i=(e.min.x-p.x)*c,r=(e.max.x-p.x)*c):(i=(e.max.x-p.x)*c,r=(e.min.x-p.x)*c),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-p.z)*f,l=(e.max.z-p.z)*f):(a=(e.max.z-p.z)*f,l=(e.min.z-p.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ks)!==null}intersectTriangle(e,t,i,r,s){a_.subVectors(t,e),Yp.subVectors(i,e),l_.crossVectors(a_,Yp);let o=this.direction.dot(l_),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Mo.subVectors(this.origin,e);const l=a*this.direction.dot(Yp.crossVectors(Mo,Yp));if(l<0)return null;const c=a*this.direction.dot(a_.cross(Mo));if(c<0||l+c>o)return null;const d=-a*Mo.dot(l_);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class dt{constructor(e,t,i,r,s,o,a,l,c,d,f,p,m,y,M,_){dt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,d,f,p,m,y,M,_)}set(e,t,i,r,s,o,a,l,c,d,f,p,m,y,M,_){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=r,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=c,g[6]=d,g[10]=f,g[14]=p,g[3]=m,g[7]=y,g[11]=M,g[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new dt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/cc.setFromMatrixColumn(e,0).length(),s=1/cc.setFromMatrixColumn(e,1).length(),o=1/cc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),d=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const p=o*d,m=o*f,y=a*d,M=a*f;t[0]=l*d,t[4]=-l*f,t[8]=c,t[1]=m+y*c,t[5]=p-M*c,t[9]=-a*l,t[2]=M-p*c,t[6]=y+m*c,t[10]=o*l}else if(e.order==="YXZ"){const p=l*d,m=l*f,y=c*d,M=c*f;t[0]=p+M*a,t[4]=y*a-m,t[8]=o*c,t[1]=o*f,t[5]=o*d,t[9]=-a,t[2]=m*a-y,t[6]=M+p*a,t[10]=o*l}else if(e.order==="ZXY"){const p=l*d,m=l*f,y=c*d,M=c*f;t[0]=p-M*a,t[4]=-o*f,t[8]=y+m*a,t[1]=m+y*a,t[5]=o*d,t[9]=M-p*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const p=o*d,m=o*f,y=a*d,M=a*f;t[0]=l*d,t[4]=y*c-m,t[8]=p*c+M,t[1]=l*f,t[5]=M*c+p,t[9]=m*c-y,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const p=o*l,m=o*c,y=a*l,M=a*c;t[0]=l*d,t[4]=M-p*f,t[8]=y*f+m,t[1]=f,t[5]=o*d,t[9]=-a*d,t[2]=-c*d,t[6]=m*f+y,t[10]=p-M*f}else if(e.order==="XZY"){const p=o*l,m=o*c,y=a*l,M=a*c;t[0]=l*d,t[4]=-f,t[8]=c*d,t[1]=p*f+M,t[5]=o*d,t[9]=m*f-y,t[2]=y*f-m,t[6]=a*d,t[10]=M*f+p}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(p6,e,m6)}lookAt(e,t,i){const r=this.elements;return Ji.subVectors(e,t),Ji.lengthSq()===0&&(Ji.z=1),Ji.normalize(),Eo.crossVectors(i,Ji),Eo.lengthSq()===0&&(Math.abs(i.z)===1?Ji.x+=1e-4:Ji.z+=1e-4,Ji.normalize(),Eo.crossVectors(i,Ji)),Eo.normalize(),Kp.crossVectors(Ji,Eo),r[0]=Eo.x,r[4]=Kp.x,r[8]=Ji.x,r[1]=Eo.y,r[5]=Kp.y,r[9]=Ji.y,r[2]=Eo.z,r[6]=Kp.z,r[10]=Ji.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],d=i[1],f=i[5],p=i[9],m=i[13],y=i[2],M=i[6],_=i[10],g=i[14],w=i[3],x=i[7],T=i[11],C=i[15],P=r[0],R=r[4],D=r[8],X=r[12],b=r[1],L=r[5],Z=r[9],re=r[13],W=r[2],ne=r[6],J=r[10],ae=r[14],N=r[3],B=r[7],H=r[11],q=r[15];return s[0]=o*P+a*b+l*W+c*N,s[4]=o*R+a*L+l*ne+c*B,s[8]=o*D+a*Z+l*J+c*H,s[12]=o*X+a*re+l*ae+c*q,s[1]=d*P+f*b+p*W+m*N,s[5]=d*R+f*L+p*ne+m*B,s[9]=d*D+f*Z+p*J+m*H,s[13]=d*X+f*re+p*ae+m*q,s[2]=y*P+M*b+_*W+g*N,s[6]=y*R+M*L+_*ne+g*B,s[10]=y*D+M*Z+_*J+g*H,s[14]=y*X+M*re+_*ae+g*q,s[3]=w*P+x*b+T*W+C*N,s[7]=w*R+x*L+T*ne+C*B,s[11]=w*D+x*Z+T*J+C*H,s[15]=w*X+x*re+T*ae+C*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],d=e[2],f=e[6],p=e[10],m=e[14],y=e[3],M=e[7],_=e[11],g=e[15];return y*(+s*l*f-r*c*f-s*a*p+i*c*p+r*a*m-i*l*m)+M*(+t*l*m-t*c*p+s*o*p-r*o*m+r*c*d-s*l*d)+_*(+t*c*f-t*a*m-s*o*f+i*o*m+s*a*d-i*c*d)+g*(-r*a*d-t*l*f+t*a*p+r*o*f-i*o*p+i*l*d)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],d=e[8],f=e[9],p=e[10],m=e[11],y=e[12],M=e[13],_=e[14],g=e[15],w=f*_*c-M*p*c+M*l*m-a*_*m-f*l*g+a*p*g,x=y*p*c-d*_*c-y*l*m+o*_*m+d*l*g-o*p*g,T=d*M*c-y*f*c+y*a*m-o*M*m-d*a*g+o*f*g,C=y*f*l-d*M*l-y*a*p+o*M*p+d*a*_-o*f*_,P=t*w+i*x+r*T+s*C;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/P;return e[0]=w*R,e[1]=(M*p*s-f*_*s-M*r*m+i*_*m+f*r*g-i*p*g)*R,e[2]=(a*_*s-M*l*s+M*r*c-i*_*c-a*r*g+i*l*g)*R,e[3]=(f*l*s-a*p*s-f*r*c+i*p*c+a*r*m-i*l*m)*R,e[4]=x*R,e[5]=(d*_*s-y*p*s+y*r*m-t*_*m-d*r*g+t*p*g)*R,e[6]=(y*l*s-o*_*s-y*r*c+t*_*c+o*r*g-t*l*g)*R,e[7]=(o*p*s-d*l*s+d*r*c-t*p*c-o*r*m+t*l*m)*R,e[8]=T*R,e[9]=(y*f*s-d*M*s-y*i*m+t*M*m+d*i*g-t*f*g)*R,e[10]=(o*M*s-y*a*s+y*i*c-t*M*c-o*i*g+t*a*g)*R,e[11]=(d*a*s-o*f*s-d*i*c+t*f*c+o*i*m-t*a*m)*R,e[12]=C*R,e[13]=(d*M*r-y*f*r+y*i*p-t*M*p-d*i*_+t*f*_)*R,e[14]=(y*a*r-o*M*r-y*i*l+t*M*l+o*i*_-t*a*_)*R,e[15]=(o*f*r-d*a*r+d*i*l-t*f*l-o*i*p+t*a*p)*R,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,d=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,d*a+i,d*l-r*o,0,c*l-r*a,d*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,d=o+o,f=a+a,p=s*c,m=s*d,y=s*f,M=o*d,_=o*f,g=a*f,w=l*c,x=l*d,T=l*f,C=i.x,P=i.y,R=i.z;return r[0]=(1-(M+g))*C,r[1]=(m+T)*C,r[2]=(y-x)*C,r[3]=0,r[4]=(m-T)*P,r[5]=(1-(p+g))*P,r[6]=(_+w)*P,r[7]=0,r[8]=(y+x)*R,r[9]=(_-w)*R,r[10]=(1-(p+M))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=cc.set(r[0],r[1],r[2]).length();const o=cc.set(r[4],r[5],r[6]).length(),a=cc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Br.copy(this);const c=1/s,d=1/o,f=1/a;return Br.elements[0]*=c,Br.elements[1]*=c,Br.elements[2]*=c,Br.elements[4]*=d,Br.elements[5]*=d,Br.elements[6]*=d,Br.elements[8]*=f,Br.elements[9]*=f,Br.elements[10]*=f,t.setFromRotationMatrix(Br),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=vs){const l=this.elements,c=2*s/(t-e),d=2*s/(i-r),f=(t+e)/(t-e),p=(i+r)/(i-r);let m,y;if(a===vs)m=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===Hd)m=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=d,l[9]=p,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=y,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=vs){const l=this.elements,c=1/(t-e),d=1/(i-r),f=1/(o-s),p=(t+e)*c,m=(i+r)*d;let y,M;if(a===vs)y=(o+s)*f,M=-2*f;else if(a===Hd)y=s*f,M=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-p,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=M,l[14]=-y,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const cc=new F,Br=new dt,p6=new F(0,0,0),m6=new F(1,1,1),Eo=new F,Kp=new F,Ji=new F,oC=new dt,aC=new gi;class mf{constructor(e=0,t=0,i=0,r=mf.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],d=r[9],f=r[2],p=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(gn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,c),this._z=0);break;case"YXZ":this._x=Math.asin(-gn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(gn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-gn(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(p,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(gn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-gn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return oC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(oC,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return aC.setFromEuler(this),this.setFromQuaternion(aC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}mf.DEFAULT_ORDER="XYZ";class pl{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let g6=0;const lC=new F,uc=new gi,Os=new dt,Zp=new F,vh=new F,v6=new F,y6=new gi,cC=new F(1,0,0),uC=new F(0,1,0),hC=new F(0,0,1),_6={type:"added"},x6={type:"removed"};class zt extends co{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:g6++}),this.uuid=cr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=zt.DEFAULT_UP.clone();const e=new F,t=new mf,i=new gi,r=new F(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new dt},normalMatrix:{value:new Tt}}),this.matrix=new dt,this.matrixWorld=new dt,this.matrixAutoUpdate=zt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new pl,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return uc.setFromAxisAngle(e,t),this.quaternion.multiply(uc),this}rotateOnWorldAxis(e,t){return uc.setFromAxisAngle(e,t),this.quaternion.premultiply(uc),this}rotateX(e){return this.rotateOnAxis(cC,e)}rotateY(e){return this.rotateOnAxis(uC,e)}rotateZ(e){return this.rotateOnAxis(hC,e)}translateOnAxis(e,t){return lC.copy(e).applyQuaternion(this.quaternion),this.position.add(lC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(cC,e)}translateY(e){return this.translateOnAxis(uC,e)}translateZ(e){return this.translateOnAxis(hC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Os.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Zp.copy(e):Zp.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),vh.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Os.lookAt(vh,Zp,this.up):Os.lookAt(Zp,vh,this.up),this.quaternion.setFromRotationMatrix(Os),r&&(Os.extractRotation(r.matrixWorld),uc.setFromRotationMatrix(Os),this.quaternion.premultiply(uc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(_6)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(x6)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Os.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Os.multiply(e.parent.matrixWorld)),e.applyMatrix4(Os),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vh,e,v6),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(vh,y6,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++){const a=r[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,d=l.length;c<d;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),d=o(e.images),f=o(e.shapes),p=o(e.skeletons),m=o(e.animations),y=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),d.length>0&&(i.images=d),f.length>0&&(i.shapes=f),p.length>0&&(i.skeletons=p),m.length>0&&(i.animations=m),y.length>0&&(i.nodes=y)}return i.object=r,i;function o(a){const l=[];for(const c in a){const d=a[c];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}zt.DEFAULT_UP=new F(0,1,0);zt.DEFAULT_MATRIX_AUTO_UPDATE=!0;zt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Vr=new F,Us=new F,c_=new F,Fs=new F,hc=new F,dc=new F,dC=new F,u_=new F,h_=new F,d_=new F;class sr{constructor(e=new F,t=new F,i=new F){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Vr.subVectors(e,t),r.cross(Vr);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Vr.subVectors(r,t),Us.subVectors(i,t),c_.subVectors(e,t);const o=Vr.dot(Vr),a=Vr.dot(Us),l=Vr.dot(c_),c=Us.dot(Us),d=Us.dot(c_),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const p=1/f,m=(c*l-a*d)*p,y=(o*d-a*l)*p;return s.set(1-m-y,y,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Fs)===null?!1:Fs.x>=0&&Fs.y>=0&&Fs.x+Fs.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Fs)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Fs.x),l.addScaledVector(o,Fs.y),l.addScaledVector(a,Fs.z),l)}static isFrontFacing(e,t,i,r){return Vr.subVectors(i,t),Us.subVectors(e,t),Vr.cross(Us).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Vr.subVectors(this.c,this.b),Us.subVectors(this.a,this.b),Vr.cross(Us).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return sr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return sr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return sr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return sr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return sr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;hc.subVectors(r,i),dc.subVectors(s,i),u_.subVectors(e,i);const l=hc.dot(u_),c=dc.dot(u_);if(l<=0&&c<=0)return t.copy(i);h_.subVectors(e,r);const d=hc.dot(h_),f=dc.dot(h_);if(d>=0&&f<=d)return t.copy(r);const p=l*f-d*c;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),t.copy(i).addScaledVector(hc,o);d_.subVectors(e,s);const m=hc.dot(d_),y=dc.dot(d_);if(y>=0&&m<=y)return t.copy(s);const M=m*c-l*y;if(M<=0&&c>=0&&y<=0)return a=c/(c-y),t.copy(i).addScaledVector(dc,a);const _=d*y-m*f;if(_<=0&&f-d>=0&&m-y>=0)return dC.subVectors(s,r),a=(f-d)/(f-d+(m-y)),t.copy(r).addScaledVector(dC,a);const g=1/(_+M+p);return o=M*g,a=p*g,t.copy(i).addScaledVector(hc,o).addScaledVector(dc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const kN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},To={h:0,s:0,l:0},Jp={h:0,s:0,l:0};function f_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ze{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=kn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Bt.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Bt.workingColorSpace){return this.r=e,this.g=t,this.b=i,Bt.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Bt.workingColorSpace){if(e=Z1(e,1),t=gn(t,0,1),i=gn(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=f_(o,s,e+1/3),this.g=f_(o,s,e),this.b=f_(o,s,e-1/3)}return Bt.toWorkingColorSpace(this,r),this}setStyle(e,t=kn){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=kn){const i=kN[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ou(e.r),this.g=ou(e.g),this.b=ou(e.b),this}copyLinearToSRGB(e){return this.r=t_(e.r),this.g=t_(e.g),this.b=t_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=kn){return Bt.fromWorkingColorSpace(ui.copy(this),e),Math.round(gn(ui.r*255,0,255))*65536+Math.round(gn(ui.g*255,0,255))*256+Math.round(gn(ui.b*255,0,255))}getHexString(e=kn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Bt.workingColorSpace){Bt.fromWorkingColorSpace(ui.copy(this),t);const i=ui.r,r=ui.g,s=ui.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const d=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=d<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=d,e}getRGB(e,t=Bt.workingColorSpace){return Bt.fromWorkingColorSpace(ui.copy(this),t),e.r=ui.r,e.g=ui.g,e.b=ui.b,e}getStyle(e=kn){Bt.fromWorkingColorSpace(ui.copy(this),e);const t=ui.r,i=ui.g,r=ui.b;return e!==kn?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(To),this.setHSL(To.h+e,To.s+t,To.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(To),e.getHSL(Jp);const i=td(To.h,Jp.h,t),r=td(To.s,Jp.s,t),s=td(To.l,Jp.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ui=new ze;ze.NAMES=kN;let S6=0;class _i extends co{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:S6++}),this.uuid=cr(),this.name="",this.type="Material",this.blending=hl,this.side=so,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Gg,this.blendDst=jg,this.blendEquation=Bo,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ze(0,0,0),this.blendAlpha=0,this.depthFunc=Rd,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=XS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$a,this.stencilZFail=$a,this.stencilZPass=$a,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==hl&&(i.blending=this.blending),this.side!==so&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Gg&&(i.blendSrc=this.blendSrc),this.blendDst!==jg&&(i.blendDst=this.blendDst),this.blendEquation!==Bo&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Rd&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==XS&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==$a&&(i.stencilFail=this.stencilFail),this.stencilZFail!==$a&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==$a&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class ma extends _i{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ff,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const js=w6();function w6(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,d=0;for(;!(c&8388608);)c<<=1,d-=8388608;c&=-8388609,d+=947912704,s[l]=c|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function zi(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=gn(n,-65504,65504),js.floatView[0]=n;const e=js.uint32View[0],t=e>>23&511;return js.baseTable[t]+((e&8388607)>>js.shiftTable[t])}function Oh(n){const e=n>>10;return js.uint32View[0]=js.mantissaTable[js.offsetTable[e]+(n&1023)]+js.exponentTable[e],js.floatView[0]}const M6={toHalfFloat:zi,fromHalfFloat:Oh},Cn=new F,Qp=new de;class Gt{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Vd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ir,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return fl("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Qp.fromBufferAttribute(this,t),Qp.applyMatrix3(e),this.setXY(t,Qp.x,Qp.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Cn.fromBufferAttribute(this,t),Cn.applyMatrix3(e),this.setXYZ(t,Cn.x,Cn.y,Cn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Cn.fromBufferAttribute(this,t),Cn.applyMatrix4(e),this.setXYZ(t,Cn.x,Cn.y,Cn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Cn.fromBufferAttribute(this,t),Cn.applyNormalMatrix(e),this.setXYZ(t,Cn.x,Cn.y,Cn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Cn.fromBufferAttribute(this,t),Cn.transformDirection(e),this.setXYZ(t,Cn.x,Cn.y,Cn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ci(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_t(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ci(t,this.array)),t}setX(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ci(t,this.array)),t}setY(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ci(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ci(t,this.array)),t}setW(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array),s=_t(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Vd&&(e.usage=this.usage),e}}class E6 extends Gt{constructor(e,t,i){super(new Int8Array(e),t,i)}}class T6 extends Gt{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class b6 extends Gt{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class A6 extends Gt{constructor(e,t,i){super(new Int16Array(e),t,i)}}class eM extends Gt{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class C6 extends Gt{constructor(e,t,i){super(new Int32Array(e),t,i)}}class tM extends Gt{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class P6 extends Gt{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Oh(this.array[e*this.itemSize]);return this.normalized&&(t=Ci(t,this.array)),t}setX(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize]=zi(t),this}getY(e){let t=Oh(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ci(t,this.array)),t}setY(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize+1]=zi(t),this}getZ(e){let t=Oh(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ci(t,this.array)),t}setZ(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize+2]=zi(t),this}getW(e){let t=Oh(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ci(t,this.array)),t}setW(e,t){return this.normalized&&(t=_t(t,this.array)),this.array[e*this.itemSize+3]=zi(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array)),this.array[e+0]=zi(t),this.array[e+1]=zi(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array)),this.array[e+0]=zi(t),this.array[e+1]=zi(i),this.array[e+2]=zi(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array),s=_t(s,this.array)),this.array[e+0]=zi(t),this.array[e+1]=zi(i),this.array[e+2]=zi(r),this.array[e+3]=zi(s),this}}class Ye extends Gt{constructor(e,t,i){super(new Float32Array(e),t,i)}}class R6 extends Gt{constructor(e,t,i){super(new Float64Array(e),t,i)}}let L6=0;const br=new dt,p_=new zt,fc=new F,Qi=new Li,yh=new Li,Wn=new F;class bt extends co{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:L6++}),this.uuid=cr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(IN(e)?tM:eM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Tt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return br.makeRotationFromQuaternion(e),this.applyMatrix4(br),this}rotateX(e){return br.makeRotationX(e),this.applyMatrix4(br),this}rotateY(e){return br.makeRotationY(e),this.applyMatrix4(br),this}rotateZ(e){return br.makeRotationZ(e),this.applyMatrix4(br),this}translate(e,t,i){return br.makeTranslation(e,t,i),this.applyMatrix4(br),this}scale(e,t,i){return br.makeScale(e,t,i),this.applyMatrix4(br),this}lookAt(e){return p_.lookAt(e),p_.updateMatrix(),this.applyMatrix4(p_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(fc).negate(),this.translate(fc.x,fc.y,fc.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ye(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Li);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new F(-1/0,-1/0,-1/0),new F(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Qi.setFromBufferAttribute(s),this.morphTargetsRelative?(Wn.addVectors(this.boundingBox.min,Qi.min),this.boundingBox.expandByPoint(Wn),Wn.addVectors(this.boundingBox.max,Qi.max),this.boundingBox.expandByPoint(Wn)):(this.boundingBox.expandByPoint(Qi.min),this.boundingBox.expandByPoint(Qi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new F,1/0);return}if(e){const i=this.boundingSphere.center;if(Qi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];yh.setFromBufferAttribute(a),this.morphTargetsRelative?(Wn.addVectors(Qi.min,yh.min),Qi.expandByPoint(Wn),Wn.addVectors(Qi.max,yh.max),Qi.expandByPoint(Wn)):(Qi.expandByPoint(yh.min),Qi.expandByPoint(yh.max))}Qi.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Wn.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Wn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,d=a.count;c<d;c++)Wn.fromBufferAttribute(a,c),l&&(fc.fromBufferAttribute(e,c),Wn.add(fc)),r=Math.max(r,i.distanceToSquared(Wn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,a=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Gt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],d=[];for(let b=0;b<a;b++)c[b]=new F,d[b]=new F;const f=new F,p=new F,m=new F,y=new de,M=new de,_=new de,g=new F,w=new F;function x(b,L,Z){f.fromArray(r,b*3),p.fromArray(r,L*3),m.fromArray(r,Z*3),y.fromArray(o,b*2),M.fromArray(o,L*2),_.fromArray(o,Z*2),p.sub(f),m.sub(f),M.sub(y),_.sub(y);const re=1/(M.x*_.y-_.x*M.y);isFinite(re)&&(g.copy(p).multiplyScalar(_.y).addScaledVector(m,-M.y).multiplyScalar(re),w.copy(m).multiplyScalar(M.x).addScaledVector(p,-_.x).multiplyScalar(re),c[b].add(g),c[L].add(g),c[Z].add(g),d[b].add(w),d[L].add(w),d[Z].add(w))}let T=this.groups;T.length===0&&(T=[{start:0,count:i.length}]);for(let b=0,L=T.length;b<L;++b){const Z=T[b],re=Z.start,W=Z.count;for(let ne=re,J=re+W;ne<J;ne+=3)x(i[ne+0],i[ne+1],i[ne+2])}const C=new F,P=new F,R=new F,D=new F;function X(b){R.fromArray(s,b*3),D.copy(R);const L=c[b];C.copy(L),C.sub(R.multiplyScalar(R.dot(L))).normalize(),P.crossVectors(D,L);const re=P.dot(d[b])<0?-1:1;l[b*4]=C.x,l[b*4+1]=C.y,l[b*4+2]=C.z,l[b*4+3]=re}for(let b=0,L=T.length;b<L;++b){const Z=T[b],re=Z.start,W=Z.count;for(let ne=re,J=re+W;ne<J;ne+=3)X(i[ne+0]),X(i[ne+1]),X(i[ne+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Gt(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let p=0,m=i.count;p<m;p++)i.setXYZ(p,0,0,0);const r=new F,s=new F,o=new F,a=new F,l=new F,c=new F,d=new F,f=new F;if(e)for(let p=0,m=e.count;p<m;p+=3){const y=e.getX(p+0),M=e.getX(p+1),_=e.getX(p+2);r.fromBufferAttribute(t,y),s.fromBufferAttribute(t,M),o.fromBufferAttribute(t,_),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),a.fromBufferAttribute(i,y),l.fromBufferAttribute(i,M),c.fromBufferAttribute(i,_),a.add(d),l.add(d),c.add(d),i.setXYZ(y,a.x,a.y,a.z),i.setXYZ(M,l.x,l.y,l.z),i.setXYZ(_,c.x,c.y,c.z)}else for(let p=0,m=t.count;p<m;p+=3)r.fromBufferAttribute(t,p+0),s.fromBufferAttribute(t,p+1),o.fromBufferAttribute(t,p+2),d.subVectors(o,s),f.subVectors(r,s),d.cross(f),i.setXYZ(p+0,d.x,d.y,d.z),i.setXYZ(p+1,d.x,d.y,d.z),i.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Wn.fromBufferAttribute(e,t),Wn.normalize(),e.setXYZ(t,Wn.x,Wn.y,Wn.z)}toNonIndexed(){function e(a,l){const c=a.array,d=a.itemSize,f=a.normalized,p=new c.constructor(l.length*d);let m=0,y=0;for(let M=0,_=l.length;M<_;M++){a.isInterleavedBufferAttribute?m=l[M]*a.data.stride+a.offset:m=l[M]*d;for(let g=0;g<d;g++)p[y++]=c[m++]}return new Gt(p,d,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let d=0,f=c.length;d<f;d++){const p=c[d],m=e(p,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f];d.push(m.toJSON(e.data))}d.length>0&&(r[l]=d,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const d=r[c];this.setAttribute(c,d.clone(t))}const s=e.morphAttributes;for(const c in s){const d=[],f=s[c];for(let p=0,m=f.length;p<m;p++)d.push(f[p].clone(t));this.morphAttributes[c]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,d=o.length;c<d;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const fC=new dt,La=new Dl,em=new vi,pC=new F,pc=new F,mc=new F,gc=new F,m_=new F,tm=new F,nm=new de,im=new de,rm=new de,mC=new F,gC=new F,vC=new F,sm=new F,om=new F;class Rn extends zt{constructor(e=new bt,t=new ma){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){tm.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const d=a[l],f=s[l];d!==0&&(m_.fromBufferAttribute(f,e),o?tm.addScaledVector(m_,d):tm.addScaledVector(m_.sub(t),d))}t.add(tm)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),em.copy(i.boundingSphere),em.applyMatrix4(s),La.copy(e.ray).recast(e.near),!(em.containsPoint(La.origin)===!1&&(La.intersectSphere(em,pC)===null||La.origin.distanceToSquared(pC)>(e.far-e.near)**2))&&(fC.copy(s).invert(),La.copy(e.ray).applyMatrix4(fC),!(i.boundingBox!==null&&La.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,La)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,d=s.attributes.uv1,f=s.attributes.normal,p=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let y=0,M=p.length;y<M;y++){const _=p[y],g=o[_.materialIndex],w=Math.max(_.start,m.start),x=Math.min(a.count,Math.min(_.start+_.count,m.start+m.count));for(let T=w,C=x;T<C;T+=3){const P=a.getX(T),R=a.getX(T+1),D=a.getX(T+2);r=am(this,g,e,i,c,d,f,P,R,D),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),M=Math.min(a.count,m.start+m.count);for(let _=y,g=M;_<g;_+=3){const w=a.getX(_),x=a.getX(_+1),T=a.getX(_+2);r=am(this,o,e,i,c,d,f,w,x,T),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let y=0,M=p.length;y<M;y++){const _=p[y],g=o[_.materialIndex],w=Math.max(_.start,m.start),x=Math.min(l.count,Math.min(_.start+_.count,m.start+m.count));for(let T=w,C=x;T<C;T+=3){const P=T,R=T+1,D=T+2;r=am(this,g,e,i,c,d,f,P,R,D),r&&(r.faceIndex=Math.floor(T/3),r.face.materialIndex=_.materialIndex,t.push(r))}}else{const y=Math.max(0,m.start),M=Math.min(l.count,m.start+m.count);for(let _=y,g=M;_<g;_+=3){const w=_,x=_+1,T=_+2;r=am(this,o,e,i,c,d,f,w,x,T),r&&(r.faceIndex=Math.floor(_/3),t.push(r))}}}}function I6(n,e,t,i,r,s,o,a){let l;if(e.side===Ri?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===so,a),l===null)return null;om.copy(a),om.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(om);return c<t.near||c>t.far?null:{distance:c,point:om.clone(),object:n}}function am(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,pc),n.getVertexPosition(l,mc),n.getVertexPosition(c,gc);const d=I6(n,e,t,i,pc,mc,gc,sm);if(d){r&&(nm.fromBufferAttribute(r,a),im.fromBufferAttribute(r,l),rm.fromBufferAttribute(r,c),d.uv=sr.getInterpolation(sm,pc,mc,gc,nm,im,rm,new de)),s&&(nm.fromBufferAttribute(s,a),im.fromBufferAttribute(s,l),rm.fromBufferAttribute(s,c),d.uv1=sr.getInterpolation(sm,pc,mc,gc,nm,im,rm,new de),d.uv2=d.uv1),o&&(mC.fromBufferAttribute(o,a),gC.fromBufferAttribute(o,l),vC.fromBufferAttribute(o,c),d.normal=sr.getInterpolation(sm,pc,mc,gc,mC,gC,vC,new F),d.normal.dot(i.direction)>0&&d.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new F,materialIndex:0};sr.getNormal(pc,mc,gc,f.normal),d.face=f}return d}class kl extends bt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],d=[],f=[];let p=0,m=0;y("z","y","x",-1,-1,i,t,e,o,s,0),y("z","y","x",1,-1,i,t,-e,o,s,1),y("x","z","y",1,1,e,i,t,r,o,2),y("x","z","y",1,-1,e,i,-t,r,o,3),y("x","y","z",1,-1,e,t,i,r,s,4),y("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Ye(c,3)),this.setAttribute("normal",new Ye(d,3)),this.setAttribute("uv",new Ye(f,2));function y(M,_,g,w,x,T,C,P,R,D,X){const b=T/R,L=C/D,Z=T/2,re=C/2,W=P/2,ne=R+1,J=D+1;let ae=0,N=0;const B=new F;for(let H=0;H<J;H++){const q=H*L-re;for(let le=0;le<ne;le++){const be=le*b-Z;B[M]=be*w,B[_]=q*x,B[g]=W,c.push(B.x,B.y,B.z),B[M]=0,B[_]=0,B[g]=P>0?1:-1,d.push(B.x,B.y,B.z),f.push(le/R),f.push(1-H/D),ae+=1}}for(let H=0;H<D;H++)for(let q=0;q<R;q++){const le=p+q+ne*H,be=p+q+ne*(H+1),te=p+(q+1)+ne*(H+1),pe=p+(q+1)+ne*H;l.push(le,be,pe),l.push(be,te,pe),N+=6}a.addGroup(m,N,X),m+=N,p+=ae}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function xu(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Mi(n){const e={};for(let t=0;t<n.length;t++){const i=xu(n[t]);for(const r in i)e[r]=i[r]}return e}function N6(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function ON(n){return n.getRenderTarget()===null?n.outputColorSpace:Bt.workingColorSpace}const UN={clone:xu,merge:Mi};var D6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,k6=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Qr extends _i{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=D6,this.fragmentShader=k6,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=xu(e.uniforms),this.uniformsGroups=N6(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class gf extends zt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dt,this.projectionMatrix=new dt,this.projectionMatrixInverse=new dt,this.coordinateSystem=vs}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const bo=new F,yC=new de,_C=new de;let Tn=class extends gf{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=_u*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(dl*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return _u*2*Math.atan(Math.tan(dl*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){bo.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(bo.x,bo.y).multiplyScalar(-e/bo.z),bo.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(bo.x,bo.y).multiplyScalar(-e/bo.z)}getViewSize(e,t){return this.getViewBounds(e,yC,_C),t.subVectors(_C,yC)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(dl*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const vc=-90,yc=1;class FN extends zt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Tn(vc,yc,e,t);r.layers=this.layers,this.add(r);const s=new Tn(vc,yc,e,t);s.layers=this.layers,this.add(s);const o=new Tn(vc,yc,e,t);o.layers=this.layers,this.add(o);const a=new Tn(vc,yc,e,t);a.layers=this.layers,this.add(a);const l=new Tn(vc,yc,e,t);l.layers=this.layers,this.add(l);const c=new Tn(vc,yc,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===vs)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Hd)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,d]=this.children,f=e.getRenderTarget(),p=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),y=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,r),e.render(t,d),e.setRenderTarget(f,p,m),e.xr.enabled=y,i.texture.needsPMREMUpdate=!0}}class vf extends vn{constructor(e,t,i,r,s,o,a,l,c,d){e=e!==void 0?e:[],t=t!==void 0?t:oo,super(e,t,i,r,s,o,a,l,c,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class zN extends kr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(fl("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===ta?kn:rr),this.texture=new vf(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Jt}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new kl(5,5,5),s=new Qr({name:"CubemapFromEquirect",uniforms:xu(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ri,blending:Js});s.uniforms.tEquirect.value=t;const o=new Rn(r,s),a=t.minFilter;return t.minFilter===gs&&(t.minFilter=Jt),new FN(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const g_=new F,O6=new F,U6=new Tt;class Gs{constructor(e=new F(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=g_.subVectors(i,t).cross(O6.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(g_),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||U6.getNormalMatrix(e),r=this.coplanarPoint(g_).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Ia=new vi,lm=new F;class yf{constructor(e=new Gs,t=new Gs,i=new Gs,r=new Gs,s=new Gs,o=new Gs){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=vs){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],d=r[5],f=r[6],p=r[7],m=r[8],y=r[9],M=r[10],_=r[11],g=r[12],w=r[13],x=r[14],T=r[15];if(i[0].setComponents(l-s,p-c,_-m,T-g).normalize(),i[1].setComponents(l+s,p+c,_+m,T+g).normalize(),i[2].setComponents(l+o,p+d,_+y,T+w).normalize(),i[3].setComponents(l-o,p-d,_-y,T-w).normalize(),i[4].setComponents(l-a,p-f,_-M,T-x).normalize(),t===vs)i[5].setComponents(l+a,p+f,_+M,T+x).normalize();else if(t===Hd)i[5].setComponents(a,f,M,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Ia.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Ia.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Ia)}intersectsSprite(e){return Ia.center.set(0,0,0),Ia.radius=.7071067811865476,Ia.applyMatrix4(e.matrixWorld),this.intersectsSphere(Ia)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(lm.x=r.normal.x>0?e.max.x:e.min.x,lm.y=r.normal.y>0?e.max.y:e.min.y,lm.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(lm)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function BN(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function F6(n,e){const t=e.isWebGL2,i=new WeakMap;function r(c,d){const f=c.array,p=c.usage,m=f.byteLength,y=n.createBuffer();n.bindBuffer(d,y),n.bufferData(d,f,p),c.onUploadCallback();let M;if(f instanceof Float32Array)M=n.FLOAT;else if(f instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)M=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else M=n.UNSIGNED_SHORT;else if(f instanceof Int16Array)M=n.SHORT;else if(f instanceof Uint32Array)M=n.UNSIGNED_INT;else if(f instanceof Int32Array)M=n.INT;else if(f instanceof Int8Array)M=n.BYTE;else if(f instanceof Uint8Array)M=n.UNSIGNED_BYTE;else if(f instanceof Uint8ClampedArray)M=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+f);return{buffer:y,type:M,bytesPerElement:f.BYTES_PER_ELEMENT,version:c.version,size:m}}function s(c,d,f){const p=d.array,m=d._updateRange,y=d.updateRanges;if(n.bindBuffer(f,c),m.count===-1&&y.length===0&&n.bufferSubData(f,0,p),y.length!==0){for(let M=0,_=y.length;M<_;M++){const g=y[M];t?n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p,g.start,g.count):n.bufferSubData(f,g.start*p.BYTES_PER_ELEMENT,p.subarray(g.start,g.start+g.count))}d.clearUpdateRanges()}m.count!==-1&&(t?n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p,m.offset,m.count):n.bufferSubData(f,m.offset*p.BYTES_PER_ELEMENT,p.subarray(m.offset,m.offset+m.count)),m.count=-1),d.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d&&(n.deleteBuffer(d.buffer),i.delete(c))}function l(c,d){if(c.isGLBufferAttribute){const p=i.get(c);(!p||p.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const f=i.get(c);if(f===void 0)i.set(c,r(c,d));else if(f.version<c.version){if(f.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(f.buffer,c,d),f.version=c.version}}return{get:o,remove:a,update:l}}class Nu extends bt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,d=l+1,f=e/a,p=t/l,m=[],y=[],M=[],_=[];for(let g=0;g<d;g++){const w=g*p-o;for(let x=0;x<c;x++){const T=x*f-s;y.push(T,-w,0),M.push(0,0,1),_.push(x/a),_.push(1-g/l)}}for(let g=0;g<l;g++)for(let w=0;w<a;w++){const x=w+c*g,T=w+c*(g+1),C=w+1+c*(g+1),P=w+1+c*g;m.push(x,T,P),m.push(T,C,P)}this.setIndex(m),this.setAttribute("position",new Ye(y,3)),this.setAttribute("normal",new Ye(M,3)),this.setAttribute("uv",new Ye(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nu(e.width,e.height,e.widthSegments,e.heightSegments)}}var z6=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,B6=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,V6=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,H6=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,G6=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,j6=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,W6=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,X6=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,$6=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,q6=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Y6=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,K6=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Z6=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,J6=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Q6=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,e8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,t8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,n8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,i8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,r8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,s8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,o8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,a8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,l8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,c8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,u8=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,h8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,d8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,f8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,p8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,m8="gl_FragColor = linearToOutputTexel( gl_FragColor );",g8=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,v8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,y8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,_8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,x8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,S8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,w8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,M8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,E8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,T8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,b8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,A8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,C8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,P8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,R8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,L8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,I8=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,N8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,D8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,k8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,O8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,U8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,F8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,z8=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,B8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,V8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,H8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,G8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,j8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,W8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,X8=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,$8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,q8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Y8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,K8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Z8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,J8=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Q8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,e9=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,t9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,n9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,i9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,r9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,s9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,o9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,a9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,l9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,c9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,u9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,h9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,d9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,f9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,p9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,m9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,g9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,v9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,y9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,_9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,x9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,S9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,w9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,M9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,E9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,T9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,b9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,A9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,C9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,P9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,R9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,L9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,I9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,N9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,D9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,k9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,O9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,U9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const F9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,z9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,B9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,V9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,H9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,G9=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,j9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,W9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,X9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,$9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,q9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Y9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,K9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Z9=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,J9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Q9=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,e7=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,t7=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,n7=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,i7=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,r7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,s7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,o7=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,a7=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,l7=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,c7=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,u7=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,h7=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,d7=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,f7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,p7=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m7=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,g7=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,v7=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,wt={alphahash_fragment:z6,alphahash_pars_fragment:B6,alphamap_fragment:V6,alphamap_pars_fragment:H6,alphatest_fragment:G6,alphatest_pars_fragment:j6,aomap_fragment:W6,aomap_pars_fragment:X6,batching_pars_vertex:$6,batching_vertex:q6,begin_vertex:Y6,beginnormal_vertex:K6,bsdfs:Z6,iridescence_fragment:J6,bumpmap_pars_fragment:Q6,clipping_planes_fragment:e8,clipping_planes_pars_fragment:t8,clipping_planes_pars_vertex:n8,clipping_planes_vertex:i8,color_fragment:r8,color_pars_fragment:s8,color_pars_vertex:o8,color_vertex:a8,common:l8,cube_uv_reflection_fragment:c8,defaultnormal_vertex:u8,displacementmap_pars_vertex:h8,displacementmap_vertex:d8,emissivemap_fragment:f8,emissivemap_pars_fragment:p8,colorspace_fragment:m8,colorspace_pars_fragment:g8,envmap_fragment:v8,envmap_common_pars_fragment:y8,envmap_pars_fragment:_8,envmap_pars_vertex:x8,envmap_physical_pars_fragment:I8,envmap_vertex:S8,fog_vertex:w8,fog_pars_vertex:M8,fog_fragment:E8,fog_pars_fragment:T8,gradientmap_pars_fragment:b8,lightmap_fragment:A8,lightmap_pars_fragment:C8,lights_lambert_fragment:P8,lights_lambert_pars_fragment:R8,lights_pars_begin:L8,lights_toon_fragment:N8,lights_toon_pars_fragment:D8,lights_phong_fragment:k8,lights_phong_pars_fragment:O8,lights_physical_fragment:U8,lights_physical_pars_fragment:F8,lights_fragment_begin:z8,lights_fragment_maps:B8,lights_fragment_end:V8,logdepthbuf_fragment:H8,logdepthbuf_pars_fragment:G8,logdepthbuf_pars_vertex:j8,logdepthbuf_vertex:W8,map_fragment:X8,map_pars_fragment:$8,map_particle_fragment:q8,map_particle_pars_fragment:Y8,metalnessmap_fragment:K8,metalnessmap_pars_fragment:Z8,morphcolor_vertex:J8,morphnormal_vertex:Q8,morphtarget_pars_vertex:e9,morphtarget_vertex:t9,normal_fragment_begin:n9,normal_fragment_maps:i9,normal_pars_fragment:r9,normal_pars_vertex:s9,normal_vertex:o9,normalmap_pars_fragment:a9,clearcoat_normal_fragment_begin:l9,clearcoat_normal_fragment_maps:c9,clearcoat_pars_fragment:u9,iridescence_pars_fragment:h9,opaque_fragment:d9,packing:f9,premultiplied_alpha_fragment:p9,project_vertex:m9,dithering_fragment:g9,dithering_pars_fragment:v9,roughnessmap_fragment:y9,roughnessmap_pars_fragment:_9,shadowmap_pars_fragment:x9,shadowmap_pars_vertex:S9,shadowmap_vertex:w9,shadowmask_pars_fragment:M9,skinbase_vertex:E9,skinning_pars_vertex:T9,skinning_vertex:b9,skinnormal_vertex:A9,specularmap_fragment:C9,specularmap_pars_fragment:P9,tonemapping_fragment:R9,tonemapping_pars_fragment:L9,transmission_fragment:I9,transmission_pars_fragment:N9,uv_pars_fragment:D9,uv_pars_vertex:k9,uv_vertex:O9,worldpos_vertex:U9,background_vert:F9,background_frag:z9,backgroundCube_vert:B9,backgroundCube_frag:V9,cube_vert:H9,cube_frag:G9,depth_vert:j9,depth_frag:W9,distanceRGBA_vert:X9,distanceRGBA_frag:$9,equirect_vert:q9,equirect_frag:Y9,linedashed_vert:K9,linedashed_frag:Z9,meshbasic_vert:J9,meshbasic_frag:Q9,meshlambert_vert:e7,meshlambert_frag:t7,meshmatcap_vert:n7,meshmatcap_frag:i7,meshnormal_vert:r7,meshnormal_frag:s7,meshphong_vert:o7,meshphong_frag:a7,meshphysical_vert:l7,meshphysical_frag:c7,meshtoon_vert:u7,meshtoon_frag:h7,points_vert:d7,points_frag:f7,shadow_vert:p7,shadow_frag:m7,sprite_vert:g7,sprite_frag:v7},Pe={common:{diffuse:{value:new ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Tt},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Tt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Tt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Tt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Tt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Tt},normalScale:{value:new de(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Tt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Tt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Tt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Tt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0},uvTransform:{value:new Tt}},sprite:{diffuse:{value:new ze(16777215)},opacity:{value:1},center:{value:new de(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Tt},alphaMap:{value:null},alphaMapTransform:{value:new Tt},alphaTest:{value:0}}},qr={basic:{uniforms:Mi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.fog]),vertexShader:wt.meshbasic_vert,fragmentShader:wt.meshbasic_frag},lambert:{uniforms:Mi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new ze(0)}}]),vertexShader:wt.meshlambert_vert,fragmentShader:wt.meshlambert_frag},phong:{uniforms:Mi([Pe.common,Pe.specularmap,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,Pe.lights,{emissive:{value:new ze(0)},specular:{value:new ze(1118481)},shininess:{value:30}}]),vertexShader:wt.meshphong_vert,fragmentShader:wt.meshphong_frag},standard:{uniforms:Mi([Pe.common,Pe.envmap,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.roughnessmap,Pe.metalnessmap,Pe.fog,Pe.lights,{emissive:{value:new ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag},toon:{uniforms:Mi([Pe.common,Pe.aomap,Pe.lightmap,Pe.emissivemap,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.gradientmap,Pe.fog,Pe.lights,{emissive:{value:new ze(0)}}]),vertexShader:wt.meshtoon_vert,fragmentShader:wt.meshtoon_frag},matcap:{uniforms:Mi([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,Pe.fog,{matcap:{value:null}}]),vertexShader:wt.meshmatcap_vert,fragmentShader:wt.meshmatcap_frag},points:{uniforms:Mi([Pe.points,Pe.fog]),vertexShader:wt.points_vert,fragmentShader:wt.points_frag},dashed:{uniforms:Mi([Pe.common,Pe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:wt.linedashed_vert,fragmentShader:wt.linedashed_frag},depth:{uniforms:Mi([Pe.common,Pe.displacementmap]),vertexShader:wt.depth_vert,fragmentShader:wt.depth_frag},normal:{uniforms:Mi([Pe.common,Pe.bumpmap,Pe.normalmap,Pe.displacementmap,{opacity:{value:1}}]),vertexShader:wt.meshnormal_vert,fragmentShader:wt.meshnormal_frag},sprite:{uniforms:Mi([Pe.sprite,Pe.fog]),vertexShader:wt.sprite_vert,fragmentShader:wt.sprite_frag},background:{uniforms:{uvTransform:{value:new Tt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:wt.background_vert,fragmentShader:wt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:wt.backgroundCube_vert,fragmentShader:wt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:wt.cube_vert,fragmentShader:wt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:wt.equirect_vert,fragmentShader:wt.equirect_frag},distanceRGBA:{uniforms:Mi([Pe.common,Pe.displacementmap,{referencePosition:{value:new F},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:wt.distanceRGBA_vert,fragmentShader:wt.distanceRGBA_frag},shadow:{uniforms:Mi([Pe.lights,Pe.fog,{color:{value:new ze(0)},opacity:{value:1}}]),vertexShader:wt.shadow_vert,fragmentShader:wt.shadow_frag}};qr.physical={uniforms:Mi([qr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Tt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Tt},clearcoatNormalScale:{value:new de(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Tt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Tt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Tt},sheen:{value:0},sheenColor:{value:new ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Tt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Tt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Tt},transmissionSamplerSize:{value:new de},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Tt},attenuationDistance:{value:0},attenuationColor:{value:new ze(0)},specularColor:{value:new ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Tt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Tt},anisotropyVector:{value:new de},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Tt}}]),vertexShader:wt.meshphysical_vert,fragmentShader:wt.meshphysical_frag};const cm={r:0,b:0,g:0};function y7(n,e,t,i,r,s,o){const a=new ze(0);let l=s===!0?0:1,c,d,f=null,p=0,m=null;function y(_,g){let w=!1,x=g.isScene===!0?g.background:null;x&&x.isTexture&&(x=(g.backgroundBlurriness>0?t:e).get(x)),x===null?M(a,l):x&&x.isColor&&(M(x,1),w=!0);const T=n.xr.getEnvironmentBlendMode();T==="additive"?i.buffers.color.setClear(0,0,0,1,o):T==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||w)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),x&&(x.isCubeTexture||x.mapping===Iu)?(d===void 0&&(d=new Rn(new kl(1,1,1),new Qr({name:"BackgroundCubeMaterial",uniforms:xu(qr.backgroundCube.uniforms),vertexShader:qr.backgroundCube.vertexShader,fragmentShader:qr.backgroundCube.fragmentShader,side:Ri,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(C,P,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),d.material.uniforms.envMap.value=x,d.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,d.material.toneMapped=Bt.getTransfer(x.colorSpace)!==$t,(f!==x||p!==x.version||m!==n.toneMapping)&&(d.material.needsUpdate=!0,f=x,p=x.version,m=n.toneMapping),d.layers.enableAll(),_.unshift(d,d.geometry,d.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new Rn(new Nu(2,2),new Qr({name:"BackgroundMaterial",uniforms:xu(qr.background.uniforms),vertexShader:qr.background.vertexShader,fragmentShader:qr.background.fragmentShader,side:so,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=Bt.getTransfer(x.colorSpace)!==$t,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(f!==x||p!==x.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=x,p=x.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null))}function M(_,g){_.getRGB(cm,ON(n)),i.buffers.color.setClear(cm.r,cm.g,cm.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(_,g=1){a.set(_),l=g,M(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,M(a,l)},render:y}}function _7(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=_(null);let c=l,d=!1;function f(W,ne,J,ae,N){let B=!1;if(o){const H=M(ae,J,ne);c!==H&&(c=H,m(c.object)),B=g(W,ae,J,N),B&&w(W,ae,J,N)}else{const H=ne.wireframe===!0;(c.geometry!==ae.id||c.program!==J.id||c.wireframe!==H)&&(c.geometry=ae.id,c.program=J.id,c.wireframe=H,B=!0)}N!==null&&t.update(N,n.ELEMENT_ARRAY_BUFFER),(B||d)&&(d=!1,D(W,ne,J,ae),N!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(N).buffer))}function p(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(W){return i.isWebGL2?n.bindVertexArray(W):s.bindVertexArrayOES(W)}function y(W){return i.isWebGL2?n.deleteVertexArray(W):s.deleteVertexArrayOES(W)}function M(W,ne,J){const ae=J.wireframe===!0;let N=a[W.id];N===void 0&&(N={},a[W.id]=N);let B=N[ne.id];B===void 0&&(B={},N[ne.id]=B);let H=B[ae];return H===void 0&&(H=_(p()),B[ae]=H),H}function _(W){const ne=[],J=[],ae=[];for(let N=0;N<r;N++)ne[N]=0,J[N]=0,ae[N]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ne,enabledAttributes:J,attributeDivisors:ae,object:W,attributes:{},index:null}}function g(W,ne,J,ae){const N=c.attributes,B=ne.attributes;let H=0;const q=J.getAttributes();for(const le in q)if(q[le].location>=0){const te=N[le];let pe=B[le];if(pe===void 0&&(le==="instanceMatrix"&&W.instanceMatrix&&(pe=W.instanceMatrix),le==="instanceColor"&&W.instanceColor&&(pe=W.instanceColor)),te===void 0||te.attribute!==pe||pe&&te.data!==pe.data)return!0;H++}return c.attributesNum!==H||c.index!==ae}function w(W,ne,J,ae){const N={},B=ne.attributes;let H=0;const q=J.getAttributes();for(const le in q)if(q[le].location>=0){let te=B[le];te===void 0&&(le==="instanceMatrix"&&W.instanceMatrix&&(te=W.instanceMatrix),le==="instanceColor"&&W.instanceColor&&(te=W.instanceColor));const pe={};pe.attribute=te,te&&te.data&&(pe.data=te.data),N[le]=pe,H++}c.attributes=N,c.attributesNum=H,c.index=ae}function x(){const W=c.newAttributes;for(let ne=0,J=W.length;ne<J;ne++)W[ne]=0}function T(W){C(W,0)}function C(W,ne){const J=c.newAttributes,ae=c.enabledAttributes,N=c.attributeDivisors;J[W]=1,ae[W]===0&&(n.enableVertexAttribArray(W),ae[W]=1),N[W]!==ne&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](W,ne),N[W]=ne)}function P(){const W=c.newAttributes,ne=c.enabledAttributes;for(let J=0,ae=ne.length;J<ae;J++)ne[J]!==W[J]&&(n.disableVertexAttribArray(J),ne[J]=0)}function R(W,ne,J,ae,N,B,H){H===!0?n.vertexAttribIPointer(W,ne,J,N,B):n.vertexAttribPointer(W,ne,J,ae,N,B)}function D(W,ne,J,ae){if(i.isWebGL2===!1&&(W.isInstancedMesh||ae.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const N=ae.attributes,B=J.getAttributes(),H=ne.defaultAttributeValues;for(const q in B){const le=B[q];if(le.location>=0){let be=N[q];if(be===void 0&&(q==="instanceMatrix"&&W.instanceMatrix&&(be=W.instanceMatrix),q==="instanceColor"&&W.instanceColor&&(be=W.instanceColor)),be!==void 0){const te=be.normalized,pe=be.itemSize,we=t.get(be);if(we===void 0)continue;const Re=we.buffer,Je=we.type,He=we.bytesPerElement,ct=i.isWebGL2===!0&&(Je===n.INT||Je===n.UNSIGNED_INT||be.gpuType===V1);if(be.isInterleavedBufferAttribute){const Ge=be.data,j=Ge.stride,Se=be.offset;if(Ge.isInstancedInterleavedBuffer){for(let fe=0;fe<le.locationSize;fe++)C(le.location+fe,Ge.meshPerAttribute);W.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let fe=0;fe<le.locationSize;fe++)T(le.location+fe);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let fe=0;fe<le.locationSize;fe++)R(le.location+fe,pe/le.locationSize,Je,te,j*He,(Se+pe/le.locationSize*fe)*He,ct)}else{if(be.isInstancedBufferAttribute){for(let Ge=0;Ge<le.locationSize;Ge++)C(le.location+Ge,be.meshPerAttribute);W.isInstancedMesh!==!0&&ae._maxInstanceCount===void 0&&(ae._maxInstanceCount=be.meshPerAttribute*be.count)}else for(let Ge=0;Ge<le.locationSize;Ge++)T(le.location+Ge);n.bindBuffer(n.ARRAY_BUFFER,Re);for(let Ge=0;Ge<le.locationSize;Ge++)R(le.location+Ge,pe/le.locationSize,Je,te,pe*He,pe/le.locationSize*Ge*He,ct)}}else if(H!==void 0){const te=H[q];if(te!==void 0)switch(te.length){case 2:n.vertexAttrib2fv(le.location,te);break;case 3:n.vertexAttrib3fv(le.location,te);break;case 4:n.vertexAttrib4fv(le.location,te);break;default:n.vertexAttrib1fv(le.location,te)}}}}P()}function X(){Z();for(const W in a){const ne=a[W];for(const J in ne){const ae=ne[J];for(const N in ae)y(ae[N].object),delete ae[N];delete ne[J]}delete a[W]}}function b(W){if(a[W.id]===void 0)return;const ne=a[W.id];for(const J in ne){const ae=ne[J];for(const N in ae)y(ae[N].object),delete ae[N];delete ne[J]}delete a[W.id]}function L(W){for(const ne in a){const J=a[ne];if(J[W.id]===void 0)continue;const ae=J[W.id];for(const N in ae)y(ae[N].object),delete ae[N];delete J[W.id]}}function Z(){re(),d=!0,c!==l&&(c=l,m(c.object))}function re(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:f,reset:Z,resetDefaultState:re,dispose:X,releaseStatesOfGeometry:b,releaseStatesOfProgram:L,initAttributes:x,enableAttribute:T,disableUnusedAttributes:P}}function x7(n,e,t,i){const r=i.isWebGL2;let s;function o(d){s=d}function a(d,f){n.drawArrays(s,d,f),t.update(f,s,1)}function l(d,f,p){if(p===0)return;let m,y;if(r)m=n,y="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[y](s,d,f,p),t.update(f,s,p)}function c(d,f,p){if(p===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let y=0;y<p;y++)this.render(d[y],f[y]);else{m.multiDrawArraysWEBGL(s,d,0,f,0,p);let y=0;for(let M=0;M<p;M++)y+=f[M];t.update(y,s,1)}}this.setMode=o,this.render=a,this.renderInstances=l,this.renderMultiDraw=c}function S7(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),d=t.logarithmicDepthBuffer===!0,f=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),p=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),y=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),M=n.getParameter(n.MAX_VERTEX_ATTRIBS),_=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),x=p>0,T=o||e.has("OES_texture_float"),C=x&&T,P=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:r,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:f,maxVertexTextures:p,maxTextureSize:m,maxCubemapSize:y,maxAttributes:M,maxVertexUniforms:_,maxVaryings:g,maxFragmentUniforms:w,vertexTextures:x,floatFragmentTextures:T,floatVertexTextures:C,maxSamples:P}}function w7(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Gs,a=new Tt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,p){const m=f.length!==0||p||i!==0||r;return r=p,i=f.length,m},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,p){t=d(f,p,0)},this.setState=function(f,p,m){const y=f.clippingPlanes,M=f.clipIntersection,_=f.clipShadows,g=n.get(f);if(!r||y===null||y.length===0||s&&!_)s?d(null):c();else{const w=s?0:i,x=w*4;let T=g.clippingState||null;l.value=T,T=d(y,p,x,m);for(let C=0;C!==x;++C)T[C]=t[C];g.clippingState=T,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=w}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function d(f,p,m,y){const M=f!==null?f.length:0;let _=null;if(M!==0){if(_=l.value,y!==!0||_===null){const g=m+M*4,w=p.matrixWorldInverse;a.getNormalMatrix(w),(_===null||_.length<g)&&(_=new Float32Array(g));for(let x=0,T=m;x!==M;++x,T+=4)o.copy(f[x]).applyMatrix4(w,a),o.normal.toArray(_,T),_[T+3]=o.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,_}}function M7(n){let e=new WeakMap;function t(o,a){return a===Ld?o.mapping=oo:a===Id&&(o.mapping=aa),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Ld||a===Id)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new zN(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class na extends gf{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const qc=4,xC=[.125,.215,.35,.446,.526,.582],Za=20,v_=new na,SC=new ze;let y_=null,__=0,x_=0;const qa=(1+Math.sqrt(5))/2,_c=1/qa,wC=[new F(1,1,1),new F(-1,1,1),new F(1,1,-1),new F(-1,1,-1),new F(0,qa,_c),new F(0,qa,-_c),new F(_c,0,qa),new F(-_c,0,qa),new F(qa,_c,0),new F(-qa,_c,0)];class YS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){y_=this._renderer.getRenderTarget(),__=this._renderer.getActiveCubeFace(),x_=this._renderer.getActiveMipmapLevel(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=TC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=EC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(y_,__,x_),e.scissorTest=!1,um(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===oo||e.mapping===aa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),y_=this._renderer.getRenderTarget(),__=this._renderer.getActiveCubeFace(),x_=this._renderer.getActiveMipmapLevel();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Jt,minFilter:Jt,generateMipmaps:!1,type:wl,format:Ai,colorSpace:Ts,depthBuffer:!1},r=MC(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=MC(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=E7(s)),this._blurMaterial=T7(s,e,t)}return r}_compileMaterial(e){const t=new Rn(this._lodPlanes[0],e);this._renderer.compile(t,v_)}_sceneToCubeUV(e,t,i,r){const a=new Tn(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],d=this._renderer,f=d.autoClear,p=d.toneMapping;d.getClearColor(SC),d.toneMapping=ws,d.autoClear=!1;const m=new ma({name:"PMREM.Background",side:Ri,depthWrite:!1,depthTest:!1}),y=new Rn(new kl,m);let M=!1;const _=e.background;_?_.isColor&&(m.color.copy(_),e.background=null,M=!0):(m.color.copy(SC),M=!0);for(let g=0;g<6;g++){const w=g%3;w===0?(a.up.set(0,l[g],0),a.lookAt(c[g],0,0)):w===1?(a.up.set(0,0,l[g]),a.lookAt(0,c[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,c[g]));const x=this._cubeSize;um(r,w*x,g>2?x:0,x,x),d.setRenderTarget(r),M&&d.render(y,a),d.render(e,a)}y.geometry.dispose(),y.material.dispose(),d.toneMapping=p,d.autoClear=f,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===oo||e.mapping===aa;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=TC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=EC());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Rn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;um(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,v_)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=wC[(r-1)%wC.length];this._blur(e,r-1,r,s,o)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,f=new Rn(this._lodPlanes[r],c),p=c.uniforms,m=this._sizeLods[i]-1,y=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Za-1),M=s/y,_=isFinite(s)?1+Math.floor(d*M):Za;_>Za&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${Za}`);const g=[];let w=0;for(let R=0;R<Za;++R){const D=R/M,X=Math.exp(-D*D/2);g.push(X),R===0?w+=X:R<_&&(w+=2*X)}for(let R=0;R<g.length;R++)g[R]=g[R]/w;p.envMap.value=e.texture,p.samples.value=_,p.weights.value=g,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:x}=this;p.dTheta.value=y,p.mipInt.value=x-i;const T=this._sizeLods[r],C=3*T*(r>x-qc?r-x+qc:0),P=4*(this._cubeSize-T);um(t,C,P,3*T,2*T),l.setRenderTarget(t),l.render(f,v_)}}function E7(n){const e=[],t=[],i=[];let r=n;const s=n-qc+1+xC.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-qc?l=xC[o-n+qc-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),d=-c,f=1+c,p=[d,d,f,d,f,f,d,d,f,f,d,f],m=6,y=6,M=3,_=2,g=1,w=new Float32Array(M*y*m),x=new Float32Array(_*y*m),T=new Float32Array(g*y*m);for(let P=0;P<m;P++){const R=P%3*2/3-1,D=P>2?0:-1,X=[R,D,0,R+2/3,D,0,R+2/3,D+1,0,R,D,0,R+2/3,D+1,0,R,D+1,0];w.set(X,M*y*P),x.set(p,_*y*P);const b=[P,P,P,P,P,P];T.set(b,g*y*P)}const C=new bt;C.setAttribute("position",new Gt(w,M)),C.setAttribute("uv",new Gt(x,_)),C.setAttribute("faceIndex",new Gt(T,g)),e.push(C),r>qc&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function MC(n,e,t){const i=new kr(n,e,t);return i.texture.mapping=Iu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function um(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function T7(n,e,t){const i=new Float32Array(Za),r=new F(0,1,0);return new Qr({name:"SphericalGaussianBlur",defines:{n:Za,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:nM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Js,depthTest:!1,depthWrite:!1})}function EC(){return new Qr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:nM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Js,depthTest:!1,depthWrite:!1})}function TC(){return new Qr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:nM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Js,depthTest:!1,depthWrite:!1})}function nM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function b7(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Ld||l===Id,d=l===oo||l===aa;if(c||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let f=e.get(a);return t===null&&(t=new YS(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),e.set(a,f),f.texture}else{if(e.has(a))return e.get(a).texture;{const f=a.image;if(c&&f&&f.height>0||d&&f&&r(f)){t===null&&(t=new YS(n));const p=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function r(a){let l=0;const c=6;for(let d=0;d<c;d++)a[d]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function A7(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function C7(n,e,t,i){const r={},s=new WeakMap;function o(f){const p=f.target;p.index!==null&&e.remove(p.index);for(const y in p.attributes)e.remove(p.attributes[y]);for(const y in p.morphAttributes){const M=p.morphAttributes[y];for(let _=0,g=M.length;_<g;_++)e.remove(M[_])}p.removeEventListener("dispose",o),delete r[p.id];const m=s.get(p);m&&(e.remove(m),s.delete(p)),i.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,t.memory.geometries--}function a(f,p){return r[p.id]===!0||(p.addEventListener("dispose",o),r[p.id]=!0,t.memory.geometries++),p}function l(f){const p=f.attributes;for(const y in p)e.update(p[y],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const y in m){const M=m[y];for(let _=0,g=M.length;_<g;_++)e.update(M[_],n.ARRAY_BUFFER)}}function c(f){const p=[],m=f.index,y=f.attributes.position;let M=0;if(m!==null){const w=m.array;M=m.version;for(let x=0,T=w.length;x<T;x+=3){const C=w[x+0],P=w[x+1],R=w[x+2];p.push(C,P,P,R,R,C)}}else if(y!==void 0){const w=y.array;M=y.version;for(let x=0,T=w.length/3-1;x<T;x+=3){const C=x+0,P=x+1,R=x+2;p.push(C,P,P,R,R,C)}}else return;const _=new(IN(p)?tM:eM)(p,1);_.version=M;const g=s.get(f);g&&e.remove(g),s.set(f,_)}function d(f){const p=s.get(f);if(p){const m=f.index;m!==null&&p.version<m.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:d}}function P7(n,e,t,i){const r=i.isWebGL2;let s;function o(m){s=m}let a,l;function c(m){a=m.type,l=m.bytesPerElement}function d(m,y){n.drawElements(s,y,a,m*l),t.update(y,s,1)}function f(m,y,M){if(M===0)return;let _,g;if(r)_=n,g="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[g](s,y,a,m*l,M),t.update(y,s,M)}function p(m,y,M){if(M===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let g=0;g<M;g++)this.render(m[g]/l,y[g]);else{_.multiDrawElementsWEBGL(s,y,0,a,m,0,M);let g=0;for(let w=0;w<M;w++)g+=y[w];t.update(g,s,1)}}this.setMode=o,this.setIndex=c,this.render=d,this.renderInstances=f,this.renderMultiDraw=p}function R7(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function L7(n,e){return n[0]-e[0]}function I7(n,e){return Math.abs(e[1])-Math.abs(n[1])}function N7(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,o=new Vt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,d,f){const p=c.morphTargetInfluences;if(e.isWebGL2===!0){const m=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,y=m!==void 0?m.length:0;let M=s.get(d);if(M===void 0||M.count!==y){let W=function(){Z.dispose(),s.delete(d),d.removeEventListener("dispose",W)};M!==void 0&&M.texture.dispose();const w=d.morphAttributes.position!==void 0,x=d.morphAttributes.normal!==void 0,T=d.morphAttributes.color!==void 0,C=d.morphAttributes.position||[],P=d.morphAttributes.normal||[],R=d.morphAttributes.color||[];let D=0;w===!0&&(D=1),x===!0&&(D=2),T===!0&&(D=3);let X=d.attributes.position.count*D,b=1;X>e.maxTextureSize&&(b=Math.ceil(X/e.maxTextureSize),X=e.maxTextureSize);const L=new Float32Array(X*b*4*y),Z=new D0(L,X,b,y);Z.type=ir,Z.needsUpdate=!0;const re=D*4;for(let ne=0;ne<y;ne++){const J=C[ne],ae=P[ne],N=R[ne],B=X*b*4*ne;for(let H=0;H<J.count;H++){const q=H*re;w===!0&&(o.fromBufferAttribute(J,H),L[B+q+0]=o.x,L[B+q+1]=o.y,L[B+q+2]=o.z,L[B+q+3]=0),x===!0&&(o.fromBufferAttribute(ae,H),L[B+q+4]=o.x,L[B+q+5]=o.y,L[B+q+6]=o.z,L[B+q+7]=0),T===!0&&(o.fromBufferAttribute(N,H),L[B+q+8]=o.x,L[B+q+9]=o.y,L[B+q+10]=o.z,L[B+q+11]=N.itemSize===4?o.w:1)}}M={count:y,texture:Z,size:new de(X,b)},s.set(d,M),d.addEventListener("dispose",W)}let _=0;for(let w=0;w<p.length;w++)_+=p[w];const g=d.morphTargetsRelative?1:1-_;f.getUniforms().setValue(n,"morphTargetBaseInfluence",g),f.getUniforms().setValue(n,"morphTargetInfluences",p),f.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),f.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}else{const m=p===void 0?0:p.length;let y=i[d.id];if(y===void 0||y.length!==m){y=[];for(let x=0;x<m;x++)y[x]=[x,0];i[d.id]=y}for(let x=0;x<m;x++){const T=y[x];T[0]=x,T[1]=p[x]}y.sort(I7);for(let x=0;x<8;x++)x<m&&y[x][1]?(a[x][0]=y[x][0],a[x][1]=y[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort(L7);const M=d.morphAttributes.position,_=d.morphAttributes.normal;let g=0;for(let x=0;x<8;x++){const T=a[x],C=T[0],P=T[1];C!==Number.MAX_SAFE_INTEGER&&P?(M&&d.getAttribute("morphTarget"+x)!==M[C]&&d.setAttribute("morphTarget"+x,M[C]),_&&d.getAttribute("morphNormal"+x)!==_[C]&&d.setAttribute("morphNormal"+x,_[C]),r[x]=P,g+=P):(M&&d.hasAttribute("morphTarget"+x)===!0&&d.deleteAttribute("morphTarget"+x),_&&d.hasAttribute("morphNormal"+x)===!0&&d.deleteAttribute("morphNormal"+x),r[x]=0)}const w=d.morphTargetsRelative?1:1-g;f.getUniforms().setValue(n,"morphTargetBaseInfluence",w),f.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function D7(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,d=l.geometry,f=e.get(l,d);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const p=l.skeleton;r.get(p)!==c&&(p.update(),r.set(p,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class k0 extends vn{constructor(e,t,i,r,s,o,a,l,c,d){if(d=d!==void 0?d:ea,d!==ea&&d!==Ml)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&d===ea&&(i=$s),i===void 0&&d===Ml&&(i=Qo),super(null,r,s,o,a,l,d,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Mn,this.minFilter=l!==void 0?l:Mn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const VN=new vn,HN=new k0(1,1);HN.compareFunction=K1;const GN=new D0,jN=new Q1,WN=new vf,bC=[],AC=[],CC=new Float32Array(16),PC=new Float32Array(9),RC=new Float32Array(4);function Du(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=bC[r];if(s===void 0&&(s=new Float32Array(r),bC[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Un(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Fn(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function O0(n,e){let t=AC[e];t===void 0&&(t=new Int32Array(e),AC[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function k7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function O7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2fv(this.addr,e),Fn(t,e)}}function U7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Un(t,e))return;n.uniform3fv(this.addr,e),Fn(t,e)}}function F7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4fv(this.addr,e),Fn(t,e)}}function z7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Un(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Fn(t,e)}else{if(Un(t,i))return;RC.set(i),n.uniformMatrix2fv(this.addr,!1,RC),Fn(t,i)}}function B7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Un(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Fn(t,e)}else{if(Un(t,i))return;PC.set(i),n.uniformMatrix3fv(this.addr,!1,PC),Fn(t,i)}}function V7(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Un(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Fn(t,e)}else{if(Un(t,i))return;CC.set(i),n.uniformMatrix4fv(this.addr,!1,CC),Fn(t,i)}}function H7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function G7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2iv(this.addr,e),Fn(t,e)}}function j7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Un(t,e))return;n.uniform3iv(this.addr,e),Fn(t,e)}}function W7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4iv(this.addr,e),Fn(t,e)}}function X7(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function $7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Un(t,e))return;n.uniform2uiv(this.addr,e),Fn(t,e)}}function q7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Un(t,e))return;n.uniform3uiv(this.addr,e),Fn(t,e)}}function Y7(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Un(t,e))return;n.uniform4uiv(this.addr,e),Fn(t,e)}}function K7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);const s=this.type===n.SAMPLER_2D_SHADOW?HN:VN;t.setTexture2D(e||s,r)}function Z7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||jN,r)}function J7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||WN,r)}function Q7(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||GN,r)}function eX(n){switch(n){case 5126:return k7;case 35664:return O7;case 35665:return U7;case 35666:return F7;case 35674:return z7;case 35675:return B7;case 35676:return V7;case 5124:case 35670:return H7;case 35667:case 35671:return G7;case 35668:case 35672:return j7;case 35669:case 35673:return W7;case 5125:return X7;case 36294:return $7;case 36295:return q7;case 36296:return Y7;case 35678:case 36198:case 36298:case 36306:case 35682:return K7;case 35679:case 36299:case 36307:return Z7;case 35680:case 36300:case 36308:case 36293:return J7;case 36289:case 36303:case 36311:case 36292:return Q7}}function tX(n,e){n.uniform1fv(this.addr,e)}function nX(n,e){const t=Du(e,this.size,2);n.uniform2fv(this.addr,t)}function iX(n,e){const t=Du(e,this.size,3);n.uniform3fv(this.addr,t)}function rX(n,e){const t=Du(e,this.size,4);n.uniform4fv(this.addr,t)}function sX(n,e){const t=Du(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function oX(n,e){const t=Du(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function aX(n,e){const t=Du(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function lX(n,e){n.uniform1iv(this.addr,e)}function cX(n,e){n.uniform2iv(this.addr,e)}function uX(n,e){n.uniform3iv(this.addr,e)}function hX(n,e){n.uniform4iv(this.addr,e)}function dX(n,e){n.uniform1uiv(this.addr,e)}function fX(n,e){n.uniform2uiv(this.addr,e)}function pX(n,e){n.uniform3uiv(this.addr,e)}function mX(n,e){n.uniform4uiv(this.addr,e)}function gX(n,e,t){const i=this.cache,r=e.length,s=O0(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),Fn(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||VN,s[o])}function vX(n,e,t){const i=this.cache,r=e.length,s=O0(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),Fn(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||jN,s[o])}function yX(n,e,t){const i=this.cache,r=e.length,s=O0(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),Fn(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||WN,s[o])}function _X(n,e,t){const i=this.cache,r=e.length,s=O0(t,r);Un(i,s)||(n.uniform1iv(this.addr,s),Fn(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||GN,s[o])}function xX(n){switch(n){case 5126:return tX;case 35664:return nX;case 35665:return iX;case 35666:return rX;case 35674:return sX;case 35675:return oX;case 35676:return aX;case 5124:case 35670:return lX;case 35667:case 35671:return cX;case 35668:case 35672:return uX;case 35669:case 35673:return hX;case 5125:return dX;case 36294:return fX;case 36295:return pX;case 36296:return mX;case 35678:case 36198:case 36298:case 36306:case 35682:return gX;case 35679:case 36299:case 36307:return vX;case 35680:case 36300:case 36308:case 36293:return yX;case 36289:case 36303:case 36311:case 36292:return _X}}class SX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=eX(t.type)}}class wX{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=xX(t.type)}}class MX{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const S_=/(\w+)(\])?(\[|\.)?/g;function LC(n,e){n.seq.push(e),n.map[e.id]=e}function EX(n,e,t){const i=n.name,r=i.length;for(S_.lastIndex=0;;){const s=S_.exec(i),o=S_.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){LC(t,c===void 0?new SX(a,n,e):new wX(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new MX(a),LC(t,f)),t=f}}}class og{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);EX(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function IC(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const TX=37297;let bX=0;function AX(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function CX(n){const e=Bt.getPrimaries(Bt.workingColorSpace),t=Bt.getPrimaries(n);let i;switch(e===t?i="":e===Bd&&t===zd?i="LinearDisplayP3ToLinearSRGB":e===zd&&t===Bd&&(i="LinearSRGBToLinearDisplayP3"),n){case Ts:case pf:return[i,"LinearTransferOETF"];case kn:case N0:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function NC(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+AX(n.getShaderSource(e),o)}else return r}function PX(n,e){const t=CX(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function RX(n,e){let t;switch(e){case sN:t="Linear";break;case oN:t="Reinhard";break;case aN:t="OptimizedCineon";break;case B1:t="ACESFilmic";break;case cN:t="AgX";break;case lN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function LX(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.alphaToCoverage||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Yc).join(`
`)}function IX(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Yc).join(`
`)}function NX(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function DX(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Yc(n){return n!==""}function DC(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function kC(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const kX=/^[ \t]*#include +<([\w\d./]+)>/gm;function KS(n){return n.replace(kX,UX)}const OX=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function UX(n,e){let t=wt[e];if(t===void 0){const i=OX.get(e);if(i!==void 0)t=wt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return KS(t)}const FX=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function OC(n){return n.replace(FX,zX)}function zX(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function UC(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	`;return n.isWebGL2&&(e+=`precision ${n.precision} sampler3D;
		precision ${n.precision} sampler2DArray;
		precision ${n.precision} sampler2DShadow;
		precision ${n.precision} samplerCubeShadow;
		precision ${n.precision} sampler2DArrayShadow;
		precision ${n.precision} isampler2D;
		precision ${n.precision} isampler3D;
		precision ${n.precision} isamplerCube;
		precision ${n.precision} isampler2DArray;
		precision ${n.precision} usampler2D;
		precision ${n.precision} usampler3D;
		precision ${n.precision} usamplerCube;
		precision ${n.precision} usampler2DArray;
		`),n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function BX(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===P0?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Qh?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===jr&&(e="SHADOWMAP_TYPE_VSM"),e}function VX(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case oo:case aa:e="ENVMAP_TYPE_CUBE";break;case Iu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function HX(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case aa:e="ENVMAP_MODE_REFRACTION";break}return e}function GX(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case ff:e="ENVMAP_BLENDING_MULTIPLY";break;case iN:e="ENVMAP_BLENDING_MIX";break;case rN:e="ENVMAP_BLENDING_ADD";break}return e}function jX(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function WX(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=BX(t),c=VX(t),d=HX(t),f=GX(t),p=jX(t),m=t.isWebGL2?"":LX(t),y=IX(t),M=NX(s),_=r.createProgram();let g,w,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Yc).join(`
`),g.length>0&&(g+=`
`),w=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Yc).join(`
`),w.length>0&&(w+=`
`)):(g=[UC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Yc).join(`
`),w=[m,UC(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+d:"",t.envMap?"#define "+f:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ws?"#define TONE_MAPPING":"",t.toneMapping!==ws?wt.tonemapping_pars_fragment:"",t.toneMapping!==ws?RX("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",wt.colorspace_pars_fragment,PX("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Yc).join(`
`)),o=KS(o),o=DC(o,t),o=kC(o,t),a=KS(a),a=DC(a,t),a=kC(a,t),o=OC(o),a=OC(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=[y,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,w=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===$S?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===$S?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+w);const T=x+g+o,C=x+w+a,P=IC(r,r.VERTEX_SHADER,T),R=IC(r,r.FRAGMENT_SHADER,C);r.attachShader(_,P),r.attachShader(_,R),t.index0AttributeName!==void 0?r.bindAttribLocation(_,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_);function D(Z){if(n.debug.checkShaderErrors){const re=r.getProgramInfoLog(_).trim(),W=r.getShaderInfoLog(P).trim(),ne=r.getShaderInfoLog(R).trim();let J=!0,ae=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(J=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,_,P,R);else{const N=NC(r,P,"vertex"),B=NC(r,R,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Material Name: `+Z.name+`
Material Type: `+Z.type+`

Program Info Log: `+re+`
`+N+`
`+B)}else re!==""?console.warn("THREE.WebGLProgram: Program Info Log:",re):(W===""||ne==="")&&(ae=!1);ae&&(Z.diagnostics={runnable:J,programLog:re,vertexShader:{log:W,prefix:g},fragmentShader:{log:ne,prefix:w}})}r.deleteShader(P),r.deleteShader(R),X=new og(r,_),b=DX(r,_)}let X;this.getUniforms=function(){return X===void 0&&D(this),X};let b;this.getAttributes=function(){return b===void 0&&D(this),b};let L=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return L===!1&&(L=r.getProgramParameter(_,TX)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=bX++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=P,this.fragmentShader=R,this}let XX=0;class $X{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new qX(e),t.set(e,i)),i}}class qX{constructor(e){this.id=XX++,this.code=e,this.usedTimes=0}}function YX(n,e,t,i,r,s,o){const a=new pl,l=new $X,c=new Set,d=[],f=r.isWebGL2,p=r.logarithmicDepthBuffer,m=r.vertexTextures;let y=r.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(b){return c.add(b),b===0?"uv":`uv${b}`}function g(b,L,Z,re,W){const ne=re.fog,J=W.geometry,ae=b.isMeshStandardMaterial?re.environment:null,N=(b.isMeshStandardMaterial?t:e).get(b.envMap||ae),B=N&&N.mapping===Iu?N.image.height:null,H=M[b.type];b.precision!==null&&(y=r.getMaxPrecision(b.precision),y!==b.precision&&console.warn("THREE.WebGLProgram.getParameters:",b.precision,"not supported, using",y,"instead."));const q=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,le=q!==void 0?q.length:0;let be=0;J.morphAttributes.position!==void 0&&(be=1),J.morphAttributes.normal!==void 0&&(be=2),J.morphAttributes.color!==void 0&&(be=3);let te,pe,we,Re;if(H){const Lt=qr[H];te=Lt.vertexShader,pe=Lt.fragmentShader}else te=b.vertexShader,pe=b.fragmentShader,l.update(b),we=l.getVertexShaderID(b),Re=l.getFragmentShaderID(b);const Je=n.getRenderTarget(),He=W.isInstancedMesh===!0,ct=W.isBatchedMesh===!0,Ge=!!b.map,j=!!b.matcap,Se=!!N,fe=!!b.aoMap,Te=!!b.lightMap,me=!!b.bumpMap,Ke=!!b.normalMap,Ie=!!b.displacementMap,O=!!b.emissiveMap,I=!!b.metalnessMap,ee=!!b.roughnessMap,xe=b.anisotropy>0,ye=b.clearcoat>0,ge=b.iridescence>0,Xe=b.sheen>0,Le=b.transmission>0,Ue=xe&&!!b.anisotropyMap,nt=ye&&!!b.clearcoatMap,pt=ye&&!!b.clearcoatNormalMap,_e=ye&&!!b.clearcoatRoughnessMap,Rt=ge&&!!b.iridescenceMap,xt=ge&&!!b.iridescenceThicknessMap,ht=Xe&&!!b.sheenColorMap,tt=Xe&&!!b.sheenRoughnessMap,Be=!!b.specularMap,$=!!b.specularColorMap,ve=!!b.specularIntensityMap,Ne=Le&&!!b.transmissionMap,Oe=Le&&!!b.thicknessMap,ut=!!b.gradientMap,V=!!b.alphaMap,Me=b.alphaTest>0,Ce=!!b.alphaHash,$e=!!b.extensions;let qe=ws;b.toneMapped&&(Je===null||Je.isXRRenderTarget===!0)&&(qe=n.toneMapping);const St={isWebGL2:f,shaderID:H,shaderType:b.type,shaderName:b.name,vertexShader:te,fragmentShader:pe,defines:b.defines,customVertexShaderID:we,customFragmentShaderID:Re,isRawShaderMaterial:b.isRawShaderMaterial===!0,glslVersion:b.glslVersion,precision:y,batching:ct,instancing:He,instancingColor:He&&W.instanceColor!==null,supportsVertexTextures:m,outputColorSpace:Je===null?n.outputColorSpace:Je.isXRRenderTarget===!0?Je.texture.colorSpace:Ts,alphaToCoverage:!!b.alphaToCoverage,map:Ge,matcap:j,envMap:Se,envMapMode:Se&&N.mapping,envMapCubeUVHeight:B,aoMap:fe,lightMap:Te,bumpMap:me,normalMap:Ke,displacementMap:m&&Ie,emissiveMap:O,normalMapObjectSpace:Ke&&b.normalMapType===EN,normalMapTangentSpace:Ke&&b.normalMapType===pa,metalnessMap:I,roughnessMap:ee,anisotropy:xe,anisotropyMap:Ue,clearcoat:ye,clearcoatMap:nt,clearcoatNormalMap:pt,clearcoatRoughnessMap:_e,iridescence:ge,iridescenceMap:Rt,iridescenceThicknessMap:xt,sheen:Xe,sheenColorMap:ht,sheenRoughnessMap:tt,specularMap:Be,specularColorMap:$,specularIntensityMap:ve,transmission:Le,transmissionMap:Ne,thicknessMap:Oe,gradientMap:ut,opaque:b.transparent===!1&&b.blending===hl&&b.alphaToCoverage===!1,alphaMap:V,alphaTest:Me,alphaHash:Ce,combine:b.combine,mapUv:Ge&&_(b.map.channel),aoMapUv:fe&&_(b.aoMap.channel),lightMapUv:Te&&_(b.lightMap.channel),bumpMapUv:me&&_(b.bumpMap.channel),normalMapUv:Ke&&_(b.normalMap.channel),displacementMapUv:Ie&&_(b.displacementMap.channel),emissiveMapUv:O&&_(b.emissiveMap.channel),metalnessMapUv:I&&_(b.metalnessMap.channel),roughnessMapUv:ee&&_(b.roughnessMap.channel),anisotropyMapUv:Ue&&_(b.anisotropyMap.channel),clearcoatMapUv:nt&&_(b.clearcoatMap.channel),clearcoatNormalMapUv:pt&&_(b.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:_e&&_(b.clearcoatRoughnessMap.channel),iridescenceMapUv:Rt&&_(b.iridescenceMap.channel),iridescenceThicknessMapUv:xt&&_(b.iridescenceThicknessMap.channel),sheenColorMapUv:ht&&_(b.sheenColorMap.channel),sheenRoughnessMapUv:tt&&_(b.sheenRoughnessMap.channel),specularMapUv:Be&&_(b.specularMap.channel),specularColorMapUv:$&&_(b.specularColorMap.channel),specularIntensityMapUv:ve&&_(b.specularIntensityMap.channel),transmissionMapUv:Ne&&_(b.transmissionMap.channel),thicknessMapUv:Oe&&_(b.thicknessMap.channel),alphaMapUv:V&&_(b.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(Ke||xe),vertexColors:b.vertexColors,vertexAlphas:b.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,pointsUvs:W.isPoints===!0&&!!J.attributes.uv&&(Ge||V),fog:!!ne,useFog:b.fog===!0,fogExp2:!!ne&&ne.isFogExp2,flatShading:b.flatShading===!0,sizeAttenuation:b.sizeAttenuation===!0,logarithmicDepthBuffer:p,skinning:W.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:le,morphTextureStride:be,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numLightProbes:L.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:b.dithering,shadowMapEnabled:n.shadowMap.enabled&&Z.length>0,shadowMapType:n.shadowMap.type,toneMapping:qe,useLegacyLights:n._useLegacyLights,decodeVideoTexture:Ge&&b.map.isVideoTexture===!0&&Bt.getTransfer(b.map.colorSpace)===$t,premultipliedAlpha:b.premultipliedAlpha,doubleSided:b.side===ms,flipSided:b.side===Ri,useDepthPacking:b.depthPacking>=0,depthPacking:b.depthPacking||0,index0AttributeName:b.index0AttributeName,extensionDerivatives:$e&&b.extensions.derivatives===!0,extensionFragDepth:$e&&b.extensions.fragDepth===!0,extensionDrawBuffers:$e&&b.extensions.drawBuffers===!0,extensionShaderTextureLOD:$e&&b.extensions.shaderTextureLOD===!0,extensionClipCullDistance:$e&&b.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:$e&&b.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionFragDepth:f||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:f||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:f||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:b.customProgramCacheKey()};return St.vertexUv1s=c.has(1),St.vertexUv2s=c.has(2),St.vertexUv3s=c.has(3),c.clear(),St}function w(b){const L=[];if(b.shaderID?L.push(b.shaderID):(L.push(b.customVertexShaderID),L.push(b.customFragmentShaderID)),b.defines!==void 0)for(const Z in b.defines)L.push(Z),L.push(b.defines[Z]);return b.isRawShaderMaterial===!1&&(x(L,b),T(L,b),L.push(n.outputColorSpace)),L.push(b.customProgramCacheKey),L.join()}function x(b,L){b.push(L.precision),b.push(L.outputColorSpace),b.push(L.envMapMode),b.push(L.envMapCubeUVHeight),b.push(L.mapUv),b.push(L.alphaMapUv),b.push(L.lightMapUv),b.push(L.aoMapUv),b.push(L.bumpMapUv),b.push(L.normalMapUv),b.push(L.displacementMapUv),b.push(L.emissiveMapUv),b.push(L.metalnessMapUv),b.push(L.roughnessMapUv),b.push(L.anisotropyMapUv),b.push(L.clearcoatMapUv),b.push(L.clearcoatNormalMapUv),b.push(L.clearcoatRoughnessMapUv),b.push(L.iridescenceMapUv),b.push(L.iridescenceThicknessMapUv),b.push(L.sheenColorMapUv),b.push(L.sheenRoughnessMapUv),b.push(L.specularMapUv),b.push(L.specularColorMapUv),b.push(L.specularIntensityMapUv),b.push(L.transmissionMapUv),b.push(L.thicknessMapUv),b.push(L.combine),b.push(L.fogExp2),b.push(L.sizeAttenuation),b.push(L.morphTargetsCount),b.push(L.morphAttributeCount),b.push(L.numDirLights),b.push(L.numPointLights),b.push(L.numSpotLights),b.push(L.numSpotLightMaps),b.push(L.numHemiLights),b.push(L.numRectAreaLights),b.push(L.numDirLightShadows),b.push(L.numPointLightShadows),b.push(L.numSpotLightShadows),b.push(L.numSpotLightShadowsWithMaps),b.push(L.numLightProbes),b.push(L.shadowMapType),b.push(L.toneMapping),b.push(L.numClippingPlanes),b.push(L.numClipIntersection),b.push(L.depthPacking)}function T(b,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.matcap&&a.enable(4),L.envMap&&a.enable(5),L.normalMapObjectSpace&&a.enable(6),L.normalMapTangentSpace&&a.enable(7),L.clearcoat&&a.enable(8),L.iridescence&&a.enable(9),L.alphaTest&&a.enable(10),L.vertexColors&&a.enable(11),L.vertexAlphas&&a.enable(12),L.vertexUv1s&&a.enable(13),L.vertexUv2s&&a.enable(14),L.vertexUv3s&&a.enable(15),L.vertexTangents&&a.enable(16),L.anisotropy&&a.enable(17),L.alphaHash&&a.enable(18),L.batching&&a.enable(19),b.push(a.mask),a.disableAll(),L.fog&&a.enable(0),L.useFog&&a.enable(1),L.flatShading&&a.enable(2),L.logarithmicDepthBuffer&&a.enable(3),L.skinning&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.morphColors&&a.enable(7),L.premultipliedAlpha&&a.enable(8),L.shadowMapEnabled&&a.enable(9),L.useLegacyLights&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.useDepthPacking&&a.enable(13),L.dithering&&a.enable(14),L.transmission&&a.enable(15),L.sheen&&a.enable(16),L.opaque&&a.enable(17),L.pointsUvs&&a.enable(18),L.decodeVideoTexture&&a.enable(19),L.alphaToCoverage&&a.enable(20),b.push(a.mask)}function C(b){const L=M[b.type];let Z;if(L){const re=qr[L];Z=UN.clone(re.uniforms)}else Z=b.uniforms;return Z}function P(b,L){let Z;for(let re=0,W=d.length;re<W;re++){const ne=d[re];if(ne.cacheKey===L){Z=ne,++Z.usedTimes;break}}return Z===void 0&&(Z=new WX(n,L,b,s),d.push(Z)),Z}function R(b){if(--b.usedTimes===0){const L=d.indexOf(b);d[L]=d[d.length-1],d.pop(),b.destroy()}}function D(b){l.remove(b)}function X(){l.dispose()}return{getParameters:g,getProgramCacheKey:w,getUniforms:C,acquireProgram:P,releaseProgram:R,releaseShaderCache:D,programs:d,dispose:X}}function KX(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function ZX(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function FC(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function zC(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,p,m,y,M,_){let g=n[e];return g===void 0?(g={id:f.id,object:f,geometry:p,material:m,groupOrder:y,renderOrder:f.renderOrder,z:M,group:_},n[e]=g):(g.id=f.id,g.object=f,g.geometry=p,g.material=m,g.groupOrder=y,g.renderOrder=f.renderOrder,g.z=M,g.group=_),e++,g}function a(f,p,m,y,M,_){const g=o(f,p,m,y,M,_);m.transmission>0?i.push(g):m.transparent===!0?r.push(g):t.push(g)}function l(f,p,m,y,M,_){const g=o(f,p,m,y,M,_);m.transmission>0?i.unshift(g):m.transparent===!0?r.unshift(g):t.unshift(g)}function c(f,p){t.length>1&&t.sort(f||ZX),i.length>1&&i.sort(p||FC),r.length>1&&r.sort(p||FC)}function d(){for(let f=e,p=n.length;f<p;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:d,sort:c}}function JX(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new zC,n.set(i,[o])):r>=s.length?(o=new zC,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function QX(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new F,color:new ze};break;case"SpotLight":t={position:new F,direction:new F,color:new ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new F,color:new ze,distance:0,decay:0};break;case"HemisphereLight":t={direction:new F,skyColor:new ze,groundColor:new ze};break;case"RectAreaLight":t={color:new ze,position:new F,halfWidth:new F,halfHeight:new F};break}return n[e.id]=t,t}}}function e$(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new de,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let t$=0;function n$(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function i$(n,e){const t=new QX,i=e$(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let d=0;d<9;d++)r.probe.push(new F);const s=new F,o=new dt,a=new dt;function l(d,f){let p=0,m=0,y=0;for(let Z=0;Z<9;Z++)r.probe[Z].set(0,0,0);let M=0,_=0,g=0,w=0,x=0,T=0,C=0,P=0,R=0,D=0,X=0;d.sort(n$);const b=f===!0?Math.PI:1;for(let Z=0,re=d.length;Z<re;Z++){const W=d[Z],ne=W.color,J=W.intensity,ae=W.distance,N=W.shadow&&W.shadow.map?W.shadow.map.texture:null;if(W.isAmbientLight)p+=ne.r*J*b,m+=ne.g*J*b,y+=ne.b*J*b;else if(W.isLightProbe){for(let B=0;B<9;B++)r.probe[B].addScaledVector(W.sh.coefficients[B],J);X++}else if(W.isDirectionalLight){const B=t.get(W);if(B.color.copy(W.color).multiplyScalar(W.intensity*b),W.castShadow){const H=W.shadow,q=i.get(W);q.shadowBias=H.bias,q.shadowNormalBias=H.normalBias,q.shadowRadius=H.radius,q.shadowMapSize=H.mapSize,r.directionalShadow[M]=q,r.directionalShadowMap[M]=N,r.directionalShadowMatrix[M]=W.shadow.matrix,T++}r.directional[M]=B,M++}else if(W.isSpotLight){const B=t.get(W);B.position.setFromMatrixPosition(W.matrixWorld),B.color.copy(ne).multiplyScalar(J*b),B.distance=ae,B.coneCos=Math.cos(W.angle),B.penumbraCos=Math.cos(W.angle*(1-W.penumbra)),B.decay=W.decay,r.spot[g]=B;const H=W.shadow;if(W.map&&(r.spotLightMap[R]=W.map,R++,H.updateMatrices(W),W.castShadow&&D++),r.spotLightMatrix[g]=H.matrix,W.castShadow){const q=i.get(W);q.shadowBias=H.bias,q.shadowNormalBias=H.normalBias,q.shadowRadius=H.radius,q.shadowMapSize=H.mapSize,r.spotShadow[g]=q,r.spotShadowMap[g]=N,P++}g++}else if(W.isRectAreaLight){const B=t.get(W);B.color.copy(ne).multiplyScalar(J),B.halfWidth.set(W.width*.5,0,0),B.halfHeight.set(0,W.height*.5,0),r.rectArea[w]=B,w++}else if(W.isPointLight){const B=t.get(W);if(B.color.copy(W.color).multiplyScalar(W.intensity*b),B.distance=W.distance,B.decay=W.decay,W.castShadow){const H=W.shadow,q=i.get(W);q.shadowBias=H.bias,q.shadowNormalBias=H.normalBias,q.shadowRadius=H.radius,q.shadowMapSize=H.mapSize,q.shadowCameraNear=H.camera.near,q.shadowCameraFar=H.camera.far,r.pointShadow[_]=q,r.pointShadowMap[_]=N,r.pointShadowMatrix[_]=W.shadow.matrix,C++}r.point[_]=B,_++}else if(W.isHemisphereLight){const B=t.get(W);B.skyColor.copy(W.color).multiplyScalar(J*b),B.groundColor.copy(W.groundColor).multiplyScalar(J*b),r.hemi[x]=B,x++}}w>0&&(e.isWebGL2?n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_FLOAT_1,r.rectAreaLTC2=Pe.LTC_FLOAT_2):(r.rectAreaLTC1=Pe.LTC_HALF_1,r.rectAreaLTC2=Pe.LTC_HALF_2):n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_FLOAT_1,r.rectAreaLTC2=Pe.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Pe.LTC_HALF_1,r.rectAreaLTC2=Pe.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=p,r.ambient[1]=m,r.ambient[2]=y;const L=r.hash;(L.directionalLength!==M||L.pointLength!==_||L.spotLength!==g||L.rectAreaLength!==w||L.hemiLength!==x||L.numDirectionalShadows!==T||L.numPointShadows!==C||L.numSpotShadows!==P||L.numSpotMaps!==R||L.numLightProbes!==X)&&(r.directional.length=M,r.spot.length=g,r.rectArea.length=w,r.point.length=_,r.hemi.length=x,r.directionalShadow.length=T,r.directionalShadowMap.length=T,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=P,r.spotShadowMap.length=P,r.directionalShadowMatrix.length=T,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=P+R-D,r.spotLightMap.length=R,r.numSpotLightShadowsWithMaps=D,r.numLightProbes=X,L.directionalLength=M,L.pointLength=_,L.spotLength=g,L.rectAreaLength=w,L.hemiLength=x,L.numDirectionalShadows=T,L.numPointShadows=C,L.numSpotShadows=P,L.numSpotMaps=R,L.numLightProbes=X,r.version=t$++)}function c(d,f){let p=0,m=0,y=0,M=0,_=0;const g=f.matrixWorldInverse;for(let w=0,x=d.length;w<x;w++){const T=d[w];if(T.isDirectionalLight){const C=r.directional[p];C.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),p++}else if(T.isSpotLight){const C=r.spot[y];C.position.setFromMatrixPosition(T.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(g),y++}else if(T.isRectAreaLight){const C=r.rectArea[M];C.position.setFromMatrixPosition(T.matrixWorld),C.position.applyMatrix4(g),a.identity(),o.copy(T.matrixWorld),o.premultiply(g),a.extractRotation(o),C.halfWidth.set(T.width*.5,0,0),C.halfHeight.set(0,T.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),M++}else if(T.isPointLight){const C=r.point[m];C.position.setFromMatrixPosition(T.matrixWorld),C.position.applyMatrix4(g),m++}else if(T.isHemisphereLight){const C=r.hemi[_];C.direction.setFromMatrixPosition(T.matrixWorld),C.direction.transformDirection(g),_++}}}return{setup:l,setupView:c,state:r}}function BC(n,e){const t=new i$(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function o(f){i.push(f)}function a(f){r.push(f)}function l(f){t.setup(i,f)}function c(f){t.setupView(i,f)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function r$(n,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new BC(n,e),t.set(s,[l])):o>=a.length?(l=new BC(n,e),a.push(l)):l=a[o],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class iM extends _i{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=wN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class rM extends _i{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const s$=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,o$=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function a$(n,e,t){let i=new yf;const r=new de,s=new de,o=new Vt,a=new iM({depthPacking:MN}),l=new rM,c={},d=t.maxTextureSize,f={[so]:Ri,[Ri]:so,[ms]:ms},p=new Qr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new de},radius:{value:4}},vertexShader:s$,fragmentShader:o$}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const y=new bt;y.setAttribute("position",new Gt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new Rn(y,p),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=P0;let g=this.type;this.render=function(P,R,D){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||P.length===0)return;const X=n.getRenderTarget(),b=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),Z=n.state;Z.setBlending(Js),Z.buffers.color.setClear(1,1,1,1),Z.buffers.depth.setTest(!0),Z.setScissorTest(!1);const re=g!==jr&&this.type===jr,W=g===jr&&this.type!==jr;for(let ne=0,J=P.length;ne<J;ne++){const ae=P[ne],N=ae.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",ae,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;r.copy(N.mapSize);const B=N.getFrameExtents();if(r.multiply(B),s.copy(N.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(s.x=Math.floor(d/B.x),r.x=s.x*B.x,N.mapSize.x=s.x),r.y>d&&(s.y=Math.floor(d/B.y),r.y=s.y*B.y,N.mapSize.y=s.y)),N.map===null||re===!0||W===!0){const q=this.type!==jr?{minFilter:Mn,magFilter:Mn}:{};N.map!==null&&N.map.dispose(),N.map=new kr(r.x,r.y,q),N.map.texture.name=ae.name+".shadowMap",N.camera.updateProjectionMatrix()}n.setRenderTarget(N.map),n.clear();const H=N.getViewportCount();for(let q=0;q<H;q++){const le=N.getViewport(q);o.set(s.x*le.x,s.y*le.y,s.x*le.z,s.y*le.w),Z.viewport(o),N.updateMatrices(ae,q),i=N.getFrustum(),T(R,D,N.camera,ae,this.type)}N.isPointLightShadow!==!0&&this.type===jr&&w(N,D),N.needsUpdate=!1}g=this.type,_.needsUpdate=!1,n.setRenderTarget(X,b,L)};function w(P,R){const D=e.update(M);p.defines.VSM_SAMPLES!==P.blurSamples&&(p.defines.VSM_SAMPLES=P.blurSamples,m.defines.VSM_SAMPLES=P.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),P.mapPass===null&&(P.mapPass=new kr(r.x,r.y)),p.uniforms.shadow_pass.value=P.map.texture,p.uniforms.resolution.value=P.mapSize,p.uniforms.radius.value=P.radius,n.setRenderTarget(P.mapPass),n.clear(),n.renderBufferDirect(R,null,D,p,M,null),m.uniforms.shadow_pass.value=P.mapPass.texture,m.uniforms.resolution.value=P.mapSize,m.uniforms.radius.value=P.radius,n.setRenderTarget(P.map),n.clear(),n.renderBufferDirect(R,null,D,m,M,null)}function x(P,R,D,X){let b=null;const L=D.isPointLight===!0?P.customDistanceMaterial:P.customDepthMaterial;if(L!==void 0)b=L;else if(b=D.isPointLight===!0?l:a,n.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0){const Z=b.uuid,re=R.uuid;let W=c[Z];W===void 0&&(W={},c[Z]=W);let ne=W[re];ne===void 0&&(ne=b.clone(),W[re]=ne,R.addEventListener("dispose",C)),b=ne}if(b.visible=R.visible,b.wireframe=R.wireframe,X===jr?b.side=R.shadowSide!==null?R.shadowSide:R.side:b.side=R.shadowSide!==null?R.shadowSide:f[R.side],b.alphaMap=R.alphaMap,b.alphaTest=R.alphaTest,b.map=R.map,b.clipShadows=R.clipShadows,b.clippingPlanes=R.clippingPlanes,b.clipIntersection=R.clipIntersection,b.displacementMap=R.displacementMap,b.displacementScale=R.displacementScale,b.displacementBias=R.displacementBias,b.wireframeLinewidth=R.wireframeLinewidth,b.linewidth=R.linewidth,D.isPointLight===!0&&b.isMeshDistanceMaterial===!0){const Z=n.properties.get(b);Z.light=D}return b}function T(P,R,D,X,b){if(P.visible===!1)return;if(P.layers.test(R.layers)&&(P.isMesh||P.isLine||P.isPoints)&&(P.castShadow||P.receiveShadow&&b===jr)&&(!P.frustumCulled||i.intersectsObject(P))){P.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,P.matrixWorld);const re=e.update(P),W=P.material;if(Array.isArray(W)){const ne=re.groups;for(let J=0,ae=ne.length;J<ae;J++){const N=ne[J],B=W[N.materialIndex];if(B&&B.visible){const H=x(P,B,X,b);P.onBeforeShadow(n,P,R,D,re,H,N),n.renderBufferDirect(D,null,re,H,P,N),P.onAfterShadow(n,P,R,D,re,H,N)}}}else if(W.visible){const ne=x(P,W,X,b);P.onBeforeShadow(n,P,R,D,re,ne,null),n.renderBufferDirect(D,null,re,ne,P,null),P.onAfterShadow(n,P,R,D,re,ne,null)}}const Z=P.children;for(let re=0,W=Z.length;re<W;re++)T(Z[re],R,D,X,b)}function C(P){P.target.removeEventListener("dispose",C);for(const D in c){const X=c[D],b=P.target.uuid;b in X&&(X[b].dispose(),delete X[b])}}}function l$(n,e,t){const i=t.isWebGL2;function r(){let V=!1;const Me=new Vt;let Ce=null;const $e=new Vt(0,0,0,0);return{setMask:function(qe){Ce!==qe&&!V&&(n.colorMask(qe,qe,qe,qe),Ce=qe)},setLocked:function(qe){V=qe},setClear:function(qe,St,Lt,Wt,yn){yn===!0&&(qe*=Wt,St*=Wt,Lt*=Wt),Me.set(qe,St,Lt,Wt),$e.equals(Me)===!1&&(n.clearColor(qe,St,Lt,Wt),$e.copy(Me))},reset:function(){V=!1,Ce=null,$e.set(-1,0,0,0)}}}function s(){let V=!1,Me=null,Ce=null,$e=null;return{setTest:function(qe){qe?He(n.DEPTH_TEST):ct(n.DEPTH_TEST)},setMask:function(qe){Me!==qe&&!V&&(n.depthMask(qe),Me=qe)},setFunc:function(qe){if(Ce!==qe){switch(qe){case K3:n.depthFunc(n.NEVER);break;case Z3:n.depthFunc(n.ALWAYS);break;case J3:n.depthFunc(n.LESS);break;case Rd:n.depthFunc(n.LEQUAL);break;case Q3:n.depthFunc(n.EQUAL);break;case eN:n.depthFunc(n.GEQUAL);break;case tN:n.depthFunc(n.GREATER);break;case nN:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ce=qe}},setLocked:function(qe){V=qe},setClear:function(qe){$e!==qe&&(n.clearDepth(qe),$e=qe)},reset:function(){V=!1,Me=null,Ce=null,$e=null}}}function o(){let V=!1,Me=null,Ce=null,$e=null,qe=null,St=null,Lt=null,Wt=null,yn=null;return{setTest:function(Nt){V||(Nt?He(n.STENCIL_TEST):ct(n.STENCIL_TEST))},setMask:function(Nt){Me!==Nt&&!V&&(n.stencilMask(Nt),Me=Nt)},setFunc:function(Nt,Yn,pr){(Ce!==Nt||$e!==Yn||qe!==pr)&&(n.stencilFunc(Nt,Yn,pr),Ce=Nt,$e=Yn,qe=pr)},setOp:function(Nt,Yn,pr){(St!==Nt||Lt!==Yn||Wt!==pr)&&(n.stencilOp(Nt,Yn,pr),St=Nt,Lt=Yn,Wt=pr)},setLocked:function(Nt){V=Nt},setClear:function(Nt){yn!==Nt&&(n.clearStencil(Nt),yn=Nt)},reset:function(){V=!1,Me=null,Ce=null,$e=null,qe=null,St=null,Lt=null,Wt=null,yn=null}}}const a=new r,l=new s,c=new o,d=new WeakMap,f=new WeakMap;let p={},m={},y=new WeakMap,M=[],_=null,g=!1,w=null,x=null,T=null,C=null,P=null,R=null,D=null,X=new ze(0,0,0),b=0,L=!1,Z=null,re=null,W=null,ne=null,J=null;const ae=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let N=!1,B=0;const H=n.getParameter(n.VERSION);H.indexOf("WebGL")!==-1?(B=parseFloat(/^WebGL (\d)/.exec(H)[1]),N=B>=1):H.indexOf("OpenGL ES")!==-1&&(B=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),N=B>=2);let q=null,le={};const be=n.getParameter(n.SCISSOR_BOX),te=n.getParameter(n.VIEWPORT),pe=new Vt().fromArray(be),we=new Vt().fromArray(te);function Re(V,Me,Ce,$e){const qe=new Uint8Array(4),St=n.createTexture();n.bindTexture(V,St),n.texParameteri(V,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(V,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Lt=0;Lt<Ce;Lt++)i&&(V===n.TEXTURE_3D||V===n.TEXTURE_2D_ARRAY)?n.texImage3D(Me,0,n.RGBA,1,1,$e,0,n.RGBA,n.UNSIGNED_BYTE,qe):n.texImage2D(Me+Lt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,qe);return St}const Je={};Je[n.TEXTURE_2D]=Re(n.TEXTURE_2D,n.TEXTURE_2D,1),Je[n.TEXTURE_CUBE_MAP]=Re(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Je[n.TEXTURE_2D_ARRAY]=Re(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Je[n.TEXTURE_3D]=Re(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),He(n.DEPTH_TEST),l.setFunc(Rd),Ie(!1),O(pS),He(n.CULL_FACE),me(Js);function He(V){p[V]!==!0&&(n.enable(V),p[V]=!0)}function ct(V){p[V]!==!1&&(n.disable(V),p[V]=!1)}function Ge(V,Me){return m[V]!==Me?(n.bindFramebuffer(V,Me),m[V]=Me,i&&(V===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=Me),V===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=Me)),!0):!1}function j(V,Me){let Ce=M,$e=!1;if(V)if(Ce=y.get(Me),Ce===void 0&&(Ce=[],y.set(Me,Ce)),V.isWebGLMultipleRenderTargets){const qe=V.texture;if(Ce.length!==qe.length||Ce[0]!==n.COLOR_ATTACHMENT0){for(let St=0,Lt=qe.length;St<Lt;St++)Ce[St]=n.COLOR_ATTACHMENT0+St;Ce.length=qe.length,$e=!0}}else Ce[0]!==n.COLOR_ATTACHMENT0&&(Ce[0]=n.COLOR_ATTACHMENT0,$e=!0);else Ce[0]!==n.BACK&&(Ce[0]=n.BACK,$e=!0);$e&&(t.isWebGL2?n.drawBuffers(Ce):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ce))}function Se(V){return _!==V?(n.useProgram(V),_=V,!0):!1}const fe={[Bo]:n.FUNC_ADD,[k3]:n.FUNC_SUBTRACT,[O3]:n.FUNC_REVERSE_SUBTRACT};if(i)fe[yS]=n.MIN,fe[_S]=n.MAX;else{const V=e.get("EXT_blend_minmax");V!==null&&(fe[yS]=V.MIN_EXT,fe[_S]=V.MAX_EXT)}const Te={[U3]:n.ZERO,[F3]:n.ONE,[z3]:n.SRC_COLOR,[Gg]:n.SRC_ALPHA,[W3]:n.SRC_ALPHA_SATURATE,[G3]:n.DST_COLOR,[V3]:n.DST_ALPHA,[B3]:n.ONE_MINUS_SRC_COLOR,[jg]:n.ONE_MINUS_SRC_ALPHA,[j3]:n.ONE_MINUS_DST_COLOR,[H3]:n.ONE_MINUS_DST_ALPHA,[X3]:n.CONSTANT_COLOR,[$3]:n.ONE_MINUS_CONSTANT_COLOR,[q3]:n.CONSTANT_ALPHA,[Y3]:n.ONE_MINUS_CONSTANT_ALPHA};function me(V,Me,Ce,$e,qe,St,Lt,Wt,yn,Nt){if(V===Js){g===!0&&(ct(n.BLEND),g=!1);return}if(g===!1&&(He(n.BLEND),g=!0),V!==D3){if(V!==w||Nt!==L){if((x!==Bo||P!==Bo)&&(n.blendEquation(n.FUNC_ADD),x=Bo,P=Bo),Nt)switch(V){case hl:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mS:n.blendFunc(n.ONE,n.ONE);break;case gS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case vS:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",V);break}else switch(V){case hl:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case mS:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case gS:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case vS:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",V);break}T=null,C=null,R=null,D=null,X.set(0,0,0),b=0,w=V,L=Nt}return}qe=qe||Me,St=St||Ce,Lt=Lt||$e,(Me!==x||qe!==P)&&(n.blendEquationSeparate(fe[Me],fe[qe]),x=Me,P=qe),(Ce!==T||$e!==C||St!==R||Lt!==D)&&(n.blendFuncSeparate(Te[Ce],Te[$e],Te[St],Te[Lt]),T=Ce,C=$e,R=St,D=Lt),(Wt.equals(X)===!1||yn!==b)&&(n.blendColor(Wt.r,Wt.g,Wt.b,yn),X.copy(Wt),b=yn),w=V,L=!1}function Ke(V,Me){V.side===ms?ct(n.CULL_FACE):He(n.CULL_FACE);let Ce=V.side===Ri;Me&&(Ce=!Ce),Ie(Ce),V.blending===hl&&V.transparent===!1?me(Js):me(V.blending,V.blendEquation,V.blendSrc,V.blendDst,V.blendEquationAlpha,V.blendSrcAlpha,V.blendDstAlpha,V.blendColor,V.blendAlpha,V.premultipliedAlpha),l.setFunc(V.depthFunc),l.setTest(V.depthTest),l.setMask(V.depthWrite),a.setMask(V.colorWrite);const $e=V.stencilWrite;c.setTest($e),$e&&(c.setMask(V.stencilWriteMask),c.setFunc(V.stencilFunc,V.stencilRef,V.stencilFuncMask),c.setOp(V.stencilFail,V.stencilZFail,V.stencilZPass)),ee(V.polygonOffset,V.polygonOffsetFactor,V.polygonOffsetUnits),V.alphaToCoverage===!0?He(n.SAMPLE_ALPHA_TO_COVERAGE):ct(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ie(V){Z!==V&&(V?n.frontFace(n.CW):n.frontFace(n.CCW),Z=V)}function O(V){V!==L3?(He(n.CULL_FACE),V!==re&&(V===pS?n.cullFace(n.BACK):V===I3?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ct(n.CULL_FACE),re=V}function I(V){V!==W&&(N&&n.lineWidth(V),W=V)}function ee(V,Me,Ce){V?(He(n.POLYGON_OFFSET_FILL),(ne!==Me||J!==Ce)&&(n.polygonOffset(Me,Ce),ne=Me,J=Ce)):ct(n.POLYGON_OFFSET_FILL)}function xe(V){V?He(n.SCISSOR_TEST):ct(n.SCISSOR_TEST)}function ye(V){V===void 0&&(V=n.TEXTURE0+ae-1),q!==V&&(n.activeTexture(V),q=V)}function ge(V,Me,Ce){Ce===void 0&&(q===null?Ce=n.TEXTURE0+ae-1:Ce=q);let $e=le[Ce];$e===void 0&&($e={type:void 0,texture:void 0},le[Ce]=$e),($e.type!==V||$e.texture!==Me)&&(q!==Ce&&(n.activeTexture(Ce),q=Ce),n.bindTexture(V,Me||Je[V]),$e.type=V,$e.texture=Me)}function Xe(){const V=le[q];V!==void 0&&V.type!==void 0&&(n.bindTexture(V.type,null),V.type=void 0,V.texture=void 0)}function Le(){try{n.compressedTexImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Ue(){try{n.compressedTexImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function nt(){try{n.texSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function pt(){try{n.texSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function _e(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Rt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function xt(){try{n.texStorage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function ht(){try{n.texStorage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function tt(){try{n.texImage2D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function Be(){try{n.texImage3D.apply(n,arguments)}catch(V){console.error("THREE.WebGLState:",V)}}function $(V){pe.equals(V)===!1&&(n.scissor(V.x,V.y,V.z,V.w),pe.copy(V))}function ve(V){we.equals(V)===!1&&(n.viewport(V.x,V.y,V.z,V.w),we.copy(V))}function Ne(V,Me){let Ce=f.get(Me);Ce===void 0&&(Ce=new WeakMap,f.set(Me,Ce));let $e=Ce.get(V);$e===void 0&&($e=n.getUniformBlockIndex(Me,V.name),Ce.set(V,$e))}function Oe(V,Me){const $e=f.get(Me).get(V);d.get(Me)!==$e&&(n.uniformBlockBinding(Me,$e,V.__bindingPointIndex),d.set(Me,$e))}function ut(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),p={},q=null,le={},m={},y=new WeakMap,M=[],_=null,g=!1,w=null,x=null,T=null,C=null,P=null,R=null,D=null,X=new ze(0,0,0),b=0,L=!1,Z=null,re=null,W=null,ne=null,J=null,pe.set(0,0,n.canvas.width,n.canvas.height),we.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:He,disable:ct,bindFramebuffer:Ge,drawBuffers:j,useProgram:Se,setBlending:me,setMaterial:Ke,setFlipSided:Ie,setCullFace:O,setLineWidth:I,setPolygonOffset:ee,setScissorTest:xe,activeTexture:ye,bindTexture:ge,unbindTexture:Xe,compressedTexImage2D:Le,compressedTexImage3D:Ue,texImage2D:tt,texImage3D:Be,updateUBOMapping:Ne,uniformBlockBinding:Oe,texStorage2D:xt,texStorage3D:ht,texSubImage2D:nt,texSubImage3D:pt,compressedTexSubImage2D:_e,compressedTexSubImage3D:Rt,scissor:$,viewport:ve,reset:ut}}function c$(n,e,t,i,r,s,o){const a=r.isWebGL2,l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),d=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(O,I){return m?new OffscreenCanvas(O,I):Gd("canvas")}function M(O,I,ee,xe){let ye=1;if((O.width>xe||O.height>xe)&&(ye=xe/Math.max(O.width,O.height)),ye<1||I===!0)if(typeof HTMLImageElement<"u"&&O instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&O instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&O instanceof ImageBitmap){const ge=I?$g:Math.floor,Xe=ge(ye*O.width),Le=ge(ye*O.height);f===void 0&&(f=y(Xe,Le));const Ue=ee?y(Xe,Le):f;return Ue.width=Xe,Ue.height=Le,Ue.getContext("2d").drawImage(O,0,0,Xe,Le),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+O.width+"x"+O.height+") to ("+Xe+"x"+Le+")."),Ue}else return"data"in O&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+O.width+"x"+O.height+")."),O;return O}function _(O){return qS(O.width)&&qS(O.height)}function g(O){return a?!1:O.wrapS!==pi||O.wrapT!==pi||O.minFilter!==Mn&&O.minFilter!==Jt}function w(O,I){return O.generateMipmaps&&I&&O.minFilter!==Mn&&O.minFilter!==Jt}function x(O){n.generateMipmap(O)}function T(O,I,ee,xe,ye=!1){if(a===!1)return I;if(O!==null){if(n[O]!==void 0)return n[O];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+O+"'")}let ge=I;if(I===n.RED&&(ee===n.FLOAT&&(ge=n.R32F),ee===n.HALF_FLOAT&&(ge=n.R16F),ee===n.UNSIGNED_BYTE&&(ge=n.R8)),I===n.RED_INTEGER&&(ee===n.UNSIGNED_BYTE&&(ge=n.R8UI),ee===n.UNSIGNED_SHORT&&(ge=n.R16UI),ee===n.UNSIGNED_INT&&(ge=n.R32UI),ee===n.BYTE&&(ge=n.R8I),ee===n.SHORT&&(ge=n.R16I),ee===n.INT&&(ge=n.R32I)),I===n.RG&&(ee===n.FLOAT&&(ge=n.RG32F),ee===n.HALF_FLOAT&&(ge=n.RG16F),ee===n.UNSIGNED_BYTE&&(ge=n.RG8)),I===n.RGBA){const Xe=ye?Fd:Bt.getTransfer(xe);ee===n.FLOAT&&(ge=n.RGBA32F),ee===n.HALF_FLOAT&&(ge=n.RGBA16F),ee===n.UNSIGNED_BYTE&&(ge=Xe===$t?n.SRGB8_ALPHA8:n.RGBA8),ee===n.UNSIGNED_SHORT_4_4_4_4&&(ge=n.RGBA4),ee===n.UNSIGNED_SHORT_5_5_5_1&&(ge=n.RGB5_A1)}return(ge===n.R16F||ge===n.R32F||ge===n.RG16F||ge===n.RG32F||ge===n.RGBA16F||ge===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ge}function C(O,I,ee){return w(O,ee)===!0||O.isFramebufferTexture&&O.minFilter!==Mn&&O.minFilter!==Jt?Math.log2(Math.max(I.width,I.height))+1:O.mipmaps!==void 0&&O.mipmaps.length>0?O.mipmaps.length:O.isCompressedTexture&&Array.isArray(O.image)?I.mipmaps.length:1}function P(O){return O===Mn||O===Wg||O===Ka?n.NEAREST:n.LINEAR}function R(O){const I=O.target;I.removeEventListener("dispose",R),X(I),I.isVideoTexture&&d.delete(I)}function D(O){const I=O.target;I.removeEventListener("dispose",D),L(I)}function X(O){const I=i.get(O);if(I.__webglInit===void 0)return;const ee=O.source,xe=p.get(ee);if(xe){const ye=xe[I.__cacheKey];ye.usedTimes--,ye.usedTimes===0&&b(O),Object.keys(xe).length===0&&p.delete(ee)}i.remove(O)}function b(O){const I=i.get(O);n.deleteTexture(I.__webglTexture);const ee=O.source,xe=p.get(ee);delete xe[I.__cacheKey],o.memory.textures--}function L(O){const I=O.texture,ee=i.get(O),xe=i.get(I);if(xe.__webglTexture!==void 0&&(n.deleteTexture(xe.__webglTexture),o.memory.textures--),O.depthTexture&&O.depthTexture.dispose(),O.isWebGLCubeRenderTarget)for(let ye=0;ye<6;ye++){if(Array.isArray(ee.__webglFramebuffer[ye]))for(let ge=0;ge<ee.__webglFramebuffer[ye].length;ge++)n.deleteFramebuffer(ee.__webglFramebuffer[ye][ge]);else n.deleteFramebuffer(ee.__webglFramebuffer[ye]);ee.__webglDepthbuffer&&n.deleteRenderbuffer(ee.__webglDepthbuffer[ye])}else{if(Array.isArray(ee.__webglFramebuffer))for(let ye=0;ye<ee.__webglFramebuffer.length;ye++)n.deleteFramebuffer(ee.__webglFramebuffer[ye]);else n.deleteFramebuffer(ee.__webglFramebuffer);if(ee.__webglDepthbuffer&&n.deleteRenderbuffer(ee.__webglDepthbuffer),ee.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ee.__webglMultisampledFramebuffer),ee.__webglColorRenderbuffer)for(let ye=0;ye<ee.__webglColorRenderbuffer.length;ye++)ee.__webglColorRenderbuffer[ye]&&n.deleteRenderbuffer(ee.__webglColorRenderbuffer[ye]);ee.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ee.__webglDepthRenderbuffer)}if(O.isWebGLMultipleRenderTargets)for(let ye=0,ge=I.length;ye<ge;ye++){const Xe=i.get(I[ye]);Xe.__webglTexture&&(n.deleteTexture(Xe.__webglTexture),o.memory.textures--),i.remove(I[ye])}i.remove(I),i.remove(O)}let Z=0;function re(){Z=0}function W(){const O=Z;return O>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+O+" texture units while this GPU supports only "+r.maxTextures),Z+=1,O}function ne(O){const I=[];return I.push(O.wrapS),I.push(O.wrapT),I.push(O.wrapR||0),I.push(O.magFilter),I.push(O.minFilter),I.push(O.anisotropy),I.push(O.internalFormat),I.push(O.format),I.push(O.type),I.push(O.generateMipmaps),I.push(O.premultiplyAlpha),I.push(O.flipY),I.push(O.unpackAlignment),I.push(O.colorSpace),I.join()}function J(O,I){const ee=i.get(O);if(O.isVideoTexture&&Ke(O),O.isRenderTargetTexture===!1&&O.version>0&&ee.__version!==O.version){const xe=O.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{pe(ee,O,I);return}}t.bindTexture(n.TEXTURE_2D,ee.__webglTexture,n.TEXTURE0+I)}function ae(O,I){const ee=i.get(O);if(O.version>0&&ee.__version!==O.version){pe(ee,O,I);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ee.__webglTexture,n.TEXTURE0+I)}function N(O,I){const ee=i.get(O);if(O.version>0&&ee.__version!==O.version){pe(ee,O,I);return}t.bindTexture(n.TEXTURE_3D,ee.__webglTexture,n.TEXTURE0+I)}function B(O,I){const ee=i.get(O);if(O.version>0&&ee.__version!==O.version){we(ee,O,I);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ee.__webglTexture,n.TEXTURE0+I)}const H={[Nd]:n.REPEAT,[pi]:n.CLAMP_TO_EDGE,[Dd]:n.MIRRORED_REPEAT},q={[Mn]:n.NEAREST,[Wg]:n.NEAREST_MIPMAP_NEAREST,[Ka]:n.NEAREST_MIPMAP_LINEAR,[Jt]:n.LINEAR,[ed]:n.LINEAR_MIPMAP_NEAREST,[gs]:n.LINEAR_MIPMAP_LINEAR},le={[TN]:n.NEVER,[LN]:n.ALWAYS,[bN]:n.LESS,[K1]:n.LEQUAL,[AN]:n.EQUAL,[RN]:n.GEQUAL,[CN]:n.GREATER,[PN]:n.NOTEQUAL};function be(O,I,ee){if(I.type===ir&&e.has("OES_texture_float_linear")===!1&&(I.magFilter===Jt||I.magFilter===ed||I.magFilter===Ka||I.magFilter===gs||I.minFilter===Jt||I.minFilter===ed||I.minFilter===Ka||I.minFilter===gs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),ee?(n.texParameteri(O,n.TEXTURE_WRAP_S,H[I.wrapS]),n.texParameteri(O,n.TEXTURE_WRAP_T,H[I.wrapT]),(O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY)&&n.texParameteri(O,n.TEXTURE_WRAP_R,H[I.wrapR]),n.texParameteri(O,n.TEXTURE_MAG_FILTER,q[I.magFilter]),n.texParameteri(O,n.TEXTURE_MIN_FILTER,q[I.minFilter])):(n.texParameteri(O,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(O,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(O===n.TEXTURE_3D||O===n.TEXTURE_2D_ARRAY)&&n.texParameteri(O,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(I.wrapS!==pi||I.wrapT!==pi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(O,n.TEXTURE_MAG_FILTER,P(I.magFilter)),n.texParameteri(O,n.TEXTURE_MIN_FILTER,P(I.minFilter)),I.minFilter!==Mn&&I.minFilter!==Jt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),I.compareFunction&&(n.texParameteri(O,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(O,n.TEXTURE_COMPARE_FUNC,le[I.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const xe=e.get("EXT_texture_filter_anisotropic");if(I.magFilter===Mn||I.minFilter!==Ka&&I.minFilter!==gs||I.type===ir&&e.has("OES_texture_float_linear")===!1||a===!1&&I.type===wl&&e.has("OES_texture_half_float_linear")===!1)return;(I.anisotropy>1||i.get(I).__currentAnisotropy)&&(n.texParameterf(O,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(I.anisotropy,r.getMaxAnisotropy())),i.get(I).__currentAnisotropy=I.anisotropy)}}function te(O,I){let ee=!1;O.__webglInit===void 0&&(O.__webglInit=!0,I.addEventListener("dispose",R));const xe=I.source;let ye=p.get(xe);ye===void 0&&(ye={},p.set(xe,ye));const ge=ne(I);if(ge!==O.__cacheKey){ye[ge]===void 0&&(ye[ge]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ee=!0),ye[ge].usedTimes++;const Xe=ye[O.__cacheKey];Xe!==void 0&&(ye[O.__cacheKey].usedTimes--,Xe.usedTimes===0&&b(I)),O.__cacheKey=ge,O.__webglTexture=ye[ge].texture}return ee}function pe(O,I,ee){let xe=n.TEXTURE_2D;(I.isDataArrayTexture||I.isCompressedArrayTexture)&&(xe=n.TEXTURE_2D_ARRAY),I.isData3DTexture&&(xe=n.TEXTURE_3D);const ye=te(O,I),ge=I.source;t.bindTexture(xe,O.__webglTexture,n.TEXTURE0+ee);const Xe=i.get(ge);if(ge.version!==Xe.__version||ye===!0){t.activeTexture(n.TEXTURE0+ee);const Le=Bt.getPrimaries(Bt.workingColorSpace),Ue=I.colorSpace===rr?null:Bt.getPrimaries(I.colorSpace),nt=I.colorSpace===rr||Le===Ue?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,nt);const pt=g(I)&&_(I.image)===!1;let _e=M(I.image,pt,!1,r.maxTextureSize);_e=Ie(I,_e);const Rt=_(_e)||a,xt=s.convert(I.format,I.colorSpace);let ht=s.convert(I.type),tt=T(I.internalFormat,xt,ht,I.colorSpace,I.isVideoTexture);be(xe,I,Rt);let Be;const $=I.mipmaps,ve=a&&I.isVideoTexture!==!0&&tt!==$1,Ne=Xe.__version===void 0||ye===!0,Oe=ge.dataReady,ut=C(I,_e,Rt);if(I.isDepthTexture)tt=n.DEPTH_COMPONENT,a?I.type===ir?tt=n.DEPTH_COMPONENT32F:I.type===$s?tt=n.DEPTH_COMPONENT24:I.type===Qo?tt=n.DEPTH24_STENCIL8:tt=n.DEPTH_COMPONENT16:I.type===ir&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),I.format===ea&&tt===n.DEPTH_COMPONENT&&I.type!==L0&&I.type!==$s&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),I.type=$s,ht=s.convert(I.type)),I.format===Ml&&tt===n.DEPTH_COMPONENT&&(tt=n.DEPTH_STENCIL,I.type!==Qo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),I.type=Qo,ht=s.convert(I.type))),Ne&&(ve?t.texStorage2D(n.TEXTURE_2D,1,tt,_e.width,_e.height):t.texImage2D(n.TEXTURE_2D,0,tt,_e.width,_e.height,0,xt,ht,null));else if(I.isDataTexture)if($.length>0&&Rt){ve&&Ne&&t.texStorage2D(n.TEXTURE_2D,ut,tt,$[0].width,$[0].height);for(let V=0,Me=$.length;V<Me;V++)Be=$[V],ve?Oe&&t.texSubImage2D(n.TEXTURE_2D,V,0,0,Be.width,Be.height,xt,ht,Be.data):t.texImage2D(n.TEXTURE_2D,V,tt,Be.width,Be.height,0,xt,ht,Be.data);I.generateMipmaps=!1}else ve?(Ne&&t.texStorage2D(n.TEXTURE_2D,ut,tt,_e.width,_e.height),Oe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,_e.width,_e.height,xt,ht,_e.data)):t.texImage2D(n.TEXTURE_2D,0,tt,_e.width,_e.height,0,xt,ht,_e.data);else if(I.isCompressedTexture)if(I.isCompressedArrayTexture){ve&&Ne&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ut,tt,$[0].width,$[0].height,_e.depth);for(let V=0,Me=$.length;V<Me;V++)Be=$[V],I.format!==Ai?xt!==null?ve?Oe&&t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,V,0,0,0,Be.width,Be.height,_e.depth,xt,Be.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,V,tt,Be.width,Be.height,_e.depth,0,Be.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ve?Oe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,V,0,0,0,Be.width,Be.height,_e.depth,xt,ht,Be.data):t.texImage3D(n.TEXTURE_2D_ARRAY,V,tt,Be.width,Be.height,_e.depth,0,xt,ht,Be.data)}else{ve&&Ne&&t.texStorage2D(n.TEXTURE_2D,ut,tt,$[0].width,$[0].height);for(let V=0,Me=$.length;V<Me;V++)Be=$[V],I.format!==Ai?xt!==null?ve?Oe&&t.compressedTexSubImage2D(n.TEXTURE_2D,V,0,0,Be.width,Be.height,xt,Be.data):t.compressedTexImage2D(n.TEXTURE_2D,V,tt,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ve?Oe&&t.texSubImage2D(n.TEXTURE_2D,V,0,0,Be.width,Be.height,xt,ht,Be.data):t.texImage2D(n.TEXTURE_2D,V,tt,Be.width,Be.height,0,xt,ht,Be.data)}else if(I.isDataArrayTexture)ve?(Ne&&t.texStorage3D(n.TEXTURE_2D_ARRAY,ut,tt,_e.width,_e.height,_e.depth),Oe&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,_e.width,_e.height,_e.depth,xt,ht,_e.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,tt,_e.width,_e.height,_e.depth,0,xt,ht,_e.data);else if(I.isData3DTexture)ve?(Ne&&t.texStorage3D(n.TEXTURE_3D,ut,tt,_e.width,_e.height,_e.depth),Oe&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,_e.width,_e.height,_e.depth,xt,ht,_e.data)):t.texImage3D(n.TEXTURE_3D,0,tt,_e.width,_e.height,_e.depth,0,xt,ht,_e.data);else if(I.isFramebufferTexture){if(Ne)if(ve)t.texStorage2D(n.TEXTURE_2D,ut,tt,_e.width,_e.height);else{let V=_e.width,Me=_e.height;for(let Ce=0;Ce<ut;Ce++)t.texImage2D(n.TEXTURE_2D,Ce,tt,V,Me,0,xt,ht,null),V>>=1,Me>>=1}}else if($.length>0&&Rt){ve&&Ne&&t.texStorage2D(n.TEXTURE_2D,ut,tt,$[0].width,$[0].height);for(let V=0,Me=$.length;V<Me;V++)Be=$[V],ve?Oe&&t.texSubImage2D(n.TEXTURE_2D,V,0,0,xt,ht,Be):t.texImage2D(n.TEXTURE_2D,V,tt,xt,ht,Be);I.generateMipmaps=!1}else ve?(Ne&&t.texStorage2D(n.TEXTURE_2D,ut,tt,_e.width,_e.height),Oe&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,xt,ht,_e)):t.texImage2D(n.TEXTURE_2D,0,tt,xt,ht,_e);w(I,Rt)&&x(xe),Xe.__version=ge.version,I.onUpdate&&I.onUpdate(I)}O.__version=I.version}function we(O,I,ee){if(I.image.length!==6)return;const xe=te(O,I),ye=I.source;t.bindTexture(n.TEXTURE_CUBE_MAP,O.__webglTexture,n.TEXTURE0+ee);const ge=i.get(ye);if(ye.version!==ge.__version||xe===!0){t.activeTexture(n.TEXTURE0+ee);const Xe=Bt.getPrimaries(Bt.workingColorSpace),Le=I.colorSpace===rr?null:Bt.getPrimaries(I.colorSpace),Ue=I.colorSpace===rr||Xe===Le?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,I.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,I.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,I.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ue);const nt=I.isCompressedTexture||I.image[0].isCompressedTexture,pt=I.image[0]&&I.image[0].isDataTexture,_e=[];for(let V=0;V<6;V++)!nt&&!pt?_e[V]=M(I.image[V],!1,!0,r.maxCubemapSize):_e[V]=pt?I.image[V].image:I.image[V],_e[V]=Ie(I,_e[V]);const Rt=_e[0],xt=_(Rt)||a,ht=s.convert(I.format,I.colorSpace),tt=s.convert(I.type),Be=T(I.internalFormat,ht,tt,I.colorSpace),$=a&&I.isVideoTexture!==!0,ve=ge.__version===void 0||xe===!0,Ne=ye.dataReady;let Oe=C(I,Rt,xt);be(n.TEXTURE_CUBE_MAP,I,xt);let ut;if(nt){$&&ve&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,Be,Rt.width,Rt.height);for(let V=0;V<6;V++){ut=_e[V].mipmaps;for(let Me=0;Me<ut.length;Me++){const Ce=ut[Me];I.format!==Ai?ht!==null?$?Ne&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,Me,0,0,Ce.width,Ce.height,ht,Ce.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,Me,Be,Ce.width,Ce.height,0,Ce.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):$?Ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,Me,0,0,Ce.width,Ce.height,ht,tt,Ce.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,Me,Be,Ce.width,Ce.height,0,ht,tt,Ce.data)}}}else{ut=I.mipmaps,$&&ve&&(ut.length>0&&Oe++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Oe,Be,_e[0].width,_e[0].height));for(let V=0;V<6;V++)if(pt){$?Ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,0,0,0,_e[V].width,_e[V].height,ht,tt,_e[V].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,0,Be,_e[V].width,_e[V].height,0,ht,tt,_e[V].data);for(let Me=0;Me<ut.length;Me++){const $e=ut[Me].image[V].image;$?Ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,Me+1,0,0,$e.width,$e.height,ht,tt,$e.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,Me+1,Be,$e.width,$e.height,0,ht,tt,$e.data)}}else{$?Ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,0,0,0,ht,tt,_e[V]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,0,Be,ht,tt,_e[V]);for(let Me=0;Me<ut.length;Me++){const Ce=ut[Me];$?Ne&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,Me+1,0,0,ht,tt,Ce.image[V]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+V,Me+1,Be,ht,tt,Ce.image[V])}}}w(I,xt)&&x(n.TEXTURE_CUBE_MAP),ge.__version=ye.version,I.onUpdate&&I.onUpdate(I)}O.__version=I.version}function Re(O,I,ee,xe,ye,ge){const Xe=s.convert(ee.format,ee.colorSpace),Le=s.convert(ee.type),Ue=T(ee.internalFormat,Xe,Le,ee.colorSpace);if(!i.get(I).__hasExternalTextures){const pt=Math.max(1,I.width>>ge),_e=Math.max(1,I.height>>ge);ye===n.TEXTURE_3D||ye===n.TEXTURE_2D_ARRAY?t.texImage3D(ye,ge,Ue,pt,_e,I.depth,0,Xe,Le,null):t.texImage2D(ye,ge,Ue,pt,_e,0,Xe,Le,null)}t.bindFramebuffer(n.FRAMEBUFFER,O),me(I)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,xe,ye,i.get(ee).__webglTexture,0,Te(I)):(ye===n.TEXTURE_2D||ye>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&ye<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,xe,ye,i.get(ee).__webglTexture,ge),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Je(O,I,ee){if(n.bindRenderbuffer(n.RENDERBUFFER,O),I.depthBuffer&&!I.stencilBuffer){let xe=a===!0?n.DEPTH_COMPONENT24:n.DEPTH_COMPONENT16;if(ee||me(I)){const ye=I.depthTexture;ye&&ye.isDepthTexture&&(ye.type===ir?xe=n.DEPTH_COMPONENT32F:ye.type===$s&&(xe=n.DEPTH_COMPONENT24));const ge=Te(I);me(I)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ge,xe,I.width,I.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ge,xe,I.width,I.height)}else n.renderbufferStorage(n.RENDERBUFFER,xe,I.width,I.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,O)}else if(I.depthBuffer&&I.stencilBuffer){const xe=Te(I);ee&&me(I)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,xe,n.DEPTH24_STENCIL8,I.width,I.height):me(I)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,xe,n.DEPTH24_STENCIL8,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,I.width,I.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,O)}else{const xe=I.isWebGLMultipleRenderTargets===!0?I.texture:[I.texture];for(let ye=0;ye<xe.length;ye++){const ge=xe[ye],Xe=s.convert(ge.format,ge.colorSpace),Le=s.convert(ge.type),Ue=T(ge.internalFormat,Xe,Le,ge.colorSpace),nt=Te(I);ee&&me(I)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,nt,Ue,I.width,I.height):me(I)?l.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,nt,Ue,I.width,I.height):n.renderbufferStorage(n.RENDERBUFFER,Ue,I.width,I.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function He(O,I){if(I&&I.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,O),!(I.depthTexture&&I.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(I.depthTexture).__webglTexture||I.depthTexture.image.width!==I.width||I.depthTexture.image.height!==I.height)&&(I.depthTexture.image.width=I.width,I.depthTexture.image.height=I.height,I.depthTexture.needsUpdate=!0),J(I.depthTexture,0);const xe=i.get(I.depthTexture).__webglTexture,ye=Te(I);if(I.depthTexture.format===ea)me(I)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,xe,0);else if(I.depthTexture.format===Ml)me(I)?l.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0,ye):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}function ct(O){const I=i.get(O),ee=O.isWebGLCubeRenderTarget===!0;if(O.depthTexture&&!I.__autoAllocateDepthBuffer){if(ee)throw new Error("target.depthTexture not supported in Cube render targets");He(I.__webglFramebuffer,O)}else if(ee){I.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer[xe]),I.__webglDepthbuffer[xe]=n.createRenderbuffer(),Je(I.__webglDepthbuffer[xe],O,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,I.__webglFramebuffer),I.__webglDepthbuffer=n.createRenderbuffer(),Je(I.__webglDepthbuffer,O,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ge(O,I,ee){const xe=i.get(O);I!==void 0&&Re(xe.__webglFramebuffer,O,O.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ee!==void 0&&ct(O)}function j(O){const I=O.texture,ee=i.get(O),xe=i.get(I);O.addEventListener("dispose",D),O.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=n.createTexture()),xe.__version=I.version,o.memory.textures++);const ye=O.isWebGLCubeRenderTarget===!0,ge=O.isWebGLMultipleRenderTargets===!0,Xe=_(O)||a;if(ye){ee.__webglFramebuffer=[];for(let Le=0;Le<6;Le++)if(a&&I.mipmaps&&I.mipmaps.length>0){ee.__webglFramebuffer[Le]=[];for(let Ue=0;Ue<I.mipmaps.length;Ue++)ee.__webglFramebuffer[Le][Ue]=n.createFramebuffer()}else ee.__webglFramebuffer[Le]=n.createFramebuffer()}else{if(a&&I.mipmaps&&I.mipmaps.length>0){ee.__webglFramebuffer=[];for(let Le=0;Le<I.mipmaps.length;Le++)ee.__webglFramebuffer[Le]=n.createFramebuffer()}else ee.__webglFramebuffer=n.createFramebuffer();if(ge)if(r.drawBuffers){const Le=O.texture;for(let Ue=0,nt=Le.length;Ue<nt;Ue++){const pt=i.get(Le[Ue]);pt.__webglTexture===void 0&&(pt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&O.samples>0&&me(O)===!1){const Le=ge?I:[I];ee.__webglMultisampledFramebuffer=n.createFramebuffer(),ee.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglMultisampledFramebuffer);for(let Ue=0;Ue<Le.length;Ue++){const nt=Le[Ue];ee.__webglColorRenderbuffer[Ue]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ee.__webglColorRenderbuffer[Ue]);const pt=s.convert(nt.format,nt.colorSpace),_e=s.convert(nt.type),Rt=T(nt.internalFormat,pt,_e,nt.colorSpace,O.isXRRenderTarget===!0),xt=Te(O);n.renderbufferStorageMultisample(n.RENDERBUFFER,xt,Rt,O.width,O.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ue,n.RENDERBUFFER,ee.__webglColorRenderbuffer[Ue])}n.bindRenderbuffer(n.RENDERBUFFER,null),O.depthBuffer&&(ee.__webglDepthRenderbuffer=n.createRenderbuffer(),Je(ee.__webglDepthRenderbuffer,O,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ye){t.bindTexture(n.TEXTURE_CUBE_MAP,xe.__webglTexture),be(n.TEXTURE_CUBE_MAP,I,Xe);for(let Le=0;Le<6;Le++)if(a&&I.mipmaps&&I.mipmaps.length>0)for(let Ue=0;Ue<I.mipmaps.length;Ue++)Re(ee.__webglFramebuffer[Le][Ue],O,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,Ue);else Re(ee.__webglFramebuffer[Le],O,I,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Le,0);w(I,Xe)&&x(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ge){const Le=O.texture;for(let Ue=0,nt=Le.length;Ue<nt;Ue++){const pt=Le[Ue],_e=i.get(pt);t.bindTexture(n.TEXTURE_2D,_e.__webglTexture),be(n.TEXTURE_2D,pt,Xe),Re(ee.__webglFramebuffer,O,pt,n.COLOR_ATTACHMENT0+Ue,n.TEXTURE_2D,0),w(pt,Xe)&&x(n.TEXTURE_2D)}t.unbindTexture()}else{let Le=n.TEXTURE_2D;if((O.isWebGL3DRenderTarget||O.isWebGLArrayRenderTarget)&&(a?Le=O.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Le,xe.__webglTexture),be(Le,I,Xe),a&&I.mipmaps&&I.mipmaps.length>0)for(let Ue=0;Ue<I.mipmaps.length;Ue++)Re(ee.__webglFramebuffer[Ue],O,I,n.COLOR_ATTACHMENT0,Le,Ue);else Re(ee.__webglFramebuffer,O,I,n.COLOR_ATTACHMENT0,Le,0);w(I,Xe)&&x(Le),t.unbindTexture()}O.depthBuffer&&ct(O)}function Se(O){const I=_(O)||a,ee=O.isWebGLMultipleRenderTargets===!0?O.texture:[O.texture];for(let xe=0,ye=ee.length;xe<ye;xe++){const ge=ee[xe];if(w(ge,I)){const Xe=O.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,Le=i.get(ge).__webglTexture;t.bindTexture(Xe,Le),x(Xe),t.unbindTexture()}}}function fe(O){if(a&&O.samples>0&&me(O)===!1){const I=O.isWebGLMultipleRenderTargets?O.texture:[O.texture],ee=O.width,xe=O.height;let ye=n.COLOR_BUFFER_BIT;const ge=[],Xe=O.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Le=i.get(O),Ue=O.isWebGLMultipleRenderTargets===!0;if(Ue)for(let nt=0;nt<I.length;nt++)t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Le.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Le.__webglFramebuffer);for(let nt=0;nt<I.length;nt++){ge.push(n.COLOR_ATTACHMENT0+nt),O.depthBuffer&&ge.push(Xe);const pt=Le.__ignoreDepthValues!==void 0?Le.__ignoreDepthValues:!1;if(pt===!1&&(O.depthBuffer&&(ye|=n.DEPTH_BUFFER_BIT),O.stencilBuffer&&(ye|=n.STENCIL_BUFFER_BIT)),Ue&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Le.__webglColorRenderbuffer[nt]),pt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Xe]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Xe])),Ue){const _e=i.get(I[nt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,_e,0)}n.blitFramebuffer(0,0,ee,xe,0,0,ee,xe,ye,n.NEAREST),c&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ge)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ue)for(let nt=0;nt<I.length;nt++){t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.RENDERBUFFER,Le.__webglColorRenderbuffer[nt]);const pt=i.get(I[nt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Le.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+nt,n.TEXTURE_2D,pt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Le.__webglMultisampledFramebuffer)}}function Te(O){return Math.min(r.maxSamples,O.samples)}function me(O){const I=i.get(O);return a&&O.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&I.__useRenderToTexture!==!1}function Ke(O){const I=o.render.frame;d.get(O)!==I&&(d.set(O,I),O.update())}function Ie(O,I){const ee=O.colorSpace,xe=O.format,ye=O.type;return O.isCompressedTexture===!0||O.isVideoTexture===!0||O.format===Xg||ee!==Ts&&ee!==rr&&(Bt.getTransfer(ee)===$t?a===!1?e.has("EXT_sRGB")===!0&&xe===Ai?(O.format=Xg,O.minFilter=Jt,O.generateMipmaps=!1):I=J1.sRGBToLinear(I):(xe!==Ai||ye!==Ms)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ee)),I}this.allocateTextureUnit=W,this.resetTextureUnits=re,this.setTexture2D=J,this.setTexture2DArray=ae,this.setTexture3D=N,this.setTextureCube=B,this.rebindTextures=Ge,this.setupRenderTarget=j,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=fe,this.setupDepthRenderbuffer=ct,this.setupFrameBufferTexture=Re,this.useMultisampledRTT=me}function XN(n,e,t){const i=t.isWebGL2;function r(s,o=rr){let a;const l=Bt.getTransfer(o);if(s===Ms)return n.UNSIGNED_BYTE;if(s===H1)return n.UNSIGNED_SHORT_4_4_4_4;if(s===G1)return n.UNSIGNED_SHORT_5_5_5_1;if(s===hN)return n.BYTE;if(s===dN)return n.SHORT;if(s===L0)return n.UNSIGNED_SHORT;if(s===V1)return n.INT;if(s===$s)return n.UNSIGNED_INT;if(s===ir)return n.FLOAT;if(s===wl)return i?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===fN)return n.ALPHA;if(s===Ai)return n.RGBA;if(s===pN)return n.LUMINANCE;if(s===mN)return n.LUMINANCE_ALPHA;if(s===ea)return n.DEPTH_COMPONENT;if(s===Ml)return n.DEPTH_STENCIL;if(s===Xg)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===gN)return n.RED;if(s===j1)return n.RED_INTEGER;if(s===vN)return n.RG;if(s===W1)return n.RG_INTEGER;if(s===X1)return n.RGBA_INTEGER;if(s===eg||s===tg||s===ng||s===ig)if(l===$t)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===eg)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===tg)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===ng)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===ig)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===eg)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===tg)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===ng)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ig)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===SS||s===wS||s===MS||s===ES)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===SS)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===wS)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===MS)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===ES)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===$1)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===TS||s===bS)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===TS)return l===$t?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===bS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===AS||s===CS||s===PS||s===RS||s===LS||s===IS||s===NS||s===DS||s===kS||s===OS||s===US||s===FS||s===zS||s===BS)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===AS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===CS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===PS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===RS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===LS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===IS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===NS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===DS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===kS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===OS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===US)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===FS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===zS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===BS)return l===$t?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===rg||s===VS||s===HS)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===rg)return l===$t?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===VS)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===HS)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===yN||s===GS||s===jS||s===WS)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===rg)return a.COMPRESSED_RED_RGTC1_EXT;if(s===GS)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===jS)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===WS)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Qo?i?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class $N extends Tn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Kc extends zt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const u$={type:"move"};class w_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new F,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new F),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new F,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new F),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const M of e.hand.values()){const _=t.getJointPose(M,i),g=this._getHandJoint(c,M);_!==null&&(g.matrix.fromArray(_.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=_.radius),g.visible=_!==null}const d=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],p=d.position.distanceTo(f.position),m=.02,y=.005;c.inputState.pinching&&p>m+y?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&p<=m-y&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(u$)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Kc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const h$=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,d$=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class f${constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new vn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}render(e,t){if(this.texture!==null){if(this.mesh===null){const i=t.cameras[0].viewport,r=new Qr({extensions:{fragDepth:!0},vertexShader:h$,fragmentShader:d$,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new Rn(new Nu(20,20),r)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class p$ extends co{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,d=null,f=null,p=null,m=null,y=null;const M=new f$,_=t.getContextAttributes();let g=null,w=null;const x=[],T=[],C=new de;let P=null;const R=new Tn;R.layers.enable(1),R.viewport=new Vt;const D=new Tn;D.layers.enable(2),D.viewport=new Vt;const X=[R,D],b=new $N;b.layers.enable(1),b.layers.enable(2);let L=null,Z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(te){let pe=x[te];return pe===void 0&&(pe=new w_,x[te]=pe),pe.getTargetRaySpace()},this.getControllerGrip=function(te){let pe=x[te];return pe===void 0&&(pe=new w_,x[te]=pe),pe.getGripSpace()},this.getHand=function(te){let pe=x[te];return pe===void 0&&(pe=new w_,x[te]=pe),pe.getHandSpace()};function re(te){const pe=T.indexOf(te.inputSource);if(pe===-1)return;const we=x[pe];we!==void 0&&(we.update(te.inputSource,te.frame,c||o),we.dispatchEvent({type:te.type,data:te.inputSource}))}function W(){r.removeEventListener("select",re),r.removeEventListener("selectstart",re),r.removeEventListener("selectend",re),r.removeEventListener("squeeze",re),r.removeEventListener("squeezestart",re),r.removeEventListener("squeezeend",re),r.removeEventListener("end",W),r.removeEventListener("inputsourceschange",ne);for(let te=0;te<x.length;te++){const pe=T[te];pe!==null&&(T[te]=null,x[te].disconnect(pe))}L=null,Z=null,M.reset(),e.setRenderTarget(g),m=null,p=null,f=null,r=null,w=null,be.stop(),i.isPresenting=!1,e.setPixelRatio(P),e.setSize(C.width,C.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(te){s=te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(te){a=te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(te){c=te},this.getBaseLayer=function(){return p!==null?p:m},this.getBinding=function(){return f},this.getFrame=function(){return y},this.getSession=function(){return r},this.setSession=async function(te){if(r=te,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",re),r.addEventListener("selectstart",re),r.addEventListener("selectend",re),r.addEventListener("squeeze",re),r.addEventListener("squeezestart",re),r.addEventListener("squeezeend",re),r.addEventListener("end",W),r.addEventListener("inputsourceschange",ne),_.xrCompatible!==!0&&await t.makeXRCompatible(),P=e.getPixelRatio(),e.getSize(C),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const pe={antialias:r.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,pe),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),w=new kr(m.framebufferWidth,m.framebufferHeight,{format:Ai,type:Ms,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let pe=null,we=null,Re=null;_.depth&&(Re=_.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,pe=_.stencil?Ml:ea,we=_.stencil?Qo:$s);const Je={colorFormat:t.RGBA8,depthFormat:Re,scaleFactor:s};f=new XRWebGLBinding(r,t),p=f.createProjectionLayer(Je),r.updateRenderState({layers:[p]}),e.setPixelRatio(1),e.setSize(p.textureWidth,p.textureHeight,!1),w=new kr(p.textureWidth,p.textureHeight,{format:Ai,type:Ms,depthTexture:new k0(p.textureWidth,p.textureHeight,we,void 0,void 0,void 0,void 0,void 0,void 0,pe),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0});const He=e.properties.get(w);He.__ignoreDepthValues=p.ignoreDepthValues}w.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),be.setContext(r),be.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function ne(te){for(let pe=0;pe<te.removed.length;pe++){const we=te.removed[pe],Re=T.indexOf(we);Re>=0&&(T[Re]=null,x[Re].disconnect(we))}for(let pe=0;pe<te.added.length;pe++){const we=te.added[pe];let Re=T.indexOf(we);if(Re===-1){for(let He=0;He<x.length;He++)if(He>=T.length){T.push(we),Re=He;break}else if(T[He]===null){T[He]=we,Re=He;break}if(Re===-1)break}const Je=x[Re];Je&&Je.connect(we)}}const J=new F,ae=new F;function N(te,pe,we){J.setFromMatrixPosition(pe.matrixWorld),ae.setFromMatrixPosition(we.matrixWorld);const Re=J.distanceTo(ae),Je=pe.projectionMatrix.elements,He=we.projectionMatrix.elements,ct=Je[14]/(Je[10]-1),Ge=Je[14]/(Je[10]+1),j=(Je[9]+1)/Je[5],Se=(Je[9]-1)/Je[5],fe=(Je[8]-1)/Je[0],Te=(He[8]+1)/He[0],me=ct*fe,Ke=ct*Te,Ie=Re/(-fe+Te),O=Ie*-fe;pe.matrixWorld.decompose(te.position,te.quaternion,te.scale),te.translateX(O),te.translateZ(Ie),te.matrixWorld.compose(te.position,te.quaternion,te.scale),te.matrixWorldInverse.copy(te.matrixWorld).invert();const I=ct+Ie,ee=Ge+Ie,xe=me-O,ye=Ke+(Re-O),ge=j*Ge/ee*I,Xe=Se*Ge/ee*I;te.projectionMatrix.makePerspective(xe,ye,ge,Xe,I,ee),te.projectionMatrixInverse.copy(te.projectionMatrix).invert()}function B(te,pe){pe===null?te.matrixWorld.copy(te.matrix):te.matrixWorld.multiplyMatrices(pe.matrixWorld,te.matrix),te.matrixWorldInverse.copy(te.matrixWorld).invert()}this.updateCamera=function(te){if(r===null)return;M.texture!==null&&(te.near=M.depthNear,te.far=M.depthFar),b.near=D.near=R.near=te.near,b.far=D.far=R.far=te.far,(L!==b.near||Z!==b.far)&&(r.updateRenderState({depthNear:b.near,depthFar:b.far}),L=b.near,Z=b.far,R.near=L,R.far=Z,D.near=L,D.far=Z,R.updateProjectionMatrix(),D.updateProjectionMatrix(),te.updateProjectionMatrix());const pe=te.parent,we=b.cameras;B(b,pe);for(let Re=0;Re<we.length;Re++)B(we[Re],pe);we.length===2?N(b,R,D):b.projectionMatrix.copy(R.projectionMatrix),H(te,b,pe)};function H(te,pe,we){we===null?te.matrix.copy(pe.matrixWorld):(te.matrix.copy(we.matrixWorld),te.matrix.invert(),te.matrix.multiply(pe.matrixWorld)),te.matrix.decompose(te.position,te.quaternion,te.scale),te.updateMatrixWorld(!0),te.projectionMatrix.copy(pe.projectionMatrix),te.projectionMatrixInverse.copy(pe.projectionMatrixInverse),te.isPerspectiveCamera&&(te.fov=_u*2*Math.atan(1/te.projectionMatrix.elements[5]),te.zoom=1)}this.getCamera=function(){return b},this.getFoveation=function(){if(!(p===null&&m===null))return l},this.setFoveation=function(te){l=te,p!==null&&(p.fixedFoveation=te),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=te)},this.hasDepthSensing=function(){return M.texture!==null};let q=null;function le(te,pe){if(d=pe.getViewerPose(c||o),y=pe,d!==null){const we=d.views;m!==null&&(e.setRenderTargetFramebuffer(w,m.framebuffer),e.setRenderTarget(w));let Re=!1;we.length!==b.cameras.length&&(b.cameras.length=0,Re=!0);for(let He=0;He<we.length;He++){const ct=we[He];let Ge=null;if(m!==null)Ge=m.getViewport(ct);else{const Se=f.getViewSubImage(p,ct);Ge=Se.viewport,He===0&&(e.setRenderTargetTextures(w,Se.colorTexture,p.ignoreDepthValues?void 0:Se.depthStencilTexture),e.setRenderTarget(w))}let j=X[He];j===void 0&&(j=new Tn,j.layers.enable(He),j.viewport=new Vt,X[He]=j),j.matrix.fromArray(ct.transform.matrix),j.matrix.decompose(j.position,j.quaternion,j.scale),j.projectionMatrix.fromArray(ct.projectionMatrix),j.projectionMatrixInverse.copy(j.projectionMatrix).invert(),j.viewport.set(Ge.x,Ge.y,Ge.width,Ge.height),He===0&&(b.matrix.copy(j.matrix),b.matrix.decompose(b.position,b.quaternion,b.scale)),Re===!0&&b.cameras.push(j)}const Je=r.enabledFeatures;if(Je&&Je.includes("depth-sensing")){const He=f.getDepthInformation(we[0]);He&&He.isValid&&He.texture&&M.init(e,He,r.renderState)}}for(let we=0;we<x.length;we++){const Re=T[we],Je=x[we];Re!==null&&Je!==void 0&&Je.update(Re,pe,c||o)}M.render(e,b),q&&q(te,pe),pe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:pe}),y=null}const be=new BN;be.setAnimationLoop(le),this.setAnimationLoop=function(te){q=te},this.dispose=function(){}}}function m$(n,e){function t(_,g){_.matrixAutoUpdate===!0&&_.updateMatrix(),g.value.copy(_.matrix)}function i(_,g){g.color.getRGB(_.fogColor.value,ON(n)),g.isFog?(_.fogNear.value=g.near,_.fogFar.value=g.far):g.isFogExp2&&(_.fogDensity.value=g.density)}function r(_,g,w,x,T){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(_,g):g.isMeshToonMaterial?(s(_,g),f(_,g)):g.isMeshPhongMaterial?(s(_,g),d(_,g)):g.isMeshStandardMaterial?(s(_,g),p(_,g),g.isMeshPhysicalMaterial&&m(_,g,T)):g.isMeshMatcapMaterial?(s(_,g),y(_,g)):g.isMeshDepthMaterial?s(_,g):g.isMeshDistanceMaterial?(s(_,g),M(_,g)):g.isMeshNormalMaterial?s(_,g):g.isLineBasicMaterial?(o(_,g),g.isLineDashedMaterial&&a(_,g)):g.isPointsMaterial?l(_,g,w,x):g.isSpriteMaterial?c(_,g):g.isShadowMaterial?(_.color.value.copy(g.color),_.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(_,g){_.opacity.value=g.opacity,g.color&&_.diffuse.value.copy(g.color),g.emissive&&_.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.bumpMap&&(_.bumpMap.value=g.bumpMap,t(g.bumpMap,_.bumpMapTransform),_.bumpScale.value=g.bumpScale,g.side===Ri&&(_.bumpScale.value*=-1)),g.normalMap&&(_.normalMap.value=g.normalMap,t(g.normalMap,_.normalMapTransform),_.normalScale.value.copy(g.normalScale),g.side===Ri&&_.normalScale.value.negate()),g.displacementMap&&(_.displacementMap.value=g.displacementMap,t(g.displacementMap,_.displacementMapTransform),_.displacementScale.value=g.displacementScale,_.displacementBias.value=g.displacementBias),g.emissiveMap&&(_.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,_.emissiveMapTransform)),g.specularMap&&(_.specularMap.value=g.specularMap,t(g.specularMap,_.specularMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest);const w=e.get(g).envMap;if(w&&(_.envMap.value=w,_.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,_.reflectivity.value=g.reflectivity,_.ior.value=g.ior,_.refractionRatio.value=g.refractionRatio),g.lightMap){_.lightMap.value=g.lightMap;const x=n._useLegacyLights===!0?Math.PI:1;_.lightMapIntensity.value=g.lightMapIntensity*x,t(g.lightMap,_.lightMapTransform)}g.aoMap&&(_.aoMap.value=g.aoMap,_.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,_.aoMapTransform))}function o(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform))}function a(_,g){_.dashSize.value=g.dashSize,_.totalSize.value=g.dashSize+g.gapSize,_.scale.value=g.scale}function l(_,g,w,x){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.size.value=g.size*w,_.scale.value=x*.5,g.map&&(_.map.value=g.map,t(g.map,_.uvTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function c(_,g){_.diffuse.value.copy(g.color),_.opacity.value=g.opacity,_.rotation.value=g.rotation,g.map&&(_.map.value=g.map,t(g.map,_.mapTransform)),g.alphaMap&&(_.alphaMap.value=g.alphaMap,t(g.alphaMap,_.alphaMapTransform)),g.alphaTest>0&&(_.alphaTest.value=g.alphaTest)}function d(_,g){_.specular.value.copy(g.specular),_.shininess.value=Math.max(g.shininess,1e-4)}function f(_,g){g.gradientMap&&(_.gradientMap.value=g.gradientMap)}function p(_,g){_.metalness.value=g.metalness,g.metalnessMap&&(_.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,_.metalnessMapTransform)),_.roughness.value=g.roughness,g.roughnessMap&&(_.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,_.roughnessMapTransform)),e.get(g).envMap&&(_.envMapIntensity.value=g.envMapIntensity)}function m(_,g,w){_.ior.value=g.ior,g.sheen>0&&(_.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),_.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(_.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,_.sheenColorMapTransform)),g.sheenRoughnessMap&&(_.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,_.sheenRoughnessMapTransform))),g.clearcoat>0&&(_.clearcoat.value=g.clearcoat,_.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(_.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,_.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(_.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,_.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(_.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,_.clearcoatNormalMapTransform),_.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ri&&_.clearcoatNormalScale.value.negate())),g.iridescence>0&&(_.iridescence.value=g.iridescence,_.iridescenceIOR.value=g.iridescenceIOR,_.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],_.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(_.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,_.iridescenceMapTransform)),g.iridescenceThicknessMap&&(_.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,_.iridescenceThicknessMapTransform))),g.transmission>0&&(_.transmission.value=g.transmission,_.transmissionSamplerMap.value=w.texture,_.transmissionSamplerSize.value.set(w.width,w.height),g.transmissionMap&&(_.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,_.transmissionMapTransform)),_.thickness.value=g.thickness,g.thicknessMap&&(_.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,_.thicknessMapTransform)),_.attenuationDistance.value=g.attenuationDistance,_.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(_.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(_.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,_.anisotropyMapTransform))),_.specularIntensity.value=g.specularIntensity,_.specularColor.value.copy(g.specularColor),g.specularColorMap&&(_.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,_.specularColorMapTransform)),g.specularIntensityMap&&(_.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,_.specularIntensityMapTransform))}function y(_,g){g.matcap&&(_.matcap.value=g.matcap)}function M(_,g){const w=e.get(g).light;_.referencePosition.value.setFromMatrixPosition(w.matrixWorld),_.nearDistance.value=w.shadow.camera.near,_.farDistance.value=w.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function g$(n,e,t,i){let r={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(w,x){const T=x.program;i.uniformBlockBinding(w,T)}function c(w,x){let T=r[w.id];T===void 0&&(y(w),T=d(w),r[w.id]=T,w.addEventListener("dispose",_));const C=x.program;i.updateUBOMapping(w,C);const P=e.render.frame;s[w.id]!==P&&(p(w),s[w.id]=P)}function d(w){const x=f();w.__bindingPointIndex=x;const T=n.createBuffer(),C=w.__size,P=w.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,C,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,x,T),T}function f(){for(let w=0;w<a;w++)if(o.indexOf(w)===-1)return o.push(w),w;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(w){const x=r[w.id],T=w.uniforms,C=w.__cache;n.bindBuffer(n.UNIFORM_BUFFER,x);for(let P=0,R=T.length;P<R;P++){const D=Array.isArray(T[P])?T[P]:[T[P]];for(let X=0,b=D.length;X<b;X++){const L=D[X];if(m(L,P,X,C)===!0){const Z=L.__offset,re=Array.isArray(L.value)?L.value:[L.value];let W=0;for(let ne=0;ne<re.length;ne++){const J=re[ne],ae=M(J);typeof J=="number"||typeof J=="boolean"?(L.__data[0]=J,n.bufferSubData(n.UNIFORM_BUFFER,Z+W,L.__data)):J.isMatrix3?(L.__data[0]=J.elements[0],L.__data[1]=J.elements[1],L.__data[2]=J.elements[2],L.__data[3]=0,L.__data[4]=J.elements[3],L.__data[5]=J.elements[4],L.__data[6]=J.elements[5],L.__data[7]=0,L.__data[8]=J.elements[6],L.__data[9]=J.elements[7],L.__data[10]=J.elements[8],L.__data[11]=0):(J.toArray(L.__data,W),W+=ae.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,Z,L.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(w,x,T,C){const P=w.value,R=x+"_"+T;if(C[R]===void 0)return typeof P=="number"||typeof P=="boolean"?C[R]=P:C[R]=P.clone(),!0;{const D=C[R];if(typeof P=="number"||typeof P=="boolean"){if(D!==P)return C[R]=P,!0}else if(D.equals(P)===!1)return D.copy(P),!0}return!1}function y(w){const x=w.uniforms;let T=0;const C=16;for(let R=0,D=x.length;R<D;R++){const X=Array.isArray(x[R])?x[R]:[x[R]];for(let b=0,L=X.length;b<L;b++){const Z=X[b],re=Array.isArray(Z.value)?Z.value:[Z.value];for(let W=0,ne=re.length;W<ne;W++){const J=re[W],ae=M(J),N=T%C;N!==0&&C-N<ae.boundary&&(T+=C-N),Z.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),Z.__offset=T,T+=ae.storage}}}const P=T%C;return P>0&&(T+=C-P),w.__size=T,w.__cache={},this}function M(w){const x={boundary:0,storage:0};return typeof w=="number"||typeof w=="boolean"?(x.boundary=4,x.storage=4):w.isVector2?(x.boundary=8,x.storage=8):w.isVector3||w.isColor?(x.boundary=16,x.storage=12):w.isVector4?(x.boundary=16,x.storage=16):w.isMatrix3?(x.boundary=48,x.storage=48):w.isMatrix4?(x.boundary=64,x.storage=64):w.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",w),x}function _(w){const x=w.target;x.removeEventListener("dispose",_);const T=o.indexOf(x.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(r[x.id]),delete r[x.id],delete s[x.id]}function g(){for(const w in r)n.deleteBuffer(r[w]);o=[],r={},s={}}return{bind:l,update:c,dispose:g}}class sM{constructor(e={}){const{canvas:t=NN(),context:i=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let p;i!==null?p=i.getContextAttributes().alpha:p=o;const m=new Uint32Array(4),y=new Int32Array(4);let M=null,_=null;const g=[],w=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=kn,this._useLegacyLights=!1,this.toneMapping=ws,this.toneMappingExposure=1;const x=this;let T=!1,C=0,P=0,R=null,D=-1,X=null;const b=new Vt,L=new Vt;let Z=null;const re=new ze(0);let W=0,ne=t.width,J=t.height,ae=1,N=null,B=null;const H=new Vt(0,0,ne,J),q=new Vt(0,0,ne,J);let le=!1;const be=new yf;let te=!1,pe=!1,we=null;const Re=new dt,Je=new de,He=new F,ct={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ge(){return R===null?ae:1}let j=i;function Se(U,Q){for(let oe=0;oe<U.length;oe++){const ce=U[oe],se=t.getContext(ce,Q);if(se!==null)return se}return null}try{const U={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:d,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${C0}`),t.addEventListener("webglcontextlost",ut,!1),t.addEventListener("webglcontextrestored",V,!1),t.addEventListener("webglcontextcreationerror",Me,!1),j===null){const Q=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&Q.shift(),j=Se(Q,U),j===null)throw Se(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&j instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),j.getShaderPrecisionFormat===void 0&&(j.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let fe,Te,me,Ke,Ie,O,I,ee,xe,ye,ge,Xe,Le,Ue,nt,pt,_e,Rt,xt,ht,tt,Be,$,ve;function Ne(){fe=new A7(j),Te=new S7(j,fe,e),fe.init(Te),Be=new XN(j,fe,Te),me=new l$(j,fe,Te),Ke=new R7(j),Ie=new KX,O=new c$(j,fe,me,Ie,Te,Be,Ke),I=new M7(x),ee=new b7(x),xe=new F6(j,Te),$=new _7(j,fe,xe,Te),ye=new C7(j,xe,Ke,$),ge=new D7(j,ye,xe,Ke),xt=new N7(j,Te,O),pt=new w7(Ie),Xe=new YX(x,I,ee,fe,Te,$,pt),Le=new m$(x,Ie),Ue=new JX,nt=new r$(fe,Te),Rt=new y7(x,I,ee,me,ge,p,l),_e=new a$(x,ge,Te),ve=new g$(j,Ke,Te,me),ht=new x7(j,fe,Ke,Te),tt=new P7(j,fe,Ke,Te),Ke.programs=Xe.programs,x.capabilities=Te,x.extensions=fe,x.properties=Ie,x.renderLists=Ue,x.shadowMap=_e,x.state=me,x.info=Ke}Ne();const Oe=new p$(x,j);this.xr=Oe,this.getContext=function(){return j},this.getContextAttributes=function(){return j.getContextAttributes()},this.forceContextLoss=function(){const U=fe.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=fe.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return ae},this.setPixelRatio=function(U){U!==void 0&&(ae=U,this.setSize(ne,J,!1))},this.getSize=function(U){return U.set(ne,J)},this.setSize=function(U,Q,oe=!0){if(Oe.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ne=U,J=Q,t.width=Math.floor(U*ae),t.height=Math.floor(Q*ae),oe===!0&&(t.style.width=U+"px",t.style.height=Q+"px"),this.setViewport(0,0,U,Q)},this.getDrawingBufferSize=function(U){return U.set(ne*ae,J*ae).floor()},this.setDrawingBufferSize=function(U,Q,oe){ne=U,J=Q,ae=oe,t.width=Math.floor(U*oe),t.height=Math.floor(Q*oe),this.setViewport(0,0,U,Q)},this.getCurrentViewport=function(U){return U.copy(b)},this.getViewport=function(U){return U.copy(H)},this.setViewport=function(U,Q,oe,ce){U.isVector4?H.set(U.x,U.y,U.z,U.w):H.set(U,Q,oe,ce),me.viewport(b.copy(H).multiplyScalar(ae).floor())},this.getScissor=function(U){return U.copy(q)},this.setScissor=function(U,Q,oe,ce){U.isVector4?q.set(U.x,U.y,U.z,U.w):q.set(U,Q,oe,ce),me.scissor(L.copy(q).multiplyScalar(ae).floor())},this.getScissorTest=function(){return le},this.setScissorTest=function(U){me.setScissorTest(le=U)},this.setOpaqueSort=function(U){N=U},this.setTransparentSort=function(U){B=U},this.getClearColor=function(U){return U.copy(Rt.getClearColor())},this.setClearColor=function(){Rt.setClearColor.apply(Rt,arguments)},this.getClearAlpha=function(){return Rt.getClearAlpha()},this.setClearAlpha=function(){Rt.setClearAlpha.apply(Rt,arguments)},this.clear=function(U=!0,Q=!0,oe=!0){let ce=0;if(U){let se=!1;if(R!==null){const Fe=R.texture.format;se=Fe===X1||Fe===W1||Fe===j1}if(se){const Fe=R.texture.type,Qe=Fe===Ms||Fe===$s||Fe===L0||Fe===Qo||Fe===H1||Fe===G1,st=Rt.getClearColor(),at=Rt.getClearAlpha(),mt=st.r,ft=st.g,gt=st.b;Qe?(m[0]=mt,m[1]=ft,m[2]=gt,m[3]=at,j.clearBufferuiv(j.COLOR,0,m)):(y[0]=mt,y[1]=ft,y[2]=gt,y[3]=at,j.clearBufferiv(j.COLOR,0,y))}else ce|=j.COLOR_BUFFER_BIT}Q&&(ce|=j.DEPTH_BUFFER_BIT),oe&&(ce|=j.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),j.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",ut,!1),t.removeEventListener("webglcontextrestored",V,!1),t.removeEventListener("webglcontextcreationerror",Me,!1),Ue.dispose(),nt.dispose(),Ie.dispose(),I.dispose(),ee.dispose(),ge.dispose(),$.dispose(),ve.dispose(),Xe.dispose(),Oe.dispose(),Oe.removeEventListener("sessionstart",yn),Oe.removeEventListener("sessionend",Nt),we&&(we.dispose(),we=null),Yn.stop()};function ut(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function V(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const U=Ke.autoReset,Q=_e.enabled,oe=_e.autoUpdate,ce=_e.needsUpdate,se=_e.type;Ne(),Ke.autoReset=U,_e.enabled=Q,_e.autoUpdate=oe,_e.needsUpdate=ce,_e.type=se}function Me(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Ce(U){const Q=U.target;Q.removeEventListener("dispose",Ce),$e(Q)}function $e(U){qe(U),Ie.remove(U)}function qe(U){const Q=Ie.get(U).programs;Q!==void 0&&(Q.forEach(function(oe){Xe.releaseProgram(oe)}),U.isShaderMaterial&&Xe.releaseShaderCache(U))}this.renderBufferDirect=function(U,Q,oe,ce,se,Fe){Q===null&&(Q=ct);const Qe=se.isMesh&&se.matrixWorld.determinant()<0,st=iv(U,Q,oe,ce,se);me.setMaterial(ce,Qe);let at=oe.index,mt=1;if(ce.wireframe===!0){if(at=ye.getWireframeAttribute(oe),at===void 0)return;mt=2}const ft=oe.drawRange,gt=oe.attributes.position;let rn=ft.start*mt,Kn=(ft.start+ft.count)*mt;Fe!==null&&(rn=Math.max(rn,Fe.start*mt),Kn=Math.min(Kn,(Fe.start+Fe.count)*mt)),at!==null?(rn=Math.max(rn,0),Kn=Math.min(Kn,at.count)):gt!=null&&(rn=Math.max(rn,0),Kn=Math.min(Kn,gt.count));const Yt=Kn-rn;if(Yt<0||Yt===1/0)return;$.setup(se,ce,st,oe,at);let Bn,lt=ht;if(at!==null&&(Bn=xe.get(at),lt=tt,lt.setIndex(Bn)),se.isMesh)ce.wireframe===!0?(me.setLineWidth(ce.wireframeLinewidth*Ge()),lt.setMode(j.LINES)):lt.setMode(j.TRIANGLES);else if(se.isLine){let je=ce.linewidth;je===void 0&&(je=1),me.setLineWidth(je*Ge()),se.isLineSegments?lt.setMode(j.LINES):se.isLineLoop?lt.setMode(j.LINE_LOOP):lt.setMode(j.LINE_STRIP)}else se.isPoints?lt.setMode(j.POINTS):se.isSprite&&lt.setMode(j.TRIANGLES);if(se.isBatchedMesh)lt.renderMultiDraw(se._multiDrawStarts,se._multiDrawCounts,se._multiDrawCount);else if(se.isInstancedMesh)lt.renderInstances(rn,Yt,se.count);else if(oe.isInstancedBufferGeometry){const je=oe._maxInstanceCount!==void 0?oe._maxInstanceCount:1/0,mr=Math.min(oe.instanceCount,je);lt.renderInstances(rn,Yt,mr)}else lt.render(rn,Yt)};function St(U,Q,oe){U.transparent===!0&&U.side===ms&&U.forceSinglePass===!1?(U.side=Ri,U.needsUpdate=!0,Bl(U,Q,oe),U.side=so,U.needsUpdate=!0,Bl(U,Q,oe),U.side=ms):Bl(U,Q,oe)}this.compile=function(U,Q,oe=null){oe===null&&(oe=U),_=nt.get(oe),_.init(),w.push(_),oe.traverseVisible(function(se){se.isLight&&se.layers.test(Q.layers)&&(_.pushLight(se),se.castShadow&&_.pushShadow(se))}),U!==oe&&U.traverseVisible(function(se){se.isLight&&se.layers.test(Q.layers)&&(_.pushLight(se),se.castShadow&&_.pushShadow(se))}),_.setupLights(x._useLegacyLights);const ce=new Set;return U.traverse(function(se){const Fe=se.material;if(Fe)if(Array.isArray(Fe))for(let Qe=0;Qe<Fe.length;Qe++){const st=Fe[Qe];St(st,oe,se),ce.add(st)}else St(Fe,oe,se),ce.add(Fe)}),w.pop(),_=null,ce},this.compileAsync=function(U,Q,oe=null){const ce=this.compile(U,Q,oe);return new Promise(se=>{function Fe(){if(ce.forEach(function(Qe){Ie.get(Qe).currentProgram.isReady()&&ce.delete(Qe)}),ce.size===0){se(U);return}setTimeout(Fe,10)}fe.get("KHR_parallel_shader_compile")!==null?Fe():setTimeout(Fe,10)})};let Lt=null;function Wt(U){Lt&&Lt(U)}function yn(){Yn.stop()}function Nt(){Yn.start()}const Yn=new BN;Yn.setAnimationLoop(Wt),typeof self<"u"&&Yn.setContext(self),this.setAnimationLoop=function(U){Lt=U,Oe.setAnimationLoop(U),U===null?Yn.stop():Yn.start()},Oe.addEventListener("sessionstart",yn),Oe.addEventListener("sessionend",Nt),this.render=function(U,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),Q.parent===null&&Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),Oe.enabled===!0&&Oe.isPresenting===!0&&(Oe.cameraAutoUpdate===!0&&Oe.updateCamera(Q),Q=Oe.getCamera()),U.isScene===!0&&U.onBeforeRender(x,U,Q,R),_=nt.get(U,w.length),_.init(),w.push(_),Re.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),be.setFromProjectionMatrix(Re),pe=this.localClippingEnabled,te=pt.init(this.clippingPlanes,pe),M=Ue.get(U,g.length),M.init(),g.push(M),pr(U,Q,0,x.sortObjects),M.finish(),x.sortObjects===!0&&M.sort(N,B),this.info.render.frame++,te===!0&&pt.beginShadows();const oe=_.state.shadowsArray;if(_e.render(oe,U,Q),te===!0&&pt.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Oe.enabled===!1||Oe.isPresenting===!1||Oe.hasDepthSensing()===!1)&&Rt.render(M,U),_.setupLights(x._useLegacyLights),Q.isArrayCamera){const ce=Q.cameras;for(let se=0,Fe=ce.length;se<Fe;se++){const Qe=ce[se];Uu(M,U,Qe,Qe.viewport)}}else Uu(M,U,Q);R!==null&&(O.updateMultisampleRenderTarget(R),O.updateRenderTargetMipmap(R)),U.isScene===!0&&U.onAfterRender(x,U,Q),$.resetDefaultState(),D=-1,X=null,w.pop(),w.length>0?_=w[w.length-1]:_=null,g.pop(),g.length>0?M=g[g.length-1]:M=null};function pr(U,Q,oe,ce){if(U.visible===!1)return;if(U.layers.test(Q.layers)){if(U.isGroup)oe=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(Q);else if(U.isLight)_.pushLight(U),U.castShadow&&_.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||be.intersectsSprite(U)){ce&&He.setFromMatrixPosition(U.matrixWorld).applyMatrix4(Re);const Qe=ge.update(U),st=U.material;st.visible&&M.push(U,Qe,st,oe,He.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||be.intersectsObject(U))){const Qe=ge.update(U),st=U.material;if(ce&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),He.copy(U.boundingSphere.center)):(Qe.boundingSphere===null&&Qe.computeBoundingSphere(),He.copy(Qe.boundingSphere.center)),He.applyMatrix4(U.matrixWorld).applyMatrix4(Re)),Array.isArray(st)){const at=Qe.groups;for(let mt=0,ft=at.length;mt<ft;mt++){const gt=at[mt],rn=st[gt.materialIndex];rn&&rn.visible&&M.push(U,Qe,rn,oe,He.z,gt)}}else st.visible&&M.push(U,Qe,st,oe,He.z,null)}}const Fe=U.children;for(let Qe=0,st=Fe.length;Qe<st;Qe++)pr(Fe[Qe],Q,oe,ce)}function Uu(U,Q,oe,ce){const se=U.opaque,Fe=U.transmissive,Qe=U.transparent;_.setupLightsView(oe),te===!0&&pt.setGlobalState(x.clippingPlanes,oe),Fe.length>0&&Fu(se,Fe,Q,oe),ce&&me.viewport(b.copy(ce)),se.length>0&&zl(se,Q,oe),Fe.length>0&&zl(Fe,Q,oe),Qe.length>0&&zl(Qe,Q,oe),me.buffers.depth.setTest(!0),me.buffers.depth.setMask(!0),me.buffers.color.setMask(!0),me.setPolygonOffset(!1)}function Fu(U,Q,oe,ce){if((oe.isScene===!0?oe.overrideMaterial:null)!==null)return;const Fe=Te.isWebGL2;we===null&&(we=new kr(1,1,{generateMipmaps:!0,type:fe.has("EXT_color_buffer_half_float")?wl:Ms,minFilter:gs,samples:Fe?4:0})),x.getDrawingBufferSize(Je),Fe?we.setSize(Je.x,Je.y):we.setSize($g(Je.x),$g(Je.y));const Qe=x.getRenderTarget();x.setRenderTarget(we),x.getClearColor(re),W=x.getClearAlpha(),W<1&&x.setClearColor(16777215,.5),x.clear();const st=x.toneMapping;x.toneMapping=ws,zl(U,oe,ce),O.updateMultisampleRenderTarget(we),O.updateRenderTargetMipmap(we);let at=!1;for(let mt=0,ft=Q.length;mt<ft;mt++){const gt=Q[mt],rn=gt.object,Kn=gt.geometry,Yt=gt.material,Bn=gt.group;if(Yt.side===ms&&rn.layers.test(ce.layers)){const lt=Yt.side;Yt.side=Ri,Yt.needsUpdate=!0,uo(rn,oe,ce,Kn,Yt,Bn),Yt.side=lt,Yt.needsUpdate=!0,at=!0}}at===!0&&(O.updateMultisampleRenderTarget(we),O.updateRenderTargetMipmap(we)),x.setRenderTarget(Qe),x.setClearColor(re,W),x.toneMapping=st}function zl(U,Q,oe){const ce=Q.isScene===!0?Q.overrideMaterial:null;for(let se=0,Fe=U.length;se<Fe;se++){const Qe=U[se],st=Qe.object,at=Qe.geometry,mt=ce===null?Qe.material:ce,ft=Qe.group;st.layers.test(oe.layers)&&uo(st,Q,oe,at,mt,ft)}}function uo(U,Q,oe,ce,se,Fe){U.onBeforeRender(x,Q,oe,ce,se,Fe),U.modelViewMatrix.multiplyMatrices(oe.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),se.onBeforeRender(x,Q,oe,ce,U,Fe),se.transparent===!0&&se.side===ms&&se.forceSinglePass===!1?(se.side=Ri,se.needsUpdate=!0,x.renderBufferDirect(oe,Q,ce,se,U,Fe),se.side=so,se.needsUpdate=!0,x.renderBufferDirect(oe,Q,ce,se,U,Fe),se.side=ms):x.renderBufferDirect(oe,Q,ce,se,U,Fe),U.onAfterRender(x,Q,oe,ce,se,Fe)}function Bl(U,Q,oe){Q.isScene!==!0&&(Q=ct);const ce=Ie.get(U),se=_.state.lights,Fe=_.state.shadowsArray,Qe=se.state.version,st=Xe.getParameters(U,se.state,Fe,Q,oe),at=Xe.getProgramCacheKey(st);let mt=ce.programs;ce.environment=U.isMeshStandardMaterial?Q.environment:null,ce.fog=Q.fog,ce.envMap=(U.isMeshStandardMaterial?ee:I).get(U.envMap||ce.environment),mt===void 0&&(U.addEventListener("dispose",Ce),mt=new Map,ce.programs=mt);let ft=mt.get(at);if(ft!==void 0){if(ce.currentProgram===ft&&ce.lightsStateVersion===Qe)return Tf(U,st),ft}else st.uniforms=Xe.getUniforms(U),U.onBuild(oe,st,x),U.onBeforeCompile(st,x),ft=Xe.acquireProgram(st,at),mt.set(at,ft),ce.uniforms=st.uniforms;const gt=ce.uniforms;return(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(gt.clippingPlanes=pt.uniform),Tf(U,st),ce.needsLights=sv(U),ce.lightsStateVersion=Qe,ce.needsLights&&(gt.ambientLightColor.value=se.state.ambient,gt.lightProbe.value=se.state.probe,gt.directionalLights.value=se.state.directional,gt.directionalLightShadows.value=se.state.directionalShadow,gt.spotLights.value=se.state.spot,gt.spotLightShadows.value=se.state.spotShadow,gt.rectAreaLights.value=se.state.rectArea,gt.ltc_1.value=se.state.rectAreaLTC1,gt.ltc_2.value=se.state.rectAreaLTC2,gt.pointLights.value=se.state.point,gt.pointLightShadows.value=se.state.pointShadow,gt.hemisphereLights.value=se.state.hemi,gt.directionalShadowMap.value=se.state.directionalShadowMap,gt.directionalShadowMatrix.value=se.state.directionalShadowMatrix,gt.spotShadowMap.value=se.state.spotShadowMap,gt.spotLightMatrix.value=se.state.spotLightMatrix,gt.spotLightMap.value=se.state.spotLightMap,gt.pointShadowMap.value=se.state.pointShadowMap,gt.pointShadowMatrix.value=se.state.pointShadowMatrix),ce.currentProgram=ft,ce.uniformsList=null,ft}function Ef(U){if(U.uniformsList===null){const Q=U.currentProgram.getUniforms();U.uniformsList=og.seqWithValue(Q.seq,U.uniforms)}return U.uniformsList}function Tf(U,Q){const oe=Ie.get(U);oe.outputColorSpace=Q.outputColorSpace,oe.batching=Q.batching,oe.instancing=Q.instancing,oe.instancingColor=Q.instancingColor,oe.skinning=Q.skinning,oe.morphTargets=Q.morphTargets,oe.morphNormals=Q.morphNormals,oe.morphColors=Q.morphColors,oe.morphTargetsCount=Q.morphTargetsCount,oe.numClippingPlanes=Q.numClippingPlanes,oe.numIntersection=Q.numClipIntersection,oe.vertexAlphas=Q.vertexAlphas,oe.vertexTangents=Q.vertexTangents,oe.toneMapping=Q.toneMapping}function iv(U,Q,oe,ce,se){Q.isScene!==!0&&(Q=ct),O.resetTextureUnits();const Fe=Q.fog,Qe=ce.isMeshStandardMaterial?Q.environment:null,st=R===null?x.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:Ts,at=(ce.isMeshStandardMaterial?ee:I).get(ce.envMap||Qe),mt=ce.vertexColors===!0&&!!oe.attributes.color&&oe.attributes.color.itemSize===4,ft=!!oe.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),gt=!!oe.morphAttributes.position,rn=!!oe.morphAttributes.normal,Kn=!!oe.morphAttributes.color;let Yt=ws;ce.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(Yt=x.toneMapping);const Bn=oe.morphAttributes.position||oe.morphAttributes.normal||oe.morphAttributes.color,lt=Bn!==void 0?Bn.length:0,je=Ie.get(ce),mr=_.state.lights;if(te===!0&&(pe===!0||U!==X)){const Zn=U===X&&ce.id===D;pt.setState(ce,U,Zn)}let At=!1;ce.version===je.__version?(je.needsLights&&je.lightsStateVersion!==mr.state.version||je.outputColorSpace!==st||se.isBatchedMesh&&je.batching===!1||!se.isBatchedMesh&&je.batching===!0||se.isInstancedMesh&&je.instancing===!1||!se.isInstancedMesh&&je.instancing===!0||se.isSkinnedMesh&&je.skinning===!1||!se.isSkinnedMesh&&je.skinning===!0||se.isInstancedMesh&&je.instancingColor===!0&&se.instanceColor===null||se.isInstancedMesh&&je.instancingColor===!1&&se.instanceColor!==null||je.envMap!==at||ce.fog===!0&&je.fog!==Fe||je.numClippingPlanes!==void 0&&(je.numClippingPlanes!==pt.numPlanes||je.numIntersection!==pt.numIntersection)||je.vertexAlphas!==mt||je.vertexTangents!==ft||je.morphTargets!==gt||je.morphNormals!==rn||je.morphColors!==Kn||je.toneMapping!==Yt||Te.isWebGL2===!0&&je.morphTargetsCount!==lt)&&(At=!0):(At=!0,je.__version=ce.version);let hn=je.currentProgram;At===!0&&(hn=Bl(ce,Q,se));let ns=!1,gr=!1,Vn=!1;const _n=hn.getUniforms(),is=je.uniforms;if(me.useProgram(hn.program)&&(ns=!0,gr=!0,Vn=!0),ce.id!==D&&(D=ce.id,gr=!0),ns||X!==U){_n.setValue(j,"projectionMatrix",U.projectionMatrix),_n.setValue(j,"viewMatrix",U.matrixWorldInverse);const Zn=_n.map.cameraPosition;Zn!==void 0&&Zn.setValue(j,He.setFromMatrixPosition(U.matrixWorld)),Te.logarithmicDepthBuffer&&_n.setValue(j,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&_n.setValue(j,"isOrthographic",U.isOrthographicCamera===!0),X!==U&&(X=U,gr=!0,Vn=!0)}if(se.isSkinnedMesh){_n.setOptional(j,se,"bindMatrix"),_n.setOptional(j,se,"bindMatrixInverse");const Zn=se.skeleton;Zn&&(Te.floatVertexTextures?(Zn.boneTexture===null&&Zn.computeBoneTexture(),_n.setValue(j,"boneTexture",Zn.boneTexture,O)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}se.isBatchedMesh&&(_n.setOptional(j,se,"batchingTexture"),_n.setValue(j,"batchingTexture",se._matricesTexture,O));const Vl=oe.morphAttributes;if((Vl.position!==void 0||Vl.normal!==void 0||Vl.color!==void 0&&Te.isWebGL2===!0)&&xt.update(se,oe,hn),(gr||je.receiveShadow!==se.receiveShadow)&&(je.receiveShadow=se.receiveShadow,_n.setValue(j,"receiveShadow",se.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(is.envMap.value=at,is.flipEnvMap.value=at.isCubeTexture&&at.isRenderTargetTexture===!1?-1:1),gr&&(_n.setValue(j,"toneMappingExposure",x.toneMappingExposure),je.needsLights&&rv(is,Vn),Fe&&ce.fog===!0&&Le.refreshFogUniforms(is,Fe),Le.refreshMaterialUniforms(is,ce,ae,J,we),og.upload(j,Ef(je),is,O)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(og.upload(j,Ef(je),is,O),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&_n.setValue(j,"center",se.center),_n.setValue(j,"modelViewMatrix",se.modelViewMatrix),_n.setValue(j,"normalMatrix",se.normalMatrix),_n.setValue(j,"modelMatrix",se.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Zn=ce.uniformsGroups;for(let Hl=0,$i=Zn.length;Hl<$i;Hl++)if(Te.isWebGL2){const bf=Zn[Hl];ve.update(bf,hn),ve.bind(bf,hn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return hn}function rv(U,Q){U.ambientLightColor.needsUpdate=Q,U.lightProbe.needsUpdate=Q,U.directionalLights.needsUpdate=Q,U.directionalLightShadows.needsUpdate=Q,U.pointLights.needsUpdate=Q,U.pointLightShadows.needsUpdate=Q,U.spotLights.needsUpdate=Q,U.spotLightShadows.needsUpdate=Q,U.rectAreaLights.needsUpdate=Q,U.hemisphereLights.needsUpdate=Q}function sv(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(U,Q,oe){Ie.get(U.texture).__webglTexture=Q,Ie.get(U.depthTexture).__webglTexture=oe;const ce=Ie.get(U);ce.__hasExternalTextures=!0,ce.__hasExternalTextures&&(ce.__autoAllocateDepthBuffer=oe===void 0,ce.__autoAllocateDepthBuffer||fe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,Q){const oe=Ie.get(U);oe.__webglFramebuffer=Q,oe.__useDefaultFramebuffer=Q===void 0},this.setRenderTarget=function(U,Q=0,oe=0){R=U,C=Q,P=oe;let ce=!0,se=null,Fe=!1,Qe=!1;if(U){const at=Ie.get(U);at.__useDefaultFramebuffer!==void 0?(me.bindFramebuffer(j.FRAMEBUFFER,null),ce=!1):at.__webglFramebuffer===void 0?O.setupRenderTarget(U):at.__hasExternalTextures&&O.rebindTextures(U,Ie.get(U.texture).__webglTexture,Ie.get(U.depthTexture).__webglTexture);const mt=U.texture;(mt.isData3DTexture||mt.isDataArrayTexture||mt.isCompressedArrayTexture)&&(Qe=!0);const ft=Ie.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(ft[Q])?se=ft[Q][oe]:se=ft[Q],Fe=!0):Te.isWebGL2&&U.samples>0&&O.useMultisampledRTT(U)===!1?se=Ie.get(U).__webglMultisampledFramebuffer:Array.isArray(ft)?se=ft[oe]:se=ft,b.copy(U.viewport),L.copy(U.scissor),Z=U.scissorTest}else b.copy(H).multiplyScalar(ae).floor(),L.copy(q).multiplyScalar(ae).floor(),Z=le;if(me.bindFramebuffer(j.FRAMEBUFFER,se)&&Te.drawBuffers&&ce&&me.drawBuffers(U,se),me.viewport(b),me.scissor(L),me.setScissorTest(Z),Fe){const at=Ie.get(U.texture);j.framebufferTexture2D(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,j.TEXTURE_CUBE_MAP_POSITIVE_X+Q,at.__webglTexture,oe)}else if(Qe){const at=Ie.get(U.texture),mt=Q||0;j.framebufferTextureLayer(j.FRAMEBUFFER,j.COLOR_ATTACHMENT0,at.__webglTexture,oe||0,mt)}D=-1},this.readRenderTargetPixels=function(U,Q,oe,ce,se,Fe,Qe){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let st=Ie.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Qe!==void 0&&(st=st[Qe]),st){me.bindFramebuffer(j.FRAMEBUFFER,st);try{const at=U.texture,mt=at.format,ft=at.type;if(mt!==Ai&&Be.convert(mt)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gt=ft===wl&&(fe.has("EXT_color_buffer_half_float")||Te.isWebGL2&&fe.has("EXT_color_buffer_float"));if(ft!==Ms&&Be.convert(ft)!==j.getParameter(j.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ft===ir&&(Te.isWebGL2||fe.has("OES_texture_float")||fe.has("WEBGL_color_buffer_float")))&&!gt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Q>=0&&Q<=U.width-ce&&oe>=0&&oe<=U.height-se&&j.readPixels(Q,oe,ce,se,Be.convert(mt),Be.convert(ft),Fe)}finally{const at=R!==null?Ie.get(R).__webglFramebuffer:null;me.bindFramebuffer(j.FRAMEBUFFER,at)}}},this.copyFramebufferToTexture=function(U,Q,oe=0){const ce=Math.pow(2,-oe),se=Math.floor(Q.image.width*ce),Fe=Math.floor(Q.image.height*ce);O.setTexture2D(Q,0),j.copyTexSubImage2D(j.TEXTURE_2D,oe,0,0,U.x,U.y,se,Fe),me.unbindTexture()},this.copyTextureToTexture=function(U,Q,oe,ce=0){const se=Q.image.width,Fe=Q.image.height,Qe=Be.convert(oe.format),st=Be.convert(oe.type);O.setTexture2D(oe,0),j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,oe.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,oe.unpackAlignment),Q.isDataTexture?j.texSubImage2D(j.TEXTURE_2D,ce,U.x,U.y,se,Fe,Qe,st,Q.image.data):Q.isCompressedTexture?j.compressedTexSubImage2D(j.TEXTURE_2D,ce,U.x,U.y,Q.mipmaps[0].width,Q.mipmaps[0].height,Qe,Q.mipmaps[0].data):j.texSubImage2D(j.TEXTURE_2D,ce,U.x,U.y,Qe,st,Q.image),ce===0&&oe.generateMipmaps&&j.generateMipmap(j.TEXTURE_2D),me.unbindTexture()},this.copyTextureToTexture3D=function(U,Q,oe,ce,se=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Fe=U.max.x-U.min.x+1,Qe=U.max.y-U.min.y+1,st=U.max.z-U.min.z+1,at=Be.convert(ce.format),mt=Be.convert(ce.type);let ft;if(ce.isData3DTexture)O.setTexture3D(ce,0),ft=j.TEXTURE_3D;else if(ce.isDataArrayTexture||ce.isCompressedArrayTexture)O.setTexture2DArray(ce,0),ft=j.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}j.pixelStorei(j.UNPACK_FLIP_Y_WEBGL,ce.flipY),j.pixelStorei(j.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),j.pixelStorei(j.UNPACK_ALIGNMENT,ce.unpackAlignment);const gt=j.getParameter(j.UNPACK_ROW_LENGTH),rn=j.getParameter(j.UNPACK_IMAGE_HEIGHT),Kn=j.getParameter(j.UNPACK_SKIP_PIXELS),Yt=j.getParameter(j.UNPACK_SKIP_ROWS),Bn=j.getParameter(j.UNPACK_SKIP_IMAGES),lt=oe.isCompressedTexture?oe.mipmaps[se]:oe.image;j.pixelStorei(j.UNPACK_ROW_LENGTH,lt.width),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,lt.height),j.pixelStorei(j.UNPACK_SKIP_PIXELS,U.min.x),j.pixelStorei(j.UNPACK_SKIP_ROWS,U.min.y),j.pixelStorei(j.UNPACK_SKIP_IMAGES,U.min.z),oe.isDataTexture||oe.isData3DTexture?j.texSubImage3D(ft,se,Q.x,Q.y,Q.z,Fe,Qe,st,at,mt,lt.data):oe.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),j.compressedTexSubImage3D(ft,se,Q.x,Q.y,Q.z,Fe,Qe,st,at,lt.data)):j.texSubImage3D(ft,se,Q.x,Q.y,Q.z,Fe,Qe,st,at,mt,lt),j.pixelStorei(j.UNPACK_ROW_LENGTH,gt),j.pixelStorei(j.UNPACK_IMAGE_HEIGHT,rn),j.pixelStorei(j.UNPACK_SKIP_PIXELS,Kn),j.pixelStorei(j.UNPACK_SKIP_ROWS,Yt),j.pixelStorei(j.UNPACK_SKIP_IMAGES,Bn),se===0&&ce.generateMipmaps&&j.generateMipmap(ft),me.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?O.setTextureCube(U,0):U.isData3DTexture?O.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?O.setTexture2DArray(U,0):O.setTexture2D(U,0),me.unbindTexture()},this.resetState=function(){C=0,P=0,R=null,me.reset(),$.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return vs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===N0?"display-p3":"srgb",t.unpackColorSpace=Bt.workingColorSpace===pf?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===kn?ta:Y1}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ta?kn:Ts}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class qN extends sM{}qN.prototype.isWebGL1Renderer=!0;class U0{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ze(e),this.density=t}clone(){return new U0(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class F0{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ze(e),this.near=t,this.far=i}clone(){return new F0(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let oM=class extends zt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class z0{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Vd,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=cr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return fl("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=cr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const wi=new F;class El{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)wi.fromBufferAttribute(this,t),wi.applyMatrix4(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)wi.fromBufferAttribute(this,t),wi.applyNormalMatrix(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)wi.fromBufferAttribute(this,t),wi.transformDirection(e),this.setXYZ(t,wi.x,wi.y,wi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ci(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=_t(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=_t(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=_t(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=_t(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=_t(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ci(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ci(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ci(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ci(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=_t(t,this.array),i=_t(i,this.array),r=_t(r,this.array),s=_t(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Gt(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new El(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class aM extends _i{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let xc;const _h=new F,Sc=new F,wc=new F,Mc=new de,xh=new de,YN=new dt,hm=new F,Sh=new F,dm=new F,VC=new de,M_=new de,HC=new de;class KN extends zt{constructor(e=new aM){if(super(),this.isSprite=!0,this.type="Sprite",xc===void 0){xc=new bt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new z0(t,5);xc.setIndex([0,1,2,0,2,3]),xc.setAttribute("position",new El(i,3,0,!1)),xc.setAttribute("uv",new El(i,2,3,!1))}this.geometry=xc,this.material=e,this.center=new de(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Sc.setFromMatrixScale(this.matrixWorld),YN.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),wc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Sc.multiplyScalar(-wc.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;fm(hm.set(-.5,-.5,0),wc,o,Sc,r,s),fm(Sh.set(.5,-.5,0),wc,o,Sc,r,s),fm(dm.set(.5,.5,0),wc,o,Sc,r,s),VC.set(0,0),M_.set(1,0),HC.set(1,1);let a=e.ray.intersectTriangle(hm,Sh,dm,!1,_h);if(a===null&&(fm(Sh.set(-.5,.5,0),wc,o,Sc,r,s),M_.set(0,1),a=e.ray.intersectTriangle(hm,dm,Sh,!1,_h),a===null))return;const l=e.ray.origin.distanceTo(_h);l<e.near||l>e.far||t.push({distance:l,point:_h.clone(),uv:sr.getInterpolation(_h,hm,Sh,dm,VC,M_,HC,new de),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function fm(n,e,t,i,r,s){Mc.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(xh.x=s*Mc.x-r*Mc.y,xh.y=r*Mc.x+s*Mc.y):xh.copy(Mc),n.copy(e),n.x+=xh.x,n.y+=xh.y,n.applyMatrix4(YN)}const pm=new F,GC=new F;class ZN extends zt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){pm.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(pm);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){pm.setFromMatrixPosition(e.matrixWorld),GC.setFromMatrixPosition(this.matrixWorld);const i=pm.distanceTo(GC)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const jC=new F,WC=new Vt,XC=new Vt,v$=new F,$C=new dt,mm=new F,E_=new vi,qC=new dt,T_=new Dl;class JN extends Rn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=xS,this.bindMatrix=new dt,this.bindMatrixInverse=new dt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Li),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,mm),this.boundingBox.expandByPoint(mm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new vi),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,mm),this.boundingSphere.expandByPoint(mm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),E_.copy(this.boundingSphere),E_.applyMatrix4(r),e.ray.intersectsSphere(E_)!==!1&&(qC.copy(r).invert(),T_.copy(e.ray).applyMatrix4(qC),!(this.boundingBox!==null&&T_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,T_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Vt,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===xS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===uN?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;WC.fromBufferAttribute(r.attributes.skinIndex,e),XC.fromBufferAttribute(r.attributes.skinWeight,e),jC.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=XC.getComponent(s);if(o!==0){const a=WC.getComponent(s);$C.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(v$.copy(jC).applyMatrix4($C),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class lM extends zt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ml extends vn{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Mn,d=Mn,f,p){super(null,o,a,l,c,d,r,s,f,p),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const YC=new dt,y$=new dt;class B0{constructor(e=[],t=[]){this.uuid=cr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new dt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new dt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:y$;YC.multiplyMatrices(a,t[s]),YC.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new B0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ml(t,e,e,Ai,ir);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new lM),this.bones.push(o),this.boneInverses.push(new dt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class Su extends Gt{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Ec=new dt,KC=new dt,gm=[],ZC=new Li,_$=new dt,wh=new Rn,Mh=new vi;class QN extends Rn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Su(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,_$)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Li),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ec),ZC.copy(e.boundingBox).applyMatrix4(Ec),this.boundingBox.union(ZC)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new vi),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Ec),Mh.copy(e.boundingSphere).applyMatrix4(Ec),this.boundingSphere.union(Mh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(wh.geometry=this.geometry,wh.material=this.material,wh.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Mh.copy(this.boundingSphere),Mh.applyMatrix4(i),e.ray.intersectsSphere(Mh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,Ec),KC.multiplyMatrices(i,Ec),wh.matrixWorld=KC,wh.raycast(e,gm);for(let o=0,a=gm.length;o<a;o++){const l=gm[o];l.instanceId=s,l.object=this,t.push(l)}gm.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Su(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function x$(n,e){return n.z-e.z}function S$(n,e){return e.z-n.z}class w${constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const i=this.pool,r=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const s=i[this.index];r.push(s),this.index++,s.start=e.start,s.count=e.count,s.z=t}reset(){this.list.length=0,this.index=0}}const Tc="batchId",Ao=new dt,JC=new dt,M$=new dt,QC=new dt,b_=new yf,vm=new Li,Na=new vi,Eh=new F,A_=new w$,hi=new Rn,ym=[];function E$(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class eD extends Rn{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,i=t*2,r){super(new bt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new ml(t,e,e,Ai,ir);this._matricesTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxGeometryCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const a in e.attributes){const l=e.getAttribute(a),{array:c,itemSize:d,normalized:f}=l,p=new c.constructor(i*d),m=new l.constructor(p,d,f);m.setUsage(l.usage),t.setAttribute(a,m)}if(e.getIndex()!==null){const a=i>65536?new Uint32Array(s):new Uint16Array(s);t.setIndex(new Gt(a,1))}const o=r>65536?new Uint32Array(i):new Uint16Array(i);t.setAttribute(Tc,new Gt(o,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(Tc))throw new Error(`BatchedMesh: Geometry cannot use attribute "${Tc}"`);const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(i===Tc)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Li);const e=this._geometryCount,t=this.boundingBox,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Ao),this.getBoundingBoxAt(r,vm).applyMatrix4(Ao),t.union(vm))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new vi);const e=this._geometryCount,t=this.boundingSphere,i=this._active;t.makeEmpty();for(let r=0;r<e;r++)i[r]!==!1&&(this.getMatrixAt(r,Ao),this.getBoundingSphereAt(r,Na).applyMatrix4(Ao),t.union(Na))}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const c=e.getIndex(),d=c!==null;if(d&&(i===-1?r.indexCount=c.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._visibility,p=this._active,m=this._matricesTexture,y=this._matricesTexture.image.data;f.push(!0),p.push(!0);const M=this._geometryCount;this._geometryCount++,M$.toArray(y,M*16),m.needsUpdate=!0,o.push(r),a.push({start:d?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Li,sphereInitialized:!1,sphere:new vi});const _=this.geometry.getAttribute(Tc);for(let g=0;g<r.vertexCount;g++)_.setX(r.vertexStart+g,M);return _.needsUpdate=!0,this.setGeometryAt(M,e),M}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.vertexCount;for(const m in i.attributes){if(m===Tc)continue;const y=t.getAttribute(m),M=i.getAttribute(m);E$(y,M,l);const _=y.itemSize;for(let g=y.count,w=c;g<w;g++){const x=l+g;for(let T=0;T<_;T++)M.setComponent(x,T,0)}M.needsUpdate=!0}if(r){const m=a.indexStart;for(let y=0;y<o.count;y++)s.setX(m+y,l+o.getX(y));for(let y=o.count,M=a.indexCount;y<M;y++)s.setX(m+y,l);s.needsUpdate=!0}const d=this._bounds[e];t.boundingBox!==null?(d.box.copy(t.boundingBox),d.boxInitialized=!0):d.boxInitialized=!1,t.boundingSphere!==null?(d.sphere.copy(t.boundingSphere),d.sphereInitialized=!0):d.sphereInitialized=!1;const f=this._drawRanges[e],p=t.getAttribute("position");return f.count=r?o.count:p.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||t[e]===!1?this:(t[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.box,o=this.geometry;if(r.boxInitialized===!1){s.makeEmpty();const a=o.index,l=o.attributes.position,c=this._drawRanges[e];for(let d=c.start,f=c.start+c.count;d<f;d++){let p=d;a&&(p=a.getX(p)),s.expandByPoint(Eh.fromBufferAttribute(l,p))}r.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(this._active[e]===!1)return null;const r=this._bounds[e],s=r.sphere,o=this.geometry;if(r.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,vm),vm.getCenter(s.center);const a=o.index,l=o.attributes.position,c=this._drawRanges[e];let d=0;for(let f=c.start,p=c.start+c.count;f<p;f++){let m=f;a&&(m=a.getX(m)),Eh.fromBufferAttribute(l,m),d=Math.max(d,s.center.distanceToSquared(Eh))}s.radius=Math.sqrt(d),r.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._active,r=this._matricesTexture,s=this._matricesTexture.image.data,o=this._geometryCount;return e>=o||i[e]===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._active,r=this._matricesTexture.image.data,s=this._geometryCount;return e>=s||i[e]===!1?null:t.fromArray(r,e*16)}setVisibleAt(e,t){const i=this._visibility,r=this._active,s=this._geometryCount;return e>=s||r[e]===!1||i[e]===t?this:(i[e]=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._visibility,i=this._active,r=this._geometryCount;return e>=r||i[e]===!1?!1:t[e]}raycast(e,t){const i=this._visibility,r=this._active,s=this._drawRanges,o=this._geometryCount,a=this.matrixWorld,l=this.geometry;hi.material=this.material,hi.geometry.index=l.index,hi.geometry.attributes=l.attributes,hi.geometry.boundingBox===null&&(hi.geometry.boundingBox=new Li),hi.geometry.boundingSphere===null&&(hi.geometry.boundingSphere=new vi);for(let c=0;c<o;c++){if(!i[c]||!r[c])continue;const d=s[c];hi.geometry.setDrawRange(d.start,d.count),this.getMatrixAt(c,hi.matrixWorld).premultiply(a),this.getBoundingBoxAt(c,hi.geometry.boundingBox),this.getBoundingSphereAt(c,hi.geometry.boundingSphere),hi.raycast(e,ym);for(let f=0,p=ym.length;f<p;f++){const m=ym[f];m.object=this,m.batchId=c,t.push(m)}ym.length=0}hi.material=null,hi.geometry.index=null,hi.geometry.attributes={},hi.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._active,c=this._visibility,d=this._multiDrawStarts,f=this._multiDrawCounts,p=this._drawRanges,m=this.perObjectFrustumCulled;m&&(QC.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),b_.setFromProjectionMatrix(QC,e.coordinateSystem));let y=0;if(this.sortObjects){JC.copy(this.matrixWorld).invert(),Eh.setFromMatrixPosition(i.matrixWorld).applyMatrix4(JC);for(let g=0,w=c.length;g<w;g++)if(c[g]&&l[g]){this.getMatrixAt(g,Ao),this.getBoundingSphereAt(g,Na).applyMatrix4(Ao);let x=!1;if(m&&(x=!b_.intersectsSphere(Na)),!x){const T=Eh.distanceTo(Na.center);A_.push(p[g],T)}}const M=A_.list,_=this.customSort;_===null?M.sort(s.transparent?S$:x$):_.call(this,M,i);for(let g=0,w=M.length;g<w;g++){const x=M[g];d[y]=x.start*a,f[y]=x.count,y++}A_.reset()}else for(let M=0,_=c.length;M<_;M++)if(c[M]&&l[M]){let g=!1;if(m&&(this.getMatrixAt(M,Ao),this.getBoundingSphereAt(M,Na).applyMatrix4(Ao),g=!b_.intersectsSphere(Na)),!g){const w=p[M];d[y]=w.start*a,f[y]=w.count,y++}}this._multiDrawCount=y,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Di extends _i{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const eP=new F,tP=new F,nP=new dt,C_=new Dl,_m=new vi;class la extends zt{constructor(e=new bt,t=new Di){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)eP.fromBufferAttribute(t,r-1),tP.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=eP.distanceTo(tP);e.setAttribute("lineDistance",new Ye(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),_m.copy(i.boundingSphere),_m.applyMatrix4(r),_m.radius+=s,e.ray.intersectsSphere(_m)===!1)return;nP.copy(r).invert(),C_.copy(e.ray).applyMatrix4(nP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new F,d=new F,f=new F,p=new F,m=this.isLineSegments?2:1,y=i.index,_=i.attributes.position;if(y!==null){const g=Math.max(0,o.start),w=Math.min(y.count,o.start+o.count);for(let x=g,T=w-1;x<T;x+=m){const C=y.getX(x),P=y.getX(x+1);if(c.fromBufferAttribute(_,C),d.fromBufferAttribute(_,P),C_.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(p);D<e.near||D>e.far||t.push({distance:D,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),w=Math.min(_.count,o.start+o.count);for(let x=g,T=w-1;x<T;x+=m){if(c.fromBufferAttribute(_,x),d.fromBufferAttribute(_,x+1),C_.distanceSqToSegment(c,d,p,f)>l)continue;p.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(p);P<e.near||P>e.far||t.push({distance:P,point:f.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const iP=new F,rP=new F;class bs extends la{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)iP.fromBufferAttribute(t,r),rP.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+iP.distanceTo(rP);e.setAttribute("lineDistance",new Ye(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class tD extends la{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class cM extends _i{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const sP=new dt,ZS=new Dl,xm=new vi,Sm=new F;class nD extends zt{constructor(e=new bt,t=new cM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),xm.copy(i.boundingSphere),xm.applyMatrix4(r),xm.radius+=s,e.ray.intersectsSphere(xm)===!1)return;sP.copy(r).invert(),ZS.copy(e.ray).applyMatrix4(sP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const p=Math.max(0,o.start),m=Math.min(c.count,o.start+o.count);for(let y=p,M=m;y<M;y++){const _=c.getX(y);Sm.fromBufferAttribute(f,_),oP(Sm,_,l,r,e,t,this)}}else{const p=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let y=p,M=m;y<M;y++)Sm.fromBufferAttribute(f,y),oP(Sm,y,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function oP(n,e,t,i,r,s,o){const a=ZS.distanceSqToPoint(n);if(a<t){const l=new F;ZS.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class T$ extends vn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Jt,this.magFilter=s!==void 0?s:Jt,this.generateMipmaps=!1;const d=this;function f(){d.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class b$ extends vn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Mn,this.minFilter=Mn,this.generateMipmaps=!1,this.needsUpdate=!0}}class V0 extends vn{constructor(e,t,i,r,s,o,a,l,c,d,f,p){super(null,o,a,l,c,d,r,s,f,p),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class A$ extends V0{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=pi}}class C$ extends V0{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,oo),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class P$ extends vn{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class es{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const d=i[r],p=i[r+1]-d,m=(o-d)/p;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new de:new F);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new F,r=[],s=[],o=[],a=new F,l=new dt;for(let m=0;m<=e;m++){const y=m/e;r[m]=this.getTangentAt(y,new F)}s[0]=new F,o[0]=new F;let c=Number.MAX_VALUE;const d=Math.abs(r[0].x),f=Math.abs(r[0].y),p=Math.abs(r[0].z);d<=c&&(c=d,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),p<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const y=Math.acos(gn(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,y))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(gn(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let y=1;y<=e;y++)s[y].applyMatrix4(l.makeRotationAxis(r[y],m*y)),o[y].crossVectors(r[y],s[y])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class H0 extends es{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new de,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),f=Math.sin(this.aRotation),p=l-this.aX,m=c-this.aY;l=p*d-m*f+this.aX,c=p*f+m*d+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class iD extends H0{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function uM(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,d,f){let p=(o-s)/c-(a-s)/(c+d)+(a-o)/d,m=(a-o)/d-(l-o)/(d+f)+(l-a)/f;p*=d,m*=d,r(o,a,p,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const wm=new F,P_=new uM,R_=new uM,L_=new uM;class rD extends es{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new F){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,d;this.closed||a>0?c=r[(a-1)%s]:(wm.subVectors(r[0],r[1]).add(r[0]),c=wm);const f=r[a%s],p=r[(a+1)%s];if(this.closed||a+2<s?d=r[(a+2)%s]:(wm.subVectors(r[s-1],r[s-2]).add(r[s-1]),d=wm),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let y=Math.pow(c.distanceToSquared(f),m),M=Math.pow(f.distanceToSquared(p),m),_=Math.pow(p.distanceToSquared(d),m);M<1e-4&&(M=1),y<1e-4&&(y=M),_<1e-4&&(_=M),P_.initNonuniformCatmullRom(c.x,f.x,p.x,d.x,y,M,_),R_.initNonuniformCatmullRom(c.y,f.y,p.y,d.y,y,M,_),L_.initNonuniformCatmullRom(c.z,f.z,p.z,d.z,y,M,_)}else this.curveType==="catmullrom"&&(P_.initCatmullRom(c.x,f.x,p.x,d.x,this.tension),R_.initCatmullRom(c.y,f.y,p.y,d.y,this.tension),L_.initCatmullRom(c.z,f.z,p.z,d.z,this.tension));return i.set(P_.calc(l),R_.calc(l),L_.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new F().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function aP(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function R$(n,e){const t=1-n;return t*t*e}function L$(n,e){return 2*(1-n)*n*e}function I$(n,e){return n*n*e}function nd(n,e,t,i){return R$(n,e)+L$(n,t)+I$(n,i)}function N$(n,e){const t=1-n;return t*t*t*e}function D$(n,e){const t=1-n;return 3*t*t*n*e}function k$(n,e){return 3*(1-n)*n*n*e}function O$(n,e){return n*n*n*e}function id(n,e,t,i,r){return N$(n,e)+D$(n,t)+k$(n,i)+O$(n,r)}class hM extends es{constructor(e=new de,t=new de,i=new de,r=new de){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new de){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(id(e,r.x,s.x,o.x,a.x),id(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class sD extends es{constructor(e=new F,t=new F,i=new F,r=new F){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(id(e,r.x,s.x,o.x,a.x),id(e,r.y,s.y,o.y,a.y),id(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dM extends es{constructor(e=new de,t=new de){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new de){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new de){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oD extends es{constructor(e=new F,t=new F){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new F){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new F){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class fM extends es{constructor(e=new de,t=new de,i=new de){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new de){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(nd(e,r.x,s.x,o.x),nd(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pM extends es{constructor(e=new F,t=new F,i=new F){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new F){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(nd(e,r.x,s.x,o.x),nd(e,r.y,s.y,o.y),nd(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mM extends es{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new de){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],d=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(aP(a,l.x,c.x,d.x,f.x),aP(a,l.y,c.y,d.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new de().fromArray(r))}return this}}var qg=Object.freeze({__proto__:null,ArcCurve:iD,CatmullRomCurve3:rD,CubicBezierCurve:hM,CubicBezierCurve3:sD,EllipseCurve:H0,LineCurve:dM,LineCurve3:oD,QuadraticBezierCurve:fM,QuadraticBezierCurve3:pM,SplineCurve:mM});class aD extends es{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new qg[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const d=l[c];i&&i.equals(d)||(t.push(d),i=d)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new qg[r.type]().fromJSON(r))}return this}}class jd extends aD{constructor(e){super(),this.type="Path",this.currentPoint=new de,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new dM(this.currentPoint.clone(),new de(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new fM(this.currentPoint.clone(),new de(e,t),new de(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new hM(this.currentPoint.clone(),new de(e,t),new de(i,r),new de(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new mM(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+c,t+d,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new H0(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const d=c.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class _f extends bt{constructor(e=[new de(0,-.5),new de(.5,0),new de(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=gn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],d=1/t,f=new F,p=new de,m=new F,y=new F,M=new F;let _=0,g=0;for(let w=0;w<=e.length-1;w++)switch(w){case 0:_=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,m.x=g*1,m.y=-_,m.z=g*0,M.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(M.x,M.y,M.z);break;default:_=e[w+1].x-e[w].x,g=e[w+1].y-e[w].y,m.x=g*1,m.y=-_,m.z=g*0,y.copy(m),m.x+=M.x,m.y+=M.y,m.z+=M.z,m.normalize(),l.push(m.x,m.y,m.z),M.copy(y)}for(let w=0;w<=t;w++){const x=i+w*d*r,T=Math.sin(x),C=Math.cos(x);for(let P=0;P<=e.length-1;P++){f.x=e[P].x*T,f.y=e[P].y,f.z=e[P].x*C,o.push(f.x,f.y,f.z),p.x=w/t,p.y=P/(e.length-1),a.push(p.x,p.y);const R=l[3*P+0]*T,D=l[3*P+1],X=l[3*P+0]*C;c.push(R,D,X)}}for(let w=0;w<t;w++)for(let x=0;x<e.length-1;x++){const T=x+w*e.length,C=T,P=T+e.length,R=T+e.length+1,D=T+1;s.push(C,P,D),s.push(R,D,P)}this.setIndex(s),this.setAttribute("position",new Ye(o,3)),this.setAttribute("uv",new Ye(a,2)),this.setAttribute("normal",new Ye(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _f(e.points,e.segments,e.phiStart,e.phiLength)}}class G0 extends _f{constructor(e=1,t=1,i=4,r=8){const s=new jd;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new G0(e.radius,e.length,e.capSegments,e.radialSegments)}}class j0 extends bt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new F,d=new de;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,p=3;f<=t;f++,p+=3){const m=i+f/t*r;c.x=e*Math.cos(m),c.y=e*Math.sin(m),o.push(c.x,c.y,c.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Ye(o,3)),this.setAttribute("normal",new Ye(a,3)),this.setAttribute("uv",new Ye(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new j0(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ku extends bt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const d=[],f=[],p=[],m=[];let y=0;const M=[],_=i/2;let g=0;w(),o===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(d),this.setAttribute("position",new Ye(f,3)),this.setAttribute("normal",new Ye(p,3)),this.setAttribute("uv",new Ye(m,2));function w(){const T=new F,C=new F;let P=0;const R=(t-e)/i;for(let D=0;D<=s;D++){const X=[],b=D/s,L=b*(t-e)+e;for(let Z=0;Z<=r;Z++){const re=Z/r,W=re*l+a,ne=Math.sin(W),J=Math.cos(W);C.x=L*ne,C.y=-b*i+_,C.z=L*J,f.push(C.x,C.y,C.z),T.set(ne,R,J).normalize(),p.push(T.x,T.y,T.z),m.push(re,1-b),X.push(y++)}M.push(X)}for(let D=0;D<r;D++)for(let X=0;X<s;X++){const b=M[X][D],L=M[X+1][D],Z=M[X+1][D+1],re=M[X][D+1];d.push(b,L,re),d.push(L,Z,re),P+=6}c.addGroup(g,P,0),g+=P}function x(T){const C=y,P=new de,R=new F;let D=0;const X=T===!0?e:t,b=T===!0?1:-1;for(let Z=1;Z<=r;Z++)f.push(0,_*b,0),p.push(0,b,0),m.push(.5,.5),y++;const L=y;for(let Z=0;Z<=r;Z++){const W=Z/r*l+a,ne=Math.cos(W),J=Math.sin(W);R.x=X*J,R.y=_*b,R.z=X*ne,f.push(R.x,R.y,R.z),p.push(0,b,0),P.x=ne*.5+.5,P.y=J*.5*b+.5,m.push(P.x,P.y),y++}for(let Z=0;Z<r;Z++){const re=C+Z,W=L+Z;T===!0?d.push(W,W+1,re):d.push(W+1,W,re),D+=3}c.addGroup(g,D,T===!0?1:2),g+=D}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ku(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class W0 extends ku{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new W0(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ga extends bt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),d(),this.setAttribute("position",new Ye(s,3)),this.setAttribute("normal",new Ye(s.slice(),3)),this.setAttribute("uv",new Ye(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(w){const x=new F,T=new F,C=new F;for(let P=0;P<t.length;P+=3)m(t[P+0],x),m(t[P+1],T),m(t[P+2],C),l(x,T,C,w)}function l(w,x,T,C){const P=C+1,R=[];for(let D=0;D<=P;D++){R[D]=[];const X=w.clone().lerp(T,D/P),b=x.clone().lerp(T,D/P),L=P-D;for(let Z=0;Z<=L;Z++)Z===0&&D===P?R[D][Z]=X:R[D][Z]=X.clone().lerp(b,Z/L)}for(let D=0;D<P;D++)for(let X=0;X<2*(P-D)-1;X++){const b=Math.floor(X/2);X%2===0?(p(R[D][b+1]),p(R[D+1][b]),p(R[D][b])):(p(R[D][b+1]),p(R[D+1][b+1]),p(R[D+1][b]))}}function c(w){const x=new F;for(let T=0;T<s.length;T+=3)x.x=s[T+0],x.y=s[T+1],x.z=s[T+2],x.normalize().multiplyScalar(w),s[T+0]=x.x,s[T+1]=x.y,s[T+2]=x.z}function d(){const w=new F;for(let x=0;x<s.length;x+=3){w.x=s[x+0],w.y=s[x+1],w.z=s[x+2];const T=_(w)/2/Math.PI+.5,C=g(w)/Math.PI+.5;o.push(T,1-C)}y(),f()}function f(){for(let w=0;w<o.length;w+=6){const x=o[w+0],T=o[w+2],C=o[w+4],P=Math.max(x,T,C),R=Math.min(x,T,C);P>.9&&R<.1&&(x<.2&&(o[w+0]+=1),T<.2&&(o[w+2]+=1),C<.2&&(o[w+4]+=1))}}function p(w){s.push(w.x,w.y,w.z)}function m(w,x){const T=w*3;x.x=e[T+0],x.y=e[T+1],x.z=e[T+2]}function y(){const w=new F,x=new F,T=new F,C=new F,P=new de,R=new de,D=new de;for(let X=0,b=0;X<s.length;X+=9,b+=6){w.set(s[X+0],s[X+1],s[X+2]),x.set(s[X+3],s[X+4],s[X+5]),T.set(s[X+6],s[X+7],s[X+8]),P.set(o[b+0],o[b+1]),R.set(o[b+2],o[b+3]),D.set(o[b+4],o[b+5]),C.copy(w).add(x).add(T).divideScalar(3);const L=_(C);M(P,b+0,w,L),M(R,b+2,x,L),M(D,b+4,T,L)}}function M(w,x,T,C){C<0&&w.x===1&&(o[x]=w.x-1),T.x===0&&T.z===0&&(o[x]=C/2/Math.PI+.5)}function _(w){return Math.atan2(w.z,-w.x)}function g(w){return Math.atan2(-w.y,Math.sqrt(w.x*w.x+w.z*w.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ga(e.vertices,e.indices,e.radius,e.details)}}class X0 extends ga{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new X0(e.radius,e.detail)}}const Mm=new F,Em=new F,I_=new F,Tm=new sr;class lD extends bt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(dl*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],d=["a","b","c"],f=new Array(3),p={},m=[];for(let y=0;y<l;y+=3){o?(c[0]=o.getX(y),c[1]=o.getX(y+1),c[2]=o.getX(y+2)):(c[0]=y,c[1]=y+1,c[2]=y+2);const{a:M,b:_,c:g}=Tm;if(M.fromBufferAttribute(a,c[0]),_.fromBufferAttribute(a,c[1]),g.fromBufferAttribute(a,c[2]),Tm.getNormal(I_),f[0]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,f[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,f[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let w=0;w<3;w++){const x=(w+1)%3,T=f[w],C=f[x],P=Tm[d[w]],R=Tm[d[x]],D=`${T}_${C}`,X=`${C}_${T}`;X in p&&p[X]?(I_.dot(p[X].normal)<=s&&(m.push(P.x,P.y,P.z),m.push(R.x,R.y,R.z)),p[X]=null):D in p||(p[D]={index0:c[w],index1:c[x],normal:I_.clone()})}}for(const y in p)if(p[y]){const{index0:M,index1:_}=p[y];Mm.fromBufferAttribute(a,M),Em.fromBufferAttribute(a,_),m.push(Mm.x,Mm.y,Mm.z),m.push(Em.x,Em.y,Em.z)}this.setAttribute("position",new Ye(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class gl extends jd{constructor(e){super(e),this.uuid=cr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new jd().fromJSON(r))}return this}}const U$={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=cD(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,d,f,p,m;if(i&&(s=H$(n,e,s,t)),n.length>80*t){a=c=n[0],l=d=n[1];for(let y=t;y<r;y+=t)f=n[y],p=n[y+1],f<a&&(a=f),p<l&&(l=p),f>c&&(c=f),p>d&&(d=p);m=Math.max(c-a,d-l),m=m!==0?32767/m:0}return Wd(s,o,t,a,l,m,0),o}};function cD(n,e,t,i,r){let s,o;if(r===Q$(n,e,t,i)>0)for(s=e;s<t;s+=i)o=lP(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=lP(s,n[s],n[s+1],o);return o&&$0(o,o.next)&&($d(o),o=o.next),o}function Tl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&($0(t,t.next)||ln(t.prev,t,t.next)===0)){if($d(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Wd(n,e,t,i,r,s,o){if(!n)return;!o&&s&&$$(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?z$(n,i,r,s):F$(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),$d(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=B$(Tl(n),e,t),Wd(n,e,t,i,r,s,2)):o===2&&V$(n,e,t,i,r,s):Wd(Tl(n),e,t,i,r,s,1);break}}}function F$(n){const e=n.prev,t=n,i=n.next;if(ln(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,d=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,p=r>s?r>o?r:o:s>o?s:o,m=a>l?a>c?a:c:l>c?l:c;let y=i.next;for(;y!==e;){if(y.x>=d&&y.x<=p&&y.y>=f&&y.y<=m&&Zc(r,a,s,l,o,c,y.x,y.y)&&ln(y.prev,y,y.next)>=0)return!1;y=y.next}return!0}function z$(n,e,t,i){const r=n.prev,s=n,o=n.next;if(ln(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,d=r.y,f=s.y,p=o.y,m=a<l?a<c?a:c:l<c?l:c,y=d<f?d<p?d:p:f<p?f:p,M=a>l?a>c?a:c:l>c?l:c,_=d>f?d>p?d:p:f>p?f:p,g=JS(m,y,e,t,i),w=JS(M,_,e,t,i);let x=n.prevZ,T=n.nextZ;for(;x&&x.z>=g&&T&&T.z<=w;){if(x.x>=m&&x.x<=M&&x.y>=y&&x.y<=_&&x!==r&&x!==o&&Zc(a,d,l,f,c,p,x.x,x.y)&&ln(x.prev,x,x.next)>=0||(x=x.prevZ,T.x>=m&&T.x<=M&&T.y>=y&&T.y<=_&&T!==r&&T!==o&&Zc(a,d,l,f,c,p,T.x,T.y)&&ln(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;x&&x.z>=g;){if(x.x>=m&&x.x<=M&&x.y>=y&&x.y<=_&&x!==r&&x!==o&&Zc(a,d,l,f,c,p,x.x,x.y)&&ln(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;T&&T.z<=w;){if(T.x>=m&&T.x<=M&&T.y>=y&&T.y<=_&&T!==r&&T!==o&&Zc(a,d,l,f,c,p,T.x,T.y)&&ln(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function B$(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!$0(r,s)&&uD(r,i,i.next,s)&&Xd(r,s)&&Xd(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),$d(i),$d(i.next),i=n=s),i=i.next}while(i!==n);return Tl(i)}function V$(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&K$(o,a)){let l=hD(o,a);o=Tl(o,o.next),l=Tl(l,l.next),Wd(o,e,t,i,r,s,0),Wd(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function H$(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=cD(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(Y$(c));for(r.sort(G$),s=0;s<r.length;s++)t=j$(r[s],t);return t}function G$(n,e){return n.x-e.x}function j$(n,e){const t=W$(n,e);if(!t)return e;const i=hD(t,n);return Tl(i,i.next),Tl(t,t.next)}function W$(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const p=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(p<=s&&p>i&&(i=p,r=t.x<t.next.x?t:t.next,p===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let d=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Zc(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Xd(t,n)&&(f<d||f===d&&(t.x>r.x||t.x===r.x&&X$(r,t)))&&(r=t,d=f)),t=t.next;while(t!==a);return r}function X$(n,e){return ln(n.prev,n,e.prev)<0&&ln(e.next,n,n.next)<0}function $$(n,e,t,i){let r=n;do r.z===0&&(r.z=JS(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,q$(r)}function q$(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function JS(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Y$(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Zc(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function K$(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Z$(n,e)&&(Xd(n,e)&&Xd(e,n)&&J$(n,e)&&(ln(n.prev,n,e.prev)||ln(n,e.prev,e))||$0(n,e)&&ln(n.prev,n,n.next)>0&&ln(e.prev,e,e.next)>0)}function ln(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function $0(n,e){return n.x===e.x&&n.y===e.y}function uD(n,e,t,i){const r=Am(ln(n,e,t)),s=Am(ln(n,e,i)),o=Am(ln(t,i,n)),a=Am(ln(t,i,e));return!!(r!==s&&o!==a||r===0&&bm(n,t,e)||s===0&&bm(n,i,e)||o===0&&bm(t,n,i)||a===0&&bm(t,e,i))}function bm(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Am(n){return n>0?1:n<0?-1:0}function Z$(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&uD(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Xd(n,e){return ln(n.prev,n,n.next)<0?ln(n,e,n.next)>=0&&ln(n,n.prev,e)>=0:ln(n,e,n.prev)<0||ln(n,n.next,e)<0}function J$(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function hD(n,e){const t=new QS(n.i,n.x,n.y),i=new QS(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function lP(n,e,t,i){const r=new QS(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function $d(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function QS(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Q$(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Es{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Es.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];cP(e),uP(i,e);let o=e.length;t.forEach(cP);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,uP(i,t[l]);const a=U$.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function cP(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function uP(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class q0 extends bt{constructor(e=new gl([new de(.5,.5),new de(-.5,.5),new de(-.5,-.5),new de(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Ye(r,3)),this.setAttribute("uv",new Ye(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,d=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let p=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,y=t.bevelSize!==void 0?t.bevelSize:m-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,w=t.UVGenerator!==void 0?t.UVGenerator:eq;let x,T=!1,C,P,R,D;g&&(x=g.getSpacedPoints(d),T=!0,p=!1,C=g.computeFrenetFrames(d,!1),P=new F,R=new F,D=new F),p||(_=0,m=0,y=0,M=0);const X=a.extractPoints(c);let b=X.shape;const L=X.holes;if(!Es.isClockWise(b)){b=b.reverse();for(let j=0,Se=L.length;j<Se;j++){const fe=L[j];Es.isClockWise(fe)&&(L[j]=fe.reverse())}}const re=Es.triangulateShape(b,L),W=b;for(let j=0,Se=L.length;j<Se;j++){const fe=L[j];b=b.concat(fe)}function ne(j,Se,fe){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),j.clone().addScaledVector(Se,fe)}const J=b.length,ae=re.length;function N(j,Se,fe){let Te,me,Ke;const Ie=j.x-Se.x,O=j.y-Se.y,I=fe.x-j.x,ee=fe.y-j.y,xe=Ie*Ie+O*O,ye=Ie*ee-O*I;if(Math.abs(ye)>Number.EPSILON){const ge=Math.sqrt(xe),Xe=Math.sqrt(I*I+ee*ee),Le=Se.x-O/ge,Ue=Se.y+Ie/ge,nt=fe.x-ee/Xe,pt=fe.y+I/Xe,_e=((nt-Le)*ee-(pt-Ue)*I)/(Ie*ee-O*I);Te=Le+Ie*_e-j.x,me=Ue+O*_e-j.y;const Rt=Te*Te+me*me;if(Rt<=2)return new de(Te,me);Ke=Math.sqrt(Rt/2)}else{let ge=!1;Ie>Number.EPSILON?I>Number.EPSILON&&(ge=!0):Ie<-Number.EPSILON?I<-Number.EPSILON&&(ge=!0):Math.sign(O)===Math.sign(ee)&&(ge=!0),ge?(Te=-O,me=Ie,Ke=Math.sqrt(xe)):(Te=Ie,me=O,Ke=Math.sqrt(xe/2))}return new de(Te/Ke,me/Ke)}const B=[];for(let j=0,Se=W.length,fe=Se-1,Te=j+1;j<Se;j++,fe++,Te++)fe===Se&&(fe=0),Te===Se&&(Te=0),B[j]=N(W[j],W[fe],W[Te]);const H=[];let q,le=B.concat();for(let j=0,Se=L.length;j<Se;j++){const fe=L[j];q=[];for(let Te=0,me=fe.length,Ke=me-1,Ie=Te+1;Te<me;Te++,Ke++,Ie++)Ke===me&&(Ke=0),Ie===me&&(Ie=0),q[Te]=N(fe[Te],fe[Ke],fe[Ie]);H.push(q),le=le.concat(q)}for(let j=0;j<_;j++){const Se=j/_,fe=m*Math.cos(Se*Math.PI/2),Te=y*Math.sin(Se*Math.PI/2)+M;for(let me=0,Ke=W.length;me<Ke;me++){const Ie=ne(W[me],B[me],Te);Re(Ie.x,Ie.y,-fe)}for(let me=0,Ke=L.length;me<Ke;me++){const Ie=L[me];q=H[me];for(let O=0,I=Ie.length;O<I;O++){const ee=ne(Ie[O],q[O],Te);Re(ee.x,ee.y,-fe)}}}const be=y+M;for(let j=0;j<J;j++){const Se=p?ne(b[j],le[j],be):b[j];T?(R.copy(C.normals[0]).multiplyScalar(Se.x),P.copy(C.binormals[0]).multiplyScalar(Se.y),D.copy(x[0]).add(R).add(P),Re(D.x,D.y,D.z)):Re(Se.x,Se.y,0)}for(let j=1;j<=d;j++)for(let Se=0;Se<J;Se++){const fe=p?ne(b[Se],le[Se],be):b[Se];T?(R.copy(C.normals[j]).multiplyScalar(fe.x),P.copy(C.binormals[j]).multiplyScalar(fe.y),D.copy(x[j]).add(R).add(P),Re(D.x,D.y,D.z)):Re(fe.x,fe.y,f/d*j)}for(let j=_-1;j>=0;j--){const Se=j/_,fe=m*Math.cos(Se*Math.PI/2),Te=y*Math.sin(Se*Math.PI/2)+M;for(let me=0,Ke=W.length;me<Ke;me++){const Ie=ne(W[me],B[me],Te);Re(Ie.x,Ie.y,f+fe)}for(let me=0,Ke=L.length;me<Ke;me++){const Ie=L[me];q=H[me];for(let O=0,I=Ie.length;O<I;O++){const ee=ne(Ie[O],q[O],Te);T?Re(ee.x,ee.y+x[d-1].y,x[d-1].x+fe):Re(ee.x,ee.y,f+fe)}}}te(),pe();function te(){const j=r.length/3;if(p){let Se=0,fe=J*Se;for(let Te=0;Te<ae;Te++){const me=re[Te];Je(me[2]+fe,me[1]+fe,me[0]+fe)}Se=d+_*2,fe=J*Se;for(let Te=0;Te<ae;Te++){const me=re[Te];Je(me[0]+fe,me[1]+fe,me[2]+fe)}}else{for(let Se=0;Se<ae;Se++){const fe=re[Se];Je(fe[2],fe[1],fe[0])}for(let Se=0;Se<ae;Se++){const fe=re[Se];Je(fe[0]+J*d,fe[1]+J*d,fe[2]+J*d)}}i.addGroup(j,r.length/3-j,0)}function pe(){const j=r.length/3;let Se=0;we(W,Se),Se+=W.length;for(let fe=0,Te=L.length;fe<Te;fe++){const me=L[fe];we(me,Se),Se+=me.length}i.addGroup(j,r.length/3-j,1)}function we(j,Se){let fe=j.length;for(;--fe>=0;){const Te=fe;let me=fe-1;me<0&&(me=j.length-1);for(let Ke=0,Ie=d+_*2;Ke<Ie;Ke++){const O=J*Ke,I=J*(Ke+1),ee=Se+Te+O,xe=Se+me+O,ye=Se+me+I,ge=Se+Te+I;He(ee,xe,ye,ge)}}}function Re(j,Se,fe){l.push(j),l.push(Se),l.push(fe)}function Je(j,Se,fe){ct(j),ct(Se),ct(fe);const Te=r.length/3,me=w.generateTopUV(i,r,Te-3,Te-2,Te-1);Ge(me[0]),Ge(me[1]),Ge(me[2])}function He(j,Se,fe,Te){ct(j),ct(Se),ct(Te),ct(Se),ct(fe),ct(Te);const me=r.length/3,Ke=w.generateSideWallUV(i,r,me-6,me-3,me-2,me-1);Ge(Ke[0]),Ge(Ke[1]),Ge(Ke[3]),Ge(Ke[1]),Ge(Ke[2]),Ge(Ke[3])}function ct(j){r.push(l[j*3+0]),r.push(l[j*3+1]),r.push(l[j*3+2])}function Ge(j){s.push(j.x),s.push(j.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return tq(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new qg[r.type]().fromJSON(r)),new q0(i,e.options)}}const eq={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],d=e[r*3+1];return[new de(s,o),new de(a,l),new de(c,d)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],d=e[i*3+1],f=e[i*3+2],p=e[r*3],m=e[r*3+1],y=e[r*3+2],M=e[s*3],_=e[s*3+1],g=e[s*3+2];return Math.abs(a-d)<Math.abs(o-c)?[new de(o,1-l),new de(c,1-f),new de(p,1-y),new de(M,1-g)]:[new de(a,1-l),new de(d,1-f),new de(m,1-y),new de(_,1-g)]}};function tq(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Y0 extends ga{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Y0(e.radius,e.detail)}}class xf extends ga{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xf(e.radius,e.detail)}}class K0 extends bt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],d=[];let f=e;const p=(t-e)/r,m=new F,y=new de;for(let M=0;M<=r;M++){for(let _=0;_<=i;_++){const g=s+_/i*o;m.x=f*Math.cos(g),m.y=f*Math.sin(g),l.push(m.x,m.y,m.z),c.push(0,0,1),y.x=(m.x/t+1)/2,y.y=(m.y/t+1)/2,d.push(y.x,y.y)}f+=p}for(let M=0;M<r;M++){const _=M*(i+1);for(let g=0;g<i;g++){const w=g+_,x=w,T=w+i+1,C=w+i+2,P=w+1;a.push(x,T,P),a.push(T,C,P)}}this.setIndex(a),this.setAttribute("position",new Ye(l,3)),this.setAttribute("normal",new Ye(c,3)),this.setAttribute("uv",new Ye(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new K0(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Z0 extends bt{constructor(e=new gl([new de(0,.5),new de(-.5,-.5),new de(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let d=0;d<e.length;d++)c(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Ye(r,3)),this.setAttribute("normal",new Ye(s,3)),this.setAttribute("uv",new Ye(o,2));function c(d){const f=r.length/3,p=d.extractPoints(t);let m=p.shape;const y=p.holes;Es.isClockWise(m)===!1&&(m=m.reverse());for(let _=0,g=y.length;_<g;_++){const w=y[_];Es.isClockWise(w)===!0&&(y[_]=w.reverse())}const M=Es.triangulateShape(m,y);for(let _=0,g=y.length;_<g;_++){const w=y[_];m=m.concat(w)}for(let _=0,g=m.length;_<g;_++){const w=m[_];r.push(w.x,w.y,0),s.push(0,0,1),o.push(w.x,w.y)}for(let _=0,g=M.length;_<g;_++){const w=M[_],x=w[0]+f,T=w[1]+f,C=w[2]+f;i.push(x,T,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return nq(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Z0(i,e.curveSegments)}}function nq(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Sf extends bt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const d=[],f=new F,p=new F,m=[],y=[],M=[],_=[];for(let g=0;g<=i;g++){const w=[],x=g/i;let T=0;g===0&&o===0?T=.5/t:g===i&&l===Math.PI&&(T=-.5/t);for(let C=0;C<=t;C++){const P=C/t;f.x=-e*Math.cos(r+P*s)*Math.sin(o+x*a),f.y=e*Math.cos(o+x*a),f.z=e*Math.sin(r+P*s)*Math.sin(o+x*a),y.push(f.x,f.y,f.z),p.copy(f).normalize(),M.push(p.x,p.y,p.z),_.push(P+T,1-x),w.push(c++)}d.push(w)}for(let g=0;g<i;g++)for(let w=0;w<t;w++){const x=d[g][w+1],T=d[g][w],C=d[g+1][w],P=d[g+1][w+1];(g!==0||o>0)&&m.push(x,T,P),(g!==i-1||l<Math.PI)&&m.push(T,C,P)}this.setIndex(m),this.setAttribute("position",new Ye(y,3)),this.setAttribute("normal",new Ye(M,3)),this.setAttribute("uv",new Ye(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class J0 extends ga{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new J0(e.radius,e.detail)}}class Q0 extends bt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],d=new F,f=new F,p=new F;for(let m=0;m<=i;m++)for(let y=0;y<=r;y++){const M=y/r*s,_=m/i*Math.PI*2;f.x=(e+t*Math.cos(_))*Math.cos(M),f.y=(e+t*Math.cos(_))*Math.sin(M),f.z=t*Math.sin(_),a.push(f.x,f.y,f.z),d.x=e*Math.cos(M),d.y=e*Math.sin(M),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),c.push(y/r),c.push(m/i)}for(let m=1;m<=i;m++)for(let y=1;y<=r;y++){const M=(r+1)*m+y-1,_=(r+1)*(m-1)+y-1,g=(r+1)*(m-1)+y,w=(r+1)*m+y;o.push(M,_,w),o.push(_,g,w)}this.setIndex(o),this.setAttribute("position",new Ye(a,3)),this.setAttribute("normal",new Ye(l,3)),this.setAttribute("uv",new Ye(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Q0(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ev extends bt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],d=[],f=new F,p=new F,m=new F,y=new F,M=new F,_=new F,g=new F;for(let x=0;x<=i;++x){const T=x/i*s*Math.PI*2;w(T,s,o,e,m),w(T+.01,s,o,e,y),_.subVectors(y,m),g.addVectors(y,m),M.crossVectors(_,g),g.crossVectors(M,_),M.normalize(),g.normalize();for(let C=0;C<=r;++C){const P=C/r*Math.PI*2,R=-t*Math.cos(P),D=t*Math.sin(P);f.x=m.x+(R*g.x+D*M.x),f.y=m.y+(R*g.y+D*M.y),f.z=m.z+(R*g.z+D*M.z),l.push(f.x,f.y,f.z),p.subVectors(f,m).normalize(),c.push(p.x,p.y,p.z),d.push(x/i),d.push(C/r)}}for(let x=1;x<=i;x++)for(let T=1;T<=r;T++){const C=(r+1)*(x-1)+(T-1),P=(r+1)*x+(T-1),R=(r+1)*x+T,D=(r+1)*(x-1)+T;a.push(C,P,D),a.push(P,R,D)}this.setIndex(a),this.setAttribute("position",new Ye(l,3)),this.setAttribute("normal",new Ye(c,3)),this.setAttribute("uv",new Ye(d,2));function w(x,T,C,P,R){const D=Math.cos(x),X=Math.sin(x),b=C/T*x,L=Math.cos(b);R.x=P*(2+L)*.5*D,R.y=P*(2+L)*X*.5,R.z=P*Math.sin(b)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ev(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class tv extends bt{constructor(e=new pM(new F(-1,-1,0),new F(-1,1,0),new F(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new F,l=new F,c=new de;let d=new F;const f=[],p=[],m=[],y=[];M(),this.setIndex(y),this.setAttribute("position",new Ye(f,3)),this.setAttribute("normal",new Ye(p,3)),this.setAttribute("uv",new Ye(m,2));function M(){for(let x=0;x<t;x++)_(x);_(s===!1?t:0),w(),g()}function _(x){d=e.getPointAt(x/t,d);const T=o.normals[x],C=o.binormals[x];for(let P=0;P<=r;P++){const R=P/r*Math.PI*2,D=Math.sin(R),X=-Math.cos(R);l.x=X*T.x+D*C.x,l.y=X*T.y+D*C.y,l.z=X*T.z+D*C.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+i*l.x,a.y=d.y+i*l.y,a.z=d.z+i*l.z,f.push(a.x,a.y,a.z)}}function g(){for(let x=1;x<=t;x++)for(let T=1;T<=r;T++){const C=(r+1)*(x-1)+(T-1),P=(r+1)*x+(T-1),R=(r+1)*x+T,D=(r+1)*(x-1)+T;y.push(C,P,D),y.push(P,R,D)}}function w(){for(let x=0;x<=t;x++)for(let T=0;T<=r;T++)c.x=x/t,c.y=T/r,m.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new tv(new qg[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class dD extends bt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new F,s=new F;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,d=l.length;c<d;++c){const f=l[c],p=f.start,m=f.count;for(let y=p,M=p+m;y<M;y+=3)for(let _=0;_<3;_++){const g=a.getX(y+_),w=a.getX(y+(_+1)%3);r.fromBufferAttribute(o,g),s.fromBufferAttribute(o,w),hP(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const d=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,d),s.fromBufferAttribute(o,f),hP(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ye(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function hP(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var dP=Object.freeze({__proto__:null,BoxGeometry:kl,CapsuleGeometry:G0,CircleGeometry:j0,ConeGeometry:W0,CylinderGeometry:ku,DodecahedronGeometry:X0,EdgesGeometry:lD,ExtrudeGeometry:q0,IcosahedronGeometry:Y0,LatheGeometry:_f,OctahedronGeometry:xf,PlaneGeometry:Nu,PolyhedronGeometry:ga,RingGeometry:K0,ShapeGeometry:Z0,SphereGeometry:Sf,TetrahedronGeometry:J0,TorusGeometry:Q0,TorusKnotGeometry:ev,TubeGeometry:tv,WireframeGeometry:dD});class fD extends _i{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ze(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class pD extends Qr{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class gM extends _i{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mD extends gM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new de(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return gn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ze(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class gD extends _i{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ze(16777215),this.specular=new ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ff,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class vD extends _i{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class yD extends _i{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class _D extends _i{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ff,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xD extends _i{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=pa,this.normalScale=new de(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SD extends Di{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function al(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function wD(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function MD(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function ew(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function vM(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function iq(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],d=c.getValueSize(),f=[],p=[];for(let m=0;m<c.times.length;++m){const y=c.times[m]*r;if(!(y<t||y>=i)){f.push(c.times[m]);for(let M=0;M<d;++M)p.push(c.values[m*d+M])}}f.length!==0&&(c.times=al(f,c.times.constructor),c.values=al(p,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function rq(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(c===void 0)continue;let d=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);let p=0;const m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=m/3);const y=a.times.length-1;let M;if(s<=a.times[0]){const g=d,w=f-d;M=a.values.slice(g,w)}else if(s>=a.times[y]){const g=y*f+d,w=g+f-d;M=a.values.slice(g,w)}else{const g=a.createInterpolant(),w=d,x=f-d;g.evaluate(s),M=g.resultBuffer.slice(w,x)}l==="quaternion"&&new gi().fromArray(M).normalize().conjugate().toArray(M);const _=c.times.length;for(let g=0;g<_;++g){const w=g*m+p;if(l==="quaternion")gi.multiplyQuaternionsFlat(c.values,w,M,0,c.values,w);else{const x=m-p*2;for(let T=0;T<x;++T)c.values[w+T]-=M[T]}}}return n.blendMode=q1,n}const sq={convertArray:al,isTypedArray:wD,getKeyframeOrder:MD,sortedArray:ew,flattenJSON:vM,subclip:iq,makeClipAdditive:rq};class wf{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ED extends wf{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:rl,endingEnd:rl}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case sl:s=e,a=2*t-i;break;case Ud:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case sl:o=e,l=2*i-t;break;case Ud:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,d=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=this._offsetPrev,f=this._offsetNext,p=this._weightPrev,m=this._weightNext,y=(i-t)/(r-t),M=y*y,_=M*y,g=-p*_+2*p*M-p*y,w=(1+p)*_+(-1.5-2*p)*M+(-.5+p)*y+1,x=(-1-m)*_+(1.5+m)*M+.5*y,T=m*_-m*M;for(let C=0;C!==a;++C)s[C]=g*o[d+C]+w*o[c+C]+x*o[l+C]+T*o[f+C];return s}}class yM extends wf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,d=(i-t)/(r-t),f=1-d;for(let p=0;p!==a;++p)s[p]=o[c+p]*f+o[l+p]*d;return s}}class TD extends wf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ts{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=al(t,this.TimeBufferType),this.values=al(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:al(e.times,Array),values:al(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new TD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new yM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new ED(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case kd:t=this.InterpolantFactoryMethodDiscrete;break;case Od:t=this.InterpolantFactoryMethodLinear;break;case sg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return kd;case this.InterpolantFactoryMethodLinear:return Od;case this.InterpolantFactoryMethodSmooth:return sg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&wD(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===sg,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],d=e[a+1];if(c!==d&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,p=f-i,m=f+i;for(let y=0;y!==i;++y){const M=t[f+y];if(M!==t[p+y]||M!==t[m+y]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,p=o*i;for(let m=0;m!==i;++m)t[p+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ts.prototype.TimeBufferType=Float32Array;ts.prototype.ValueBufferType=Float32Array;ts.prototype.DefaultInterpolation=Od;class Ol extends ts{}Ol.prototype.ValueTypeName="bool";Ol.prototype.ValueBufferType=Array;Ol.prototype.DefaultInterpolation=kd;Ol.prototype.InterpolantFactoryMethodLinear=void 0;Ol.prototype.InterpolantFactoryMethodSmooth=void 0;class _M extends ts{}_M.prototype.ValueTypeName="color";class qd extends ts{}qd.prototype.ValueTypeName="number";class bD extends wf{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let d=c+a;c!==d;c+=4)gi.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Ou extends ts{InterpolantFactoryMethodLinear(e){return new bD(this.times,this.values,this.getValueSize(),e)}}Ou.prototype.ValueTypeName="quaternion";Ou.prototype.DefaultInterpolation=Od;Ou.prototype.InterpolantFactoryMethodSmooth=void 0;class Ul extends ts{}Ul.prototype.ValueTypeName="string";Ul.prototype.ValueBufferType=Array;Ul.prototype.DefaultInterpolation=kd;Ul.prototype.InterpolantFactoryMethodLinear=void 0;Ul.prototype.InterpolantFactoryMethodSmooth=void 0;class Yd extends ts{}Yd.prototype.ValueTypeName="vector";class Kd{constructor(e,t=-1,i,r=I0){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=cr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(aq(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(ts.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const d=MD(l);l=ew(l,1,d),c=ew(c,1,d),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new qd(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],d=c.name.match(s);if(d&&d.length>1){const f=d[1];let p=r[f];p||(r[f]=p=[]),p.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,p,m,y,M){if(m.length!==0){const _=[],g=[];vM(m,_,g,y),_.length!==0&&M.push(new f(p,_,g))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const p=c[f].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const m={};let y;for(y=0;y<p.length;y++)if(p[y].morphTargets)for(let M=0;M<p[y].morphTargets.length;M++)m[p[y].morphTargets[M]]=-1;for(const M in m){const _=[],g=[];for(let w=0;w!==p[y].morphTargets.length;++w){const x=p[y];_.push(x.time),g.push(x.morphTarget===M?1:0)}r.push(new qd(".morphTargetInfluence["+M+"]",_,g))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i(Yd,m+".position",p,"pos",r),i(Ou,m+".quaternion",p,"rot",r),i(Yd,m+".scale",p,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function oq(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return qd;case"vector":case"vector2":case"vector3":case"vector4":return Yd;case"color":return _M;case"quaternion":return Ou;case"bool":case"boolean":return Ol;case"string":return Ul}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function aq(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=oq(n.type);if(n.times===void 0){const t=[],i=[];vM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const qs={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class xM{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(d){a++,s===!1&&r.onStart!==void 0&&r.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,r.onProgress!==void 0&&r.onProgress(d,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(d){r.onError!==void 0&&r.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,f){return c.push(d,f),this},this.removeHandler=function(d){const f=c.indexOf(d);return f!==-1&&c.splice(f,2),this},this.getHandler=function(d){for(let f=0,p=c.length;f<p;f+=2){const m=c[f],y=c[f+1];if(m.global&&(m.lastIndex=0),m.test(d))return y}return null}}}const AD=new xM;class Xi{constructor(e){this.manager=e!==void 0?e:AD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Xi.DEFAULT_MATERIAL_NAME="__DEFAULT";const zs={};class lq extends Error{constructor(e,t){super(e),this.response=t}}class ao extends Xi{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=qs.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(zs[e]!==void 0){zs[e].push({onLoad:t,onProgress:i,onError:r});return}zs[e]=[],zs[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const d=zs[e],f=c.body.getReader(),p=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),m=p?parseInt(p):0,y=m!==0;let M=0;const _=new ReadableStream({start(g){w();function w(){f.read().then(({done:x,value:T})=>{if(x)g.close();else{M+=T.byteLength;const C=new ProgressEvent("progress",{lengthComputable:y,loaded:M,total:m});for(let P=0,R=d.length;P<R;P++){const D=d[P];D.onProgress&&D.onProgress(C)}g.enqueue(T),w()}})}}});return new Response(_)}else throw new lq(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),p=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(p);return c.arrayBuffer().then(y=>m.decode(y))}}}).then(c=>{qs.add(e,c);const d=zs[e];delete zs[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onLoad&&m.onLoad(c)}}).catch(c=>{const d=zs[e];if(d===void 0)throw this.manager.itemError(e),c;delete zs[e];for(let f=0,p=d.length;f<p;f++){const m=d[f];m.onError&&m.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class cq extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ao(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Kd.parse(e[i]);t.push(r)}return t}}class uq extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new V0,l=new ao(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function d(f){l.load(e[f],function(p){const m=s.parse(p,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},c+=1,c===6&&(m.mipmapCount===1&&(a.minFilter=Jt),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,p=e.length;f<p;++f)d(f);else l.load(e,function(f){const p=s.parse(f,!0);if(p.isCubemap){const m=p.mipmaps.length/p.mipmapCount;for(let y=0;y<m;y++){o[y]={mipmaps:[]};for(let M=0;M<p.mipmapCount;M++)o[y].mipmaps.push(p.mipmaps[y*p.mipmapCount+M]),o[y].format=p.format,o[y].width=p.width,o[y].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=Jt),a.format=p.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class Zd extends Xi{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=qs.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=Gd("img");function l(){d(),qs.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){d(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class hq extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=new vf;s.colorSpace=kn;const o=new Zd(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(d){s.images[c]=d,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class dq extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ml,a=new ao(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(d){if(r!==void 0)r(d);else{console.error(d);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:pi,o.wrapT=c.wrapT!==void 0?c.wrapT:pi,o.magFilter=c.magFilter!==void 0?c.magFilter:Jt,o.minFilter=c.minFilter!==void 0?c.minFilter:Jt,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=gs),c.mipmapCount===1&&(o.minFilter=Jt),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class fq extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=new vn,o=new Zd(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class va extends zt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ze(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class CD extends va{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ze(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const N_=new dt,fP=new F,pP=new F;class SM{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new de(512,512),this.map=null,this.mapPass=null,this.matrix=new dt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new yf,this._frameExtents=new de(1,1),this._viewportCount=1,this._viewports=[new Vt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;fP.setFromMatrixPosition(e.matrixWorld),t.position.copy(fP),pP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(pP),t.updateMatrixWorld(),N_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(N_),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(N_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pq extends SM{constructor(){super(new Tn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=_u*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class PD extends va{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new pq}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const mP=new dt,Th=new F,D_=new F;class mq extends SM{constructor(){super(new Tn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new de(4,2),this._viewportCount=6,this._viewports=[new Vt(2,1,1,1),new Vt(0,1,1,1),new Vt(3,1,1,1),new Vt(1,1,1,1),new Vt(3,0,1,1),new Vt(1,0,1,1)],this._cubeDirections=[new F(1,0,0),new F(-1,0,0),new F(0,0,1),new F(0,0,-1),new F(0,1,0),new F(0,-1,0)],this._cubeUps=[new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,1,0),new F(0,0,1),new F(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Th.setFromMatrixPosition(e.matrixWorld),i.position.copy(Th),D_.copy(i.position),D_.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(D_),i.updateMatrixWorld(),r.makeTranslation(-Th.x,-Th.y,-Th.z),mP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mP)}}class RD extends va{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new mq}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class gq extends SM{constructor(){super(new na(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class LD extends va{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(zt.DEFAULT_UP),this.updateMatrix(),this.target=new zt,this.shadow=new gq}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ID extends va{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ND extends va{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class DD{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new F)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class kD extends va{constructor(e=new DD,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class nv extends Xi{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new ao(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=nv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new ze().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new ze().setHex(o.value);break;case"v2":r.uniforms[s].value=new de().fromArray(o.value);break;case"v3":r.uniforms[s].value=new F().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Vt().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Tt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new dt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new de().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new de().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:fD,SpriteMaterial:aM,RawShaderMaterial:pD,ShaderMaterial:Qr,PointsMaterial:cM,MeshPhysicalMaterial:mD,MeshStandardMaterial:gM,MeshPhongMaterial:gD,MeshToonMaterial:vD,MeshNormalMaterial:yD,MeshLambertMaterial:_D,MeshDepthMaterial:iM,MeshDistanceMaterial:rM,MeshBasicMaterial:ma,MeshMatcapMaterial:xD,LineDashedMaterial:SD,LineBasicMaterial:Di,Material:_i};return new t[e]}}class tw{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class OD extends bt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class UD extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ao(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,y){if(t[y]!==void 0)return t[y];const _=m.interleavedBuffers[y],g=s(m,_.buffer),w=$c(_.type,g),x=new z0(w,_.stride);return x.uuid=_.uuid,t[y]=x,x}function s(m,y){if(i[y]!==void 0)return i[y];const _=m.arrayBuffers[y],g=new Uint32Array(_).buffer;return i[y]=g,g}const o=e.isInstancedBufferGeometry?new OD:new bt,a=e.data.index;if(a!==void 0){const m=$c(a.type,a.array);o.setIndex(new Gt(m,1))}const l=e.data.attributes;for(const m in l){const y=l[m];let M;if(y.isInterleavedBufferAttribute){const _=r(e.data,y.data);M=new El(_,y.itemSize,y.offset,y.normalized)}else{const _=$c(y.type,y.array),g=y.isInstancedBufferAttribute?Su:Gt;M=new g(_,y.itemSize,y.normalized)}y.name!==void 0&&(M.name=y.name),y.usage!==void 0&&M.setUsage(y.usage),o.setAttribute(m,M)}const c=e.data.morphAttributes;if(c)for(const m in c){const y=c[m],M=[];for(let _=0,g=y.length;_<g;_++){const w=y[_];let x;if(w.isInterleavedBufferAttribute){const T=r(e.data,w.data);x=new El(T,w.itemSize,w.offset,w.normalized)}else{const T=$c(w.type,w.array);x=new Gt(T,w.itemSize,w.normalized)}w.name!==void 0&&(x.name=w.name),M.push(x)}o.morphAttributes[m]=M}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,y=f.length;m!==y;++m){const M=f[m];o.addGroup(M.start,M.count,M.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const m=new F;p.center!==void 0&&m.fromArray(p.center),o.boundingSphere=new vi(m,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class vq extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?tw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ao(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?tw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ao(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),d=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,d),t!==void 0){let f=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new gl().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new B0().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new UD;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in dP?a=dP[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new nv;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Kd.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(d)}else return l.data?{data:$c(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new xM(t);s=new Zd(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,d=e.length;c<d;c++){const f=e[c],p=f.url;if(Array.isArray(p)){const m=[];for(let y=0,M=p.length;y<M;y++){const _=p[y],g=a(_);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new ml(g.data,g.width,g.height)))}r[f.uuid]=new ol(m)}else{const m=a(f.url);r[f.uuid]=new ol(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:$c(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new Zd(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const d=[];for(let f=0,p=c.length;f<p;f++){const m=c[f],y=await s(m);y!==null&&(y instanceof HTMLImageElement?d.push(y):d.push(new ml(y.data,y.width,y.height)))}i[l.uuid]=new ol(d)}else{const d=await s(l.url);i[l.uuid]=new ol(d)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let d;Array.isArray(c)?(d=new vf,c.length===6&&(d.needsUpdate=!0)):(c&&c.data?d=new ml:d=new vn,c&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=i(a.mapping,yq)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=i(a.wrap[0],gP),d.wrapT=i(a.wrap[1],gP)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=i(a.minFilter,vP)),a.magFilter!==void 0&&(d.magFilter=i(a.magFilter,vP)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(d.compareFunction=a.compareFunction),a.userData!==void 0&&(d.userData=a.userData),r[a.uuid]=d}return r}parseObject(e,t,i,r,s){let o;function a(p){return t[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),t[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const m=[];for(let y=0,M=p.length;y<M;y++){const _=p[y];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),m.push(i[_])}return m}return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),i[p]}}function c(p){return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),r[p]}let d,f;switch(e.type){case"Scene":o=new oM,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ze(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new F0(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new U0(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Tn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new na(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new ID(e.color,e.intensity);break;case"DirectionalLight":o=new LD(e.color,e.intensity);break;case"PointLight":o=new RD(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ND(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new PD(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new CD(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new kD().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),f=l(e.material),o=new JN(d,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),f=l(e.material),o=new Rn(d,f);break;case"InstancedMesh":d=a(e.geometry),f=l(e.material);const p=e.count,m=e.instanceMatrix,y=e.instanceColor;o=new QN(d,f,p),o.instanceMatrix=new Su(new Float32Array(m.array),16),y!==void 0&&(o.instanceColor=new Su(new Float32Array(y.array),y.itemSize));break;case"BatchedMesh":d=a(e.geometry),f=l(e.material),o=new eD(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=d,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(M=>{const _=new Li;_.min.fromArray(M.boxMin),_.max.fromArray(M.boxMax);const g=new vi;return g.radius=M.sphereRadius,g.center.fromArray(M.sphereCenter),{boxInitialized:M.boxInitialized,box:_,sphereInitialized:M.sphereInitialized,sphere:g}}),o._maxGeometryCount=e.maxGeometryCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid);break;case"LOD":o=new ZN;break;case"Line":o=new la(a(e.geometry),l(e.material));break;case"LineLoop":o=new tD(a(e.geometry),l(e.material));break;case"LineSegments":o=new bs(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new nD(a(e.geometry),l(e.material));break;case"Sprite":o=new KN(l(e.material));break;case"Group":o=new Kc;break;case"Bone":o=new lM;break;default:o=new zt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let m=0;m<p.length;m++)o.add(this.parseObject(p[m],t,i,r,s))}if(e.animations!==void 0){const p=e.animations;for(let m=0;m<p.length;m++){const y=p[m];o.animations.push(s[y])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let m=0;m<p.length;m++){const y=p[m],M=o.getObjectByProperty("uuid",y.object);M!==void 0&&o.addLevel(M,y.distance,y.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const yq={UVMapping:R0,CubeReflectionMapping:oo,CubeRefractionMapping:aa,EquirectangularReflectionMapping:Ld,EquirectangularRefractionMapping:Id,CubeUVReflectionMapping:Iu},gP={RepeatWrapping:Nd,ClampToEdgeWrapping:pi,MirroredRepeatWrapping:Dd},vP={NearestFilter:Mn,NearestMipmapNearestFilter:Wg,NearestMipmapLinearFilter:Ka,LinearFilter:Jt,LinearMipmapNearestFilter:ed,LinearMipmapLinearFilter:gs};class _q extends Xi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=qs.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return qs.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),qs.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});qs.add(e,l),s.manager.itemStart(e)}}let Cm;class wM{static getContext(){return Cm===void 0&&(Cm=new(window.AudioContext||window.webkitAudioContext)),Cm}static setContext(e){Cm=e}}class xq extends Xi{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new ao(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);wM.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const yP=new dt,_P=new dt,Da=new dt;class Sq{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Tn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Tn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Da.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(dl*t.fov*.5)/t.zoom;let a,l;_P.elements[12]=-r,yP.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Da.elements[0]=2*t.near/(l-a),Da.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Da),a=-o*t.aspect-s,l=o*t.aspect-s,Da.elements[0]=2*t.near/(l-a),Da.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Da)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_P),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(yP)}}class MM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=xP(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=xP();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function xP(){return(typeof performance>"u"?Date:performance).now()}const ka=new F,SP=new gi,wq=new F,Oa=new F;class Mq extends zt{constructor(){super(),this.type="AudioListener",this.context=wM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new MM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ka,SP,wq),Oa.set(0,0,-1).applyQuaternion(SP),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ka.x,r),t.positionY.linearRampToValueAtTime(ka.y,r),t.positionZ.linearRampToValueAtTime(ka.z,r),t.forwardX.linearRampToValueAtTime(Oa.x,r),t.forwardY.linearRampToValueAtTime(Oa.y,r),t.forwardZ.linearRampToValueAtTime(Oa.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(ka.x,ka.y,ka.z),t.setOrientation(Oa.x,Oa.y,Oa.z,i.x,i.y,i.z)}}class FD extends zt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ua=new F,wP=new gi,Eq=new F,Fa=new F;class Tq extends FD{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ua,wP,Eq),Fa.set(0,0,1).applyQuaternion(wP);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ua.x,i),t.positionY.linearRampToValueAtTime(Ua.y,i),t.positionZ.linearRampToValueAtTime(Ua.z,i),t.orientationX.linearRampToValueAtTime(Fa.x,i),t.orientationY.linearRampToValueAtTime(Fa.y,i),t.orientationZ.linearRampToValueAtTime(Fa.z,i)}else t.setPosition(Ua.x,Ua.y,Ua.z),t.setOrientation(Fa.x,Fa.y,Fa.z)}}class bq{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class zD{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){gi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;gi.multiplyQuaternionsFlat(e,o,e,t,e,i),gi.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const EM="\\[\\]\\.:\\/",Aq=new RegExp("["+EM+"]","g"),TM="[^"+EM+"]",Cq="[^"+EM.replace("\\.","")+"]",Pq=/((?:WC+[\/:])*)/.source.replace("WC",TM),Rq=/(WCOD+)?/.source.replace("WCOD",Cq),Lq=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",TM),Iq=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",TM),Nq=new RegExp("^"+Pq+Rq+Lq+Iq+"$"),Dq=["material","materials","bones","map"];class kq{constructor(e,t,i){const r=i||Dt.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Dt{constructor(e,t,i){this.path=t,this.parsedPath=i||Dt.parseTrackName(t),this.node=Dt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Dt.Composite(e,t,i):new Dt(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Aq,"")}static parseTrackName(e){const t=Nq.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Dq.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Dt.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===c){c=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Dt.Composite=kq;Dt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Dt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Dt.prototype.GetterByBindingType=[Dt.prototype._getValue_direct,Dt.prototype._getValue_array,Dt.prototype._getValue_arrayElement,Dt.prototype._getValue_toArray];Dt.prototype.SetterByBindingTypeAndVersioning=[[Dt.prototype._setValue_direct,Dt.prototype._setValue_direct_setNeedsUpdate,Dt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Dt.prototype._setValue_array,Dt.prototype._setValue_array_setNeedsUpdate,Dt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Dt.prototype._setValue_arrayElement,Dt.prototype._setValue_arrayElement_setNeedsUpdate,Dt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Dt.prototype._setValue_fromArray,Dt.prototype._setValue_fromArray_setNeedsUpdate,Dt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Oq{constructor(){this.isAnimationObjectGroup=!0,this.uuid=cr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let d=0,f=arguments.length;d!==f;++d){const p=arguments[d],m=p.uuid;let y=t[m];if(y===void 0){y=l++,t[m]=y,e.push(p);for(let M=0,_=o;M!==_;++M)s[M].push(new Dt(p,i[M],r[M]))}else if(y<c){a=e[y];const M=--c,_=e[M];t[_.uuid]=y,e[y]=_,t[m]=M,e[M]=p;for(let g=0,w=o;g!==w;++g){const x=s[g],T=x[M];let C=x[y];x[y]=T,C===void 0&&(C=new Dt(p,i[g],r[g])),x[M]=C}}else e[y]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,d=t[c];if(d!==void 0&&d>=s){const f=s++,p=e[f];t[p.uuid]=d,e[d]=p,t[c]=f,e[f]=l;for(let m=0,y=r;m!==y;++m){const M=i[m],_=M[f],g=M[d];M[d]=_,M[f]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],d=c.uuid,f=t[d];if(f!==void 0)if(delete t[d],f<s){const p=--s,m=e[p],y=--o,M=e[y];t[m.uuid]=f,e[f]=m,t[M.uuid]=p,e[p]=M,e.pop();for(let _=0,g=r;_!==g;++_){const w=i[_],x=w[p],T=w[y];w[f]=x,w[p]=T,w.pop()}}else{const p=--o,m=e[p];p>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let y=0,M=r;y!==M;++y){const _=i[y];_[f]=_[p],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,d=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let p=d,m=l.length;p!==m;++p){const y=l[p];f[p]=new Dt(y,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class BD{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:rl,endingEnd:rl};for(let c=0;c!==o;++c){const d=s[c].createInterpolant(null);a[c]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=xN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case q1:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulateAdditive(a);break;case I0:default:for(let d=0,f=l.length;d!==f;++d)l[d].evaluate(o),c[d].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===SN;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===_N){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=sl,r.endingEnd=sl):(e?r.endingStart=this.zeroSlopeAtStart?sl:rl:r.endingStart=Ud,t?r.endingEnd=this.zeroSlopeAtEnd?sl:rl:r.endingEnd=Ud)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const Uq=new Float32Array(1);class Fq extends co{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let d=c[l];d===void 0&&(d={},c[l]=d);for(let f=0;f!==s;++f){const p=r[f],m=p.name;let y=d[m];if(y!==void 0)++y.referenceCount,o[f]=y;else{if(y=o[f],y!==void 0){y._cacheIndex===null&&(++y.referenceCount,this._addInactiveBinding(y,l,m));continue}const M=t&&t._propertyBindings[f].binding.parsedPath;y=new zD(Dt.create(i,m,M),p.ValueTypeName,p.getValueSize()),++y.referenceCount,this._addInactiveBinding(y,l,m),o[f]=y}a[f].resultBuffer=y.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],d=e._byClipCacheIndex;c._byClipCacheIndex=d,l[d]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete f[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new yM(new Float32Array(2),new Float32Array(2),1,Uq),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Kd.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=I0),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const d=new BD(this,o,t,i);return this._bindAction(d,c),this._addInactiveAction(d,a,s),d}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Kd.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const d=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=d,t[d]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class bM{constructor(e){this.value=e}clone(){return new bM(this.value.clone===void 0?this.value:this.value.clone())}}let zq=0;class Bq extends co{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:zq++}),this.name="",this.usage=Vd,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class Vq extends z0{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Hq{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class VD{constructor(e,t,i=0,r=1/0){this.ray=new Dl(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new pl,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return nw(e,this,i,t),i.sort(MP),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)nw(e[r],this,i,t);return i.sort(MP),i}}function MP(n,e){return n.distance-e.distance}function nw(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,o=r.length;s<o;s++)nw(r[s],e,t,!0)}}class iw{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(gn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Gq{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const EP=new de;class jq{constructor(e=new de(1/0,1/0),t=new de(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=EP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,EP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const TP=new F,Pm=new F;class Wq{constructor(e=new F,t=new F){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){TP.subVectors(e,this.start),Pm.subVectors(this.end,this.start);const i=Pm.dot(Pm);let s=Pm.dot(TP)/i;return t&&(s=gn(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const bP=new F;class Xq extends zt{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new bt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,d=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(d),Math.sin(d),1)}i.setAttribute("position",new Ye(r,3));const s=new Di({fog:!1,toneMapped:!1});this.cone=new bs(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),bP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(bP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Co=new F,Rm=new dt,k_=new dt;class $q extends bs{constructor(e){const t=HD(e),i=new bt,r=[],s=[],o=new ze(0,0,1),a=new ze(0,1,0);for(let c=0;c<t.length;c++){const d=t[c];d.parent&&d.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Ye(r,3)),i.setAttribute("color",new Ye(s,3));const l=new Di({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");k_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Rm.multiplyMatrices(k_,a.matrixWorld),Co.setFromMatrixPosition(Rm),r.setXYZ(o,Co.x,Co.y,Co.z),Rm.multiplyMatrices(k_,a.parent.matrixWorld),Co.setFromMatrixPosition(Rm),r.setXYZ(o+1,Co.x,Co.y,Co.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function HD(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,HD(n.children[t]));return e}class qq extends Rn{constructor(e,t,i){const r=new Sf(t,4,2),s=new ma({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Yq=new F,AP=new ze,CP=new ze;class Kq extends zt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new xf(t);r.rotateY(Math.PI*.5),this.material=new ma({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Gt(o,3)),this.add(new Rn(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");AP.copy(this.light.color),CP.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?AP:CP;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Yq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Zq extends bs{constructor(e=10,t=10,i=4473924,r=8947848){i=new ze(i),r=new ze(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let p=0,m=0,y=-a;p<=t;p++,y+=o){l.push(-a,0,y,a,0,y),l.push(y,0,-a,y,0,a);const M=p===s?i:r;M.toArray(c,m),m+=3,M.toArray(c,m),m+=3,M.toArray(c,m),m+=3,M.toArray(c,m),m+=3}const d=new bt;d.setAttribute("position",new Ye(l,3)),d.setAttribute("color",new Ye(c,3));const f=new Di({vertexColors:!0,toneMapped:!1});super(d,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jq extends bs{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new ze(s),o=new ze(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const p=f/t*(Math.PI*2),m=Math.sin(p)*e,y=Math.cos(p)*e;a.push(0,0,0),a.push(m,0,y);const M=f&1?s:o;l.push(M.r,M.g,M.b),l.push(M.r,M.g,M.b)}for(let f=0;f<i;f++){const p=f&1?s:o,m=e-e/i*f;for(let y=0;y<r;y++){let M=y/r*(Math.PI*2),_=Math.sin(M)*m,g=Math.cos(M)*m;a.push(_,0,g),l.push(p.r,p.g,p.b),M=(y+1)/r*(Math.PI*2),_=Math.sin(M)*m,g=Math.cos(M)*m,a.push(_,0,g),l.push(p.r,p.g,p.b)}}const c=new bt;c.setAttribute("position",new Ye(a,3)),c.setAttribute("color",new Ye(l,3));const d=new Di({vertexColors:!0,toneMapped:!1});super(c,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const PP=new F,Lm=new F,RP=new F;class Qq extends zt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new bt;r.setAttribute("position",new Ye([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Di({fog:!1,toneMapped:!1});this.lightPlane=new la(r,s),this.add(this.lightPlane),r=new bt,r.setAttribute("position",new Ye([0,0,0,0,0,1],3)),this.targetLine=new la(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),PP.setFromMatrixPosition(this.light.matrixWorld),Lm.setFromMatrixPosition(this.light.target.matrixWorld),RP.subVectors(Lm,PP),this.lightPlane.lookAt(Lm),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Lm),this.targetLine.scale.z=RP.length()}}const Im=new F,fn=new gf;class eY extends bs{constructor(e){const t=new bt,i=new Di({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(y,M){l(y),l(M)}function l(y){r.push(0,0,0),s.push(0,0,0),o[y]===void 0&&(o[y]=[]),o[y].push(r.length/3-1)}t.setAttribute("position",new Ye(r,3)),t.setAttribute("color",new Ye(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new ze(16755200),d=new ze(16711680),f=new ze(43775),p=new ze(16777215),m=new ze(3355443);this.setColors(c,d,f,p,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;fn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Sn("c",t,e,fn,0,0,-1),Sn("t",t,e,fn,0,0,1),Sn("n1",t,e,fn,-i,-r,-1),Sn("n2",t,e,fn,i,-r,-1),Sn("n3",t,e,fn,-i,r,-1),Sn("n4",t,e,fn,i,r,-1),Sn("f1",t,e,fn,-i,-r,1),Sn("f2",t,e,fn,i,-r,1),Sn("f3",t,e,fn,-i,r,1),Sn("f4",t,e,fn,i,r,1),Sn("u1",t,e,fn,i*.7,r*1.1,-1),Sn("u2",t,e,fn,-i*.7,r*1.1,-1),Sn("u3",t,e,fn,0,r*2,-1),Sn("cf1",t,e,fn,-i,0,1),Sn("cf2",t,e,fn,i,0,1),Sn("cf3",t,e,fn,0,-r,1),Sn("cf4",t,e,fn,0,r,1),Sn("cn1",t,e,fn,-i,0,-1),Sn("cn2",t,e,fn,i,0,-1),Sn("cn3",t,e,fn,0,-r,-1),Sn("cn4",t,e,fn,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Sn(n,e,t,i,r,s,o){Im.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,d=a.length;c<d;c++)l.setXYZ(a[c],Im.x,Im.y,Im.z)}}const Nm=new Li;class tY extends bs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new bt;s.setIndex(new Gt(i,1)),s.setAttribute("position",new Gt(r,3)),super(s,new Di({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Nm.setFromObject(this.object),Nm.isEmpty())return;const t=Nm.min,i=Nm.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class nY extends bs{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new bt;s.setIndex(new Gt(i,1)),s.setAttribute("position",new Ye(r,3)),super(s,new Di({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class iY extends la{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new bt;o.setAttribute("position",new Ye(s,3)),o.computeBoundingSphere(),super(o,new Di({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new bt;l.setAttribute("position",new Ye(a,3)),l.computeBoundingSphere(),this.add(new Rn(l,new ma({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const LP=new F;let Dm,O_;class rY extends zt{constructor(e=new F(0,0,1),t=new F(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Dm===void 0&&(Dm=new bt,Dm.setAttribute("position",new Ye([0,0,0,0,1,0],3)),O_=new ku(0,.5,1,5,1),O_.translate(0,-.5,0)),this.position.copy(t),this.line=new la(Dm,new Di({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Rn(O_,new ma({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{LP.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(LP,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class sY extends bs{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new bt;r.setAttribute("position",new Ye(t,3)),r.setAttribute("color",new Ye(i,3));const s=new Di({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new ze,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oY{constructor(){this.type="ShapePath",this.color=new ze,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new jd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const w=[];for(let x=0,T=g.length;x<T;x++){const C=g[x],P=new gl;P.curves=C.curves,w.push(P)}return w}function i(g,w){const x=w.length;let T=!1;for(let C=x-1,P=0;P<x;C=P++){let R=w[C],D=w[P],X=D.x-R.x,b=D.y-R.y;if(Math.abs(b)>Number.EPSILON){if(b<0&&(R=w[P],X=-X,D=w[C],b=-b),g.y<R.y||g.y>D.y)continue;if(g.y===R.y){if(g.x===R.x)return!0}else{const L=b*(g.x-R.x)-X*(g.y-R.y);if(L===0)return!0;if(L<0)continue;T=!T}}else{if(g.y!==R.y)continue;if(D.x<=g.x&&g.x<=R.x||R.x<=g.x&&g.x<=D.x)return!0}}return T}const r=Es.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new gl,l.curves=a.curves,c.push(l),c;let d=!r(s[0].getPoints());d=e?!d:d;const f=[],p=[];let m=[],y=0,M;p[y]=void 0,m[y]=[];for(let g=0,w=s.length;g<w;g++)a=s[g],M=a.getPoints(),o=r(M),o=e?!o:o,o?(!d&&p[y]&&y++,p[y]={s:new gl,p:M},p[y].s.curves=a.curves,d&&y++,m[y]=[]):m[y].push({h:a,p:M[0]});if(!p[0])return t(s);if(p.length>1){let g=!1,w=0;for(let x=0,T=p.length;x<T;x++)f[x]=[];for(let x=0,T=p.length;x<T;x++){const C=m[x];for(let P=0;P<C.length;P++){const R=C[P];let D=!0;for(let X=0;X<p.length;X++)i(R.p,p[X].p)&&(x!==X&&w++,D?(D=!1,f[X].push(R)):g=!0);D&&f[x].push(R)}}w>0&&g===!1&&(m=f)}let _;for(let g=0,w=p.length;g<w;g++){l=p[g].s,c.push(l),_=m[g];for(let x=0,T=_.length;x<T;x++)l.holes.push(_[x].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:C0}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=C0);const aY=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:B1,AddEquation:Bo,AddOperation:rN,AdditiveAnimationBlendMode:q1,AdditiveBlending:mS,AgXToneMapping:cN,AlphaFormat:fN,AlwaysCompare:LN,AlwaysDepth:Z3,AlwaysStencilFunc:XS,AmbientLight:ID,AnimationAction:BD,AnimationClip:Kd,AnimationLoader:cq,AnimationMixer:Fq,AnimationObjectGroup:Oq,AnimationUtils:sq,ArcCurve:iD,ArrayCamera:$N,ArrowHelper:rY,AttachedBindMode:xS,Audio:FD,AudioAnalyser:bq,AudioContext:wM,AudioListener:Mq,AudioLoader:xq,AxesHelper:sY,BackSide:Ri,BasicDepthPacking:wN,BasicShadowMap:N3,BatchedMesh:eD,Bone:lM,BooleanKeyframeTrack:Ol,Box2:jq,Box3:Li,Box3Helper:nY,BoxGeometry:kl,BoxHelper:tY,BufferAttribute:Gt,BufferGeometry:bt,BufferGeometryLoader:UD,ByteType:hN,Cache:qs,Camera:gf,CameraHelper:eY,CanvasTexture:P$,CapsuleGeometry:G0,CatmullRomCurve3:rD,CineonToneMapping:aN,CircleGeometry:j0,ClampToEdgeWrapping:pi,Clock:MM,Color:ze,ColorKeyframeTrack:_M,ColorManagement:Bt,CompressedArrayTexture:A$,CompressedCubeTexture:C$,CompressedTexture:V0,CompressedTextureLoader:uq,ConeGeometry:W0,ConstantAlphaFactor:q3,ConstantColorFactor:X3,CubeCamera:FN,CubeReflectionMapping:oo,CubeRefractionMapping:aa,CubeTexture:vf,CubeTextureLoader:hq,CubeUVReflectionMapping:Iu,CubicBezierCurve:hM,CubicBezierCurve3:sD,CubicInterpolant:ED,CullFaceBack:pS,CullFaceFront:I3,CullFaceFrontBack:pW,CullFaceNone:L3,Curve:es,CurvePath:aD,CustomBlending:D3,CustomToneMapping:lN,CylinderGeometry:ku,Cylindrical:Gq,Data3DTexture:Q1,DataArrayTexture:D0,DataTexture:ml,DataTextureLoader:dq,DataUtils:M6,DecrementStencilOp:TW,DecrementWrapStencilOp:AW,DefaultLoadingManager:AD,DepthFormat:ea,DepthStencilFormat:Ml,DepthTexture:k0,DetachedBindMode:uN,DirectionalLight:LD,DirectionalLightHelper:Qq,DiscreteInterpolant:TD,DisplayP3ColorSpace:N0,DodecahedronGeometry:X0,DoubleSide:ms,DstAlphaFactor:V3,DstColorFactor:G3,DynamicCopyUsage:HW,DynamicDrawUsage:OW,DynamicReadUsage:zW,EdgesGeometry:lD,EllipseCurve:H0,EqualCompare:AN,EqualDepth:Q3,EqualStencilFunc:LW,EquirectangularReflectionMapping:Ld,EquirectangularRefractionMapping:Id,Euler:mf,EventDispatcher:co,ExtrudeGeometry:q0,FileLoader:ao,Float16BufferAttribute:P6,Float32BufferAttribute:Ye,Float64BufferAttribute:R6,FloatType:ir,Fog:F0,FogExp2:U0,FramebufferTexture:b$,FrontSide:so,Frustum:yf,GLBufferAttribute:Hq,GLSL1:jW,GLSL3:$S,GreaterCompare:CN,GreaterDepth:tN,GreaterEqualCompare:RN,GreaterEqualDepth:eN,GreaterEqualStencilFunc:kW,GreaterStencilFunc:NW,GridHelper:Zq,Group:Kc,HalfFloatType:wl,HemisphereLight:CD,HemisphereLightHelper:Kq,IcosahedronGeometry:Y0,ImageBitmapLoader:_q,ImageLoader:Zd,ImageUtils:J1,IncrementStencilOp:EW,IncrementWrapStencilOp:bW,InstancedBufferAttribute:Su,InstancedBufferGeometry:OD,InstancedInterleavedBuffer:Vq,InstancedMesh:QN,Int16BufferAttribute:A6,Int32BufferAttribute:C6,Int8BufferAttribute:E6,IntType:V1,InterleavedBuffer:z0,InterleavedBufferAttribute:El,Interpolant:wf,InterpolateDiscrete:kd,InterpolateLinear:Od,InterpolateSmooth:sg,InvertStencilOp:CW,KeepStencilOp:$a,KeyframeTrack:ts,LOD:ZN,LatheGeometry:_f,Layers:pl,LessCompare:bN,LessDepth:J3,LessEqualCompare:K1,LessEqualDepth:Rd,LessEqualStencilFunc:IW,LessStencilFunc:RW,Light:va,LightProbe:kD,Line:la,Line3:Wq,LineBasicMaterial:Di,LineCurve:dM,LineCurve3:oD,LineDashedMaterial:SD,LineLoop:tD,LineSegments:bs,LinearDisplayP3ColorSpace:pf,LinearEncoding:Y1,LinearFilter:Jt,LinearInterpolant:yM,LinearMipMapLinearFilter:yW,LinearMipMapNearestFilter:vW,LinearMipmapLinearFilter:gs,LinearMipmapNearestFilter:ed,LinearSRGBColorSpace:Ts,LinearToneMapping:sN,LinearTransfer:Fd,Loader:Xi,LoaderUtils:tw,LoadingManager:xM,LoopOnce:_N,LoopPingPong:SN,LoopRepeat:xN,LuminanceAlphaFormat:mN,LuminanceFormat:pN,MOUSE:Wa,Material:_i,MaterialLoader:nv,MathUtils:s6,Matrix3:Tt,Matrix4:dt,MaxEquation:_S,Mesh:Rn,MeshBasicMaterial:ma,MeshDepthMaterial:iM,MeshDistanceMaterial:rM,MeshLambertMaterial:_D,MeshMatcapMaterial:xD,MeshNormalMaterial:yD,MeshPhongMaterial:gD,MeshPhysicalMaterial:mD,MeshStandardMaterial:gM,MeshToonMaterial:vD,MinEquation:yS,MirroredRepeatWrapping:Dd,MixOperation:iN,MultiplyBlending:vS,MultiplyOperation:ff,NearestFilter:Mn,NearestMipMapLinearFilter:gW,NearestMipMapNearestFilter:mW,NearestMipmapLinearFilter:Ka,NearestMipmapNearestFilter:Wg,NeverCompare:TN,NeverDepth:K3,NeverStencilFunc:PW,NoBlending:Js,NoColorSpace:rr,NoToneMapping:ws,NormalAnimationBlendMode:I0,NormalBlending:hl,NotEqualCompare:PN,NotEqualDepth:nN,NotEqualStencilFunc:DW,NumberKeyframeTrack:qd,Object3D:zt,ObjectLoader:vq,ObjectSpaceNormalMap:EN,OctahedronGeometry:xf,OneFactor:F3,OneMinusConstantAlphaFactor:Y3,OneMinusConstantColorFactor:$3,OneMinusDstAlphaFactor:H3,OneMinusDstColorFactor:j3,OneMinusSrcAlphaFactor:jg,OneMinusSrcColorFactor:B3,OrthographicCamera:na,P3Primaries:Bd,PCFShadowMap:P0,PCFSoftShadowMap:Qh,PMREMGenerator:YS,Path:jd,PerspectiveCamera:Tn,Plane:Gs,PlaneGeometry:Nu,PlaneHelper:iY,PointLight:RD,PointLightHelper:qq,Points:nD,PointsMaterial:cM,PolarGridHelper:Jq,PolyhedronGeometry:ga,PositionalAudio:Tq,PropertyBinding:Dt,PropertyMixer:zD,QuadraticBezierCurve:fM,QuadraticBezierCurve3:pM,Quaternion:gi,QuaternionKeyframeTrack:Ou,QuaternionLinearInterpolant:bD,RED_GREEN_RGTC2_Format:jS,RED_RGTC1_Format:yN,REVISION:C0,RGBADepthPacking:MN,RGBAFormat:Ai,RGBAIntegerFormat:X1,RGBA_ASTC_10x10_Format:FS,RGBA_ASTC_10x5_Format:kS,RGBA_ASTC_10x6_Format:OS,RGBA_ASTC_10x8_Format:US,RGBA_ASTC_12x10_Format:zS,RGBA_ASTC_12x12_Format:BS,RGBA_ASTC_4x4_Format:AS,RGBA_ASTC_5x4_Format:CS,RGBA_ASTC_5x5_Format:PS,RGBA_ASTC_6x5_Format:RS,RGBA_ASTC_6x6_Format:LS,RGBA_ASTC_8x5_Format:IS,RGBA_ASTC_8x6_Format:NS,RGBA_ASTC_8x8_Format:DS,RGBA_BPTC_Format:rg,RGBA_ETC2_EAC_Format:bS,RGBA_PVRTC_2BPPV1_Format:ES,RGBA_PVRTC_4BPPV1_Format:MS,RGBA_S3TC_DXT1_Format:tg,RGBA_S3TC_DXT3_Format:ng,RGBA_S3TC_DXT5_Format:ig,RGB_BPTC_SIGNED_Format:VS,RGB_BPTC_UNSIGNED_Format:HS,RGB_ETC1_Format:$1,RGB_ETC2_Format:TS,RGB_PVRTC_2BPPV1_Format:wS,RGB_PVRTC_4BPPV1_Format:SS,RGB_S3TC_DXT1_Format:eg,RGFormat:vN,RGIntegerFormat:W1,RawShaderMaterial:pD,Ray:Dl,Raycaster:VD,Rec709Primaries:zd,RectAreaLight:ND,RedFormat:gN,RedIntegerFormat:j1,ReinhardToneMapping:oN,RenderTarget:DN,RepeatWrapping:Nd,ReplaceStencilOp:MW,ReverseSubtractEquation:O3,RingGeometry:K0,SIGNED_RED_GREEN_RGTC2_Format:WS,SIGNED_RED_RGTC1_Format:GS,SRGBColorSpace:kn,SRGBTransfer:$t,Scene:oM,ShaderChunk:wt,ShaderLib:qr,ShaderMaterial:Qr,ShadowMaterial:fD,Shape:gl,ShapeGeometry:Z0,ShapePath:oY,ShapeUtils:Es,ShortType:dN,Skeleton:B0,SkeletonHelper:$q,SkinnedMesh:JN,Source:ol,Sphere:vi,SphereGeometry:Sf,Spherical:iw,SphericalHarmonics3:DD,SplineCurve:mM,SpotLight:PD,SpotLightHelper:Xq,Sprite:KN,SpriteMaterial:aM,SrcAlphaFactor:Gg,SrcAlphaSaturateFactor:W3,SrcColorFactor:z3,StaticCopyUsage:VW,StaticDrawUsage:Vd,StaticReadUsage:FW,StereoCamera:Sq,StreamCopyUsage:GW,StreamDrawUsage:UW,StreamReadUsage:BW,StringKeyframeTrack:Ul,SubtractEquation:k3,SubtractiveBlending:gS,TOUCH:Xa,TangentSpaceNormalMap:pa,TetrahedronGeometry:J0,Texture:vn,TextureLoader:fq,TorusGeometry:Q0,TorusKnotGeometry:ev,Triangle:sr,TriangleFanDrawMode:SW,TriangleStripDrawMode:xW,TrianglesDrawMode:_W,TubeGeometry:tv,UVMapping:R0,Uint16BufferAttribute:eM,Uint32BufferAttribute:tM,Uint8BufferAttribute:T6,Uint8ClampedBufferAttribute:b6,Uniform:bM,UniformsGroup:Bq,UniformsLib:Pe,UniformsUtils:UN,UnsignedByteType:Ms,UnsignedInt248Type:Qo,UnsignedIntType:$s,UnsignedShort4444Type:H1,UnsignedShort5551Type:G1,UnsignedShortType:L0,VSMShadowMap:jr,Vector2:de,Vector3:F,Vector4:Vt,VectorKeyframeTrack:Yd,VideoTexture:T$,WebGL1Renderer:qN,WebGL3DRenderTarget:h6,WebGLArrayRenderTarget:u6,WebGLCoordinateSystem:vs,WebGLCubeRenderTarget:zN,WebGLMultipleRenderTargets:d6,WebGLRenderTarget:kr,WebGLRenderer:sM,WebGLUtils:XN,WebGPUCoordinateSystem:Hd,WireframeGeometry:dD,WrapAroundEnding:Ud,ZeroCurvatureEnding:rl,ZeroFactor:U3,ZeroSlopeEnding:sl,ZeroStencilOp:wW,_SRGBAFormat:Xg,createCanvasElement:NN,sRGBEncoding:ta},Symbol.toStringTag,{value:"Module"}));var GD={exports:{}},Fl={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Fl.ConcurrentRoot=1;Fl.ContinuousEventPriority=4;Fl.DefaultEventPriority=16;Fl.DiscreteEventPriority=1;Fl.IdleEventPriority=536870912;Fl.LegacyRoot=0;GD.exports=Fl;var Jc=GD.exports;function lY(n){let e;const t=new Set,i=(c,d)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const p=e;e=d?f:Object.assign({},e,f),t.forEach(m=>m(e,p))}},r=()=>e,s=(c,d=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function m(){const y=d(e);if(!f(p,y)){const M=p;c(p=y,M)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(c,d,f)=>d||f?s(c,d,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const cY=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),IP=cY?G.useEffect:G.useLayoutEffect;function uY(n){const e=typeof n=="function"?lY(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=G.useReducer(_=>_+1,0),o=e.getState(),a=G.useRef(o),l=G.useRef(i),c=G.useRef(r),d=G.useRef(!1),f=G.useRef();f.current===void 0&&(f.current=i(o));let p,m=!1;(a.current!==o||l.current!==i||c.current!==r||d.current)&&(p=i(o),m=!r(f.current,p)),IP(()=>{m&&(f.current=p),a.current=o,l.current=i,c.current=r,d.current=!1});const y=G.useRef(o);IP(()=>{const _=()=>{try{const w=e.getState(),x=l.current(w);c.current(f.current,x)||(a.current=w,f.current=x,s())}catch{d.current=!0,s()}},g=e.subscribe(_);return e.getState()!==y.current&&_(),g},[]);const M=m?p:f.current;return G.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var jD={exports:{}},U_={exports:{}},F_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NP;function hY(){return NP||(NP=1,function(n){function e(N,B){var H=N.length;N.push(B);e:for(;0<H;){var q=H-1>>>1,le=N[q];if(0<r(le,B))N[q]=B,N[H]=le,H=q;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var B=N[0],H=N.pop();if(H!==B){N[0]=H;e:for(var q=0,le=N.length,be=le>>>1;q<be;){var te=2*(q+1)-1,pe=N[te],we=te+1,Re=N[we];if(0>r(pe,H))we<le&&0>r(Re,pe)?(N[q]=Re,N[we]=H,q=we):(N[q]=pe,N[te]=H,q=te);else if(we<le&&0>r(Re,H))N[q]=Re,N[we]=H,q=we;else break e}}return B}function r(N,B){var H=N.sortIndex-B.sortIndex;return H!==0?H:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,y=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var B=t(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=N)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(c)}}function T(N){if(M=!1,x(N),!y)if(t(l)!==null)y=!0,J(C);else{var B=t(c);B!==null&&ae(T,B.startTime-N)}}function C(N,B){y=!1,M&&(M=!1,g(D),D=-1),m=!0;var H=p;try{for(x(B),f=t(l);f!==null&&(!(f.expirationTime>B)||N&&!L());){var q=f.callback;if(typeof q=="function"){f.callback=null,p=f.priorityLevel;var le=q(f.expirationTime<=B);B=n.unstable_now(),typeof le=="function"?f.callback=le:f===t(l)&&i(l),x(B)}else i(l);f=t(l)}if(f!==null)var be=!0;else{var te=t(c);te!==null&&ae(T,te.startTime-B),be=!1}return be}finally{f=null,p=H,m=!1}}var P=!1,R=null,D=-1,X=5,b=-1;function L(){return!(n.unstable_now()-b<X)}function Z(){if(R!==null){var N=n.unstable_now();b=N;var B=!0;try{B=R(!0,N)}finally{B?re():(P=!1,R=null)}}else P=!1}var re;if(typeof w=="function")re=function(){w(Z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ne=W.port2;W.port1.onmessage=Z,re=function(){ne.postMessage(null)}}else re=function(){_(Z,0)};function J(N){R=N,P||(P=!0,re())}function ae(N,B){D=_(function(){N(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,J(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var H=p;p=B;try{return N()}finally{p=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=p;p=N;try{return B()}finally{p=H}},n.unstable_scheduleCallback=function(N,B,H){var q=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,N){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=H+le,N={id:d++,callback:B,priorityLevel:N,startTime:H,expirationTime:le,sortIndex:-1},H>q?(N.sortIndex=H,e(c,N),t(l)===null&&N===t(c)&&(M?(g(D),D=-1):M=!0,ae(T,H-q))):(N.sortIndex=le,e(l,N),y||m||(y=!0,J(C))),N},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(N){var B=p;return function(){var H=p;p=B;try{return N.apply(this,arguments)}finally{p=H}}}}(F_)),F_}var DP;function dY(){return DP||(DP=1,U_.exports=hY()),U_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fY=function(e){var t={},i=G,r=dY(),s=Object.assign;function o(u){for(var h="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),y=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),C=Symbol.iterator;function P(u){return u===null||typeof u!="object"?null:(u=C&&u[C]||u["@@iterator"],typeof u=="function"?u:null)}function R(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case d:return"Fragment";case c:return"Portal";case p:return"Profiler";case f:return"StrictMode";case _:return"Suspense";case g:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case y:return(u.displayName||"Context")+".Consumer";case m:return(u._context.displayName||"Context")+".Provider";case M:var h=u.render;return u=u.displayName,u||(u=h.displayName||h.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case w:return h=u.displayName||null,h!==null?h:R(u.type)||"Memo";case x:h=u._payload,u=u._init;try{return R(u(h))}catch{}}return null}function D(u){var h=u.type;switch(u.tag){case 24:return"Cache";case 9:return(h.displayName||"Context")+".Consumer";case 10:return(h._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=h.render,u=u.displayName||u.name||"",h.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return h;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(h);case 8:return h===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h}return null}function X(u){var h=u,v=u;if(u.alternate)for(;h.return;)h=h.return;else{u=h;do h=u,h.flags&4098&&(v=h.return),u=h.return;while(u)}return h.tag===3?v:null}function b(u){if(X(u)!==u)throw Error(o(188))}function L(u){var h=u.alternate;if(!h){if(h=X(u),h===null)throw Error(o(188));return h!==u?null:u}for(var v=u,S=h;;){var E=v.return;if(E===null)break;var A=E.alternate;if(A===null){if(S=E.return,S!==null){v=S;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===v)return b(E),u;if(A===S)return b(E),h;A=A.sibling}throw Error(o(188))}if(v.return!==S.return)v=E,S=A;else{for(var z=!1,Y=E.child;Y;){if(Y===v){z=!0,v=E,S=A;break}if(Y===S){z=!0,S=E,v=A;break}Y=Y.sibling}if(!z){for(Y=A.child;Y;){if(Y===v){z=!0,v=A,S=E;break}if(Y===S){z=!0,S=A,v=E;break}Y=Y.sibling}if(!z)throw Error(o(189))}}if(v.alternate!==S)throw Error(o(190))}if(v.tag!==3)throw Error(o(188));return v.stateNode.current===v?u:h}function Z(u){return u=L(u),u!==null?re(u):null}function re(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var h=re(u);if(h!==null)return h;u=u.sibling}return null}function W(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){if(u.tag!==4){var h=W(u);if(h!==null)return h}u=u.sibling}return null}var ne=Array.isArray,J=e.getPublicInstance,ae=e.getRootHostContext,N=e.getChildHostContext,B=e.prepareForCommit,H=e.resetAfterCommit,q=e.createInstance,le=e.appendInitialChild,be=e.finalizeInitialChildren,te=e.prepareUpdate,pe=e.shouldSetTextContent,we=e.createTextInstance,Re=e.scheduleTimeout,Je=e.cancelTimeout,He=e.noTimeout,ct=e.isPrimaryRenderer,Ge=e.supportsMutation,j=e.supportsPersistence,Se=e.supportsHydration,fe=e.getInstanceFromNode,Te=e.preparePortalMount,me=e.getCurrentEventPriority,Ke=e.detachDeletedInstance,Ie=e.supportsMicrotasks,O=e.scheduleMicrotask,I=e.supportsTestSelectors,ee=e.findFiberRoot,xe=e.getBoundingRect,ye=e.getTextContent,ge=e.isHiddenSubtree,Xe=e.matchAccessibilityRole,Le=e.setFocusIfFocusable,Ue=e.setupIntersectionObserver,nt=e.appendChild,pt=e.appendChildToContainer,_e=e.commitTextUpdate,Rt=e.commitMount,xt=e.commitUpdate,ht=e.insertBefore,tt=e.insertInContainerBefore,Be=e.removeChild,$=e.removeChildFromContainer,ve=e.resetTextContent,Ne=e.hideInstance,Oe=e.hideTextInstance,ut=e.unhideInstance,V=e.unhideTextInstance,Me=e.clearContainer,Ce=e.cloneInstance,$e=e.createContainerChildSet,qe=e.appendChildToContainerChildSet,St=e.finalizeContainerChildren,Lt=e.replaceContainerChildren,Wt=e.cloneHiddenInstance,yn=e.cloneHiddenTextInstance,Nt=e.canHydrateInstance,Yn=e.canHydrateTextInstance,pr=e.canHydrateSuspenseInstance,Uu=e.isSuspenseInstancePending,Fu=e.isSuspenseInstanceFallback,zl=e.registerSuspenseInstanceRetry,uo=e.getNextHydratableSibling,Bl=e.getFirstHydratableChild,Ef=e.getFirstHydratableChildWithinContainer,Tf=e.getFirstHydratableChildWithinSuspenseInstance,iv=e.hydrateInstance,rv=e.hydrateTextInstance,sv=e.hydrateSuspenseInstance,U=e.getNextHydratableInstanceAfterSuspenseInstance,Q=e.commitHydratedContainer,oe=e.commitHydratedSuspenseInstance,ce=e.clearSuspenseBoundary,se=e.clearSuspenseBoundaryFromContainer,Fe=e.shouldDeleteUnhydratedTailInstances,Qe=e.didNotMatchHydratedContainerTextInstance,st=e.didNotMatchHydratedTextInstance,at;function mt(u){if(at===void 0)try{throw Error()}catch(v){var h=v.stack.trim().match(/\n( *(at )?)/);at=h&&h[1]||""}return`
`+at+u}var ft=!1;function gt(u,h){if(!u||ft)return"";ft=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(h)if(h=function(){throw Error()},Object.defineProperty(h.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(h,[])}catch(Ae){var S=Ae}Reflect.construct(u,[],h)}else{try{h.call()}catch(Ae){S=Ae}u.call(h.prototype)}else{try{throw Error()}catch(Ae){S=Ae}u()}}catch(Ae){if(Ae&&S&&typeof Ae.stack=="string"){for(var E=Ae.stack.split(`
`),A=S.stack.split(`
`),z=E.length-1,Y=A.length-1;1<=z&&0<=Y&&E[z]!==A[Y];)Y--;for(;1<=z&&0<=Y;z--,Y--)if(E[z]!==A[Y]){if(z!==1||Y!==1)do if(z--,Y--,0>Y||E[z]!==A[Y]){var he=`
`+E[z].replace(" at new "," at ");return u.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",u.displayName)),he}while(1<=z&&0<=Y);break}}}finally{ft=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?mt(u):""}var rn=Object.prototype.hasOwnProperty,Kn=[],Yt=-1;function Bn(u){return{current:u}}function lt(u){0>Yt||(u.current=Kn[Yt],Kn[Yt]=null,Yt--)}function je(u,h){Yt++,Kn[Yt]=u.current,u.current=h}var mr={},At=Bn(mr),hn=Bn(!1),ns=mr;function gr(u,h){var v=u.type.contextTypes;if(!v)return mr;var S=u.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===h)return S.__reactInternalMemoizedMaskedChildContext;var E={},A;for(A in v)E[A]=h[A];return S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=h,u.__reactInternalMemoizedMaskedChildContext=E),E}function Vn(u){return u=u.childContextTypes,u!=null}function _n(){lt(hn),lt(At)}function is(u,h,v){if(At.current!==mr)throw Error(o(168));je(At,h),je(hn,v)}function Vl(u,h,v){var S=u.stateNode;if(h=h.childContextTypes,typeof S.getChildContext!="function")return v;S=S.getChildContext();for(var E in S)if(!(E in h))throw Error(o(108,D(u)||"Unknown",E));return s({},v,S)}function Zn(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||mr,ns=At.current,je(At,u),je(hn,hn.current),!0}function Hl(u,h,v){var S=u.stateNode;if(!S)throw Error(o(169));v?(u=Vl(u,h,ns),S.__reactInternalMemoizedMergedChildContext=u,lt(hn),lt(At),je(At,u)):lt(hn),je(hn,v)}var $i=Math.clz32?Math.clz32:uk,bf=Math.log,ck=Math.LN2;function uk(u){return u>>>=0,u===0?32:31-(bf(u)/ck|0)|0}var Af=64,Cf=4194304;function zu(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Pf(u,h){var v=u.pendingLanes;if(v===0)return 0;var S=0,E=u.suspendedLanes,A=u.pingedLanes,z=v&268435455;if(z!==0){var Y=z&~E;Y!==0?S=zu(Y):(A&=z,A!==0&&(S=zu(A)))}else z=v&~E,z!==0?S=zu(z):A!==0&&(S=zu(A));if(S===0)return 0;if(h!==0&&h!==S&&!(h&E)&&(E=S&-S,A=h&-h,E>=A||E===16&&(A&4194240)!==0))return h;if(S&4&&(S|=v&16),h=u.entangledLanes,h!==0)for(u=u.entanglements,h&=S;0<h;)v=31-$i(h),E=1<<v,S|=u[v],h&=~E;return S}function hk(u,h){switch(u){case 1:case 2:case 4:return h+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dk(u,h){for(var v=u.suspendedLanes,S=u.pingedLanes,E=u.expirationTimes,A=u.pendingLanes;0<A;){var z=31-$i(A),Y=1<<z,he=E[z];he===-1?(!(Y&v)||Y&S)&&(E[z]=hk(Y,h)):he<=h&&(u.expiredLanes|=Y),A&=~Y}}function ov(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function av(u){for(var h=[],v=0;31>v;v++)h.push(u);return h}function Bu(u,h,v){u.pendingLanes|=h,h!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,h=31-$i(h),u[h]=v}function fk(u,h){var v=u.pendingLanes&~h;u.pendingLanes=h,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=h,u.mutableReadLanes&=h,u.entangledLanes&=h,h=u.entanglements;var S=u.eventTimes;for(u=u.expirationTimes;0<v;){var E=31-$i(v),A=1<<E;h[E]=0,S[E]=-1,u[E]=-1,v&=~A}}function lv(u,h){var v=u.entangledLanes|=h;for(u=u.entanglements;v;){var S=31-$i(v),E=1<<S;E&h|u[S]&h&&(u[S]|=h),v&=~E}}var Ot=0;function RM(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var cv=r.unstable_scheduleCallback,LM=r.unstable_cancelCallback,pk=r.unstable_shouldYield,mk=r.unstable_requestPaint,Hn=r.unstable_now,uv=r.unstable_ImmediatePriority,gk=r.unstable_UserBlockingPriority,hv=r.unstable_NormalPriority,vk=r.unstable_IdlePriority,Rf=null,rs=null;function yk(u){if(rs&&typeof rs.onCommitFiberRoot=="function")try{rs.onCommitFiberRoot(Rf,u,void 0,(u.current.flags&128)===128)}catch{}}function _k(u,h){return u===h&&(u!==0||1/u===1/h)||u!==u&&h!==h}var ss=typeof Object.is=="function"?Object.is:_k,As=null,Lf=!1,dv=!1;function IM(u){As===null?As=[u]:As.push(u)}function xk(u){Lf=!0,IM(u)}function os(){if(!dv&&As!==null){dv=!0;var u=0,h=Ot;try{var v=As;for(Ot=1;u<v.length;u++){var S=v[u];do S=S(!0);while(S!==null)}As=null,Lf=!1}catch(E){throw As!==null&&(As=As.slice(u+1)),cv(uv,os),E}finally{Ot=h,dv=!1}}return null}var Sk=a.ReactCurrentBatchConfig;function If(u,h){if(ss(u,h))return!0;if(typeof u!="object"||u===null||typeof h!="object"||h===null)return!1;var v=Object.keys(u),S=Object.keys(h);if(v.length!==S.length)return!1;for(S=0;S<v.length;S++){var E=v[S];if(!rn.call(h,E)||!ss(u[E],h[E]))return!1}return!0}function wk(u){switch(u.tag){case 5:return mt(u.type);case 16:return mt("Lazy");case 13:return mt("Suspense");case 19:return mt("SuspenseList");case 0:case 2:case 15:return u=gt(u.type,!1),u;case 11:return u=gt(u.type.render,!1),u;case 1:return u=gt(u.type,!0),u;default:return""}}function Or(u,h){if(u&&u.defaultProps){h=s({},h),u=u.defaultProps;for(var v in u)h[v]===void 0&&(h[v]=u[v]);return h}return h}var Nf=Bn(null),Df=null,Gl=null,fv=null;function pv(){fv=Gl=Df=null}function NM(u,h,v){ct?(je(Nf,h._currentValue),h._currentValue=v):(je(Nf,h._currentValue2),h._currentValue2=v)}function mv(u){var h=Nf.current;lt(Nf),ct?u._currentValue=h:u._currentValue2=h}function gv(u,h,v){for(;u!==null;){var S=u.alternate;if((u.childLanes&h)!==h?(u.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),u===v)break;u=u.return}}function jl(u,h){Df=u,fv=Gl=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&h&&(Ki=!0),u.firstContext=null)}function vr(u){var h=ct?u._currentValue:u._currentValue2;if(fv!==u)if(u={context:u,memoizedValue:h,next:null},Gl===null){if(Df===null)throw Error(o(308));Gl=u,Df.dependencies={lanes:0,firstContext:u}}else Gl=Gl.next=u;return h}var as=null,ho=!1;function vv(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function DM(u,h){u=u.updateQueue,h.updateQueue===u&&(h.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function Cs(u,h){return{eventTime:u,lane:h,tag:0,payload:null,callback:null,next:null}}function fo(u,h){var v=u.updateQueue;v!==null&&(v=v.shared,bn!==null&&u.mode&1&&!(Ct&2)?(u=v.interleaved,u===null?(h.next=h,as===null?as=[v]:as.push(v)):(h.next=u.next,u.next=h),v.interleaved=h):(u=v.pending,u===null?h.next=h:(h.next=u.next,u.next=h),v.pending=h))}function kf(u,h,v){if(h=h.updateQueue,h!==null&&(h=h.shared,(v&4194240)!==0)){var S=h.lanes;S&=u.pendingLanes,v|=S,h.lanes=v,lv(u,v)}}function kM(u,h){var v=u.updateQueue,S=u.alternate;if(S!==null&&(S=S.updateQueue,v===S)){var E=null,A=null;if(v=v.firstBaseUpdate,v!==null){do{var z={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};A===null?E=A=z:A=A.next=z,v=v.next}while(v!==null);A===null?E=A=h:A=A.next=h}else E=A=h;v={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:S.shared,effects:S.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=h:u.next=h,v.lastBaseUpdate=h}function Of(u,h,v,S){var E=u.updateQueue;ho=!1;var A=E.firstBaseUpdate,z=E.lastBaseUpdate,Y=E.shared.pending;if(Y!==null){E.shared.pending=null;var he=Y,Ae=he.next;he.next=null,z===null?A=Ae:z.next=Ae,z=he;var We=u.alternate;We!==null&&(We=We.updateQueue,Y=We.lastBaseUpdate,Y!==z&&(Y===null?We.firstBaseUpdate=Ae:Y.next=Ae,We.lastBaseUpdate=he))}if(A!==null){var vt=E.baseState;z=0,We=Ae=he=null,Y=A;do{var it=Y.lane,jt=Y.eventTime;if((S&it)===it){We!==null&&(We=We.next={eventTime:jt,lane:0,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null});e:{var et=u,oi=Y;switch(it=h,jt=v,oi.tag){case 1:if(et=oi.payload,typeof et=="function"){vt=et.call(jt,vt,it);break e}vt=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=oi.payload,it=typeof et=="function"?et.call(jt,vt,it):et,it==null)break e;vt=s({},vt,it);break e;case 2:ho=!0}}Y.callback!==null&&Y.lane!==0&&(u.flags|=64,it=E.effects,it===null?E.effects=[Y]:it.push(Y))}else jt={eventTime:jt,lane:it,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},We===null?(Ae=We=jt,he=vt):We=We.next=jt,z|=it;if(Y=Y.next,Y===null){if(Y=E.shared.pending,Y===null)break;it=Y,Y=it.next,it.next=null,E.lastBaseUpdate=it,E.shared.pending=null}}while(!0);if(We===null&&(he=vt),E.baseState=he,E.firstBaseUpdate=Ae,E.lastBaseUpdate=We,h=E.shared.interleaved,h!==null){E=h;do z|=E.lane,E=E.next;while(E!==h)}else A===null&&(E.shared.lanes=0);Ql|=z,u.lanes=z,u.memoizedState=vt}}function OM(u,h,v){if(u=h.effects,h.effects=null,u!==null)for(h=0;h<u.length;h++){var S=u[h],E=S.callback;if(E!==null){if(S.callback=null,S=v,typeof E!="function")throw Error(o(191,E));E.call(S)}}}var UM=new i.Component().refs;function yv(u,h,v,S){h=u.memoizedState,v=v(S,h),v=v==null?h:s({},h,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var Uf={isMounted:function(u){return(u=u._reactInternals)?X(u)===u:!1},enqueueSetState:function(u,h,v){u=u._reactInternals;var S=Si(),E=go(u),A=Cs(S,E);A.payload=h,v!=null&&(A.callback=v),fo(u,A),h=wr(u,E,S),h!==null&&kf(h,u,E)},enqueueReplaceState:function(u,h,v){u=u._reactInternals;var S=Si(),E=go(u),A=Cs(S,E);A.tag=1,A.payload=h,v!=null&&(A.callback=v),fo(u,A),h=wr(u,E,S),h!==null&&kf(h,u,E)},enqueueForceUpdate:function(u,h){u=u._reactInternals;var v=Si(),S=go(u),E=Cs(v,S);E.tag=2,h!=null&&(E.callback=h),fo(u,E),h=wr(u,S,v),h!==null&&kf(h,u,S)}};function FM(u,h,v,S,E,A,z){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(S,A,z):h.prototype&&h.prototype.isPureReactComponent?!If(v,S)||!If(E,A):!0}function zM(u,h,v){var S=!1,E=mr,A=h.contextType;return typeof A=="object"&&A!==null?A=vr(A):(E=Vn(h)?ns:At.current,S=h.contextTypes,A=(S=S!=null)?gr(u,E):mr),h=new h(v,A),u.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Uf,u.stateNode=h,h._reactInternals=u,S&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=A),h}function BM(u,h,v,S){u=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(v,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(v,S),h.state!==u&&Uf.enqueueReplaceState(h,h.state,null)}function _v(u,h,v,S){var E=u.stateNode;E.props=v,E.state=u.memoizedState,E.refs=UM,vv(u);var A=h.contextType;typeof A=="object"&&A!==null?E.context=vr(A):(A=Vn(h)?ns:At.current,E.context=gr(u,A)),E.state=u.memoizedState,A=h.getDerivedStateFromProps,typeof A=="function"&&(yv(u,h,A,v),E.state=u.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(h=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),h!==E.state&&Uf.enqueueReplaceState(E,E.state,null),Of(u,v,E,S),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}var Wl=[],Xl=0,Ff=null,zf=0,yr=[],_r=0,ya=null,Ps=1,Rs="";function _a(u,h){Wl[Xl++]=zf,Wl[Xl++]=Ff,Ff=u,zf=h}function VM(u,h,v){yr[_r++]=Ps,yr[_r++]=Rs,yr[_r++]=ya,ya=u;var S=Ps;u=Rs;var E=32-$i(S)-1;S&=~(1<<E),v+=1;var A=32-$i(h)+E;if(30<A){var z=E-E%5;A=(S&(1<<z)-1).toString(32),S>>=z,E-=z,Ps=1<<32-$i(h)+E|v<<E|S,Rs=A+u}else Ps=1<<A|v<<E|S,Rs=u}function xv(u){u.return!==null&&(_a(u,1),VM(u,1,0))}function Sv(u){for(;u===Ff;)Ff=Wl[--Xl],Wl[Xl]=null,zf=Wl[--Xl],Wl[Xl]=null;for(;u===ya;)ya=yr[--_r],yr[_r]=null,Rs=yr[--_r],yr[_r]=null,Ps=yr[--_r],yr[_r]=null}var qi=null,Yi=null,tn=!1,Vu=!1,Ur=null;function HM(u,h){var v=Mr(5,null,null,0);v.elementType="DELETED",v.stateNode=h,v.return=u,h=u.deletions,h===null?(u.deletions=[v],u.flags|=16):h.push(v)}function GM(u,h){switch(u.tag){case 5:return h=Nt(h,u.type,u.pendingProps),h!==null?(u.stateNode=h,qi=u,Yi=Bl(h),!0):!1;case 6:return h=Yn(h,u.pendingProps),h!==null?(u.stateNode=h,qi=u,Yi=null,!0):!1;case 13:if(h=pr(h),h!==null){var v=ya!==null?{id:Ps,overflow:Rs}:null;return u.memoizedState={dehydrated:h,treeContext:v,retryLane:1073741824},v=Mr(18,null,null,0),v.stateNode=h,v.return=u,u.child=v,qi=u,Yi=null,!0}return!1;default:return!1}}function wv(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Mv(u){if(tn){var h=Yi;if(h){var v=h;if(!GM(u,h)){if(wv(u))throw Error(o(418));h=uo(v);var S=qi;h&&GM(u,h)?HM(S,v):(u.flags=u.flags&-4097|2,tn=!1,qi=u)}}else{if(wv(u))throw Error(o(418));u.flags=u.flags&-4097|2,tn=!1,qi=u}}}function jM(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;qi=u}function Hu(u){if(!Se||u!==qi)return!1;if(!tn)return jM(u),tn=!0,!1;if(u.tag!==3&&(u.tag!==5||Fe(u.type)&&!pe(u.type,u.memoizedProps))){var h=Yi;if(h){if(wv(u)){for(u=Yi;u;)u=uo(u);throw Error(o(418))}for(;h;)HM(u,h),h=uo(h)}}if(jM(u),u.tag===13){if(!Se)throw Error(o(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));Yi=U(u)}else Yi=qi?uo(u.stateNode):null;return!0}function $l(){Se&&(Yi=qi=null,Vu=tn=!1)}function Ev(u){Ur===null?Ur=[u]:Ur.push(u)}function Gu(u,h,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(o(309));var S=v.stateNode}if(!S)throw Error(o(147,u));var E=S,A=""+u;return h!==null&&h.ref!==null&&typeof h.ref=="function"&&h.ref._stringRef===A?h.ref:(h=function(z){var Y=E.refs;Y===UM&&(Y=E.refs={}),z===null?delete Y[A]:Y[A]=z},h._stringRef=A,h)}if(typeof u!="string")throw Error(o(284));if(!v._owner)throw Error(o(290,u))}return u}function Bf(u,h){throw u=Object.prototype.toString.call(h),Error(o(31,u==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":u))}function WM(u){var h=u._init;return h(u._payload)}function XM(u){function h(ie,K){if(u){var ue=ie.deletions;ue===null?(ie.deletions=[K],ie.flags|=16):ue.push(K)}}function v(ie,K){if(!u)return null;for(;K!==null;)h(ie,K),K=K.sibling;return null}function S(ie,K){for(ie=new Map;K!==null;)K.key!==null?ie.set(K.key,K):ie.set(K.index,K),K=K.sibling;return ie}function E(ie,K){return ie=yo(ie,K),ie.index=0,ie.sibling=null,ie}function A(ie,K,ue){return ie.index=ue,u?(ue=ie.alternate,ue!==null?(ue=ue.index,ue<K?(ie.flags|=2,K):ue):(ie.flags|=2,K)):(ie.flags|=1048576,K)}function z(ie){return u&&ie.alternate===null&&(ie.flags|=2),ie}function Y(ie,K,ue,ke){return K===null||K.tag!==6?(K=ay(ue,ie.mode,ke),K.return=ie,K):(K=E(K,ue),K.return=ie,K)}function he(ie,K,ue,ke){var Ze=ue.type;return Ze===d?We(ie,K,ue.props.children,ke,ue.key):K!==null&&(K.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===x&&WM(Ze)===K.type)?(ke=E(K,ue.props),ke.ref=Gu(ie,K,ue),ke.return=ie,ke):(ke=vp(ue.type,ue.key,ue.props,null,ie.mode,ke),ke.ref=Gu(ie,K,ue),ke.return=ie,ke)}function Ae(ie,K,ue,ke){return K===null||K.tag!==4||K.stateNode.containerInfo!==ue.containerInfo||K.stateNode.implementation!==ue.implementation?(K=ly(ue,ie.mode,ke),K.return=ie,K):(K=E(K,ue.children||[]),K.return=ie,K)}function We(ie,K,ue,ke,Ze){return K===null||K.tag!==7?(K=ba(ue,ie.mode,ke,Ze),K.return=ie,K):(K=E(K,ue),K.return=ie,K)}function vt(ie,K,ue){if(typeof K=="string"&&K!==""||typeof K=="number")return K=ay(""+K,ie.mode,ue),K.return=ie,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case l:return ue=vp(K.type,K.key,K.props,null,ie.mode,ue),ue.ref=Gu(ie,null,K),ue.return=ie,ue;case c:return K=ly(K,ie.mode,ue),K.return=ie,K;case x:var ke=K._init;return vt(ie,ke(K._payload),ue)}if(ne(K)||P(K))return K=ba(K,ie.mode,ue,null),K.return=ie,K;Bf(ie,K)}return null}function it(ie,K,ue,ke){var Ze=K!==null?K.key:null;if(typeof ue=="string"&&ue!==""||typeof ue=="number")return Ze!==null?null:Y(ie,K,""+ue,ke);if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:return ue.key===Ze?he(ie,K,ue,ke):null;case c:return ue.key===Ze?Ae(ie,K,ue,ke):null;case x:return Ze=ue._init,it(ie,K,Ze(ue._payload),ke)}if(ne(ue)||P(ue))return Ze!==null?null:We(ie,K,ue,ke,null);Bf(ie,ue)}return null}function jt(ie,K,ue,ke,Ze){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ie=ie.get(ue)||null,Y(K,ie,""+ke,Ze);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case l:return ie=ie.get(ke.key===null?ue:ke.key)||null,he(K,ie,ke,Ze);case c:return ie=ie.get(ke.key===null?ue:ke.key)||null,Ae(K,ie,ke,Ze);case x:var Mt=ke._init;return jt(ie,K,ue,Mt(ke._payload),Ze)}if(ne(ke)||P(ke))return ie=ie.get(ue)||null,We(K,ie,ke,Ze,null);Bf(K,ke)}return null}function et(ie,K,ue,ke){for(var Ze=null,Mt=null,yt=K,Ut=K=0,jn=null;yt!==null&&Ut<ue.length;Ut++){yt.index>Ut?(jn=yt,yt=null):jn=yt.sibling;var Ft=it(ie,yt,ue[Ut],ke);if(Ft===null){yt===null&&(yt=jn);break}u&&yt&&Ft.alternate===null&&h(ie,yt),K=A(Ft,K,Ut),Mt===null?Ze=Ft:Mt.sibling=Ft,Mt=Ft,yt=jn}if(Ut===ue.length)return v(ie,yt),tn&&_a(ie,Ut),Ze;if(yt===null){for(;Ut<ue.length;Ut++)yt=vt(ie,ue[Ut],ke),yt!==null&&(K=A(yt,K,Ut),Mt===null?Ze=yt:Mt.sibling=yt,Mt=yt);return tn&&_a(ie,Ut),Ze}for(yt=S(ie,yt);Ut<ue.length;Ut++)jn=jt(yt,ie,Ut,ue[Ut],ke),jn!==null&&(u&&jn.alternate!==null&&yt.delete(jn.key===null?Ut:jn.key),K=A(jn,K,Ut),Mt===null?Ze=jn:Mt.sibling=jn,Mt=jn);return u&&yt.forEach(function(_o){return h(ie,_o)}),tn&&_a(ie,Ut),Ze}function oi(ie,K,ue,ke){var Ze=P(ue);if(typeof Ze!="function")throw Error(o(150));if(ue=Ze.call(ue),ue==null)throw Error(o(151));for(var Mt=Ze=null,yt=K,Ut=K=0,jn=null,Ft=ue.next();yt!==null&&!Ft.done;Ut++,Ft=ue.next()){yt.index>Ut?(jn=yt,yt=null):jn=yt.sibling;var _o=it(ie,yt,Ft.value,ke);if(_o===null){yt===null&&(yt=jn);break}u&&yt&&_o.alternate===null&&h(ie,yt),K=A(_o,K,Ut),Mt===null?Ze=_o:Mt.sibling=_o,Mt=_o,yt=jn}if(Ft.done)return v(ie,yt),tn&&_a(ie,Ut),Ze;if(yt===null){for(;!Ft.done;Ut++,Ft=ue.next())Ft=vt(ie,Ft.value,ke),Ft!==null&&(K=A(Ft,K,Ut),Mt===null?Ze=Ft:Mt.sibling=Ft,Mt=Ft);return tn&&_a(ie,Ut),Ze}for(yt=S(ie,yt);!Ft.done;Ut++,Ft=ue.next())Ft=jt(yt,ie,Ut,Ft.value,ke),Ft!==null&&(u&&Ft.alternate!==null&&yt.delete(Ft.key===null?Ut:Ft.key),K=A(Ft,K,Ut),Mt===null?Ze=Ft:Mt.sibling=Ft,Mt=Ft);return u&&yt.forEach(function(Jk){return h(ie,Jk)}),tn&&_a(ie,Ut),Ze}function Er(ie,K,ue,ke){if(typeof ue=="object"&&ue!==null&&ue.type===d&&ue.key===null&&(ue=ue.props.children),typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case l:e:{for(var Ze=ue.key,Mt=K;Mt!==null;){if(Mt.key===Ze){if(Ze=ue.type,Ze===d){if(Mt.tag===7){v(ie,Mt.sibling),K=E(Mt,ue.props.children),K.return=ie,ie=K;break e}}else if(Mt.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===x&&WM(Ze)===Mt.type){v(ie,Mt.sibling),K=E(Mt,ue.props),K.ref=Gu(ie,Mt,ue),K.return=ie,ie=K;break e}v(ie,Mt);break}else h(ie,Mt);Mt=Mt.sibling}ue.type===d?(K=ba(ue.props.children,ie.mode,ke,ue.key),K.return=ie,ie=K):(ke=vp(ue.type,ue.key,ue.props,null,ie.mode,ke),ke.ref=Gu(ie,K,ue),ke.return=ie,ie=ke)}return z(ie);case c:e:{for(Mt=ue.key;K!==null;){if(K.key===Mt)if(K.tag===4&&K.stateNode.containerInfo===ue.containerInfo&&K.stateNode.implementation===ue.implementation){v(ie,K.sibling),K=E(K,ue.children||[]),K.return=ie,ie=K;break e}else{v(ie,K);break}else h(ie,K);K=K.sibling}K=ly(ue,ie.mode,ke),K.return=ie,ie=K}return z(ie);case x:return Mt=ue._init,Er(ie,K,Mt(ue._payload),ke)}if(ne(ue))return et(ie,K,ue,ke);if(P(ue))return oi(ie,K,ue,ke);Bf(ie,ue)}return typeof ue=="string"&&ue!==""||typeof ue=="number"?(ue=""+ue,K!==null&&K.tag===6?(v(ie,K.sibling),K=E(K,ue),K.return=ie,ie=K):(v(ie,K),K=ay(ue,ie.mode,ke),K.return=ie,ie=K),z(ie)):v(ie,K)}return Er}var ql=XM(!0),$M=XM(!1),ju={},xr=Bn(ju),Wu=Bn(ju),Yl=Bn(ju);function ls(u){if(u===ju)throw Error(o(174));return u}function Tv(u,h){je(Yl,h),je(Wu,u),je(xr,ju),u=ae(h),lt(xr),je(xr,u)}function Kl(){lt(xr),lt(Wu),lt(Yl)}function qM(u){var h=ls(Yl.current),v=ls(xr.current);h=N(v,u.type,h),v!==h&&(je(Wu,u),je(xr,h))}function bv(u){Wu.current===u&&(lt(xr),lt(Wu))}var sn=Bn(0);function Vf(u){for(var h=u;h!==null;){if(h.tag===13){var v=h.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||Uu(v)||Fu(v)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if(h.flags&128)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var Av=[];function Cv(){for(var u=0;u<Av.length;u++){var h=Av[u];ct?h._workInProgressVersionPrimary=null:h._workInProgressVersionSecondary=null}Av.length=0}var Hf=a.ReactCurrentDispatcher,Sr=a.ReactCurrentBatchConfig,Zl=0,dn=null,ii=null,Gn=null,Gf=!1,Xu=!1,$u=0,Mk=0;function ri(){throw Error(o(321))}function Pv(u,h){if(h===null)return!1;for(var v=0;v<h.length&&v<u.length;v++)if(!ss(u[v],h[v]))return!1;return!0}function Rv(u,h,v,S,E,A){if(Zl=A,dn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Hf.current=u===null||u.memoizedState===null?Ak:Ck,u=v(S,E),Xu){A=0;do{if(Xu=!1,$u=0,25<=A)throw Error(o(301));A+=1,Gn=ii=null,h.updateQueue=null,Hf.current=Pk,u=v(S,E)}while(Xu)}if(Hf.current=qf,h=ii!==null&&ii.next!==null,Zl=0,Gn=ii=dn=null,Gf=!1,h)throw Error(o(300));return u}function Lv(){var u=$u!==0;return $u=0,u}function Ls(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gn===null?dn.memoizedState=Gn=u:Gn=Gn.next=u,Gn}function cs(){if(ii===null){var u=dn.alternate;u=u!==null?u.memoizedState:null}else u=ii.next;var h=Gn===null?dn.memoizedState:Gn.next;if(h!==null)Gn=h,ii=u;else{if(u===null)throw Error(o(310));ii=u,u={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},Gn===null?dn.memoizedState=Gn=u:Gn=Gn.next=u}return Gn}function xa(u,h){return typeof h=="function"?h(u):h}function jf(u){var h=cs(),v=h.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var S=ii,E=S.baseQueue,A=v.pending;if(A!==null){if(E!==null){var z=E.next;E.next=A.next,A.next=z}S.baseQueue=E=A,v.pending=null}if(E!==null){A=E.next,S=S.baseState;var Y=z=null,he=null,Ae=A;do{var We=Ae.lane;if((Zl&We)===We)he!==null&&(he=he.next={lane:0,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null}),S=Ae.hasEagerState?Ae.eagerState:u(S,Ae.action);else{var vt={lane:We,action:Ae.action,hasEagerState:Ae.hasEagerState,eagerState:Ae.eagerState,next:null};he===null?(Y=he=vt,z=S):he=he.next=vt,dn.lanes|=We,Ql|=We}Ae=Ae.next}while(Ae!==null&&Ae!==A);he===null?z=S:he.next=Y,ss(S,h.memoizedState)||(Ki=!0),h.memoizedState=S,h.baseState=z,h.baseQueue=he,v.lastRenderedState=S}if(u=v.interleaved,u!==null){E=u;do A=E.lane,dn.lanes|=A,Ql|=A,E=E.next;while(E!==u)}else E===null&&(v.lanes=0);return[h.memoizedState,v.dispatch]}function Wf(u){var h=cs(),v=h.queue;if(v===null)throw Error(o(311));v.lastRenderedReducer=u;var S=v.dispatch,E=v.pending,A=h.memoizedState;if(E!==null){v.pending=null;var z=E=E.next;do A=u(A,z.action),z=z.next;while(z!==E);ss(A,h.memoizedState)||(Ki=!0),h.memoizedState=A,h.baseQueue===null&&(h.baseState=A),v.lastRenderedState=A}return[A,S]}function YM(){}function KM(u,h){var v=dn,S=cs(),E=h(),A=!ss(S.memoizedState,E);if(A&&(S.memoizedState=E,Ki=!0),S=S.queue,Yu(QM.bind(null,v,S,u),[u]),S.getSnapshot!==h||A||Gn!==null&&Gn.memoizedState.tag&1){if(v.flags|=2048,qu(9,JM.bind(null,v,S,E,h),void 0,null),bn===null)throw Error(o(349));Zl&30||ZM(v,h,E)}return E}function ZM(u,h,v){u.flags|=16384,u={getSnapshot:h,value:v},h=dn.updateQueue,h===null?(h={lastEffect:null,stores:null},dn.updateQueue=h,h.stores=[u]):(v=h.stores,v===null?h.stores=[u]:v.push(u))}function JM(u,h,v,S){h.value=v,h.getSnapshot=S,eE(h)&&wr(u,1,-1)}function QM(u,h,v){return v(function(){eE(h)&&wr(u,1,-1)})}function eE(u){var h=u.getSnapshot;u=u.value;try{var v=h();return!ss(u,v)}catch{return!0}}function Iv(u){var h=Ls();return typeof u=="function"&&(u=u()),h.memoizedState=h.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:u},h.queue=u,u=u.dispatch=bk.bind(null,dn,u),[h.memoizedState,u]}function qu(u,h,v,S){return u={tag:u,create:h,destroy:v,deps:S,next:null},h=dn.updateQueue,h===null?(h={lastEffect:null,stores:null},dn.updateQueue=h,h.lastEffect=u.next=u):(v=h.lastEffect,v===null?h.lastEffect=u.next=u:(S=v.next,v.next=u,u.next=S,h.lastEffect=u)),u}function tE(){return cs().memoizedState}function Xf(u,h,v,S){var E=Ls();dn.flags|=u,E.memoizedState=qu(1|h,v,void 0,S===void 0?null:S)}function $f(u,h,v,S){var E=cs();S=S===void 0?null:S;var A=void 0;if(ii!==null){var z=ii.memoizedState;if(A=z.destroy,S!==null&&Pv(S,z.deps)){E.memoizedState=qu(h,v,A,S);return}}dn.flags|=u,E.memoizedState=qu(1|h,v,A,S)}function Nv(u,h){return Xf(8390656,8,u,h)}function Yu(u,h){return $f(2048,8,u,h)}function nE(u,h){return $f(4,2,u,h)}function iE(u,h){return $f(4,4,u,h)}function rE(u,h){if(typeof h=="function")return u=u(),h(u),function(){h(null)};if(h!=null)return u=u(),h.current=u,function(){h.current=null}}function sE(u,h,v){return v=v!=null?v.concat([u]):null,$f(4,4,rE.bind(null,h,u),v)}function Dv(){}function oE(u,h){var v=cs();h=h===void 0?null:h;var S=v.memoizedState;return S!==null&&h!==null&&Pv(h,S[1])?S[0]:(v.memoizedState=[u,h],u)}function aE(u,h){var v=cs();h=h===void 0?null:h;var S=v.memoizedState;return S!==null&&h!==null&&Pv(h,S[1])?S[0]:(u=u(),v.memoizedState=[u,h],u)}function Ek(u,h){var v=Ot;Ot=v!==0&&4>v?v:4,u(!0);var S=Sr.transition;Sr.transition={};try{u(!1),h()}finally{Ot=v,Sr.transition=S}}function lE(){return cs().memoizedState}function Tk(u,h,v){var S=go(u);v={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null},cE(u)?uE(h,v):(hE(u,h,v),v=Si(),u=wr(u,S,v),u!==null&&dE(u,h,S))}function bk(u,h,v){var S=go(u),E={lane:S,action:v,hasEagerState:!1,eagerState:null,next:null};if(cE(u))uE(h,E);else{hE(u,h,E);var A=u.alternate;if(u.lanes===0&&(A===null||A.lanes===0)&&(A=h.lastRenderedReducer,A!==null))try{var z=h.lastRenderedState,Y=A(z,v);if(E.hasEagerState=!0,E.eagerState=Y,ss(Y,z))return}catch{}finally{}v=Si(),u=wr(u,S,v),u!==null&&dE(u,h,S)}}function cE(u){var h=u.alternate;return u===dn||h!==null&&h===dn}function uE(u,h){Xu=Gf=!0;var v=u.pending;v===null?h.next=h:(h.next=v.next,v.next=h),u.pending=h}function hE(u,h,v){bn!==null&&u.mode&1&&!(Ct&2)?(u=h.interleaved,u===null?(v.next=v,as===null?as=[h]:as.push(h)):(v.next=u.next,u.next=v),h.interleaved=v):(u=h.pending,u===null?v.next=v:(v.next=u.next,u.next=v),h.pending=v)}function dE(u,h,v){if(v&4194240){var S=h.lanes;S&=u.pendingLanes,v|=S,h.lanes=v,lv(u,v)}}var qf={readContext:vr,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},Ak={readContext:vr,useCallback:function(u,h){return Ls().memoizedState=[u,h===void 0?null:h],u},useContext:vr,useEffect:Nv,useImperativeHandle:function(u,h,v){return v=v!=null?v.concat([u]):null,Xf(4194308,4,rE.bind(null,h,u),v)},useLayoutEffect:function(u,h){return Xf(4194308,4,u,h)},useInsertionEffect:function(u,h){return Xf(4,2,u,h)},useMemo:function(u,h){var v=Ls();return h=h===void 0?null:h,u=u(),v.memoizedState=[u,h],u},useReducer:function(u,h,v){var S=Ls();return h=v!==void 0?v(h):h,S.memoizedState=S.baseState=h,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:h},S.queue=u,u=u.dispatch=Tk.bind(null,dn,u),[S.memoizedState,u]},useRef:function(u){var h=Ls();return u={current:u},h.memoizedState=u},useState:Iv,useDebugValue:Dv,useDeferredValue:function(u){var h=Iv(u),v=h[0],S=h[1];return Nv(function(){var E=Sr.transition;Sr.transition={};try{S(u)}finally{Sr.transition=E}},[u]),v},useTransition:function(){var u=Iv(!1),h=u[0];return u=Ek.bind(null,u[1]),Ls().memoizedState=u,[h,u]},useMutableSource:function(){},useSyncExternalStore:function(u,h,v){var S=dn,E=Ls();if(tn){if(v===void 0)throw Error(o(407));v=v()}else{if(v=h(),bn===null)throw Error(o(349));Zl&30||ZM(S,h,v)}E.memoizedState=v;var A={value:v,getSnapshot:h};return E.queue=A,Nv(QM.bind(null,S,A,u),[u]),S.flags|=2048,qu(9,JM.bind(null,S,A,v,h),void 0,null),v},useId:function(){var u=Ls(),h=bn.identifierPrefix;if(tn){var v=Rs,S=Ps;v=(S&~(1<<32-$i(S)-1)).toString(32)+v,h=":"+h+"R"+v,v=$u++,0<v&&(h+="H"+v.toString(32)),h+=":"}else v=Mk++,h=":"+h+"r"+v.toString(32)+":";return u.memoizedState=h},unstable_isNewReconciler:!1},Ck={readContext:vr,useCallback:oE,useContext:vr,useEffect:Yu,useImperativeHandle:sE,useInsertionEffect:nE,useLayoutEffect:iE,useMemo:aE,useReducer:jf,useRef:tE,useState:function(){return jf(xa)},useDebugValue:Dv,useDeferredValue:function(u){var h=jf(xa),v=h[0],S=h[1];return Yu(function(){var E=Sr.transition;Sr.transition={};try{S(u)}finally{Sr.transition=E}},[u]),v},useTransition:function(){var u=jf(xa)[0],h=cs().memoizedState;return[u,h]},useMutableSource:YM,useSyncExternalStore:KM,useId:lE,unstable_isNewReconciler:!1},Pk={readContext:vr,useCallback:oE,useContext:vr,useEffect:Yu,useImperativeHandle:sE,useInsertionEffect:nE,useLayoutEffect:iE,useMemo:aE,useReducer:Wf,useRef:tE,useState:function(){return Wf(xa)},useDebugValue:Dv,useDeferredValue:function(u){var h=Wf(xa),v=h[0],S=h[1];return Yu(function(){var E=Sr.transition;Sr.transition={};try{S(u)}finally{Sr.transition=E}},[u]),v},useTransition:function(){var u=Wf(xa)[0],h=cs().memoizedState;return[u,h]},useMutableSource:YM,useSyncExternalStore:KM,useId:lE,unstable_isNewReconciler:!1};function kv(u,h){try{var v="",S=h;do v+=wk(S),S=S.return;while(S);var E=v}catch(A){E=`
Error generating stack: `+A.message+`
`+A.stack}return{value:u,source:h,stack:E}}function Ov(u,h){try{console.error(h.value)}catch(v){setTimeout(function(){throw v})}}var Rk=typeof WeakMap=="function"?WeakMap:Map;function fE(u,h,v){v=Cs(-1,v),v.tag=3,v.payload={element:null};var S=h.value;return v.callback=function(){up||(up=!0,ey=S),Ov(u,h)},v}function pE(u,h,v){v=Cs(-1,v),v.tag=3;var S=u.type.getDerivedStateFromError;if(typeof S=="function"){var E=h.value;v.payload=function(){return S(E)},v.callback=function(){Ov(u,h)}}var A=u.stateNode;return A!==null&&typeof A.componentDidCatch=="function"&&(v.callback=function(){Ov(u,h),typeof S!="function"&&(po===null?po=new Set([this]):po.add(this));var z=h.stack;this.componentDidCatch(h.value,{componentStack:z!==null?z:""})}),v}function mE(u,h,v){var S=u.pingCache;if(S===null){S=u.pingCache=new Rk;var E=new Set;S.set(h,E)}else E=S.get(h),E===void 0&&(E=new Set,S.set(h,E));E.has(v)||(E.add(v),u=jk.bind(null,u,h,v),h.then(u,u))}function gE(u){do{var h;if((h=u.tag===13)&&(h=u.memoizedState,h=h!==null?h.dehydrated!==null:!0),h)return u;u=u.return}while(u!==null);return null}function vE(u,h,v,S,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===h?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(h=Cs(-1,1),h.tag=2,fo(v,h))),v.lanes|=1),u)}function us(u){u.flags|=4}function yE(u,h){if(u!==null&&u.child===h.child)return!0;if(h.flags&16)return!1;for(u=h.child;u!==null;){if(u.flags&12854||u.subtreeFlags&12854)return!1;u=u.sibling}return!0}var Ku,Zu,Yf,Kf;if(Ge)Ku=function(u,h){for(var v=h.child;v!==null;){if(v.tag===5||v.tag===6)le(u,v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===h)break;for(;v.sibling===null;){if(v.return===null||v.return===h)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Zu=function(){},Yf=function(u,h,v,S,E){if(u=u.memoizedProps,u!==S){var A=h.stateNode,z=ls(xr.current);v=te(A,v,u,S,E,z),(h.updateQueue=v)&&us(h)}},Kf=function(u,h,v,S){v!==S&&us(h)};else if(j){Ku=function(u,h,v,S){for(var E=h.child;E!==null;){if(E.tag===5){var A=E.stateNode;v&&S&&(A=Wt(A,E.type,E.memoizedProps,E)),le(u,A)}else if(E.tag===6)A=E.stateNode,v&&S&&(A=yn(A,E.memoizedProps,E)),le(u,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),Ku(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};var _E=function(u,h,v,S){for(var E=h.child;E!==null;){if(E.tag===5){var A=E.stateNode;v&&S&&(A=Wt(A,E.type,E.memoizedProps,E)),qe(u,A)}else if(E.tag===6)A=E.stateNode,v&&S&&(A=yn(A,E.memoizedProps,E)),qe(u,A);else if(E.tag!==4){if(E.tag===22&&E.memoizedState!==null)A=E.child,A!==null&&(A.return=E),_E(u,E,!0,!0);else if(E.child!==null){E.child.return=E,E=E.child;continue}}if(E===h)break;for(;E.sibling===null;){if(E.return===null||E.return===h)return;E=E.return}E.sibling.return=E.return,E=E.sibling}};Zu=function(u,h){var v=h.stateNode;if(!yE(u,h)){u=v.containerInfo;var S=$e(u);_E(S,h,!1,!1),v.pendingChildren=S,us(h),St(u,S)}},Yf=function(u,h,v,S,E){var A=u.stateNode,z=u.memoizedProps;if((u=yE(u,h))&&z===S)h.stateNode=A;else{var Y=h.stateNode,he=ls(xr.current),Ae=null;z!==S&&(Ae=te(Y,v,z,S,E,he)),u&&Ae===null?h.stateNode=A:(A=Ce(A,Ae,v,z,S,h,u,Y),be(A,v,S,E,he)&&us(h),h.stateNode=A,u?us(h):Ku(A,h,!1,!1))}},Kf=function(u,h,v,S){v!==S?(u=ls(Yl.current),v=ls(xr.current),h.stateNode=we(S,u,v,h),us(h)):h.stateNode=u.stateNode}}else Zu=function(){},Yf=function(){},Kf=function(){};function Ju(u,h){if(!tn)switch(u.tailMode){case"hidden":h=u.tail;for(var v=null;h!==null;)h.alternate!==null&&(v=h),h=h.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?h||u.tail===null?u.tail=null:u.tail.sibling=null:S.sibling=null}}function si(u){var h=u.alternate!==null&&u.alternate.child===u.child,v=0,S=0;if(h)for(var E=u.child;E!==null;)v|=E.lanes|E.childLanes,S|=E.subtreeFlags&14680064,S|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)v|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=S,u.childLanes=v,h}function Lk(u,h,v){var S=h.pendingProps;switch(Sv(h),h.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return si(h),null;case 1:return Vn(h.type)&&_n(),si(h),null;case 3:return S=h.stateNode,Kl(),lt(hn),lt(At),Cv(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(u===null||u.child===null)&&(Hu(h)?us(h):u===null||u.memoizedState.isDehydrated&&!(h.flags&256)||(h.flags|=1024,Ur!==null&&(iy(Ur),Ur=null))),Zu(u,h),si(h),null;case 5:bv(h),v=ls(Yl.current);var E=h.type;if(u!==null&&h.stateNode!=null)Yf(u,h,E,S,v),u.ref!==h.ref&&(h.flags|=512,h.flags|=2097152);else{if(!S){if(h.stateNode===null)throw Error(o(166));return si(h),null}if(u=ls(xr.current),Hu(h)){if(!Se)throw Error(o(175));u=iv(h.stateNode,h.type,h.memoizedProps,v,u,h,!Vu),h.updateQueue=u,u!==null&&us(h)}else{var A=q(E,S,v,u,h);Ku(A,h,!1,!1),h.stateNode=A,be(A,E,S,v,u)&&us(h)}h.ref!==null&&(h.flags|=512,h.flags|=2097152)}return si(h),null;case 6:if(u&&h.stateNode!=null)Kf(u,h,u.memoizedProps,S);else{if(typeof S!="string"&&h.stateNode===null)throw Error(o(166));if(u=ls(Yl.current),v=ls(xr.current),Hu(h)){if(!Se)throw Error(o(176));if(u=h.stateNode,S=h.memoizedProps,(v=rv(u,S,h,!Vu))&&(E=qi,E!==null))switch(A=(E.mode&1)!==0,E.tag){case 3:Qe(E.stateNode.containerInfo,u,S,A);break;case 5:st(E.type,E.memoizedProps,E.stateNode,u,S,A)}v&&us(h)}else h.stateNode=we(S,u,v,h)}return si(h),null;case 13:if(lt(sn),S=h.memoizedState,tn&&Yi!==null&&h.mode&1&&!(h.flags&128)){for(u=Yi;u;)u=uo(u);return $l(),h.flags|=98560,h}if(S!==null&&S.dehydrated!==null){if(S=Hu(h),u===null){if(!S)throw Error(o(318));if(!Se)throw Error(o(344));if(u=h.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(o(317));sv(u,h)}else $l(),!(h.flags&128)&&(h.memoizedState=null),h.flags|=4;return si(h),null}return Ur!==null&&(iy(Ur),Ur=null),h.flags&128?(h.lanes=v,h):(S=S!==null,v=!1,u===null?Hu(h):v=u.memoizedState!==null,S&&!v&&(h.child.flags|=8192,h.mode&1&&(u===null||sn.current&1?In===0&&(In=3):sy())),h.updateQueue!==null&&(h.flags|=4),si(h),null);case 4:return Kl(),Zu(u,h),u===null&&Te(h.stateNode.containerInfo),si(h),null;case 10:return mv(h.type._context),si(h),null;case 17:return Vn(h.type)&&_n(),si(h),null;case 19:if(lt(sn),E=h.memoizedState,E===null)return si(h),null;if(S=(h.flags&128)!==0,A=E.rendering,A===null)if(S)Ju(E,!1);else{if(In!==0||u!==null&&u.flags&128)for(u=h.child;u!==null;){if(A=Vf(u),A!==null){for(h.flags|=128,Ju(E,!1),u=A.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),h.subtreeFlags=0,u=v,S=h.child;S!==null;)v=S,E=u,v.flags&=14680066,A=v.alternate,A===null?(v.childLanes=0,v.lanes=E,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=A.childLanes,v.lanes=A.lanes,v.child=A.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=A.memoizedProps,v.memoizedState=A.memoizedState,v.updateQueue=A.updateQueue,v.type=A.type,E=A.dependencies,v.dependencies=E===null?null:{lanes:E.lanes,firstContext:E.firstContext}),S=S.sibling;return je(sn,sn.current&1|2),h.child}u=u.sibling}E.tail!==null&&Hn()>Qv&&(h.flags|=128,S=!0,Ju(E,!1),h.lanes=4194304)}else{if(!S)if(u=Vf(A),u!==null){if(h.flags|=128,S=!0,u=u.updateQueue,u!==null&&(h.updateQueue=u,h.flags|=4),Ju(E,!0),E.tail===null&&E.tailMode==="hidden"&&!A.alternate&&!tn)return si(h),null}else 2*Hn()-E.renderingStartTime>Qv&&v!==1073741824&&(h.flags|=128,S=!0,Ju(E,!1),h.lanes=4194304);E.isBackwards?(A.sibling=h.child,h.child=A):(u=E.last,u!==null?u.sibling=A:h.child=A,E.last=A)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=Hn(),h.sibling=null,u=sn.current,je(sn,S?u&1|2:u&1),h):(si(h),null);case 22:case 23:return ry(),S=h.memoizedState!==null,u!==null&&u.memoizedState!==null!==S&&(h.flags|=8192),S&&h.mode&1?Zi&1073741824&&(si(h),Ge&&h.subtreeFlags&6&&(h.flags|=8192)):si(h),null;case 24:return null;case 25:return null}throw Error(o(156,h.tag))}var Ik=a.ReactCurrentOwner,Ki=!1;function xi(u,h,v,S){h.child=u===null?$M(h,null,v,S):ql(h,u.child,v,S)}function xE(u,h,v,S,E){v=v.render;var A=h.ref;return jl(h,E),S=Rv(u,h,v,S,A,E),v=Lv(),u!==null&&!Ki?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~E,Is(u,h,E)):(tn&&v&&xv(h),h.flags|=1,xi(u,h,S,E),h.child)}function SE(u,h,v,S,E){if(u===null){var A=v.type;return typeof A=="function"&&!oy(A)&&A.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(h.tag=15,h.type=A,wE(u,h,A,S,E)):(u=vp(v.type,null,S,h,h.mode,E),u.ref=h.ref,u.return=h,h.child=u)}if(A=u.child,!(u.lanes&E)){var z=A.memoizedProps;if(v=v.compare,v=v!==null?v:If,v(z,S)&&u.ref===h.ref)return Is(u,h,E)}return h.flags|=1,u=yo(A,S),u.ref=h.ref,u.return=h,h.child=u}function wE(u,h,v,S,E){if(u!==null&&If(u.memoizedProps,S)&&u.ref===h.ref)if(Ki=!1,(u.lanes&E)!==0)u.flags&131072&&(Ki=!0);else return h.lanes=u.lanes,Is(u,h,E);return Uv(u,h,v,S,E)}function ME(u,h,v){var S=h.pendingProps,E=S.children,A=u!==null?u.memoizedState:null;if(S.mode==="hidden")if(!(h.mode&1))h.memoizedState={baseLanes:0,cachePool:null},je(Jl,Zi),Zi|=v;else if(v&1073741824)h.memoizedState={baseLanes:0,cachePool:null},S=A!==null?A.baseLanes:v,je(Jl,Zi),Zi|=S;else return u=A!==null?A.baseLanes|v:v,h.lanes=h.childLanes=1073741824,h.memoizedState={baseLanes:u,cachePool:null},h.updateQueue=null,je(Jl,Zi),Zi|=u,null;else A!==null?(S=A.baseLanes|v,h.memoizedState=null):S=v,je(Jl,Zi),Zi|=S;return xi(u,h,E,v),h.child}function EE(u,h){var v=h.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(h.flags|=512,h.flags|=2097152)}function Uv(u,h,v,S,E){var A=Vn(v)?ns:At.current;return A=gr(h,A),jl(h,E),v=Rv(u,h,v,S,A,E),S=Lv(),u!==null&&!Ki?(h.updateQueue=u.updateQueue,h.flags&=-2053,u.lanes&=~E,Is(u,h,E)):(tn&&S&&xv(h),h.flags|=1,xi(u,h,v,E),h.child)}function TE(u,h,v,S,E){if(Vn(v)){var A=!0;Zn(h)}else A=!1;if(jl(h,E),h.stateNode===null)u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),zM(h,v,S),_v(h,v,S,E),S=!0;else if(u===null){var z=h.stateNode,Y=h.memoizedProps;z.props=Y;var he=z.context,Ae=v.contextType;typeof Ae=="object"&&Ae!==null?Ae=vr(Ae):(Ae=Vn(v)?ns:At.current,Ae=gr(h,Ae));var We=v.getDerivedStateFromProps,vt=typeof We=="function"||typeof z.getSnapshotBeforeUpdate=="function";vt||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==S||he!==Ae)&&BM(h,z,S,Ae),ho=!1;var it=h.memoizedState;z.state=it,Of(h,S,z,E),he=h.memoizedState,Y!==S||it!==he||hn.current||ho?(typeof We=="function"&&(yv(h,v,We,S),he=h.memoizedState),(Y=ho||FM(h,v,Y,S,it,he,Ae))?(vt||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=he),z.props=S,z.state=he,z.context=Ae,S=Y):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{z=h.stateNode,DM(u,h),Y=h.memoizedProps,Ae=h.type===h.elementType?Y:Or(h.type,Y),z.props=Ae,vt=h.pendingProps,it=z.context,he=v.contextType,typeof he=="object"&&he!==null?he=vr(he):(he=Vn(v)?ns:At.current,he=gr(h,he));var jt=v.getDerivedStateFromProps;(We=typeof jt=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(Y!==vt||it!==he)&&BM(h,z,S,he),ho=!1,it=h.memoizedState,z.state=it,Of(h,S,z,E);var et=h.memoizedState;Y!==vt||it!==et||hn.current||ho?(typeof jt=="function"&&(yv(h,v,jt,S),et=h.memoizedState),(Ae=ho||FM(h,v,Ae,S,it,et,he)||!1)?(We||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(S,et,he),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(S,et,he)),typeof z.componentDidUpdate=="function"&&(h.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof z.componentDidUpdate!="function"||Y===u.memoizedProps&&it===u.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&it===u.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=et),z.props=S,z.state=et,z.context=he,S=Ae):(typeof z.componentDidUpdate!="function"||Y===u.memoizedProps&&it===u.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||Y===u.memoizedProps&&it===u.memoizedState||(h.flags|=1024),S=!1)}return Fv(u,h,v,S,A,E)}function Fv(u,h,v,S,E,A){EE(u,h);var z=(h.flags&128)!==0;if(!S&&!z)return E&&Hl(h,v,!1),Is(u,h,A);S=h.stateNode,Ik.current=h;var Y=z&&typeof v.getDerivedStateFromError!="function"?null:S.render();return h.flags|=1,u!==null&&z?(h.child=ql(h,u.child,null,A),h.child=ql(h,null,Y,A)):xi(u,h,Y,A),h.memoizedState=S.state,E&&Hl(h,v,!0),h.child}function bE(u){var h=u.stateNode;h.pendingContext?is(u,h.pendingContext,h.pendingContext!==h.context):h.context&&is(u,h.context,!1),Tv(u,h.containerInfo)}function AE(u,h,v,S,E){return $l(),Ev(E),h.flags|=256,xi(u,h,v,S),h.child}var Zf={dehydrated:null,treeContext:null,retryLane:0};function Jf(u){return{baseLanes:u,cachePool:null}}function CE(u,h,v){var S=h.pendingProps,E=sn.current,A=!1,z=(h.flags&128)!==0,Y;if((Y=z)||(Y=u!==null&&u.memoizedState===null?!1:(E&2)!==0),Y?(A=!0,h.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),je(sn,E&1),u===null)return Mv(h),u=h.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(h.mode&1?Fu(u)?h.lanes=8:h.lanes=1073741824:h.lanes=1,null):(E=S.children,u=S.fallback,A?(S=h.mode,A=h.child,E={mode:"hidden",children:E},!(S&1)&&A!==null?(A.childLanes=0,A.pendingProps=E):A=yp(E,S,0,null),u=ba(u,S,v,null),A.return=h,u.return=h,A.sibling=u,h.child=A,h.child.memoizedState=Jf(v),h.memoizedState=Zf,u):zv(h,E));if(E=u.memoizedState,E!==null){if(Y=E.dehydrated,Y!==null){if(z)return h.flags&256?(h.flags&=-257,Qf(u,h,v,Error(o(422)))):h.memoizedState!==null?(h.child=u.child,h.flags|=128,null):(A=S.fallback,E=h.mode,S=yp({mode:"visible",children:S.children},E,0,null),A=ba(A,E,v,null),A.flags|=2,S.return=h,A.return=h,S.sibling=A,h.child=S,h.mode&1&&ql(h,u.child,null,v),h.child.memoizedState=Jf(v),h.memoizedState=Zf,A);if(!(h.mode&1))h=Qf(u,h,v,null);else if(Fu(Y))h=Qf(u,h,v,Error(o(419)));else if(S=(v&u.childLanes)!==0,Ki||S){if(S=bn,S!==null){switch(v&-v){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}S=A&(S.suspendedLanes|v)?0:A,S!==0&&S!==E.retryLane&&(E.retryLane=S,wr(u,S,-1))}sy(),h=Qf(u,h,v,Error(o(421)))}else Uu(Y)?(h.flags|=128,h.child=u.child,h=Wk.bind(null,u),zl(Y,h),h=null):(v=E.treeContext,Se&&(Yi=Tf(Y),qi=h,tn=!0,Ur=null,Vu=!1,v!==null&&(yr[_r++]=Ps,yr[_r++]=Rs,yr[_r++]=ya,Ps=v.id,Rs=v.overflow,ya=h)),h=zv(h,h.pendingProps.children),h.flags|=4096);return h}return A?(S=RE(u,h,S.children,S.fallback,v),A=h.child,E=u.child.memoizedState,A.memoizedState=E===null?Jf(v):{baseLanes:E.baseLanes|v,cachePool:null},A.childLanes=u.childLanes&~v,h.memoizedState=Zf,S):(v=PE(u,h,S.children,v),h.memoizedState=null,v)}return A?(S=RE(u,h,S.children,S.fallback,v),A=h.child,E=u.child.memoizedState,A.memoizedState=E===null?Jf(v):{baseLanes:E.baseLanes|v,cachePool:null},A.childLanes=u.childLanes&~v,h.memoizedState=Zf,S):(v=PE(u,h,S.children,v),h.memoizedState=null,v)}function zv(u,h){return h=yp({mode:"visible",children:h},u.mode,0,null),h.return=u,u.child=h}function PE(u,h,v,S){var E=u.child;return u=E.sibling,v=yo(E,{mode:"visible",children:v}),!(h.mode&1)&&(v.lanes=S),v.return=h,v.sibling=null,u!==null&&(S=h.deletions,S===null?(h.deletions=[u],h.flags|=16):S.push(u)),h.child=v}function RE(u,h,v,S,E){var A=h.mode;u=u.child;var z=u.sibling,Y={mode:"hidden",children:v};return!(A&1)&&h.child!==u?(v=h.child,v.childLanes=0,v.pendingProps=Y,h.deletions=null):(v=yo(u,Y),v.subtreeFlags=u.subtreeFlags&14680064),z!==null?S=yo(z,S):(S=ba(S,A,E,null),S.flags|=2),S.return=h,v.return=h,v.sibling=S,h.child=v,S}function Qf(u,h,v,S){return S!==null&&Ev(S),ql(h,u.child,null,v),u=zv(h,h.pendingProps.children),u.flags|=2,h.memoizedState=null,u}function LE(u,h,v){u.lanes|=h;var S=u.alternate;S!==null&&(S.lanes|=h),gv(u.return,h,v)}function Bv(u,h,v,S,E){var A=u.memoizedState;A===null?u.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:v,tailMode:E}:(A.isBackwards=h,A.rendering=null,A.renderingStartTime=0,A.last=S,A.tail=v,A.tailMode=E)}function IE(u,h,v){var S=h.pendingProps,E=S.revealOrder,A=S.tail;if(xi(u,h,S.children,v),S=sn.current,S&2)S=S&1|2,h.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=h.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&LE(u,v,h);else if(u.tag===19)LE(u,v,h);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===h)break e;for(;u.sibling===null;){if(u.return===null||u.return===h)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}S&=1}if(je(sn,S),!(h.mode&1))h.memoizedState=null;else switch(E){case"forwards":for(v=h.child,E=null;v!==null;)u=v.alternate,u!==null&&Vf(u)===null&&(E=v),v=v.sibling;v=E,v===null?(E=h.child,h.child=null):(E=v.sibling,v.sibling=null),Bv(h,!1,E,v,A);break;case"backwards":for(v=null,E=h.child,h.child=null;E!==null;){if(u=E.alternate,u!==null&&Vf(u)===null){h.child=E;break}u=E.sibling,E.sibling=v,v=E,E=u}Bv(h,!0,v,null,A);break;case"together":Bv(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Is(u,h,v){if(u!==null&&(h.dependencies=u.dependencies),Ql|=h.lanes,!(v&h.childLanes))return null;if(u!==null&&h.child!==u.child)throw Error(o(153));if(h.child!==null){for(u=h.child,v=yo(u,u.pendingProps),h.child=v,v.return=h;u.sibling!==null;)u=u.sibling,v=v.sibling=yo(u,u.pendingProps),v.return=h;v.sibling=null}return h.child}function Nk(u,h,v){switch(h.tag){case 3:bE(h),$l();break;case 5:qM(h);break;case 1:Vn(h.type)&&Zn(h);break;case 4:Tv(h,h.stateNode.containerInfo);break;case 10:NM(h,h.type._context,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?(je(sn,sn.current&1),h.flags|=128,null):v&h.child.childLanes?CE(u,h,v):(je(sn,sn.current&1),u=Is(u,h,v),u!==null?u.sibling:null);je(sn,sn.current&1);break;case 19:if(S=(v&h.childLanes)!==0,u.flags&128){if(S)return IE(u,h,v);h.flags|=128}var E=h.memoizedState;if(E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),je(sn,sn.current),S)break;return null;case 22:case 23:return h.lanes=0,ME(u,h,v)}return Is(u,h,v)}function Dk(u,h){switch(Sv(h),h.tag){case 1:return Vn(h.type)&&_n(),u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 3:return Kl(),lt(hn),lt(At),Cv(),u=h.flags,u&65536&&!(u&128)?(h.flags=u&-65537|128,h):null;case 5:return bv(h),null;case 13:if(lt(sn),u=h.memoizedState,u!==null&&u.dehydrated!==null){if(h.alternate===null)throw Error(o(340));$l()}return u=h.flags,u&65536?(h.flags=u&-65537|128,h):null;case 19:return lt(sn),null;case 4:return Kl(),null;case 10:return mv(h.type._context),null;case 22:case 23:return ry(),null;case 24:return null;default:return null}}var ep=!1,Sa=!1,kk=typeof WeakSet=="function"?WeakSet:Set,De=null;function tp(u,h){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(S){Ui(u,h,S)}else v.current=null}function Vv(u,h,v){try{v()}catch(S){Ui(u,h,S)}}var NE=!1;function Ok(u,h){for(B(u.containerInfo),De=h;De!==null;)if(u=De,h=u.child,(u.subtreeFlags&1028)!==0&&h!==null)h.return=u,De=h;else for(;De!==null;){u=De;try{var v=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,E=v.memoizedState,A=u.stateNode,z=A.getSnapshotBeforeUpdate(u.elementType===u.type?S:Or(u.type,S),E);A.__reactInternalSnapshotBeforeUpdate=z}break;case 3:Ge&&Me(u.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Y){Ui(u,u.return,Y)}if(h=u.sibling,h!==null){h.return=u.return,De=h;break}De=u.return}return v=NE,NE=!1,v}function wa(u,h,v){var S=h.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var E=S=S.next;do{if((E.tag&u)===u){var A=E.destroy;E.destroy=void 0,A!==void 0&&Vv(h,v,A)}E=E.next}while(E!==S)}}function Qu(u,h){if(h=h.updateQueue,h=h!==null?h.lastEffect:null,h!==null){var v=h=h.next;do{if((v.tag&u)===u){var S=v.create;v.destroy=S()}v=v.next}while(v!==h)}}function Hv(u){var h=u.ref;if(h!==null){var v=u.stateNode;switch(u.tag){case 5:u=J(v);break;default:u=v}typeof h=="function"?h(u):h.current=u}}function DE(u,h,v){if(rs&&typeof rs.onCommitFiberUnmount=="function")try{rs.onCommitFiberUnmount(Rf,h)}catch{}switch(h.tag){case 0:case 11:case 14:case 15:if(u=h.updateQueue,u!==null&&(u=u.lastEffect,u!==null)){var S=u=u.next;do{var E=S,A=E.destroy;E=E.tag,A!==void 0&&(E&2||E&4)&&Vv(h,v,A),S=S.next}while(S!==u)}break;case 1:if(tp(h,v),u=h.stateNode,typeof u.componentWillUnmount=="function")try{u.props=h.memoizedProps,u.state=h.memoizedState,u.componentWillUnmount()}catch(z){Ui(h,v,z)}break;case 5:tp(h,v);break;case 4:Ge?BE(u,h,v):j&&j&&(h=h.stateNode.containerInfo,v=$e(h),Lt(h,v))}}function kE(u,h,v){for(var S=h;;)if(DE(u,S,v),S.child===null||Ge&&S.tag===4){if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return}S.sibling.return=S.return,S=S.sibling}else S.child.return=S,S=S.child}function OE(u){var h=u.alternate;h!==null&&(u.alternate=null,OE(h)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(h=u.stateNode,h!==null&&Ke(h)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function UE(u){return u.tag===5||u.tag===3||u.tag===4}function FE(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||UE(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function zE(u){if(Ge){e:{for(var h=u.return;h!==null;){if(UE(h))break e;h=h.return}throw Error(o(160))}var v=h;switch(v.tag){case 5:h=v.stateNode,v.flags&32&&(ve(h),v.flags&=-33),v=FE(u),jv(u,v,h);break;case 3:case 4:h=v.stateNode.containerInfo,v=FE(u),Gv(u,v,h);break;default:throw Error(o(161))}}}function Gv(u,h,v){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?tt(v,u,h):pt(v,u);else if(S!==4&&(u=u.child,u!==null))for(Gv(u,h,v),u=u.sibling;u!==null;)Gv(u,h,v),u=u.sibling}function jv(u,h,v){var S=u.tag;if(S===5||S===6)u=u.stateNode,h?ht(v,u,h):nt(v,u);else if(S!==4&&(u=u.child,u!==null))for(jv(u,h,v),u=u.sibling;u!==null;)jv(u,h,v),u=u.sibling}function BE(u,h,v){for(var S=h,E=!1,A,z;;){if(!E){E=S.return;e:for(;;){if(E===null)throw Error(o(160));switch(A=E.stateNode,E.tag){case 5:z=!1;break e;case 3:A=A.containerInfo,z=!0;break e;case 4:A=A.containerInfo,z=!0;break e}E=E.return}E=!0}if(S.tag===5||S.tag===6)kE(u,S,v),z?$(A,S.stateNode):Be(A,S.stateNode);else if(S.tag===18)z?se(A,S.stateNode):ce(A,S.stateNode);else if(S.tag===4){if(S.child!==null){A=S.stateNode.containerInfo,z=!0,S.child.return=S,S=S.child;continue}}else if(DE(u,S,v),S.child!==null){S.child.return=S,S=S.child;continue}if(S===h)break;for(;S.sibling===null;){if(S.return===null||S.return===h)return;S=S.return,S.tag===4&&(E=!1)}S.sibling.return=S.return,S=S.sibling}}function Wv(u,h){if(Ge){switch(h.tag){case 0:case 11:case 14:case 15:wa(3,h,h.return),Qu(3,h),wa(5,h,h.return);return;case 1:return;case 5:var v=h.stateNode;if(v!=null){var S=h.memoizedProps;u=u!==null?u.memoizedProps:S;var E=h.type,A=h.updateQueue;h.updateQueue=null,A!==null&&xt(v,A,E,u,S,h)}return;case 6:if(h.stateNode===null)throw Error(o(162));v=h.memoizedProps,_e(h.stateNode,u!==null?u.memoizedProps:v,v);return;case 3:Se&&u!==null&&u.memoizedState.isDehydrated&&Q(h.stateNode.containerInfo);return;case 12:return;case 13:np(h);return;case 19:np(h);return;case 17:return}throw Error(o(163))}switch(h.tag){case 0:case 11:case 14:case 15:wa(3,h,h.return),Qu(3,h),wa(5,h,h.return);return;case 12:return;case 13:np(h);return;case 19:np(h);return;case 3:Se&&u!==null&&u.memoizedState.isDehydrated&&Q(h.stateNode.containerInfo);break;case 22:case 23:return}e:if(j){switch(h.tag){case 1:case 5:case 6:break e;case 3:case 4:h=h.stateNode,Lt(h.containerInfo,h.pendingChildren);break e}throw Error(o(163))}}function np(u){var h=u.updateQueue;if(h!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new kk),h.forEach(function(S){var E=Xk.bind(null,u,S);v.has(S)||(v.add(S),S.then(E,E))})}}function Uk(u,h){for(De=h;De!==null;){h=De;var v=h.deletions;if(v!==null)for(var S=0;S<v.length;S++){var E=v[S];try{var A=u;Ge?BE(A,E,h):kE(A,E,h);var z=E.alternate;z!==null&&(z.return=null),E.return=null}catch(Ze){Ui(E,h,Ze)}}if(v=h.child,h.subtreeFlags&12854&&v!==null)v.return=h,De=v;else for(;De!==null;){h=De;try{var Y=h.flags;if(Y&32&&Ge&&ve(h.stateNode),Y&512){var he=h.alternate;if(he!==null){var Ae=he.ref;Ae!==null&&(typeof Ae=="function"?Ae(null):Ae.current=null)}}if(Y&8192)switch(h.tag){case 13:if(h.memoizedState!==null){var We=h.alternate;(We===null||We.memoizedState===null)&&(Jv=Hn())}break;case 22:var vt=h.memoizedState!==null,it=h.alternate,jt=it!==null&&it.memoizedState!==null;if(v=h,Ge){e:if(S=v,E=vt,A=null,Ge)for(var et=S;;){if(et.tag===5){if(A===null){A=et;var oi=et.stateNode;E?Ne(oi):ut(et.stateNode,et.memoizedProps)}}else if(et.tag===6){if(A===null){var Er=et.stateNode;E?Oe(Er):V(Er,et.memoizedProps)}}else if((et.tag!==22&&et.tag!==23||et.memoizedState===null||et===S)&&et.child!==null){et.child.return=et,et=et.child;continue}if(et===S)break;for(;et.sibling===null;){if(et.return===null||et.return===S)break e;A===et&&(A=null),et=et.return}A===et&&(A=null),et.sibling.return=et.return,et=et.sibling}}if(vt&&!jt&&v.mode&1){De=v;for(var ie=v.child;ie!==null;){for(v=De=ie;De!==null;){S=De;var K=S.child;switch(S.tag){case 0:case 11:case 14:case 15:wa(4,S,S.return);break;case 1:tp(S,S.return);var ue=S.stateNode;if(typeof ue.componentWillUnmount=="function"){var ke=S.return;try{ue.props=S.memoizedProps,ue.state=S.memoizedState,ue.componentWillUnmount()}catch(Ze){Ui(S,ke,Ze)}}break;case 5:tp(S,S.return);break;case 22:if(S.memoizedState!==null){GE(v);continue}}K!==null?(K.return=S,De=K):GE(v)}ie=ie.sibling}}}switch(Y&4102){case 2:zE(h),h.flags&=-3;break;case 6:zE(h),h.flags&=-3,Wv(h.alternate,h);break;case 4096:h.flags&=-4097;break;case 4100:h.flags&=-4097,Wv(h.alternate,h);break;case 4:Wv(h.alternate,h)}}catch(Ze){Ui(h,h.return,Ze)}if(v=h.sibling,v!==null){v.return=h.return,De=v;break}De=h.return}}}function Fk(u,h,v){De=u,VE(u)}function VE(u,h,v){for(var S=(u.mode&1)!==0;De!==null;){var E=De,A=E.child;if(E.tag===22&&S){var z=E.memoizedState!==null||ep;if(!z){var Y=E.alternate,he=Y!==null&&Y.memoizedState!==null||Sa;Y=ep;var Ae=Sa;if(ep=z,(Sa=he)&&!Ae)for(De=E;De!==null;)z=De,he=z.child,z.tag===22&&z.memoizedState!==null?jE(E):he!==null?(he.return=z,De=he):jE(E);for(;A!==null;)De=A,VE(A),A=A.sibling;De=E,ep=Y,Sa=Ae}HE(u)}else E.subtreeFlags&8772&&A!==null?(A.return=E,De=A):HE(u)}}function HE(u){for(;De!==null;){var h=De;if(h.flags&8772){var v=h.alternate;try{if(h.flags&8772)switch(h.tag){case 0:case 11:case 15:Sa||Qu(5,h);break;case 1:var S=h.stateNode;if(h.flags&4&&!Sa)if(v===null)S.componentDidMount();else{var E=h.elementType===h.type?v.memoizedProps:Or(h.type,v.memoizedProps);S.componentDidUpdate(E,v.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var A=h.updateQueue;A!==null&&OM(h,A,S);break;case 3:var z=h.updateQueue;if(z!==null){if(v=null,h.child!==null)switch(h.child.tag){case 5:v=J(h.child.stateNode);break;case 1:v=h.child.stateNode}OM(h,z,v)}break;case 5:var Y=h.stateNode;v===null&&h.flags&4&&Rt(Y,h.type,h.memoizedProps,h);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&h.memoizedState===null){var he=h.alternate;if(he!==null){var Ae=he.memoizedState;if(Ae!==null){var We=Ae.dehydrated;We!==null&&oe(We)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Sa||h.flags&512&&Hv(h)}catch(vt){Ui(h,h.return,vt)}}if(h===u){De=null;break}if(v=h.sibling,v!==null){v.return=h.return,De=v;break}De=h.return}}function GE(u){for(;De!==null;){var h=De;if(h===u){De=null;break}var v=h.sibling;if(v!==null){v.return=h.return,De=v;break}De=h.return}}function jE(u){for(;De!==null;){var h=De;try{switch(h.tag){case 0:case 11:case 15:var v=h.return;try{Qu(4,h)}catch(he){Ui(h,v,he)}break;case 1:var S=h.stateNode;if(typeof S.componentDidMount=="function"){var E=h.return;try{S.componentDidMount()}catch(he){Ui(h,E,he)}}var A=h.return;try{Hv(h)}catch(he){Ui(h,A,he)}break;case 5:var z=h.return;try{Hv(h)}catch(he){Ui(h,z,he)}}}catch(he){Ui(h,h.return,he)}if(h===u){De=null;break}var Y=h.sibling;if(Y!==null){Y.return=h.return,De=Y;break}De=h.return}}var ip=0,rp=1,sp=2,op=3,ap=4;if(typeof Symbol=="function"&&Symbol.for){var eh=Symbol.for;ip=eh("selector.component"),rp=eh("selector.has_pseudo_class"),sp=eh("selector.role"),op=eh("selector.test_id"),ap=eh("selector.text")}function Xv(u){var h=fe(u);if(h!=null){if(typeof h.memoizedProps["data-testname"]!="string")throw Error(o(364));return h}if(u=ee(u),u===null)throw Error(o(362));return u.stateNode.current}function $v(u,h){switch(h.$$typeof){case ip:if(u.type===h.value)return!0;break;case rp:e:{h=h.value,u=[u,0];for(var v=0;v<u.length;){var S=u[v++],E=u[v++],A=h[E];if(S.tag!==5||!ge(S)){for(;A!=null&&$v(S,A);)E++,A=h[E];if(E===h.length){h=!0;break e}else for(S=S.child;S!==null;)u.push(S,E),S=S.sibling}}h=!1}return h;case sp:if(u.tag===5&&Xe(u.stateNode,h.value))return!0;break;case ap:if((u.tag===5||u.tag===6)&&(u=ye(u),u!==null&&0<=u.indexOf(h.value)))return!0;break;case op:if(u.tag===5&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===h.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function qv(u){switch(u.$$typeof){case ip:return"<"+(R(u.value)||"Unknown")+">";case rp:return":has("+(qv(u)||"")+")";case sp:return'[role="'+u.value+'"]';case ap:return'"'+u.value+'"';case op:return'[data-testname="'+u.value+'"]';default:throw Error(o(365))}}function WE(u,h){var v=[];u=[u,0];for(var S=0;S<u.length;){var E=u[S++],A=u[S++],z=h[A];if(E.tag!==5||!ge(E)){for(;z!=null&&$v(E,z);)A++,z=h[A];if(A===h.length)v.push(E);else for(E=E.child;E!==null;)u.push(E,A),E=E.sibling}}return v}function Yv(u,h){if(!I)throw Error(o(363));u=Xv(u),u=WE(u,h),h=[],u=Array.from(u);for(var v=0;v<u.length;){var S=u[v++];if(S.tag===5)ge(S)||h.push(S.stateNode);else for(S=S.child;S!==null;)u.push(S),S=S.sibling}return h}var zk=Math.ceil,lp=a.ReactCurrentDispatcher,Kv=a.ReactCurrentOwner,xn=a.ReactCurrentBatchConfig,Ct=0,bn=null,An=null,Jn=0,Zi=0,Jl=Bn(0),In=0,th=null,Ql=0,cp=0,Zv=0,nh=null,ki=null,Jv=0,Qv=1/0;function ec(){Qv=Hn()+500}var up=!1,ey=null,po=null,hp=!1,mo=null,dp=0,ih=0,ty=null,fp=-1,pp=0;function Si(){return Ct&6?Hn():fp!==-1?fp:fp=Hn()}function go(u){return u.mode&1?Ct&2&&Jn!==0?Jn&-Jn:Sk.transition!==null?(pp===0&&(u=Af,Af<<=1,!(Af&4194240)&&(Af=64),pp=u),pp):(u=Ot,u!==0?u:me()):1}function wr(u,h,v){if(50<ih)throw ih=0,ty=null,Error(o(185));var S=mp(u,h);return S===null?null:(Bu(S,h,v),(!(Ct&2)||S!==bn)&&(S===bn&&(!(Ct&2)&&(cp|=h),In===4&&vo(S,Jn)),Oi(S,v),h===1&&Ct===0&&!(u.mode&1)&&(ec(),Lf&&os())),S)}function mp(u,h){u.lanes|=h;var v=u.alternate;for(v!==null&&(v.lanes|=h),v=u,u=u.return;u!==null;)u.childLanes|=h,v=u.alternate,v!==null&&(v.childLanes|=h),v=u,u=u.return;return v.tag===3?v.stateNode:null}function Oi(u,h){var v=u.callbackNode;dk(u,h);var S=Pf(u,u===bn?Jn:0);if(S===0)v!==null&&LM(v),u.callbackNode=null,u.callbackPriority=0;else if(h=S&-S,u.callbackPriority!==h){if(v!=null&&LM(v),h===1)u.tag===0?xk($E.bind(null,u)):IM($E.bind(null,u)),Ie?O(function(){Ct===0&&os()}):cv(uv,os),v=null;else{switch(RM(S)){case 1:v=uv;break;case 4:v=gk;break;case 16:v=hv;break;case 536870912:v=vk;break;default:v=hv}v=nT(v,XE.bind(null,u))}u.callbackPriority=h,u.callbackNode=v}}function XE(u,h){if(fp=-1,pp=0,Ct&6)throw Error(o(327));var v=u.callbackNode;if(Ta()&&u.callbackNode!==v)return null;var S=Pf(u,u===bn?Jn:0);if(S===0)return null;if(S&30||S&u.expiredLanes||h)h=gp(u,S);else{h=S;var E=Ct;Ct|=2;var A=KE();(bn!==u||Jn!==h)&&(ec(),Ma(u,h));do try{Hk();break}catch(Y){YE(u,Y)}while(!0);pv(),lp.current=A,Ct=E,An!==null?h=0:(bn=null,Jn=0,h=In)}if(h!==0){if(h===2&&(E=ov(u),E!==0&&(S=E,h=ny(u,E))),h===1)throw v=th,Ma(u,0),vo(u,S),Oi(u,Hn()),v;if(h===6)vo(u,S);else{if(E=u.current.alternate,!(S&30)&&!Bk(E)&&(h=gp(u,S),h===2&&(A=ov(u),A!==0&&(S=A,h=ny(u,A))),h===1))throw v=th,Ma(u,0),vo(u,S),Oi(u,Hn()),v;switch(u.finishedWork=E,u.finishedLanes=S,h){case 0:case 1:throw Error(o(345));case 2:Ea(u,ki);break;case 3:if(vo(u,S),(S&130023424)===S&&(h=Jv+500-Hn(),10<h)){if(Pf(u,0)!==0)break;if(E=u.suspendedLanes,(E&S)!==S){Si(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=Re(Ea.bind(null,u,ki),h);break}Ea(u,ki);break;case 4:if(vo(u,S),(S&4194240)===S)break;for(h=u.eventTimes,E=-1;0<S;){var z=31-$i(S);A=1<<z,z=h[z],z>E&&(E=z),S&=~A}if(S=E,S=Hn()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*zk(S/1960))-S,10<S){u.timeoutHandle=Re(Ea.bind(null,u,ki),S);break}Ea(u,ki);break;case 5:Ea(u,ki);break;default:throw Error(o(329))}}}return Oi(u,Hn()),u.callbackNode===v?XE.bind(null,u):null}function ny(u,h){var v=nh;return u.current.memoizedState.isDehydrated&&(Ma(u,h).flags|=256),u=gp(u,h),u!==2&&(h=ki,ki=v,h!==null&&iy(h)),u}function iy(u){ki===null?ki=u:ki.push.apply(ki,u)}function Bk(u){for(var h=u;;){if(h.flags&16384){var v=h.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var S=0;S<v.length;S++){var E=v[S],A=E.getSnapshot;E=E.value;try{if(!ss(A(),E))return!1}catch{return!1}}}if(v=h.child,h.subtreeFlags&16384&&v!==null)v.return=h,h=v;else{if(h===u)break;for(;h.sibling===null;){if(h.return===null||h.return===u)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function vo(u,h){for(h&=~Zv,h&=~cp,u.suspendedLanes|=h,u.pingedLanes&=~h,u=u.expirationTimes;0<h;){var v=31-$i(h),S=1<<v;u[v]=-1,h&=~S}}function $E(u){if(Ct&6)throw Error(o(327));Ta();var h=Pf(u,0);if(!(h&1))return Oi(u,Hn()),null;var v=gp(u,h);if(u.tag!==0&&v===2){var S=ov(u);S!==0&&(h=S,v=ny(u,S))}if(v===1)throw v=th,Ma(u,0),vo(u,h),Oi(u,Hn()),v;if(v===6)throw Error(o(345));return u.finishedWork=u.current.alternate,u.finishedLanes=h,Ea(u,ki),Oi(u,Hn()),null}function qE(u){mo!==null&&mo.tag===0&&!(Ct&6)&&Ta();var h=Ct;Ct|=1;var v=xn.transition,S=Ot;try{if(xn.transition=null,Ot=1,u)return u()}finally{Ot=S,xn.transition=v,Ct=h,!(Ct&6)&&os()}}function ry(){Zi=Jl.current,lt(Jl)}function Ma(u,h){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==He&&(u.timeoutHandle=He,Je(v)),An!==null)for(v=An.return;v!==null;){var S=v;switch(Sv(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&_n();break;case 3:Kl(),lt(hn),lt(At),Cv();break;case 5:bv(S);break;case 4:Kl();break;case 13:lt(sn);break;case 19:lt(sn);break;case 10:mv(S.type._context);break;case 22:case 23:ry()}v=v.return}if(bn=u,An=u=yo(u.current,null),Jn=Zi=h,In=0,th=null,Zv=cp=Ql=0,ki=nh=null,as!==null){for(h=0;h<as.length;h++)if(v=as[h],S=v.interleaved,S!==null){v.interleaved=null;var E=S.next,A=v.pending;if(A!==null){var z=A.next;A.next=E,S.next=z}v.pending=S}as=null}return u}function YE(u,h){do{var v=An;try{if(pv(),Hf.current=qf,Gf){for(var S=dn.memoizedState;S!==null;){var E=S.queue;E!==null&&(E.pending=null),S=S.next}Gf=!1}if(Zl=0,Gn=ii=dn=null,Xu=!1,$u=0,Kv.current=null,v===null||v.return===null){In=1,th=h,An=null;break}e:{var A=u,z=v.return,Y=v,he=h;if(h=Jn,Y.flags|=32768,he!==null&&typeof he=="object"&&typeof he.then=="function"){var Ae=he,We=Y,vt=We.tag;if(!(We.mode&1)&&(vt===0||vt===11||vt===15)){var it=We.alternate;it?(We.updateQueue=it.updateQueue,We.memoizedState=it.memoizedState,We.lanes=it.lanes):(We.updateQueue=null,We.memoizedState=null)}var jt=gE(z);if(jt!==null){jt.flags&=-257,vE(jt,z,Y,A,h),jt.mode&1&&mE(A,Ae,h),h=jt,he=Ae;var et=h.updateQueue;if(et===null){var oi=new Set;oi.add(he),h.updateQueue=oi}else et.add(he);break e}else{if(!(h&1)){mE(A,Ae,h),sy();break e}he=Error(o(426))}}else if(tn&&Y.mode&1){var Er=gE(z);if(Er!==null){!(Er.flags&65536)&&(Er.flags|=256),vE(Er,z,Y,A,h),Ev(he);break e}}A=he,In!==4&&(In=2),nh===null?nh=[A]:nh.push(A),he=kv(he,Y),Y=z;do{switch(Y.tag){case 3:Y.flags|=65536,h&=-h,Y.lanes|=h;var ie=fE(Y,he,h);kM(Y,ie);break e;case 1:A=he;var K=Y.type,ue=Y.stateNode;if(!(Y.flags&128)&&(typeof K.getDerivedStateFromError=="function"||ue!==null&&typeof ue.componentDidCatch=="function"&&(po===null||!po.has(ue)))){Y.flags|=65536,h&=-h,Y.lanes|=h;var ke=pE(Y,A,h);kM(Y,ke);break e}}Y=Y.return}while(Y!==null)}JE(v)}catch(Ze){h=Ze,An===v&&v!==null&&(An=v=v.return);continue}break}while(!0)}function KE(){var u=lp.current;return lp.current=qf,u===null?qf:u}function sy(){(In===0||In===3||In===2)&&(In=4),bn===null||!(Ql&268435455)&&!(cp&268435455)||vo(bn,Jn)}function gp(u,h){var v=Ct;Ct|=2;var S=KE();bn===u&&Jn===h||Ma(u,h);do try{Vk();break}catch(E){YE(u,E)}while(!0);if(pv(),Ct=v,lp.current=S,An!==null)throw Error(o(261));return bn=null,Jn=0,In}function Vk(){for(;An!==null;)ZE(An)}function Hk(){for(;An!==null&&!pk();)ZE(An)}function ZE(u){var h=tT(u.alternate,u,Zi);u.memoizedProps=u.pendingProps,h===null?JE(u):An=h,Kv.current=null}function JE(u){var h=u;do{var v=h.alternate;if(u=h.return,h.flags&32768){if(v=Dk(v,h),v!==null){v.flags&=32767,An=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{In=6,An=null;return}}else if(v=Lk(v,h,Zi),v!==null){An=v;return}if(h=h.sibling,h!==null){An=h;return}An=h=u}while(h!==null);In===0&&(In=5)}function Ea(u,h){var v=Ot,S=xn.transition;try{xn.transition=null,Ot=1,Gk(u,h,v)}finally{xn.transition=S,Ot=v}return null}function Gk(u,h,v){do Ta();while(mo!==null);if(Ct&6)throw Error(o(327));var S=u.finishedWork,E=u.finishedLanes;if(S===null)return null;if(u.finishedWork=null,u.finishedLanes=0,S===u.current)throw Error(o(177));u.callbackNode=null,u.callbackPriority=0;var A=S.lanes|S.childLanes;if(fk(u,A),u===bn&&(An=bn=null,Jn=0),!(S.subtreeFlags&2064)&&!(S.flags&2064)||hp||(hp=!0,nT(hv,function(){return Ta(),null})),A=(S.flags&15990)!==0,S.subtreeFlags&15990||A){A=xn.transition,xn.transition=null;var z=Ot;Ot=1;var Y=Ct;Ct|=4,Kv.current=null,Ok(u,S),Uk(u,S),H(u.containerInfo),u.current=S,Fk(S),mk(),Ct=Y,Ot=z,xn.transition=A}else u.current=S;if(hp&&(hp=!1,mo=u,dp=E),A=u.pendingLanes,A===0&&(po=null),yk(S.stateNode),Oi(u,Hn()),h!==null)for(v=u.onRecoverableError,S=0;S<h.length;S++)v(h[S]);if(up)throw up=!1,u=ey,ey=null,u;return dp&1&&u.tag!==0&&Ta(),A=u.pendingLanes,A&1?u===ty?ih++:(ih=0,ty=u):ih=0,os(),null}function Ta(){if(mo!==null){var u=RM(dp),h=xn.transition,v=Ot;try{if(xn.transition=null,Ot=16>u?16:u,mo===null)var S=!1;else{if(u=mo,mo=null,dp=0,Ct&6)throw Error(o(331));var E=Ct;for(Ct|=4,De=u.current;De!==null;){var A=De,z=A.child;if(De.flags&16){var Y=A.deletions;if(Y!==null){for(var he=0;he<Y.length;he++){var Ae=Y[he];for(De=Ae;De!==null;){var We=De;switch(We.tag){case 0:case 11:case 15:wa(8,We,A)}var vt=We.child;if(vt!==null)vt.return=We,De=vt;else for(;De!==null;){We=De;var it=We.sibling,jt=We.return;if(OE(We),We===Ae){De=null;break}if(it!==null){it.return=jt,De=it;break}De=jt}}}var et=A.alternate;if(et!==null){var oi=et.child;if(oi!==null){et.child=null;do{var Er=oi.sibling;oi.sibling=null,oi=Er}while(oi!==null)}}De=A}}if(A.subtreeFlags&2064&&z!==null)z.return=A,De=z;else e:for(;De!==null;){if(A=De,A.flags&2048)switch(A.tag){case 0:case 11:case 15:wa(9,A,A.return)}var ie=A.sibling;if(ie!==null){ie.return=A.return,De=ie;break e}De=A.return}}var K=u.current;for(De=K;De!==null;){z=De;var ue=z.child;if(z.subtreeFlags&2064&&ue!==null)ue.return=z,De=ue;else e:for(z=K;De!==null;){if(Y=De,Y.flags&2048)try{switch(Y.tag){case 0:case 11:case 15:Qu(9,Y)}}catch(Ze){Ui(Y,Y.return,Ze)}if(Y===z){De=null;break e}var ke=Y.sibling;if(ke!==null){ke.return=Y.return,De=ke;break e}De=Y.return}}if(Ct=E,os(),rs&&typeof rs.onPostCommitFiberRoot=="function")try{rs.onPostCommitFiberRoot(Rf,u)}catch{}S=!0}return S}finally{Ot=v,xn.transition=h}}return!1}function QE(u,h,v){h=kv(v,h),h=fE(u,h,1),fo(u,h),h=Si(),u=mp(u,1),u!==null&&(Bu(u,1,h),Oi(u,h))}function Ui(u,h,v){if(u.tag===3)QE(u,u,v);else for(;h!==null;){if(h.tag===3){QE(h,u,v);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(po===null||!po.has(S))){u=kv(v,u),u=pE(h,u,1),fo(h,u),u=Si(),h=mp(h,1),h!==null&&(Bu(h,1,u),Oi(h,u));break}}h=h.return}}function jk(u,h,v){var S=u.pingCache;S!==null&&S.delete(h),h=Si(),u.pingedLanes|=u.suspendedLanes&v,bn===u&&(Jn&v)===v&&(In===4||In===3&&(Jn&130023424)===Jn&&500>Hn()-Jv?Ma(u,0):Zv|=v),Oi(u,h)}function eT(u,h){h===0&&(u.mode&1?(h=Cf,Cf<<=1,!(Cf&130023424)&&(Cf=4194304)):h=1);var v=Si();u=mp(u,h),u!==null&&(Bu(u,h,v),Oi(u,v))}function Wk(u){var h=u.memoizedState,v=0;h!==null&&(v=h.retryLane),eT(u,v)}function Xk(u,h){var v=0;switch(u.tag){case 13:var S=u.stateNode,E=u.memoizedState;E!==null&&(v=E.retryLane);break;case 19:S=u.stateNode;break;default:throw Error(o(314))}S!==null&&S.delete(h),eT(u,v)}var tT;tT=function(u,h,v){if(u!==null)if(u.memoizedProps!==h.pendingProps||hn.current)Ki=!0;else{if(!(u.lanes&v)&&!(h.flags&128))return Ki=!1,Nk(u,h,v);Ki=!!(u.flags&131072)}else Ki=!1,tn&&h.flags&1048576&&VM(h,zf,h.index);switch(h.lanes=0,h.tag){case 2:var S=h.type;u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps;var E=gr(h,At.current);jl(h,v),E=Rv(null,h,S,u,E,v);var A=Lv();return h.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(h.tag=1,h.memoizedState=null,h.updateQueue=null,Vn(S)?(A=!0,Zn(h)):A=!1,h.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,vv(h),E.updater=Uf,h.stateNode=E,E._reactInternals=h,_v(h,S,u,v),h=Fv(null,h,S,!0,A,v)):(h.tag=0,tn&&A&&xv(h),xi(null,h,E,v),h=h.child),h;case 16:S=h.elementType;e:{switch(u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),u=h.pendingProps,E=S._init,S=E(S._payload),h.type=S,E=h.tag=qk(S),u=Or(S,u),E){case 0:h=Uv(null,h,S,u,v);break e;case 1:h=TE(null,h,S,u,v);break e;case 11:h=xE(null,h,S,u,v);break e;case 14:h=SE(null,h,S,Or(S.type,u),v);break e}throw Error(o(306,S,""))}return h;case 0:return S=h.type,E=h.pendingProps,E=h.elementType===S?E:Or(S,E),Uv(u,h,S,E,v);case 1:return S=h.type,E=h.pendingProps,E=h.elementType===S?E:Or(S,E),TE(u,h,S,E,v);case 3:e:{if(bE(h),u===null)throw Error(o(387));S=h.pendingProps,A=h.memoizedState,E=A.element,DM(u,h),Of(h,S,null,v);var z=h.memoizedState;if(S=z.element,Se&&A.isDehydrated)if(A={element:S,isDehydrated:!1,cache:z.cache,transitions:z.transitions},h.updateQueue.baseState=A,h.memoizedState=A,h.flags&256){E=Error(o(423)),h=AE(u,h,S,v,E);break e}else if(S!==E){E=Error(o(424)),h=AE(u,h,S,v,E);break e}else for(Se&&(Yi=Ef(h.stateNode.containerInfo),qi=h,tn=!0,Ur=null,Vu=!1),v=$M(h,null,S,v),h.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if($l(),S===E){h=Is(u,h,v);break e}xi(u,h,S,v)}h=h.child}return h;case 5:return qM(h),u===null&&Mv(h),S=h.type,E=h.pendingProps,A=u!==null?u.memoizedProps:null,z=E.children,pe(S,E)?z=null:A!==null&&pe(S,A)&&(h.flags|=32),EE(u,h),xi(u,h,z,v),h.child;case 6:return u===null&&Mv(h),null;case 13:return CE(u,h,v);case 4:return Tv(h,h.stateNode.containerInfo),S=h.pendingProps,u===null?h.child=ql(h,null,S,v):xi(u,h,S,v),h.child;case 11:return S=h.type,E=h.pendingProps,E=h.elementType===S?E:Or(S,E),xE(u,h,S,E,v);case 7:return xi(u,h,h.pendingProps,v),h.child;case 8:return xi(u,h,h.pendingProps.children,v),h.child;case 12:return xi(u,h,h.pendingProps.children,v),h.child;case 10:e:{if(S=h.type._context,E=h.pendingProps,A=h.memoizedProps,z=E.value,NM(h,S,z),A!==null)if(ss(A.value,z)){if(A.children===E.children&&!hn.current){h=Is(u,h,v);break e}}else for(A=h.child,A!==null&&(A.return=h);A!==null;){var Y=A.dependencies;if(Y!==null){z=A.child;for(var he=Y.firstContext;he!==null;){if(he.context===S){if(A.tag===1){he=Cs(-1,v&-v),he.tag=2;var Ae=A.updateQueue;if(Ae!==null){Ae=Ae.shared;var We=Ae.pending;We===null?he.next=he:(he.next=We.next,We.next=he),Ae.pending=he}}A.lanes|=v,he=A.alternate,he!==null&&(he.lanes|=v),gv(A.return,v,h),Y.lanes|=v;break}he=he.next}}else if(A.tag===10)z=A.type===h.type?null:A.child;else if(A.tag===18){if(z=A.return,z===null)throw Error(o(341));z.lanes|=v,Y=z.alternate,Y!==null&&(Y.lanes|=v),gv(z,v,h),z=A.sibling}else z=A.child;if(z!==null)z.return=A;else for(z=A;z!==null;){if(z===h){z=null;break}if(A=z.sibling,A!==null){A.return=z.return,z=A;break}z=z.return}A=z}xi(u,h,E.children,v),h=h.child}return h;case 9:return E=h.type,S=h.pendingProps.children,jl(h,v),E=vr(E),S=S(E),h.flags|=1,xi(u,h,S,v),h.child;case 14:return S=h.type,E=Or(S,h.pendingProps),E=Or(S.type,E),SE(u,h,S,E,v);case 15:return wE(u,h,h.type,h.pendingProps,v);case 17:return S=h.type,E=h.pendingProps,E=h.elementType===S?E:Or(S,E),u!==null&&(u.alternate=null,h.alternate=null,h.flags|=2),h.tag=1,Vn(S)?(u=!0,Zn(h)):u=!1,jl(h,v),zM(h,S,E),_v(h,S,E,v),Fv(null,h,S,!0,u,v);case 19:return IE(u,h,v);case 22:return ME(u,h,v)}throw Error(o(156,h.tag))};function nT(u,h){return cv(u,h)}function $k(u,h,v,S){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(u,h,v,S){return new $k(u,h,v,S)}function oy(u){return u=u.prototype,!(!u||!u.isReactComponent)}function qk(u){if(typeof u=="function")return oy(u)?1:0;if(u!=null){if(u=u.$$typeof,u===M)return 11;if(u===w)return 14}return 2}function yo(u,h){var v=u.alternate;return v===null?(v=Mr(u.tag,h,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=h,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,h=u.dependencies,v.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function vp(u,h,v,S,E,A){var z=2;if(S=u,typeof u=="function")oy(u)&&(z=1);else if(typeof u=="string")z=5;else e:switch(u){case d:return ba(v.children,E,A,h);case f:z=8,E|=8;break;case p:return u=Mr(12,v,h,E|2),u.elementType=p,u.lanes=A,u;case _:return u=Mr(13,v,h,E),u.elementType=_,u.lanes=A,u;case g:return u=Mr(19,v,h,E),u.elementType=g,u.lanes=A,u;case T:return yp(v,E,A,h);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case m:z=10;break e;case y:z=9;break e;case M:z=11;break e;case w:z=14;break e;case x:z=16,S=null;break e}throw Error(o(130,u==null?u:typeof u,""))}return h=Mr(z,v,h,E),h.elementType=u,h.type=S,h.lanes=A,h}function ba(u,h,v,S){return u=Mr(7,u,S,h),u.lanes=v,u}function yp(u,h,v,S){return u=Mr(22,u,S,h),u.elementType=T,u.lanes=v,u.stateNode={},u}function ay(u,h,v){return u=Mr(6,u,null,h),u.lanes=v,u}function ly(u,h,v){return h=Mr(4,u.children!==null?u.children:[],u.key,h),h.lanes=v,h.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},h}function Yk(u,h,v,S,E){this.tag=h,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=He,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=av(0),this.expirationTimes=av(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=av(0),this.identifierPrefix=S,this.onRecoverableError=E,Se&&(this.mutableSourceEagerHydrationData=null)}function iT(u,h,v,S,E,A,z,Y,he){return u=new Yk(u,h,v,Y,he),h===1?(h=1,A===!0&&(h|=8)):h=0,A=Mr(3,null,null,h),u.current=A,A.stateNode=u,A.memoizedState={element:S,isDehydrated:v,cache:null,transitions:null},vv(A),u}function rT(u){if(!u)return mr;u=u._reactInternals;e:{if(X(u)!==u||u.tag!==1)throw Error(o(170));var h=u;do{switch(h.tag){case 3:h=h.stateNode.context;break e;case 1:if(Vn(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break e}}h=h.return}while(h!==null);throw Error(o(171))}if(u.tag===1){var v=u.type;if(Vn(v))return Vl(u,v,h)}return h}function sT(u){var h=u._reactInternals;if(h===void 0)throw typeof u.render=="function"?Error(o(188)):(u=Object.keys(u).join(","),Error(o(268,u)));return u=Z(h),u===null?null:u.stateNode}function oT(u,h){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<h?v:h}}function cy(u,h){oT(u,h),(u=u.alternate)&&oT(u,h)}function Kk(u){return u=Z(u),u===null?null:u.stateNode}function Zk(){return null}return t.attemptContinuousHydration=function(u){if(u.tag===13){var h=Si();wr(u,134217728,h),cy(u,134217728)}},t.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var h=Si(),v=go(u);wr(u,v,h),cy(u,v)}},t.attemptSynchronousHydration=function(u){switch(u.tag){case 3:var h=u.stateNode;if(h.current.memoizedState.isDehydrated){var v=zu(h.pendingLanes);v!==0&&(lv(h,v|1),Oi(h,Hn()),!(Ct&6)&&(ec(),os()))}break;case 13:var S=Si();qE(function(){return wr(u,1,S)}),cy(u,1)}},t.batchedUpdates=function(u,h){var v=Ct;Ct|=1;try{return u(h)}finally{Ct=v,Ct===0&&(ec(),Lf&&os())}},t.createComponentSelector=function(u){return{$$typeof:ip,value:u}},t.createContainer=function(u,h,v,S,E,A,z){return iT(u,h,!1,null,v,S,E,A,z)},t.createHasPseudoClassSelector=function(u){return{$$typeof:rp,value:u}},t.createHydrationContainer=function(u,h,v,S,E,A,z,Y,he){return u=iT(v,S,!0,u,E,A,z,Y,he),u.context=rT(null),v=u.current,S=Si(),E=go(v),A=Cs(S,E),A.callback=h??null,fo(v,A),u.current.lanes=E,Bu(u,E,S),Oi(u,S),u},t.createPortal=function(u,h,v){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:S==null?null:""+S,children:u,containerInfo:h,implementation:v}},t.createRoleSelector=function(u){return{$$typeof:sp,value:u}},t.createTestNameSelector=function(u){return{$$typeof:op,value:u}},t.createTextSelector=function(u){return{$$typeof:ap,value:u}},t.deferredUpdates=function(u){var h=Ot,v=xn.transition;try{return xn.transition=null,Ot=16,u()}finally{Ot=h,xn.transition=v}},t.discreteUpdates=function(u,h,v,S,E){var A=Ot,z=xn.transition;try{return xn.transition=null,Ot=1,u(h,v,S,E)}finally{Ot=A,xn.transition=z,Ct===0&&ec()}},t.findAllNodes=Yv,t.findBoundingRects=function(u,h){if(!I)throw Error(o(363));h=Yv(u,h),u=[];for(var v=0;v<h.length;v++)u.push(xe(h[v]));for(h=u.length-1;0<h;h--){v=u[h];for(var S=v.x,E=S+v.width,A=v.y,z=A+v.height,Y=h-1;0<=Y;Y--)if(h!==Y){var he=u[Y],Ae=he.x,We=Ae+he.width,vt=he.y,it=vt+he.height;if(S>=Ae&&A>=vt&&E<=We&&z<=it){u.splice(h,1);break}else if(S!==Ae||v.width!==he.width||it<A||vt>z){if(!(A!==vt||v.height!==he.height||We<S||Ae>E)){Ae>S&&(he.width+=Ae-S,he.x=S),We<E&&(he.width=E-Ae),u.splice(h,1);break}}else{vt>A&&(he.height+=vt-A,he.y=A),it<z&&(he.height=z-vt),u.splice(h,1);break}}}return u},t.findHostInstance=sT,t.findHostInstanceWithNoPortals=function(u){return u=L(u),u=u!==null?W(u):null,u===null?null:u.stateNode},t.findHostInstanceWithWarning=function(u){return sT(u)},t.flushControlled=function(u){var h=Ct;Ct|=1;var v=xn.transition,S=Ot;try{xn.transition=null,Ot=1,u()}finally{Ot=S,xn.transition=v,Ct=h,Ct===0&&(ec(),os())}},t.flushPassiveEffects=Ta,t.flushSync=qE,t.focusWithin=function(u,h){if(!I)throw Error(o(363));for(u=Xv(u),h=WE(u,h),h=Array.from(h),u=0;u<h.length;){var v=h[u++];if(!ge(v)){if(v.tag===5&&Le(v.stateNode))return!0;for(v=v.child;v!==null;)h.push(v),v=v.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Ot},t.getFindAllNodesFailureDescription=function(u,h){if(!I)throw Error(o(363));var v=0,S=[];u=[Xv(u),0];for(var E=0;E<u.length;){var A=u[E++],z=u[E++],Y=h[z];if((A.tag!==5||!ge(A))&&($v(A,Y)&&(S.push(qv(Y)),z++,z>v&&(v=z)),z<h.length))for(A=A.child;A!==null;)u.push(A,z),A=A.sibling}if(v<h.length){for(u=[];v<h.length;v++)u.push(qv(h[v]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},t.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return J(u.child.stateNode);default:return u.child.stateNode}},t.injectIntoDevTools=function(u){if(u={bundleType:u.bundleType,version:u.version,rendererPackageName:u.rendererPackageName,rendererConfig:u.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Kk,findFiberByHostInstance:u.findFiberByHostInstance||Zk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var h=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(h.isDisabled||!h.supportsFiber)u=!0;else{try{Rf=h.inject(u),rs=h}catch{}u=!!h.checkDCE}}return u},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(u,h,v,S){if(!I)throw Error(o(363));u=Yv(u,h);var E=Ue(u,v,S).disconnect;return{disconnect:function(){E()}}},t.registerMutableSourceForHydration=function(u,h){var v=h._getVersion;v=v(h._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[h,v]:u.mutableSourceEagerHydrationData.push(h,v)},t.runWithPriority=function(u,h){var v=Ot;try{return Ot=u,h()}finally{Ot=v}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(u,h,v,S){var E=h.current,A=Si(),z=go(E);return v=rT(v),h.context===null?h.context=v:h.pendingContext=v,h=Cs(A,z),h.payload={element:u},S=S===void 0?null:S,S!==null&&(h.callback=S),fo(E,h),u=wr(E,z,A),u!==null&&kf(u,E,z),z},t};jD.exports=fY;var pY=jD.exports;const mY=JP(pY);var WD={exports:{}},XD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,B){var H=N.length;N.push(B);e:for(;0<H;){var q=H-1>>>1,le=N[q];if(0<r(le,B))N[q]=B,N[H]=le,H=q;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var B=N[0],H=N.pop();if(H!==B){N[0]=H;e:for(var q=0,le=N.length,be=le>>>1;q<be;){var te=2*(q+1)-1,pe=N[te],we=te+1,Re=N[we];if(0>r(pe,H))we<le&&0>r(Re,pe)?(N[q]=Re,N[we]=H,q=we):(N[q]=pe,N[te]=H,q=te);else if(we<le&&0>r(Re,H))N[q]=Re,N[we]=H,q=we;else break e}}return B}function r(N,B){var H=N.sortIndex-B.sortIndex;return H!==0?H:N.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,p=3,m=!1,y=!1,M=!1,_=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(N){for(var B=t(c);B!==null;){if(B.callback===null)i(c);else if(B.startTime<=N)i(c),B.sortIndex=B.expirationTime,e(l,B);else break;B=t(c)}}function T(N){if(M=!1,x(N),!y)if(t(l)!==null)y=!0,J(C);else{var B=t(c);B!==null&&ae(T,B.startTime-N)}}function C(N,B){y=!1,M&&(M=!1,g(D),D=-1),m=!0;var H=p;try{for(x(B),f=t(l);f!==null&&(!(f.expirationTime>B)||N&&!L());){var q=f.callback;if(typeof q=="function"){f.callback=null,p=f.priorityLevel;var le=q(f.expirationTime<=B);B=n.unstable_now(),typeof le=="function"?f.callback=le:f===t(l)&&i(l),x(B)}else i(l);f=t(l)}if(f!==null)var be=!0;else{var te=t(c);te!==null&&ae(T,te.startTime-B),be=!1}return be}finally{f=null,p=H,m=!1}}var P=!1,R=null,D=-1,X=5,b=-1;function L(){return!(n.unstable_now()-b<X)}function Z(){if(R!==null){var N=n.unstable_now();b=N;var B=!0;try{B=R(!0,N)}finally{B?re():(P=!1,R=null)}}else P=!1}var re;if(typeof w=="function")re=function(){w(Z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ne=W.port2;W.port1.onmessage=Z,re=function(){ne.postMessage(null)}}else re=function(){_(Z,0)};function J(N){R=N,P||(P=!0,re())}function ae(N,B){D=_(function(){N(n.unstable_now())},B)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,J(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var H=p;p=B;try{return N()}finally{p=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,B){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var H=p;p=N;try{return B()}finally{p=H}},n.unstable_scheduleCallback=function(N,B,H){var q=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?q+H:q):H=q,N){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=H+le,N={id:d++,callback:B,priorityLevel:N,startTime:H,expirationTime:le,sortIndex:-1},H>q?(N.sortIndex=H,e(c,N),t(l)===null&&N===t(c)&&(M?(g(D),D=-1):M=!0,ae(T,H-q))):(N.sortIndex=le,e(l,N),y||m||(y=!0,J(C))),N},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(N){var B=p;return function(){var H=p;p=B;try{return N.apply(this,arguments)}finally{p=H}}}})(XD);WD.exports=XD;var kP=WD.exports;const AM={},gY=n=>void Object.assign(AM,n);function vY(n,e){function t(d,{args:f=[],attach:p,...m},y){let M=`${d[0].toUpperCase()}${d.slice(1)}`,_;if(d==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;_=Cc(g,{type:d,root:y,attach:p,primitive:!0})}else{const g=AM[M];if(!g)throw new Error(`R3F: ${M} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");_=Cc(new g(...f),{type:d,root:y,attach:p,memoizedProps:{args:f}})}return _.__r3f.attach===void 0&&(_.isBufferGeometry?_.__r3f.attach="geometry":_.isMaterial&&(_.__r3f.attach="material")),M!=="inject"&&V_(_,m),_}function i(d,f){let p=!1;if(f){var m,y;(m=f.__r3f)!=null&&m.attach?B_(d,f,f.__r3f.attach):f.isObject3D&&d.isObject3D&&(d.add(f),p=!0),p||(y=d.__r3f)==null||y.objects.push(f),f.__r3f||Cc(f,{}),f.__r3f.parent=d,sw(f),Pc(f)}}function r(d,f,p){let m=!1;if(f){var y,M;if((y=f.__r3f)!=null&&y.attach)B_(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){f.parent=d,f.dispatchEvent({type:"added"}),d.dispatchEvent({type:"childadded",child:f});const _=d.children.filter(w=>w!==f),g=_.indexOf(p);d.children=[..._.slice(0,g),f,..._.slice(g)],m=!0}m||(M=d.__r3f)==null||M.objects.push(f),f.__r3f||Cc(f,{}),f.__r3f.parent=d,sw(f),Pc(f)}}function s(d,f,p=!1){d&&[...d].forEach(m=>o(f,m,p))}function o(d,f,p){if(f){var m,y,M;if(f.__r3f&&(f.__r3f.parent=null),(m=d.__r3f)!=null&&m.objects&&(d.__r3f.objects=d.__r3f.objects.filter(T=>T!==f)),(y=f.__r3f)!=null&&y.attach)BP(d,f,f.__r3f.attach);else if(f.isObject3D&&d.isObject3D){var _;d.remove(f),(_=f.__r3f)!=null&&_.root&&TY(ag(f),f)}const w=(M=f.__r3f)==null?void 0:M.primitive,x=!w&&(p===void 0?f.dispose!==null:p);if(!w){var g;s((g=f.__r3f)==null?void 0:g.objects,f,x),s(f.children,f,x)}if(delete f.__r3f,x&&f.dispose&&f.type!=="Scene"){const T=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?kP.unstable_scheduleCallback(kP.unstable_IdlePriority,T):T()}Pc(d)}}function a(d,f,p,m){var y;const M=(y=d.__r3f)==null?void 0:y.parent;if(!M)return;const _=t(f,p,d.__r3f.root);if(d.children){for(const g of d.children)g.__r3f&&i(_,g);d.children=d.children.filter(g=>!g.__r3f)}d.__r3f.objects.forEach(g=>i(_,g)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(M,d),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(M,_),_.raycast&&_.__r3f.eventCount&&ag(_).getState().internal.interaction.push(_),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=_,g.ref&&(typeof g.ref=="function"?g.ref(_):g.ref.current=_))})}const l=()=>{};return{reconciler:mY({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,f)=>{if(!f)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,i(p,f))},removeChildFromContainer:(d,f)=>{f&&o(d.getState().scene,f)},insertInContainerBefore:(d,f,p)=>{if(!f||!p)return;const m=d.getState().scene;m.__r3f&&r(m,f,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var f;return!!((f=d==null?void 0:d.__r3f)!=null?f:{}).handlers},prepareUpdate(d,f,p,m){var y;if(((y=d==null?void 0:d.__r3f)!=null?y:{}).primitive&&m.object&&m.object!==d)return[!0];{const{args:_=[],children:g,...w}=m,{args:x=[],children:T,...C}=p;if(!Array.isArray(_))throw new Error("R3F: the args prop must be an array!");if(_.some((R,D)=>R!==x[D]))return[!0];const P=QD(d,w,C,!0);return P.changes.length?[!1,P]:null}},commitUpdate(d,[f,p],m,y,M,_){f?a(d,m,M,_):V_(d,p)},commitMount(d,f,p,m){var y;const M=(y=d.__r3f)!=null?y:{};d.raycast&&M.handlers&&M.eventCount&&ag(d).getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Cc(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var f;const{attach:p,parent:m}=(f=d.__r3f)!=null?f:{};p&&m&&BP(m,d,p),d.isObject3D&&(d.visible=!1),Pc(d)},unhideInstance(d,f){var p;const{attach:m,parent:y}=(p=d.__r3f)!=null?p:{};m&&y&&B_(y,d,m),(d.isObject3D&&f.visible==null||f.visible)&&(d.visible=!0),Pc(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Jc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Zt.fun(performance.now)?performance.now:Zt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Zt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Zt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:V_}}var OP,UP;const z_=n=>"colorSpace"in n||"outputColorSpace"in n,$D=()=>{var n;return(n=AM.ColorManagement)!=null?n:null},qD=n=>n&&n.isOrthographicCamera,yY=n=>n&&n.hasOwnProperty("current"),Mf=typeof window<"u"&&((OP=window.document)!=null&&OP.createElement||((UP=window.navigator)==null?void 0:UP.product)==="ReactNative")?G.useLayoutEffect:G.useEffect;function YD(n){const e=G.useRef(n);return Mf(()=>void(e.current=n),[n]),e}function _Y({set:n}){return Mf(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class KD extends G.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}KD.getDerivedStateFromError=()=>({error:!0});const ZD="__default",FP=new Map,xY=n=>n&&!!n.memoized&&!!n.changes;function JD(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const bh=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function ag(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Zt={obj:n=>n===Object(n)&&!Zt.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Zt.str(n)||Zt.num(n)||Zt.boo(n))return n===e;const s=Zt.obj(n);if(s&&i==="reference")return n===e;const o=Zt.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Zt.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Zt.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function SY(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Cc(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function rw(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const zP=/-\d+$/;function B_(n,e,t){if(Zt.str(t)){if(zP.test(t)){const s=t.replace(zP,""),{target:o,key:a}=rw(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=rw(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function BP(n,e,t){var i,r;if(Zt.str(t)){const{target:s,key:o}=rw(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function QD(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const d=n.__r3f,f=Object.entries(r),p=[];if(c){const y=Object.keys(l);for(let M=0;M<y.length;M++)r.hasOwnProperty(y[M])||f.unshift([y[M],ZD+"remove"])}f.forEach(([y,M])=>{var _;if((_=n.__r3f)!=null&&_.primitive&&y==="object"||Zt.equ(M,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return p.push([y,M,!0,[]]);let g=[];y.includes("-")&&(g=y.split("-")),p.push([y,M,!1,g]);for(const w in r){const x=r[w];w.startsWith(`${y}-`)&&p.push([w,x,!1,w.split("-")])}});const m={...r};return d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.args&&(m.args=d.memoizedProps.args),d!=null&&d.memoizedProps&&d!=null&&d.memoizedProps.attach&&(m.attach=d.memoizedProps.attach),{memoized:m,changes:p}}const wY=typeof process<"u"&&!1;function V_(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=xY(e)?e:QD(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let p=0;p<a.length;p++){let[m,y,M,_]=a[p];if(z_(n)){const T="srgb",C="srgb-linear";m==="encoding"?(m="colorSpace",y=y===3001?T:C):m==="outputEncoding"&&(m="outputColorSpace",y=y===3001?T:C)}let g=n,w=g[m];if(_.length&&(w=_.reduce((x,T)=>x[T],n),!(w&&w.set))){const[x,...T]=_.reverse();g=T.reverse().reduce((C,P)=>C[P],n),m=x}if(y===ZD+"remove")if(g.constructor){let x=FP.get(g.constructor);x||(x=new g.constructor,FP.set(g.constructor,x)),y=x[m]}else y=0;if(M&&i)y?i.handlers[m]=y:delete i.handlers[m],i.eventCount=Object.keys(i.handlers).length;else if(w&&w.set&&(w.copy||w instanceof pl)){if(Array.isArray(y))w.fromArray?w.fromArray(y):w.set(...y);else if(w.copy&&y&&y.constructor&&(wY?w.constructor.name===y.constructor.name:w.constructor===y.constructor))w.copy(y);else if(y!==void 0){var c;const x=(c=w)==null?void 0:c.isColor;!x&&w.setScalar?w.setScalar(y):w instanceof pl&&y instanceof pl?w.mask=y.mask:w.set(y),!$D()&&s&&!s.linear&&x&&w.convertSRGBToLinear()}}else{var d;if(g[m]=y,(d=g[m])!=null&&d.isTexture&&g[m].format===Ai&&g[m].type===Ms&&s){const x=g[m];z_(x)&&z_(s.gl)?x.colorSpace=s.gl.outputColorSpace:x.encoding=s.gl.outputEncoding}}Pc(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const p=ag(n).getState().internal,m=p.interaction.indexOf(n);m>-1&&p.interaction.splice(m,1),i.eventCount&&p.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&sw(n),n}function Pc(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function sw(n){n.onUpdate==null||n.onUpdate(n)}function MY(n,e){n.manual||(qD(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function km(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function EY(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Jc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Jc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Jc.ContinuousEventPriority;default:return Jc.DefaultEventPriority}}function ek(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function TY(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{ek(t.capturedMap,e,i,r)})}function bY(n){function e(l){const{internal:c}=n.getState(),d=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(d*d+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(d=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+d]}))}function i(l,c){const d=n.getState(),f=new Set,p=[],m=c?c(d.internal.interaction):d.internal.interaction;for(let g=0;g<m.length;g++){const w=bh(m[g]);w&&(w.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function y(g){const w=bh(g);if(!w||!w.events.enabled||w.raycaster.camera===null)return[];if(w.raycaster.camera===void 0){var x;w.events.compute==null||w.events.compute(l,w,(x=w.previousRoot)==null?void 0:x.getState()),w.raycaster.camera===void 0&&(w.raycaster.camera=null)}return w.raycaster.camera?w.raycaster.intersectObject(g,!0):[]}let M=m.flatMap(y).sort((g,w)=>{const x=bh(g.object),T=bh(w.object);return!x||!T?g.distance-w.distance:T.events.priority-x.events.priority||g.distance-w.distance}).filter(g=>{const w=km(g);return f.has(w)?!1:(f.add(w),!0)});d.events.filter&&(M=d.events.filter(M,d));for(const g of M){let w=g.object;for(;w;){var _;(_=w.__r3f)!=null&&_.eventCount&&p.push({...g,eventObject:w}),w=w.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let g of d.internal.capturedMap.get(l.pointerId).values())f.has(km(g.intersection))||p.push(g.intersection);return p}function r(l,c,d,f){const p=n.getState();if(l.length){const m={stopped:!1};for(const y of l){const M=bh(y.object)||p,{raycaster:_,pointer:g,camera:w,internal:x}=M,T=new F(g.x,g.y,0).unproject(w),C=b=>{var L,Z;return(L=(Z=x.capturedMap.get(b))==null?void 0:Z.has(y.eventObject))!=null?L:!1},P=b=>{const L={intersection:y,target:c.target};x.capturedMap.has(b)?x.capturedMap.get(b).set(y.eventObject,L):x.capturedMap.set(b,new Map([[y.eventObject,L]])),c.target.setPointerCapture(b)},R=b=>{const L=x.capturedMap.get(b);L&&ek(x.capturedMap,y.eventObject,L,b)};let D={};for(let b in c){let L=c[b];typeof L!="function"&&(D[b]=L)}let X={...y,...D,pointer:g,intersections:l,stopped:m.stopped,delta:d,unprojectedPoint:T,ray:_.ray,camera:w,stopPropagation(){const b="pointerId"in c&&x.capturedMap.get(c.pointerId);if((!b||b.has(y.eventObject))&&(X.stopped=m.stopped=!0,x.hovered.size&&Array.from(x.hovered.values()).find(L=>L.eventObject===y.eventObject))){const L=l.slice(0,l.indexOf(y));s([...L,y])}},target:{hasPointerCapture:C,setPointerCapture:P,releasePointerCapture:R},currentTarget:{hasPointerCapture:C,setPointerCapture:P,releasePointerCapture:R},nativeEvent:c};if(f(X),m.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const d of c.hovered.values())if(!l.length||!l.find(f=>f.object===d.object&&f.index===d.index&&f.instanceId===d.instanceId)){const p=d.eventObject.__r3f,m=p==null?void 0:p.handlers;if(c.hovered.delete(km(d)),p!=null&&p.eventCount){const y={...d,intersections:l};m.onPointerOut==null||m.onPointerOut(y),m.onPointerLeave==null||m.onPointerLeave(y)}}}function o(l,c){for(let d=0;d<c.length;d++){const f=c[d].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:d}=n.getState();"pointerId"in c&&d.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(c.pointerId)&&(d.capturedMap.delete(c.pointerId),s([]))})}}return function(d){const{onPointerMissed:f,internal:p}=n.getState();p.lastEvent.current=d;const m=l==="onPointerMove",y=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(d,m?t:void 0),g=y?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=_.map(x=>x.eventObject)),y&&!_.length&&g<=2&&(o(d,p.interaction),f&&f(d)),m&&s(_);function w(x){const T=x.eventObject,C=T.__r3f,P=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(m){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const R=km(x),D=p.hovered.get(R);D?D.stopped&&x.stopPropagation():(p.hovered.set(R,x),P.onPointerOver==null||P.onPointerOver(x),P.onPointerEnter==null||P.onPointerEnter(x))}P.onPointerMove==null||P.onPointerMove(x)}else{const R=P[l];R?(!y||p.initialHits.includes(T))&&(o(d,p.interaction.filter(D=>!p.initialHits.includes(D))),R(x)):y&&p.initialHits.includes(T)&&o(d,p.interaction.filter(D=>!p.initialHits.includes(D)))}}r(_,d,g,w)}}return{handlePointer:a}}const tk=n=>!!(n!=null&&n.render),nk=G.createContext(null),AY=(n,e)=>{const t=uY((a,l)=>{const c=new F,d=new F,f=new F;function p(g=l().camera,w=d,x=l().size){const{width:T,height:C,top:P,left:R}=x,D=T/C;w.isVector3?f.copy(w):f.set(...w);const X=g.getWorldPosition(c).distanceTo(f);if(qD(g))return{width:T/g.zoom,height:C/g.zoom,top:P,left:R,factor:1,distance:X,aspect:D};{const b=g.fov*Math.PI/180,L=2*Math.tan(b/2)*X,Z=L*(T/C);return{width:Z,height:L,top:P,left:R,factor:T/Z,distance:X,aspect:D}}}let m;const y=g=>a(w=>({performance:{...w.performance,current:g}})),M=new de;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,w)=>e(g,w,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new MM,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&y(g.performance.min),m=setTimeout(()=>y(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:g=>a(w=>({...w,events:{...w.events,...g}})),setSize:(g,w,x,T,C)=>{const P=l().camera,R={width:g,height:w,top:T||0,left:C||0,updateStyle:x};a(D=>({size:R,viewport:{...D.viewport,...p(P,d,R)}}))},setDpr:g=>a(w=>{const x=JD(g);return{viewport:{...w.viewport,dpr:x,initialDpr:w.viewport.initialDpr||x}}}),setFrameloop:(g="always")=>{const w=l().clock;w.stop(),w.elapsedTime=0,g!=="never"&&(w.start(),w.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:G.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,w,x)=>{const T=l().internal;return T.priority=T.priority+(w>0?1:0),T.subscribers.push({ref:g,priority:w,store:x}),T.subscribers=T.subscribers.sort((C,P)=>C.priority-P.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(w>0?1:0),C.subscribers=C.subscribers.filter(P=>P.ref!==g))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:d,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var p;r=l,s=c.dpr,MY(a,l),d.setPixelRatio(c.dpr);const m=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Om,CY=new Set,PY=new Set,RY=new Set;function H_(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Ah(n,e){switch(n){case"before":return H_(CY,e);case"after":return H_(PY,e);case"tail":return H_(RY,e)}}let G_,j_;function W_(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),G_=e.internal.subscribers,Om=0;Om<G_.length;Om++)j_=G_[Om],j_.ref.current(j_.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function LY(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,Ah("before",c),t=!0;for(const f of n.values()){var d;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((d=s.gl.xr)!=null&&d.isPresenting)&&(i+=W_(c,s))}if(t=!1,Ah("after",c),i===0)return Ah("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,d=1){var f;if(!c)return n.forEach(p=>a(p.store.getState(),d));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(d>1?c.internal.frames=Math.min(60,c.internal.frames+d):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,d=!0,f,p){if(d&&Ah("before",c),f)W_(c,f,p);else for(const m of n.values())W_(c,m.store.getState());d&&Ah("after",c)}return{loop:o,invalidate:a,advance:l}}function ik(){const n=G.useContext(nk);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function nr(n=t=>t,e){return ik()(n,e)}function CM(n,e=0){const t=ik(),i=t.getState().internal.subscribe,r=YD(n);return Mf(()=>i(r,e,t),[e,i,t]),null}const wu=new Map,{invalidate:VP,advance:HP}=LY(wu),{reconciler:Yg,applyProps:bc}=vY(wu,EY),Ac={objects:"shallow",strict:!1},IY=(n,e)=>{const t=typeof n=="function"?n(e):n;return tk(t)?t:new sM({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function NY(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function DY(n){const e=wu.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||AY(VP,HP),o=t||Yg.createContainer(s,Jc.ConcurrentRoot,null,!1,null,"",r,null);e||wu.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(d={}){let{gl:f,size:p,scene:m,events:y,onCreated:M,shadows:_=!1,linear:g=!1,flat:w=!1,legacy:x=!1,orthographic:T=!1,frameloop:C="always",dpr:P=[1,2],performance:R,raycaster:D,camera:X,onPointerMissed:b}=d,L=s.getState(),Z=L.gl;L.gl||L.set({gl:Z=IY(f,n)});let re=L.raycaster;re||L.set({raycaster:re=new VD});const{params:W,...ne}=D||{};if(Zt.equ(ne,re,Ac)||bc(re,{...ne}),Zt.equ(W,re.params,Ac)||bc(re,{params:{...re.params,...W}}),!L.camera||L.camera===c&&!Zt.equ(c,X,Ac)){c=X;const H=X instanceof gf,q=H?X:T?new na(0,0,0,0,.1,1e3):new Tn(75,0,.1,1e3);H||(q.position.z=5,X&&(bc(q,X),("aspect"in X||"left"in X||"right"in X||"bottom"in X||"top"in X)&&(q.manual=!0,q.updateProjectionMatrix())),!L.camera&&!(X!=null&&X.rotation)&&q.lookAt(0,0,0)),L.set({camera:q}),re.camera=q}if(!L.scene){let H;m!=null&&m.isScene?H=m:(H=new oM,m&&bc(H,m)),L.set({scene:Cc(H)})}if(!L.xr){var J;const H=(be,te)=>{const pe=s.getState();pe.frameloop!=="never"&&HP(be,!0,pe,te)},q=()=>{const be=s.getState();be.gl.xr.enabled=be.gl.xr.isPresenting,be.gl.xr.setAnimationLoop(be.gl.xr.isPresenting?H:null),be.gl.xr.isPresenting||VP(be)},le={connect(){const be=s.getState().gl;be.xr.addEventListener("sessionstart",q),be.xr.addEventListener("sessionend",q)},disconnect(){const be=s.getState().gl;be.xr.removeEventListener("sessionstart",q),be.xr.removeEventListener("sessionend",q)}};typeof((J=Z.xr)==null?void 0:J.addEventListener)=="function"&&le.connect(),L.set({xr:le})}if(Z.shadowMap){const H=Z.shadowMap.enabled,q=Z.shadowMap.type;if(Z.shadowMap.enabled=!!_,Zt.boo(_))Z.shadowMap.type=Qh;else if(Zt.str(_)){var ae;const le={basic:N3,percentage:P0,soft:Qh,variance:jr};Z.shadowMap.type=(ae=le[_])!=null?ae:Qh}else Zt.obj(_)&&Object.assign(Z.shadowMap,_);(H!==Z.shadowMap.enabled||q!==Z.shadowMap.type)&&(Z.shadowMap.needsUpdate=!0)}const N=$D();N&&("enabled"in N?N.enabled=!x:"legacyMode"in N&&(N.legacyMode=x)),l||bc(Z,{outputEncoding:g?3e3:3001,toneMapping:w?ws:B1}),L.legacy!==x&&L.set(()=>({legacy:x})),L.linear!==g&&L.set(()=>({linear:g})),L.flat!==w&&L.set(()=>({flat:w})),f&&!Zt.fun(f)&&!tk(f)&&!Zt.equ(f,Z,Ac)&&bc(Z,f),y&&!L.events.handlers&&L.set({events:y(s)});const B=NY(n,p);return Zt.equ(B,L.size,Ac)||L.setSize(B.width,B.height,B.updateStyle,B.top,B.left),P&&L.viewport.dpr!==JD(P)&&L.setDpr(P),L.frameloop!==C&&L.setFrameloop(C),L.onPointerMissed||L.set({onPointerMissed:b}),R&&!Zt.equ(R,L.performance,Ac)&&L.set(H=>({performance:{...H.performance,...R}})),a=M,l=!0,this},render(d){return l||this.configure(),Yg.updateContainer(k.jsx(kY,{store:s,children:d,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){rk(n)}}}function kY({store:n,children:e,onCreated:t,rootElement:i}){return Mf(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),k.jsx(nk.Provider,{value:n,children:e})}function rk(n,e){const t=wu.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),Yg.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),SY(r),wu.delete(n)}catch{}},500)})}}Yg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:G.version});const X_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function OY(n){const{handlePointer:e}=bY(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(X_).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=X_[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=X_[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function GP(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function UY({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=G.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=G.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,d=G.useRef(!1);G.useEffect(()=>(d.current=!0,()=>void(d.current=!1)));const[f,p,m]=G.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:w,top:x,width:T,height:C,bottom:P,right:R,x:D,y:X}=a.current.element.getBoundingClientRect(),b={left:w,top:x,width:T,height:C,bottom:P,right:R,x:D,y:X};a.current.element instanceof HTMLElement&&i&&(b.height=a.current.element.offsetHeight,b.width=a.current.element.offsetWidth),Object.freeze(b),d.current&&!VY(a.current.lastBounds,b)&&o(a.current.lastBounds=b)};return[g,c?GP(g,c):g,l?GP(g,l):g]},[o,i,l,c]);function y(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function M(){a.current.element&&(a.current.resizeObserver=new r(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=g=>{!g||g===a.current.element||(y(),a.current.element=g,a.current.scrollContainers=sk(g),M())};return zY(m,!!e),FY(p),G.useEffect(()=>{y(),M()},[e,m,p]),G.useEffect(()=>y,[]),[_,s,f]}function FY(n){G.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function zY(n,e){G.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function sk(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...sk(n.parentElement)]}const BY=["x","y","top","bottom","left","right","width","height"],VY=(n,e)=>BY.every(t=>n[t]===e[t]);var HY=Object.defineProperty,GY=Object.defineProperties,jY=Object.getOwnPropertyDescriptors,jP=Object.getOwnPropertySymbols,WY=Object.prototype.hasOwnProperty,XY=Object.prototype.propertyIsEnumerable,WP=(n,e,t)=>e in n?HY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,XP=(n,e)=>{for(var t in e||(e={}))WY.call(e,t)&&WP(n,t,e[t]);if(jP)for(var t of jP(e))XY.call(e,t)&&WP(n,t,e[t]);return n},$Y=(n,e)=>GY(n,jY(e)),$P,qP;typeof window<"u"&&(($P=window.document)!=null&&$P.createElement||((qP=window.navigator)==null?void 0:qP.product)==="ReactNative")?G.useLayoutEffect:G.useEffect;function ok(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=ok(i,e,t);if(r)return r;i=i.sibling}}function ak(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const YP=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=YP;return}return YP.apply(this,arguments)};const PM=ak(G.createContext(null));class lk extends G.Component{render(){return G.createElement(PM.Provider,{value:this._reactInternals},this.props.children)}}function qY(){const n=G.useContext(PM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=G.useId();return G.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=ok(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function YY(){const n=qY(),[e]=G.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==PM&&!e.has(r)&&e.set(r,G.useContext(ak(r)))}t=t.return}return e}function KY(){const n=YY();return G.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>G.createElement(e,null,G.createElement(t.Provider,$Y(XP({},i),{value:n.get(t)}))),e=>G.createElement(lk,XP({},e))),[n])}const ZY=G.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=OY,eventSource:a,eventPrefix:l,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:M,performance:_,raycaster:g,camera:w,scene:x,onPointerMissed:T,onCreated:C,...P},R){G.useMemo(()=>gY(aY),[]);const D=KY(),[X,b]=UY({scroll:!0,debounce:{scroll:50,resize:0},...i}),L=G.useRef(null),Z=G.useRef(null);G.useImperativeHandle(R,()=>L.current);const re=YD(T),[W,ne]=G.useState(!1),[J,ae]=G.useState(!1);if(W)throw W;if(J)throw J;const N=G.useRef(null);Mf(()=>{const H=L.current;b.width>0&&b.height>0&&H&&(N.current||(N.current=DY(H)),N.current.configure({gl:s,events:o,shadows:c,linear:d,flat:f,legacy:p,orthographic:m,frameloop:y,dpr:M,performance:_,raycaster:g,camera:w,scene:x,size:b,onPointerMissed:(...q)=>re.current==null?void 0:re.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(a?yY(a)?a.current:a:Z.current),l&&q.setEvents({compute:(le,be)=>{const te=le[l+"X"],pe=le[l+"Y"];be.pointer.set(te/be.size.width*2-1,-(pe/be.size.height)*2+1),be.raycaster.setFromCamera(be.pointer,be.camera)}}),C==null||C(q)}}),N.current.render(k.jsx(D,{children:k.jsx(KD,{set:ae,children:k.jsx(G.Suspense,{fallback:k.jsx(_Y,{set:ne}),children:e})})})))}),G.useEffect(()=>{const H=L.current;if(H)return()=>rk(H)},[]);const B=a?"none":"auto";return k.jsx("div",{ref:Z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:B,...r},...P,children:k.jsx("div",{ref:X,style:{width:"100%",height:"100%"},children:k.jsx("canvas",{ref:L,style:{display:"block"},children:t})})})}),JY=G.forwardRef(function(e,t){return k.jsx(lk,{children:k.jsx(ZY,{...e,ref:t})})});function Kg(){return Kg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Kg.apply(null,arguments)}var QY=Object.defineProperty,eK=(n,e,t)=>e in n?QY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,tK=(n,e,t)=>(eK(n,e+"",t),t);class nK{constructor(){tK(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var iK=Object.defineProperty,rK=(n,e,t)=>e in n?iK(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,rt=(n,e,t)=>(rK(n,typeof e!="symbol"?e+"":e,t),t);const Um=new Dl,KP=new Gs,sK=Math.cos(70*(Math.PI/180)),ZP=(n,e)=>(n%e+e)%e;let oK=class extends nK{constructor(e,t){super(),rt(this,"object"),rt(this,"domElement"),rt(this,"enabled",!0),rt(this,"target",new F),rt(this,"minDistance",0),rt(this,"maxDistance",1/0),rt(this,"minZoom",0),rt(this,"maxZoom",1/0),rt(this,"minPolarAngle",0),rt(this,"maxPolarAngle",Math.PI),rt(this,"minAzimuthAngle",-1/0),rt(this,"maxAzimuthAngle",1/0),rt(this,"enableDamping",!1),rt(this,"dampingFactor",.05),rt(this,"enableZoom",!0),rt(this,"zoomSpeed",1),rt(this,"enableRotate",!0),rt(this,"rotateSpeed",1),rt(this,"enablePan",!0),rt(this,"panSpeed",1),rt(this,"screenSpacePanning",!0),rt(this,"keyPanSpeed",7),rt(this,"zoomToCursor",!1),rt(this,"autoRotate",!1),rt(this,"autoRotateSpeed",2),rt(this,"reverseOrbit",!1),rt(this,"reverseHorizontalOrbit",!1),rt(this,"reverseVerticalOrbit",!1),rt(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),rt(this,"mouseButtons",{LEFT:Wa.ROTATE,MIDDLE:Wa.DOLLY,RIGHT:Wa.PAN}),rt(this,"touches",{ONE:Xa.ROTATE,TWO:Xa.DOLLY_PAN}),rt(this,"target0"),rt(this,"position0"),rt(this,"zoom0"),rt(this,"_domElementKeyEvents",null),rt(this,"getPolarAngle"),rt(this,"getAzimuthalAngle"),rt(this,"setPolarAngle"),rt(this,"setAzimuthalAngle"),rt(this,"getDistance"),rt(this,"getZoomScale"),rt(this,"listenToKeyEvents"),rt(this,"stopListenToKeyEvents"),rt(this,"saveState"),rt(this,"reset"),rt(this,"update"),rt(this,"connect"),rt(this,"dispose"),rt(this,"dollyIn"),rt(this,"dollyOut"),rt(this,"getScale"),rt(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=$=>{let ve=ZP($,2*Math.PI),Ne=d.phi;Ne<0&&(Ne+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let Oe=Math.abs(ve-Ne);2*Math.PI-Oe<Oe&&(ve<Ne?ve+=2*Math.PI:Ne+=2*Math.PI),f.phi=ve-Ne,i.update()},this.setAzimuthalAngle=$=>{let ve=ZP($,2*Math.PI),Ne=d.theta;Ne<0&&(Ne+=2*Math.PI),ve<0&&(ve+=2*Math.PI);let Oe=Math.abs(ve-Ne);2*Math.PI-Oe<Oe&&(ve<Ne?ve+=2*Math.PI:Ne+=2*Math.PI),f.theta=ve-Ne,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=$=>{$.addEventListener("keydown",nt),this._domElementKeyEvents=$},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",nt),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const $=new F,ve=new F(0,1,0),Ne=new gi().setFromUnitVectors(e.up,ve),Oe=Ne.clone().invert(),ut=new F,V=new gi,Me=2*Math.PI;return function(){const $e=i.object.position;Ne.setFromUnitVectors(e.up,ve),Oe.copy(Ne).invert(),$.copy($e).sub(i.target),$.applyQuaternion(Ne),d.setFromVector3($),i.autoRotate&&l===a.NONE&&W(Z()),i.enableDamping?(d.theta+=f.theta*i.dampingFactor,d.phi+=f.phi*i.dampingFactor):(d.theta+=f.theta,d.phi+=f.phi);let qe=i.minAzimuthAngle,St=i.maxAzimuthAngle;isFinite(qe)&&isFinite(St)&&(qe<-Math.PI?qe+=Me:qe>Math.PI&&(qe-=Me),St<-Math.PI?St+=Me:St>Math.PI&&(St-=Me),qe<=St?d.theta=Math.max(qe,Math.min(St,d.theta)):d.theta=d.theta>(qe+St)/2?Math.max(qe,d.theta):Math.min(St,d.theta)),d.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,d.phi)),d.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&X||i.object.isOrthographicCamera?d.radius=be(d.radius):d.radius=be(d.radius*p),$.setFromSpherical(d),$.applyQuaternion(Oe),$e.copy(i.target).add($),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let Lt=!1;if(i.zoomToCursor&&X){let Wt=null;if(i.object instanceof Tn&&i.object.isPerspectiveCamera){const yn=$.length();Wt=be(yn*p);const Nt=yn-Wt;i.object.position.addScaledVector(R,Nt),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const yn=new F(D.x,D.y,0);yn.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix(),Lt=!0;const Nt=new F(D.x,D.y,0);Nt.unproject(i.object),i.object.position.sub(Nt).add(yn),i.object.updateMatrixWorld(),Wt=$.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Wt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Wt).add(i.object.position):(Um.origin.copy(i.object.position),Um.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(Um.direction))<sK?e.lookAt(i.target):(KP.setFromNormalAndCoplanarPoint(i.object.up,i.target),Um.intersectPlane(KP,i.target))))}else i.object instanceof na&&i.object.isOrthographicCamera&&(Lt=p!==1,Lt&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/p)),i.object.updateProjectionMatrix()));return p=1,X=!1,Lt||ut.distanceToSquared(i.object.position)>c||8*(1-V.dot(i.object.quaternion))>c?(i.dispatchEvent(r),ut.copy(i.object.position),V.copy(i.object.quaternion),Lt=!1,!0):!1}})(),this.connect=$=>{i.domElement=$,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",Rt),i.domElement.addEventListener("pointerdown",xe),i.domElement.addEventListener("pointercancel",ge),i.domElement.addEventListener("wheel",Ue)},this.dispose=()=>{var $,ve,Ne,Oe,ut,V;i.domElement&&(i.domElement.style.touchAction="auto"),($=i.domElement)==null||$.removeEventListener("contextmenu",Rt),(ve=i.domElement)==null||ve.removeEventListener("pointerdown",xe),(Ne=i.domElement)==null||Ne.removeEventListener("pointercancel",ge),(Oe=i.domElement)==null||Oe.removeEventListener("wheel",Ue),(ut=i.domElement)==null||ut.ownerDocument.removeEventListener("pointermove",ye),(V=i.domElement)==null||V.ownerDocument.removeEventListener("pointerup",ge),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",nt)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const c=1e-6,d=new iw,f=new iw;let p=1;const m=new F,y=new de,M=new de,_=new de,g=new de,w=new de,x=new de,T=new de,C=new de,P=new de,R=new F,D=new de;let X=!1;const b=[],L={};function Z(){return 2*Math.PI/60/60*i.autoRotateSpeed}function re(){return Math.pow(.95,i.zoomSpeed)}function W($){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=$:f.theta-=$}function ne($){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=$:f.phi-=$}const J=(()=>{const $=new F;return function(Ne,Oe){$.setFromMatrixColumn(Oe,0),$.multiplyScalar(-Ne),m.add($)}})(),ae=(()=>{const $=new F;return function(Ne,Oe){i.screenSpacePanning===!0?$.setFromMatrixColumn(Oe,1):($.setFromMatrixColumn(Oe,0),$.crossVectors(i.object.up,$)),$.multiplyScalar(Ne),m.add($)}})(),N=(()=>{const $=new F;return function(Ne,Oe){const ut=i.domElement;if(ut&&i.object instanceof Tn&&i.object.isPerspectiveCamera){const V=i.object.position;$.copy(V).sub(i.target);let Me=$.length();Me*=Math.tan(i.object.fov/2*Math.PI/180),J(2*Ne*Me/ut.clientHeight,i.object.matrix),ae(2*Oe*Me/ut.clientHeight,i.object.matrix)}else ut&&i.object instanceof na&&i.object.isOrthographicCamera?(J(Ne*(i.object.right-i.object.left)/i.object.zoom/ut.clientWidth,i.object.matrix),ae(Oe*(i.object.top-i.object.bottom)/i.object.zoom/ut.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function B($){i.object instanceof Tn&&i.object.isPerspectiveCamera||i.object instanceof na&&i.object.isOrthographicCamera?p=$:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function H($){B(p/$)}function q($){B(p*$)}function le($){if(!i.zoomToCursor||!i.domElement)return;X=!0;const ve=i.domElement.getBoundingClientRect(),Ne=$.clientX-ve.left,Oe=$.clientY-ve.top,ut=ve.width,V=ve.height;D.x=Ne/ut*2-1,D.y=-(Oe/V)*2+1,R.set(D.x,D.y,1).unproject(i.object).sub(i.object.position).normalize()}function be($){return Math.max(i.minDistance,Math.min(i.maxDistance,$))}function te($){y.set($.clientX,$.clientY)}function pe($){le($),T.set($.clientX,$.clientY)}function we($){g.set($.clientX,$.clientY)}function Re($){M.set($.clientX,$.clientY),_.subVectors(M,y).multiplyScalar(i.rotateSpeed);const ve=i.domElement;ve&&(W(2*Math.PI*_.x/ve.clientHeight),ne(2*Math.PI*_.y/ve.clientHeight)),y.copy(M),i.update()}function Je($){C.set($.clientX,$.clientY),P.subVectors(C,T),P.y>0?H(re()):P.y<0&&q(re()),T.copy(C),i.update()}function He($){w.set($.clientX,$.clientY),x.subVectors(w,g).multiplyScalar(i.panSpeed),N(x.x,x.y),g.copy(w),i.update()}function ct($){le($),$.deltaY<0?q(re()):$.deltaY>0&&H(re()),i.update()}function Ge($){let ve=!1;switch($.code){case i.keys.UP:N(0,i.keyPanSpeed),ve=!0;break;case i.keys.BOTTOM:N(0,-i.keyPanSpeed),ve=!0;break;case i.keys.LEFT:N(i.keyPanSpeed,0),ve=!0;break;case i.keys.RIGHT:N(-i.keyPanSpeed,0),ve=!0;break}ve&&($.preventDefault(),i.update())}function j(){if(b.length==1)y.set(b[0].pageX,b[0].pageY);else{const $=.5*(b[0].pageX+b[1].pageX),ve=.5*(b[0].pageY+b[1].pageY);y.set($,ve)}}function Se(){if(b.length==1)g.set(b[0].pageX,b[0].pageY);else{const $=.5*(b[0].pageX+b[1].pageX),ve=.5*(b[0].pageY+b[1].pageY);g.set($,ve)}}function fe(){const $=b[0].pageX-b[1].pageX,ve=b[0].pageY-b[1].pageY,Ne=Math.sqrt($*$+ve*ve);T.set(0,Ne)}function Te(){i.enableZoom&&fe(),i.enablePan&&Se()}function me(){i.enableZoom&&fe(),i.enableRotate&&j()}function Ke($){if(b.length==1)M.set($.pageX,$.pageY);else{const Ne=Be($),Oe=.5*($.pageX+Ne.x),ut=.5*($.pageY+Ne.y);M.set(Oe,ut)}_.subVectors(M,y).multiplyScalar(i.rotateSpeed);const ve=i.domElement;ve&&(W(2*Math.PI*_.x/ve.clientHeight),ne(2*Math.PI*_.y/ve.clientHeight)),y.copy(M)}function Ie($){if(b.length==1)w.set($.pageX,$.pageY);else{const ve=Be($),Ne=.5*($.pageX+ve.x),Oe=.5*($.pageY+ve.y);w.set(Ne,Oe)}x.subVectors(w,g).multiplyScalar(i.panSpeed),N(x.x,x.y),g.copy(w)}function O($){const ve=Be($),Ne=$.pageX-ve.x,Oe=$.pageY-ve.y,ut=Math.sqrt(Ne*Ne+Oe*Oe);C.set(0,ut),P.set(0,Math.pow(C.y/T.y,i.zoomSpeed)),H(P.y),T.copy(C)}function I($){i.enableZoom&&O($),i.enablePan&&Ie($)}function ee($){i.enableZoom&&O($),i.enableRotate&&Ke($)}function xe($){var ve,Ne;i.enabled!==!1&&(b.length===0&&((ve=i.domElement)==null||ve.ownerDocument.addEventListener("pointermove",ye),(Ne=i.domElement)==null||Ne.ownerDocument.addEventListener("pointerup",ge)),xt($),$.pointerType==="touch"?pt($):Xe($))}function ye($){i.enabled!==!1&&($.pointerType==="touch"?_e($):Le($))}function ge($){var ve,Ne,Oe;ht($),b.length===0&&((ve=i.domElement)==null||ve.releasePointerCapture($.pointerId),(Ne=i.domElement)==null||Ne.ownerDocument.removeEventListener("pointermove",ye),(Oe=i.domElement)==null||Oe.ownerDocument.removeEventListener("pointerup",ge)),i.dispatchEvent(o),l=a.NONE}function Xe($){let ve;switch($.button){case 0:ve=i.mouseButtons.LEFT;break;case 1:ve=i.mouseButtons.MIDDLE;break;case 2:ve=i.mouseButtons.RIGHT;break;default:ve=-1}switch(ve){case Wa.DOLLY:if(i.enableZoom===!1)return;pe($),l=a.DOLLY;break;case Wa.ROTATE:if($.ctrlKey||$.metaKey||$.shiftKey){if(i.enablePan===!1)return;we($),l=a.PAN}else{if(i.enableRotate===!1)return;te($),l=a.ROTATE}break;case Wa.PAN:if($.ctrlKey||$.metaKey||$.shiftKey){if(i.enableRotate===!1)return;te($),l=a.ROTATE}else{if(i.enablePan===!1)return;we($),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Le($){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;Re($);break;case a.DOLLY:if(i.enableZoom===!1)return;Je($);break;case a.PAN:if(i.enablePan===!1)return;He($);break}}function Ue($){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||($.preventDefault(),i.dispatchEvent(s),ct($),i.dispatchEvent(o))}function nt($){i.enabled===!1||i.enablePan===!1||Ge($)}function pt($){switch(tt($),b.length){case 1:switch(i.touches.ONE){case Xa.ROTATE:if(i.enableRotate===!1)return;j(),l=a.TOUCH_ROTATE;break;case Xa.PAN:if(i.enablePan===!1)return;Se(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case Xa.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Te(),l=a.TOUCH_DOLLY_PAN;break;case Xa.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;me(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function _e($){switch(tt($),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Ke($),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Ie($),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;I($),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ee($),i.update();break;default:l=a.NONE}}function Rt($){i.enabled!==!1&&$.preventDefault()}function xt($){b.push($)}function ht($){delete L[$.pointerId];for(let ve=0;ve<b.length;ve++)if(b[ve].pointerId==$.pointerId){b.splice(ve,1);return}}function tt($){let ve=L[$.pointerId];ve===void 0&&(ve=new de,L[$.pointerId]=ve),ve.set($.pageX,$.pageY)}function Be($){const ve=$.pointerId===b[0].pointerId?b[1]:b[0];return L[ve.pointerId]}this.dollyIn=($=re())=>{q($),i.update()},this.dollyOut=($=re())=>{H($),i.update()},this.getScale=()=>p,this.setScale=$=>{B($),i.update()},this.getZoomScale=()=>re(),t!==void 0&&this.connect(t),this.update()}};function aK(n,e,t){const i=nr(p=>p.size),r=nr(p=>p.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:c,...d}=a,f=G.useMemo(()=>{const p=new kr(s,o,{minFilter:Jt,magFilter:Jt,type:wl,...d});return c&&(p.depthTexture=new k0(s,o,ir)),p.samples=l,p},[]);return G.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),G.useEffect(()=>()=>f.dispose(),[]),f}const lK=n=>typeof n=="function",cK=G.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=nr(({set:_})=>_),l=nr(({camera:_})=>_),c=nr(({size:_})=>_),d=G.useRef(null);G.useImperativeHandle(o,()=>d.current,[]);const f=G.useRef(null),p=aK(e);G.useLayoutEffect(()=>{s.manual||(d.current.aspect=c.width/c.height)},[c,s]),G.useLayoutEffect(()=>{d.current.updateProjectionMatrix()});let m=0,y=null;const M=lK(r);return CM(_=>{M&&(t===1/0||m<t)&&(f.current.visible=!1,_.gl.setRenderTarget(p),y=_.scene.background,n&&(_.scene.background=n),_.gl.render(_.scene,d.current),_.scene.background=y,_.gl.setRenderTarget(null),f.current.visible=!0,m++)}),G.useLayoutEffect(()=>{if(i){const _=l;return a(()=>({camera:d.current})),()=>a(()=>({camera:_}))}},[d,i,a]),G.createElement(G.Fragment,null,G.createElement("perspectiveCamera",Kg({ref:d},s),!M&&r),G.createElement("group",{ref:f},M&&r(p.texture)))}),uK=G.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...c},d)=>{const f=nr(P=>P.invalidate),p=nr(P=>P.camera),m=nr(P=>P.gl),y=nr(P=>P.events),M=nr(P=>P.setEvents),_=nr(P=>P.set),g=nr(P=>P.get),w=nr(P=>P.performance),x=e||p,T=i||y.connected||m.domElement,C=G.useMemo(()=>new oK(x),[x]);return CM(()=>{C.enabled&&C.update()},-1),G.useEffect(()=>(s&&C.connect(s===!0?T:s),C.connect(T),()=>void C.dispose()),[s,T,t,C,f]),G.useEffect(()=>{const P=X=>{f(),t&&w.regress(),o&&o(X)},R=X=>{a&&a(X)},D=X=>{l&&l(X)};return C.addEventListener("change",P),C.addEventListener("start",R),C.addEventListener("end",D),()=>{C.removeEventListener("start",R),C.removeEventListener("end",D),C.removeEventListener("change",P)}},[o,a,l,C,f,M]),G.useEffect(()=>{if(n){const P=g().controls;return _({controls:C}),()=>_({controls:P})}},[n,C]),G.createElement("primitive",Kg({ref:d,object:C,enableDamping:r},c))});function hK(){const n=G.useRef(null);return CM(e=>{n.current&&(n.current.rotation.y=e.clock.getElapsedTime()*.5,n.current.position.y=Math.sin(e.clock.getElapsedTime())*.1)}),k.jsxs("mesh",{ref:n,scale:[.5,.5,.5],children:[k.jsx("boxGeometry",{args:[1,1,1]}),k.jsx("meshStandardMaterial",{color:"#FFB6C1"})]})}function dK(){return k.jsx("div",{className:"h-[300px] w-full",children:k.jsxs(JY,{children:[k.jsx(cK,{makeDefault:!0,position:[0,0,5]}),k.jsx(uK,{enableZoom:!1}),k.jsx("ambientLight",{intensity:.5}),k.jsx("pointLight",{position:[10,10,10]}),k.jsx(hK,{})]})})}function fK(){const n=sf();return k.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 to-white",children:k.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[k.jsxs(Nn.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8},className:"text-center lg:text-left",children:[k.jsxs("h1",{className:"text-5xl font-bold text-gray-900 mb-6",children:["Welcome to"," ",k.jsx("span",{className:"text-blue-600",children:"Hostel Store"})]}),k.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Your one-stop shop for all hostel essentials. Get snacks, beverages, and daily necessities delivered right to your door."}),k.jsxs(Nn.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n("/products"),className:"bg-blue-600 text-white px-8 py-4 rounded-full text-lg font-semibold hover:bg-blue-700 transition-colors inline-flex items-center gap-2",children:[k.jsx(nl,{className:"w-5 h-5"}),"Start Shopping"]})]}),k.jsx(Nn.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"relative",children:k.jsx("div",{className:"bg-blue-100 rounded-2xl p-8",children:k.jsx(dK,{})})})]}),k.jsxs(Nn.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"mt-24 grid grid-cols-1 md:grid-cols-3 gap-8",children:[k.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[k.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:k.jsx(nl,{className:"w-8 h-8 text-blue-600"})}),k.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Quick Delivery"}),k.jsx("p",{className:"text-gray-600",children:"Get your snacks delivered within minutes"})]}),k.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[k.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:k.jsx(nl,{className:"w-8 h-8 text-blue-600"})}),k.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Wide Selection"}),k.jsx("p",{className:"text-gray-600",children:"Choose from hundreds of snacks and essentials"})]}),k.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center",children:[k.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:k.jsx(nl,{className:"w-8 h-8 text-blue-600"})}),k.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Easy Payment"}),k.jsx("p",{className:"text-gray-600",children:"Secure and convenient payment options"})]})]})]})})}function pK(){const[n,e]=G.useState(""),[t,i]=G.useState(""),[r,s]=G.useState(!1),o=sf(),{signIn:a}=Pu(),l=async c=>{c.preventDefault(),s(!0);try{await a(n,t),bi.success("Welcome back!"),o("/products")}catch{bi.error("Failed to sign in. Please check your credentials.")}finally{s(!1)}};return k.jsx("div",{className:"max-w-md mx-auto mt-16",children:k.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[k.jsx("div",{className:"flex items-center justify-center mb-6",children:k.jsx(SB,{size:32,className:"text-blue-600"})}),k.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Welcome Back"}),k.jsxs("form",{onSubmit:l,className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),k.jsx("input",{type:"email",id:"email",value:n,onChange:c=>e(c.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),k.jsx("input",{type:"password",id:"password",value:t,onChange:c=>i(c.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),k.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:r?"Signing in...":"Sign In"})]})]})})}function mK(){const[n,e]=G.useState(""),[t,i]=G.useState(""),[r,s]=G.useState(!1),o=sf(),{signUp:a}=Pu(),l=async c=>{c.preventDefault(),s(!0);try{await a(n,t),bi.success("Account created successfully!"),o("/login")}catch{bi.error("Failed to create account. Please try again.")}finally{s(!1)}};return k.jsx("div",{className:"max-w-md mx-auto mt-16",children:k.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md",children:[k.jsx("div",{className:"flex items-center justify-center mb-6",children:k.jsx(LB,{size:32,className:"text-blue-600"})}),k.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Create Account"}),k.jsxs("form",{onSubmit:l,className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),k.jsx("input",{type:"email",id:"email",value:n,onChange:c=>e(c.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),k.jsxs("div",{children:[k.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),k.jsx("input",{type:"password",id:"password",value:t,onChange:c=>i(c.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0})]}),k.jsx("button",{type:"submit",disabled:r,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50",children:r?"Creating account...":"Create Account"})]})]})})}function gK(){const[n,e]=G.useState([]),[t,i]=G.useState(!0),[r,s]=G.useState(""),[o,a]=G.useState("all"),{addItem:l}=a1();G.useEffect(()=>{c()},[]);async function c(){try{const{data:y,error:M}=await Yr.from("products").select("*").order("name");if(M)throw M;e(y||[])}catch{bi.error("Failed to fetch products")}finally{i(!1)}}const d=["all",...new Set(n.map(y=>y.category))],f=n.filter(y=>{const M=y.name.toLowerCase().includes(r.toLowerCase())||y.description.toLowerCase().includes(r.toLowerCase()),_=o==="all"||y.category===o;return M&&_}),p={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1}}},m={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return t?k.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:k.jsx(Md,{size:32,className:"animate-spin text-blue-600"})}):k.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[k.jsxs("div",{className:"mb-8",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Available Products"}),k.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[k.jsxs("div",{className:"relative flex-1",children:[k.jsx(PB,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),k.jsx("input",{type:"text",placeholder:"Search products...",value:r,onChange:y=>s(y.target.value),className:"w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),k.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 md:pb-0 md:flex-wrap",children:d.map(y=>k.jsx("button",{onClick:()=>a(y),className:`px-4 py-2 rounded-full whitespace-nowrap ${o===y?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:y.charAt(0).toUpperCase()+y.slice(1)},y))})]})]}),k.jsx(Nn.div,{variants:p,initial:"hidden",animate:"show",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6",children:f.map(y=>k.jsxs(Nn.div,{variants:m,className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow duration-300",children:[k.jsxs("div",{className:"relative h-40 md:h-48",children:[k.jsx("img",{src:y.image_url,alt:y.name,className:"w-full h-full object-cover"}),k.jsx("div",{className:"absolute top-2 right-2",children:k.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:y.category})})]}),k.jsxs("div",{className:"p-4",children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1 line-clamp-1",children:y.name}),k.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:y.description}),k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["$",y.price.toFixed(2)]}),k.jsxs(Nn.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{l(y),bi.success(`Added ${y.name} to cart`)},className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[k.jsx(CL,{size:20}),"Add"]})]}),k.jsx("div",{className:"mt-2 text-sm text-gray-500",children:y.stock>0?k.jsxs("span",{className:"text-green-600",children:[y.stock," in stock"]}):k.jsx("span",{className:"text-red-600",children:"Out of stock"})})]})]},y.id))})]})}const vK=[{id:"cod",name:"Cash on Delivery",icon:RL},{id:"upi",name:"UPI / PhonePe",icon:PL},{id:"card",name:"Credit / Debit Card",icon:AL}];function yK(){const{items:n,removeItem:e,updateQuantity:t,total:i,clearCart:r}=a1(),{user:s}=Pu(),o=sf(),[a,l]=G.useState("cod"),[c,d]=G.useState(!1),f=async()=>{if(!s){bi.error("Please log in to checkout"),o("/login");return}d(!0);try{await new Promise(m=>setTimeout(m,1500));const{error:p}=await Yr.from("orders").insert([{user_id:s.id,items:n,total:i,status:"processing",payment_method:a}]);if(p)throw p;bi.success("Order placed successfully!"),r(),o("/orders")}catch{bi.error("Failed to place order")}finally{d(!1)}};return n.length===0?k.jsxs(Nn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex flex-col items-center justify-center min-h-[50vh]",children:[k.jsx(nl,{size:48,className:"text-gray-400 mb-4"}),k.jsx("h2",{className:"text-2xl font-semibold text-gray-600 mb-4",children:"Your cart is empty"}),k.jsx(Nn.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o("/products"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Continue Shopping"})]}):k.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[k.jsx(Nn.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-3xl font-bold text-gray-900 mb-8",children:"Shopping Cart"}),k.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[k.jsx(Nn.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"lg:col-span-2",children:k.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 space-y-6",children:n.map((p,m)=>k.jsxs(Nn.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.1},className:"flex items-center justify-between border-b pb-6 last:border-b-0 last:pb-0",children:[k.jsxs("div",{className:"flex items-center space-x-4",children:[k.jsx("img",{src:p.image_url,alt:p.name,className:"w-20 h-20 object-cover rounded-lg"}),k.jsxs("div",{children:[k.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.name}),k.jsxs("p",{className:"text-gray-600",children:["$",p.price.toFixed(2)]})]})]}),k.jsxs("div",{className:"flex items-center space-x-6",children:[k.jsxs("div",{className:"flex items-center space-x-2",children:[k.jsx(Nn.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(p.id,Math.max(0,p.quantity-1)),className:"p-1 rounded-full hover:bg-gray-100",children:k.jsx(TB,{size:20})}),k.jsx("span",{className:"w-8 text-center font-medium",children:p.quantity}),k.jsx(Nn.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(p.id,p.quantity+1),className:"p-1 rounded-full hover:bg-gray-100",children:k.jsx(CB,{size:20})})]}),k.jsx(Nn.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>e(p.id),className:"text-red-500 hover:text-red-600",children:k.jsx(RB,{size:20})})]})]},p.id))})}),k.jsx(Nn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"lg:col-span-1",children:k.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[k.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Payment Details"}),k.jsx("div",{className:"space-y-4 mb-6",children:vK.map(({id:p,name:m,icon:y})=>k.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${a===p?"bg-blue-50 border-2 border-blue-500":"border-2 border-gray-100"}`,children:[k.jsx("input",{type:"radio",name:"payment",value:p,checked:a===p,onChange:M=>l(M.target.value),className:"hidden"}),k.jsx(y,{size:24,className:a===p?"text-blue-500":"text-gray-400"}),k.jsx("span",{className:a===p?"text-blue-700 font-medium":"text-gray-600",children:m})]},p))}),k.jsxs("div",{className:"border-t pt-4",children:[k.jsxs("div",{className:"flex justify-between items-center text-xl font-semibold mb-6",children:[k.jsx("span",{children:"Total:"}),k.jsxs("span",{children:["$",i.toFixed(2)]})]}),k.jsx(Nn.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:f,disabled:c,className:"w-full bg-blue-600 text-white py-4 rounded-xl hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:c?k.jsxs(k.Fragment,{children:[k.jsx(nl,{size:20,className:"animate-spin"}),"Processing..."]}):k.jsxs(k.Fragment,{children:[k.jsx(nl,{size:20}),"Place Order"]})})]})]})})]})]})}const _K={cod:RL,upi:PL,card:AL};function xK(){const[n,e]=G.useState([]),[t,i]=G.useState(!0),{user:r}=Pu();G.useEffect(()=>{r&&s()},[r]);async function s(){try{const{data:o,error:a}=await Yr.from("orders").select("*").eq("user_id",r==null?void 0:r.id).order("created_at",{ascending:!1});if(a)throw a;e(o||[])}catch{bi.error("Failed to fetch orders")}finally{i(!1)}}return t?k.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:k.jsx(Md,{size:32,className:"animate-spin text-blue-600"})}):k.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[k.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"Your Orders"}),n.length===0?k.jsxs("div",{className:"text-center py-8",children:[k.jsx(Md,{size:48,className:"mx-auto text-gray-400 mb-4"}),k.jsx("h2",{className:"text-xl text-gray-600",children:"No orders yet"})]}):k.jsx("div",{className:"space-y-6",children:n.map(o=>{const a=_K[o.payment_method];return k.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[k.jsx("div",{className:"p-6 border-b",children:k.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[k.jsxs("div",{children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsxs("h3",{className:"text-lg font-semibold",children:["Order #",o.id.slice(0,8)]}),k.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium capitalize",style:{backgroundColor:o.status==="delivered"?"rgb(187 247 208)":o.status==="processing"?"rgb(254 240 138)":"rgb(254 226 226)",color:o.status==="delivered"?"rgb(22 101 52)":o.status==="processing"?"rgb(133 77 14)":"rgb(153 27 27)"},children:o.status})]}),k.jsxs("p",{className:"text-gray-600 text-sm mt-1",children:[new Date(o.created_at).toLocaleDateString()," at"," ",new Date(o.created_at).toLocaleTimeString()]})]}),k.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[k.jsx(a,{size:20}),k.jsx("span",{className:"capitalize",children:o.payment_method})]})]})}),k.jsxs("div",{className:"p-6",children:[k.jsx("div",{className:"space-y-4",children:o.items.map(l=>k.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("img",{src:l.image_url,alt:l.name,className:"w-16 h-16 object-cover rounded-lg"}),k.jsxs("div",{children:[k.jsx("p",{className:"font-medium",children:l.name}),k.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",l.quantity,"  $",l.price.toFixed(2)]})]})]}),k.jsxs("p",{className:"font-medium text-right",children:["$",(l.price*l.quantity).toFixed(2)]})]},l.id))}),k.jsxs("div",{className:"mt-6 pt-6 border-t",children:[k.jsx("div",{className:"flex justify-between mb-4",children:k.jsxs("div",{className:"flex-1",children:[k.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:k.jsx("div",{className:"h-full bg-blue-600 transition-all duration-500",style:{width:o.status==="delivered"?"100%":o.status==="processing"?"66%":"33%"}})}),k.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[k.jsx("span",{children:"Order Placed"}),k.jsx("span",{children:"Processing"}),k.jsx("span",{children:"Delivered"})]})]})}),k.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[k.jsx("span",{children:"Total:"}),k.jsxs("span",{children:["$",o.total.toFixed(2)]})]})]})]})]},o.id)})})]})}function SK(){var M;const{user:n}=Pu(),[e,t]=G.useState([]),[i,r]=G.useState(!0),[s,o]=G.useState({name:null,phone_number:null,address:null}),[a,l]=G.useState(!1),[c,d]=G.useState({name:"",phone_number:"",address:""});G.useEffect(()=>{n&&(p(),f())},[n]);const f=async()=>{try{const{data:_,error:g}=await Yr.from("users").select("name, phone_number, address").eq("id",n==null?void 0:n.id).single();if(g)throw g;_&&(o(_),d({name:_.name||"",phone_number:_.phone_number||"",address:_.address||""}))}catch{bi.error("Failed to fetch profile")}},p=async()=>{try{const{data:_,error:g}=await Yr.from("orders").select("*").eq("user_id",n==null?void 0:n.id).order("created_at",{ascending:!1}).limit(5);if(g)throw g;t(_||[])}catch{bi.error("Failed to fetch orders")}finally{r(!1)}},m=async _=>{_.preventDefault();try{const{error:g}=await Yr.from("users").update({name:c.name||null,phone_number:c.phone_number||null,address:c.address||null}).eq("id",n==null?void 0:n.id);if(g)throw g;o(c),l(!1),bi.success("Profile updated successfully")}catch{bi.error("Failed to update profile")}},y=()=>{navigator.clipboard.writeText((n==null?void 0:n.id)||""),bi.success("Customer ID copied to clipboard")};return k.jsx("div",{className:"max-w-lg mx-auto px-4 py-6",children:k.jsxs(Nn.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[k.jsx("div",{className:"bg-blue-600 px-6 py-8 text-white",children:k.jsxs("div",{className:"flex items-center gap-4",children:[k.jsx("div",{className:"w-20 h-20 bg-white rounded-full flex items-center justify-center",children:k.jsx(LL,{size:40,className:"text-blue-600"})}),k.jsxs("div",{children:[k.jsx("h1",{className:"text-2xl font-bold",children:s.name||"Profile"}),k.jsx("p",{className:"text-blue-100",children:n==null?void 0:n.email})]})]})}),k.jsx("div",{className:"p-6 border-b",children:k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsxs("div",{children:[k.jsx("p",{className:"text-sm text-gray-500",children:"Customer ID"}),k.jsxs("p",{className:"font-mono text-sm",children:[(M=n==null?void 0:n.id)==null?void 0:M.slice(0,8),"..."]})]}),k.jsx("button",{onClick:y,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:k.jsx(xB,{size:20,className:"text-gray-500"})})]})}),k.jsxs("div",{className:"p-6 space-y-4",children:[k.jsxs("div",{className:"flex items-center justify-between",children:[k.jsx("h2",{className:"text-lg font-semibold",children:"Contact Information"}),k.jsx("button",{onClick:()=>l(!a),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:k.jsx(bB,{size:20,className:"text-gray-500"})})]}),a?k.jsxs("form",{onSubmit:m,className:"space-y-4",children:[k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),k.jsx("input",{type:"text",value:c.name||"",onChange:_=>d({...c,name:_.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),k.jsx("input",{type:"tel",value:c.phone_number||"",onChange:_=>d({...c,phone_number:_.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),k.jsxs("div",{children:[k.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),k.jsx("textarea",{value:c.address||"",onChange:_=>d({...c,address:_.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),k.jsxs("div",{className:"flex gap-2",children:[k.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"}),k.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 bg-gray-100 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-200 transition-colors",children:"Cancel"})]})]}):k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center",children:k.jsx(MB,{size:20,className:"text-blue-600"})}),k.jsxs("div",{children:[k.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),k.jsx("p",{children:n==null?void 0:n.email})]})]}),k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center",children:k.jsx(AB,{size:20,className:"text-blue-600"})}),k.jsxs("div",{children:[k.jsx("p",{className:"text-sm text-gray-500",children:"Phone"}),k.jsx("p",{className:s.phone_number?"text-gray-900":"text-gray-400",children:s.phone_number||"Not added yet"})]})]}),k.jsxs("div",{className:"flex items-center gap-3",children:[k.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-full flex items-center justify-center",children:k.jsx(EB,{size:20,className:"text-blue-600"})}),k.jsxs("div",{children:[k.jsx("p",{className:"text-sm text-gray-500",children:"Address"}),k.jsx("p",{className:s.address?"text-gray-900":"text-gray-400",children:s.address||"Not added yet"})]})]})]})]}),k.jsxs("div",{className:"p-6 bg-gray-50",children:[k.jsxs("div",{className:"flex items-center justify-between mb-4",children:[k.jsx("h2",{className:"text-lg font-semibold",children:"Recent Orders"}),k.jsx(Va,{to:"/orders",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View All"})]}),i?k.jsx("div",{className:"flex justify-center py-4",children:k.jsx(Md,{size:24,className:"animate-spin text-blue-600"})}):e.length>0?k.jsx("div",{className:"space-y-4",children:e.map(_=>k.jsxs(Nn.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white p-4 rounded-lg shadow-sm",children:[k.jsxs("div",{className:"flex justify-between items-start mb-2",children:[k.jsxs("div",{children:[k.jsxs("p",{className:"font-medium",children:["Order #",_.id.slice(0,8)]}),k.jsx("p",{className:"text-sm text-gray-500",children:new Date(_.created_at).toLocaleDateString()})]}),k.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium capitalize",style:{backgroundColor:_.status==="delivered"?"rgb(187 247 208)":_.status==="processing"?"rgb(254 240 138)":"rgb(254 226 226)",color:_.status==="delivered"?"rgb(22 101 52)":_.status==="processing"?"rgb(133 77 14)":"rgb(153 27 27)"},children:_.status})]}),k.jsxs("p",{className:"text-right font-semibold",children:["$",_.total.toFixed(2)]})]},_.id))}):k.jsx("p",{className:"text-center text-gray-500 py-4",children:"No orders yet"})]})]})})}function wK(){return k.jsx(Ez,{children:k.jsx(VV,{children:k.jsx(HV,{children:k.jsxs("div",{className:"min-h-screen bg-gray-50",children:[k.jsx(GV,{}),k.jsx("main",{className:"container mx-auto px-4 py-8",children:k.jsxs(vz,{children:[k.jsx(Po,{path:"/",element:k.jsx(fK,{})}),k.jsx(Po,{path:"/login",element:k.jsx(pK,{})}),k.jsx(Po,{path:"/register",element:k.jsx(mK,{})}),k.jsx(Po,{path:"/products",element:k.jsx(gK,{})}),k.jsx(Po,{path:"/cart",element:k.jsx(yK,{})}),k.jsx(Po,{path:"/orders",element:k.jsx(xK,{})}),k.jsx(Po,{path:"/profile",element:k.jsx(SK,{})})]})}),k.jsx(vB,{position:"bottom-right"})]})})})})}hL(document.getElementById("root")).render(k.jsx(G.StrictMode,{children:k.jsx(wK,{})}));export{JP as g};
